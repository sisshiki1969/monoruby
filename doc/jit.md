# Stub code for JIT'ed code generated by compiler

```text

      wrapper                                class guard stub (1)                               class guard stub (2)                            
   +---------------------------------+     +--------------------------------------------+     +--------------------------------------------+
   |                                 |     |                                            |     |                                            |    
---+-> entry:                        |  +--+-> guard1:                                  |   +-+-> guard2:                                  |    
   |       jmp [guard1]; ------------+-/   |       movq rdi, [r14 - (LBP_SELF)];        |  /  |       movq rdi, [r14 - (LBP_SELF)];        |    
   |   next:                         |     |       <class_guard(self_class, guard2)> ---+-+   |       <class_guard(self_class, vm_entry)>  |
   |       subl [rip + counter], 1;  |     |   jit_entry:                               |     |   jit_entry:                               | 
   |       jne vm_entry;             |     |       jmp [jit_code_body];                 |     |       jmp [jit_code_body];                 | 
   |       <exec_compile_and_patch>  |     |         |                                  |     |         |                                  |    
   |       jmp entry;                |     +---------+----------------------------------+     +---------+----------------------------------+    
   |                                 |               |                                                  |
   +---------------------------------+          +----+                                             +----+                                
                                                |      JIT code for self_class                     |      JIT code for self_class        
                                                |   +---------------------------+                  |   +---------------------------+      
                                                |   |                           |-+                |   |                           |      
                                                +---+-> jit_code_body:          | |-+              +---+-> jit_code_body:          |      
                                                    |                           | | |                  |                           |       
                                                    |     <jit_code>            | | |                  |     <jit_code>            |        
                                                    |                           | | |                  |                           |       
                                                    |                           | | |                  |                           |       
                                                    +---------------------------+ | |                  +---------------------------+      
                                                      +---------------------------+ |         
                                                        +---------------------------+        
```
