   Compiling monoruby v0.2.0 (/home/monochrome/monoruby/monoruby)
    Finished dev [optimized + debuginfo] target(s) in 1.90s
     Running `target/debug/monoruby ../optcarrot/bin/optcarrot -b ../optcarrot/examples/Lan_Master.nes`
------------------------------------
</main> /home/monochrome/optcarrot/bin/optcarrot:1
meta:on_stack:true kind:Ruby mode:method FuncId(271) regs:3 ISeq(RubyFuncInfo { id:271 name:/main method:(FuncId(271), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["../lib/optcarrot"]
 :00002 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00004 [02] %1 = const[Optcarrot::NES]           [<INVALID>]
 :00005 [02] %1 = %1.new()                        [<INVALID>]
 :00007 [02] %1 = %1.run()                        [<INVALID>]
 :00009 [01] ret %1
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(272) regs:2 ISeq(RubyFuncInfo { id:272 name:/main method:(FuncId(272), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] _ = module_def Optcarrot: FuncId(273)
 :00002 [02] %1 = literal["optcarrot/nes"]
 :00003 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00005 [02] %1 = literal["optcarrot/rom"]
 :00006 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00008 [02] %1 = literal["optcarrot/pad"]
 :00009 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00011 [02] %1 = literal["optcarrot/cpu"]
 :00012 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00014 [02] %1 = literal["optcarrot/apu"]
 :00015 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00017 [02] %1 = literal["optcarrot/ppu"]
 :00018 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00020 [02] %1 = literal["optcarrot/palette"]
 :00021 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00023 [02] %1 = literal["optcarrot/driver"]
 :00024 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00026 [02] %1 = literal["optcarrot/config"]
 :00027 [02] %1 = %0.require_relative(%1;1)       [<INVALID>]
 :00029 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot.rb:2
meta:on_stack:true kind:Ruby mode:class_def FuncId(273) regs:2 ISeq(RubyFuncInfo { id:273 name:Optcarrot method:(FuncId(273), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal["0.9.0"]
 :00002 [01] const[VERSION] = %1
 :00003 [01] ret %1
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(274) regs:2 ISeq(RubyFuncInfo { id:274 name:/main method:(FuncId(274), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(275)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(275) regs:2 ISeq(RubyFuncInfo { id:275 name:Optcarrot method:(FuncId(275), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[4294967295]
 :00002 [01] const[FOREVER_CLOCK] = %1
 :00003 [02] %1 = 12: i32
 :00004 [01] const[RP2A03_CC] = %1
 :00005 [02] %1 = class_def NES < _: FuncId(276)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<NES> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:6
meta:on_stack:true kind:Ruby mode:class_def FuncId(276) regs:8 ISeq(RubyFuncInfo { id:276 name:NES method:(FuncId(276), 0) args: 0 non_temp: 0 temp: 7})
[]
+:00000 [01] init_method reg:7 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [02] %1 = 60: i32
 :00002 [01] const[FPS] = %1
 :00003 [01] method_def initialize: FuncId(277)
 :00004 [01] method_def inspect: FuncId(278)
 :00005 [02] %1 = :fps
 :00006 [03] %2 = :video
 :00007 [04] %3 = :audio
 :00008 [05] %4 = :input
 :00009 [06] %5 = :cpu
 :00010 [07] %6 = :ppu
 :00011 [08] %7 = :apu
 :00012 [01] _ = %0.attr_reader(%1;7)             [<INVALID>]
 :00014 [01] method_def reset: FuncId(279)
 :00015 [01] method_def step: FuncId(280)
 :00016 [01] method_def dispose: FuncId(281)
 :00017 [01] method_def run: FuncId(282)
 :00018 [01] _ = %0.private()                     [<INVALID>]
 :00020 [01] method_def save_fps_history?: FuncId(283)
 :00021 [02] %1 = :save_fps_history?
 :00022 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:9
meta:on_stack:true kind:Ruby mode:method FuncId(277) regs:8 ISeq(RubyFuncInfo { id:277 name:initialize method:(FuncId(277), 0) args: 1 non_temp: 1 temp: 6})
[]
+:00000 [02] init_method reg:7 arg:1 req:0 opt:1 rest:false block:None stack_offset:7
 :00001 [02] check_local(%1) =>:00003
+:00002 [02] %1 = const[ARGV]                     [<INVALID>]
+:00003 [03] %2 = const[Config]                   [<INVALID>]
 :00004 [03] %2 = %2.new(%1;1)                    [<INVALID>]
 :00006 [02] @conf: - = %2
 :00007 [03] %2 = const[Driver]                   [<INVALID>]
 :00008 [04] %3 = @conf: -
 :00009 [03] %2 = %2.load(%3;1)                   [<INVALID>]
 :00011 [03] %3; 3 = expand(%2)
 :00012 [03] @video: - = %3
 :00013 [03] @audio: - = %4
 :00014 [03] @input: - = %5
 :00015 [03] %2 = const[CPU]                      [<INVALID>]
 :00016 [04] %3 = @conf: -
 :00017 [03] %2 = %2.new(%3;1)                    [<INVALID>]
 :00019 [02] @cpu: - = %2
 :00020 [03] %2 = @cpu: -
 :00021 [04] %3 = const[APU]                      [<INVALID>]
 :00022 [05] %4 = @conf: -
 :00023 [06] %5 = @cpu: -
 :00024 [07] %6 = @audio: -
 :00025 [07] %6 = %6.spec()                       [<INVALID>]
 :00027 [04] %3 = %3.new(%4;3)*                   [<INVALID>]
 :00029 [02] _ = %2.apu=(%3;1)                    [<INVALID>]
 :00031 [03] %2 = %3
 :00032 [02] @apu: - = %2
 :00033 [03] %2 = @cpu: -
 :00034 [04] %3 = const[PPU]                      [<INVALID>]
 :00035 [05] %4 = @conf: -
 :00036 [06] %5 = @cpu: -
 :00037 [07] %6 = @video: -
 :00038 [07] %6 = %6.palette()                    [<INVALID>]
 :00040 [04] %3 = %3.new(%4;3)                    [<INVALID>]
 :00042 [02] _ = %2.ppu=(%3;1)                    [<INVALID>]
 :00044 [03] %2 = %3
 :00045 [02] @ppu: - = %2
 :00046 [03] %2 = const[ROM]                      [<INVALID>]
 :00047 [04] %3 = @conf: -
 :00048 [05] %4 = @cpu: -
 :00049 [06] %5 = @ppu: -
 :00050 [03] %2 = %2.load(%3;3)                   [<INVALID>]
 :00052 [02] @rom: - = %2
 :00053 [03] %2 = const[Pads]                     [<INVALID>]
 :00054 [04] %3 = @conf: -
 :00055 [05] %4 = @cpu: -
 :00056 [06] %5 = @apu: -
 :00057 [03] %2 = %2.new(%3;3)                    [<INVALID>]
 :00059 [02] @pads: - = %2
 :00060 [03] %2 = 0: i32
 :00061 [02] @frame: - = %2
 :00062 [03] %2 = @conf: -
 :00063 [03] %2 = %2.frames()                     [<INVALID>]
 :00065 [03] _%2 = %2 == 0: i16                   [<INVALID>][<INVALID>]
 :00066 [02] condnotbr _%2 =>:00069
+:00067 [03] %2 = nil
 :00068 [03] br =>:00072
+:00069 [03] %2 = @conf: -
 :00070 [03] %2 = %2.frames()                     [<INVALID>]
+:00072 [02] @frame_target: - = %2
 :00073 [03] %2 = %0.save_fps_history?()          [<INVALID>]
 :00075 [02] condnotbr %2 =>:00079
+:00076 [03] %2 = literal[[]]
 :00077 [02] @fps_history: - = %2
 :00078 [02] ret %2
+:00079 [03] %2 = nil
 :00080 [02] ret %2
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:25
meta:on_stack:true kind:Ruby mode:method FuncId(278) regs:4 ISeq(RubyFuncInfo { id:278 name:inspect method:(FuncId(278), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["#<"]
 :00002 [03] %2 = %0.class()                      [<INVALID>]
 :00004 [04] %3 = literal[">"]
 :00005 [02] %1 = concat(%1; 3)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:31
meta:on_stack:true kind:Ruby mode:method FuncId(279) regs:3 ISeq(RubyFuncInfo { id:279 name:reset method:(FuncId(279), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @cpu: -
 :00002 [01] _ = %1.reset()                       [<INVALID>]
 :00004 [02] %1 = @apu: -
 :00005 [01] _ = %1.reset()                       [<INVALID>]
 :00007 [02] %1 = @ppu: -
 :00008 [01] _ = %1.reset()                       [<INVALID>]
 :00010 [02] %1 = @rom: -
 :00011 [01] _ = %1.reset()                       [<INVALID>]
 :00013 [02] %1 = @pads: -
 :00014 [01] _ = %1.reset()                       [<INVALID>]
 :00016 [02] %1 = @cpu: -
 :00017 [01] _ = %1.boot()                        [<INVALID>]
 :00019 [02] %1 = @rom: -
 :00020 [02] %1 = %1.load_battery()               [<INVALID>]
 :00022 [01] ret %1
------------------------------------
------------------------------------
<step> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:41
meta:on_stack:true kind:Ruby mode:method FuncId(280) regs:4 ISeq(RubyFuncInfo { id:280 name:step method:(FuncId(280), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @ppu: -
 :00002 [01] _ = %1.setup_frame()                 [<INVALID>]
 :00004 [02] %1 = @cpu: -
 :00005 [01] _ = %1.run()                         [<INVALID>]
 :00007 [02] %1 = @ppu: -
 :00008 [01] _ = %1.vsync()                       [<INVALID>]
 :00010 [02] %1 = @apu: -
 :00011 [01] _ = %1.vsync()                       [<INVALID>]
 :00013 [02] %1 = @cpu: -
 :00014 [01] _ = %1.vsync()                       [<INVALID>]
 :00016 [02] %1 = @rom: -
 :00017 [01] _ = %1.vsync()                       [<INVALID>]
 :00019 [02] %1 = @input: -
 :00020 [03] %2 = @frame: -
 :00021 [04] %3 = @pads: -
 :00022 [01] _ = %1.tick(%2;2)                    [<INVALID>]
 :00024 [02] %1 = @video: -
 :00025 [03] %2 = @ppu: -
 :00026 [03] %2 = %2.output_pixels()              [<INVALID>]
 :00028 [02] %1 = %1.tick(%2;1)                   [<INVALID>]
 :00030 [01] @fps: - = %1
 :00031 [02] %1 = %0.save_fps_history?()          [<INVALID>]
 :00033 [01] condnotbr %1 =>:00038
+:00034 [02] %1 = @fps_history: -
 :00035 [03] %2 = @fps: -
 :00036 [01] _ = %1.<<(%2;1)                      [<INVALID>]
+:00038 [02] %1 = @audio: -
 :00039 [03] %2 = @apu: -
 :00040 [03] %2 = %2.output()                     [<INVALID>]
 :00042 [01] _ = %1.tick(%2;1)                    [<INVALID>]
 :00044 [02] %1 = @frame: -
 :00045 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00046 [01] @frame: - = %1
 :00047 [02] %1 = @conf: -
 :00048 [02] %1 = %1.loglevel()                   [<INVALID>]
 :00050 [02] _%1 = %1 >= 2: i16                   [<INVALID>][<INVALID>]
 :00051 [01] condnotbr _%1 =>:00059
+:00052 [02] %1 = @conf: -
 :00053 [03] %2 = literal["frame "]
 :00054 [04] %3 = @frame: -
 :00055 [03] %2 = concat(%2; 2)
 :00056 [02] %1 = %1.info(%2;1)                   [<INVALID>]
 :00058 [01] ret %1
+:00059 [02] %1 = nil
 :00060 [01] ret %1
------------------------------------
------------------------------------
<dispose> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:58
meta:on_stack:true kind:Ruby mode:method FuncId(281) regs:5 ISeq(RubyFuncInfo { id:281 name:dispose method:(FuncId(281), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @fps: -
 :00002 [01] condnotbr %1 =>:00048
+:00003 [02] %1 = @conf: -
 :00004 [03] %2 = literal["fps: %.2f (in the last 10 frames)"]
 :00005 [04] %3 = @fps: -
 :00006 [03] %2 = %2 % %3                         [<INVALID>][<INVALID>]
 :00007 [01] _ = %1.info(%2;1)                    [<INVALID>]
 :00009 [02] %1 = @conf: -
 :00010 [02] %1 = %1.print_fps_history()          [<INVALID>]
 :00012 [01] condnotbr %1 =>:00020
+:00013 [02] %1 = literal["frame,fps-history"]
 :00014 [01] _ = %0.puts(%1;1)                    [<INVALID>]
 :00016 [02] %1 = @fps_history: -
 :00017 [03] %2 = literal[18612225]
 :00018 [01] _ = %1.each_with_index( &%2)         [<INVALID>]
+:00020 [02] %1 = @conf: -
 :00021 [02] %1 = %1.print_p95fps()               [<INVALID>]
 :00023 [01] condnotbr %1 =>:00039
+:00024 [02] %1 = literal["p95 fps: "]
 :00025 [03] %2 = @fps_history: -
 :00026 [03] %2 = %2.sort()                       [<INVALID>]
 :00028 [04] %3 = @fps_history: -
 :00029 [04] %3 = %3.length()                     [<INVALID>]
 :00031 [05] %4 = literal[0.05]
 :00032 [04] %3 = %3 * %4                         [<INVALID>][<INVALID>]
 :00033 [04] %3 = %3.floor()                      [<INVALID>]
 :00035 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00036 [02] %1 = concat(%1; 2)
 :00037 [01] _ = %0.puts(%1;1)                    [<INVALID>]
+:00039 [02] %1 = @conf: -
 :00040 [02] %1 = %1.print_fps()                  [<INVALID>]
 :00042 [01] condnotbr %1 =>:00048
+:00043 [02] %1 = literal["fps: "]
 :00044 [03] %2 = @fps: -
 :00045 [02] %1 = concat(%1; 2)
 :00046 [01] _ = %0.puts(%1;1)                    [<INVALID>]
+:00048 [02] %1 = @conf: -
 :00049 [02] %1 = %1.print_video_checksum()       [<INVALID>]
 :00051 [01] condnotbr %1 =>:00069
+:00052 [02] %1 = @video: -
 :00053 [03] %2 = const[Video]                    [<INVALID>]
 :00054 [02] %1 = %1.instance_of?(%2;1)           [<INVALID>]
 :00056 [01] condnotbr %1 =>:00069
+:00057 [02] %1 = literal["checksum: "]
 :00058 [03] %2 = @ppu: -
 :00059 [03] %2 = %2.output_pixels()              [<INVALID>]
 :00061 [04] %3 = literal["C*"]
 :00062 [03] %2 = %2.pack(%3;1)                   [<INVALID>]
 :00064 [03] %2 = %2.sum()                        [<INVALID>]
 :00066 [02] %1 = concat(%1; 2)
 :00067 [01] _ = %0.puts(%1;1)                    [<INVALID>]
+:00069 [02] %1 = @video: -
 :00070 [01] _ = %1.dispose()                     [<INVALID>]
 :00072 [02] %1 = @audio: -
 :00073 [01] _ = %1.dispose()                     [<INVALID>]
 :00075 [02] %1 = @input: -
 :00076 [01] _ = %1.dispose()                     [<INVALID>]
 :00078 [02] %1 = @rom: -
 :00079 [01] _ = %1.save_battery()                [<INVALID>]
 :00081 [02] %1 = @ppu: -
 :00082 [02] %1 = %1.dispose()                    [<INVALID>]
 :00084 [01] ret %1
------------------------------------
------------------------------------
<run> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:80
meta:on_stack:true kind:Ruby mode:method FuncId(282) regs:6 ISeq(RubyFuncInfo { id:282 name:run method:(FuncId(282), 0) args: 0 non_temp: 1 temp: 4})
[(:00001..:00050, Some(:00051), Some(:00054), Some(%3))]
+:00000 [02] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] _ = %0.reset()                       [<INVALID>]
 :00003 [03] %2 = @conf: -
 :00004 [03] %2 = %2.stackprof_mode()             [<INVALID>]
 :00006 [02] condnotbr %2 =>:00029
+:00007 [03] %2 = literal["stackprof"]
 :00008 [02] _ = %0.require(%2;1)                 [<INVALID>]
 :00010 [03] %2 = @conf: -
 :00011 [03] %2 = %2.stackprof_output()           [<INVALID>]
 :00013 [04] %3 = literal["MODE"]
 :00014 [05] %4 = @conf: -
 :00015 [05] %4 = %4.stackprof_mode()             [<INVALID>]
 :00017 [02] %1 = %2.sub(%3;2)                    [<INVALID>]
 :00019 [03] %2 = const[StackProf]                [<INVALID>]
 :00020 [04] %3 = @conf: -
 :00021 [04] %3 = %3.stackprof_mode()             [<INVALID>]
 :00023 [04] %3 = %3.to_sym()                     [<INVALID>]
 :00025 [05] %4 = %1
 :00026 [06] %5 = literal[true]
 :00027 [02] _ = %2.start( kw:%3;3)               [<INVALID>]
+:00029 [02] loop_start counter=0 jit-addr=0000000000000000
 :00030 [03] %2 = @frame: -
 :00031 [04] %3 = @frame_target: -
 :00032 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00033 [02] condbr _%2 =>:00037
+:00034 [02] _ = %0.step()                        [<INVALID>]
 :00036 [02] br =>:00029
+:00037 [02] loop_end
+:00038 [03] %2 = @conf: -
 :00039 [03] %2 = %2.stackprof_mode()             [<INVALID>]
 :00041 [02] condnotbr %2 =>:00049
+:00042 [03] %2 = const[StackProf]                [<INVALID>]
 :00043 [02] _ = %2.stop()                        [<INVALID>]
 :00045 [03] %2 = const[StackProf]                [<INVALID>]
 :00046 [03] %2 = %2.results()                    [<INVALID>]
 :00048 [03] br =>:00050
+:00049 [03] %2 = nil
+:00050 [03] br =>:00054
+:00051 [04] _ = %0.dispose()                     [<INVALID>]
 :00053 [04] raise %3
+:00054 [03] _ = %0.dispose()                     [<INVALID>]
 :00056 [03] ensure_end
 :00057 [02] ret %2
------------------------------------
------------------------------------
<save_fps_history?> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:101
meta:on_stack:true kind:Ruby mode:method FuncId(283) regs:4 ISeq(RubyFuncInfo { id:283 name:save_fps_history? method:(FuncId(283), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @conf: -
 :00002 [02] %1 = %2.print_fps_history()          [<INVALID>]
 :00004 [02] condbr %1 =>:00008
+:00005 [03] %2 = @conf: -
 :00006 [02] %1 = %2.print_p95fps()               [<INVALID>]
+:00008 [01] ret %1
------------------------------------
------------------------------------
<block in dispose> /home/monochrome/optcarrot/lib/optcarrot/nes.rb:63
meta:on_stack:true kind:Ruby mode:method FuncId(284) regs:6 ISeq(RubyFuncInfo { id:284 name:<unnamed> method:(FuncId(281), 1) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = %2
 :00002 [05] %4 = literal[","]
 :00003 [06] %5 = %1
 :00004 [04] %3 = concat(%3; 3)
 :00005 [04] %3 = %0.puts(%3;1)                   [<INVALID>]
 :00007 [03] ret %3
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(292) regs:2 ISeq(RubyFuncInfo { id:292 name:/main method:(FuncId(292), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(293)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(293) regs:2 ISeq(RubyFuncInfo { id:293 name:Optcarrot method:(FuncId(293), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = class_def ROM < _: FuncId(294)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<ROM> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(294) regs:4 ISeq(RubyFuncInfo { id:294 name:ROM method:(FuncId(294), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 0: i32
 :00002 [04] %3 = %0
 :00003 [02] %1 = hash[%2; 1]
 :00004 [01] const[MAPPER_DB] = %1
 :00005 [02] %1 = literal["mapper/mmc1"]
 :00006 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00008 [02] %1 = literal["mapper/uxrom"]
 :00009 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00011 [02] %1 = literal["mapper/cnrom"]
 :00012 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00014 [02] %1 = literal["mapper/mmc3"]
 :00015 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00017 [02] %1 = %0
 :00018 [01] singleton_method_def %1.zip_extract: FuncId(295)
 :00019 [02] %1 = %0
 :00020 [01] singleton_method_def %1.load: FuncId(296)
 :00021 [02] %1 = const[StandardError]            [<INVALID>]
 :00022 [01] _ = class_def InvalidROM < %1: FuncId(297)
 :00023 [01] method_def parse_header: FuncId(298)
 :00024 [01] method_def initialize: FuncId(299)
 :00025 [01] method_def init: FuncId(300)
 :00026 [01] method_def reset: FuncId(301)
 :00027 [01] method_def inspect: FuncId(302)
 :00028 [01] method_def peek_6000: FuncId(303)
 :00029 [01] method_def poke_6000: FuncId(304)
 :00030 [01] method_def vsync: FuncId(305)
 :00031 [01] method_def load_battery: FuncId(306)
 :00032 [01] method_def save_battery: FuncId(307)
 :00033 [02] %1 = :save_battery
 :00034 [01] ret %1
------------------------------------
------------------------------------
<zip_extract> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:12
meta:on_stack:true kind:Ruby mode:method FuncId(295) regs:6 ISeq(RubyFuncInfo { id:295 name:zip_extract method:(FuncId(295), 0) args: 1 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal["zlib"]
 :00002 [03] _ = %0.require(%3;1)                 [<INVALID>]
 :00004 [04] %3 = const[File]                     [<INVALID>]
 :00005 [03] %2 = %3.binread(%1;1)                [<INVALID>]
 :00007 [04] %3 = literal[20185089]
 :00008 [03] _ = %0.loop( &%3)                    [<INVALID>]
 :00010 [04] %3 = literal["failed to extract ROM file from `"]
 :00011 [05] %4 = %1
 :00012 [06] %5 = literal["'"]
 :00013 [04] %3 = concat(%3; 3)
 :00014 [04] %3 = %0.raise(%3;1)                  [<INVALID>]
 :00016 [03] ret %3
------------------------------------
------------------------------------
<load> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:35
meta:on_stack:true kind:Ruby mode:method FuncId(296) regs:14 ISeq(RubyFuncInfo { id:296 name:load method:(FuncId(296), 0) args: 3 non_temp: 8 temp: 5})
[]
+:00000 [09] init_method reg:13 arg:3 req:3 opt:0 rest:false block:None stack_offset:10
 :00001 [09] %4 = %1.romfile()                    [<INVALID>]
 :00003 [10] %9 = const[File]                     [<INVALID>]
 :00004 [09] %5 = %9.basename(%4;1)               [<INVALID>]
 :00006 [10] %9 = const[File]                     [<INVALID>]
 :00007 [10] %9 = %9.extname(%4;1)                [<INVALID>]
 :00009 [11] %10 = literal[".zip"]
 :00010 [10] _%9 = %9 == %10                      [<INVALID>][<INVALID>]
 :00011 [09] condnotbr _%9 =>:00015
+:00012 [10] %9 = %0.zip_extract(%4;1)            [<INVALID>]
 :00014 [10] br =>:00018
+:00015 [10] %9 = const[File]                     [<INVALID>]
 :00016 [10] %9 = %9.binread(%4;1)                [<INVALID>]
+:00018 [09] %6 = %9.bytes()                      [<INVALID>]
 :00020 [10] %9 = 6: i32
 :00021 [10] %9 = %6.[%9]                         [<INVALID>][<INVALID>]
 :00022 [11] %10 = 4: i32
 :00023 [10] %9 = %9.>>(%10;1)                    [<INVALID>]
 :00025 [11] %10 = 7: i32
 :00026 [11] %10 = %6.[%10]                       [<INVALID>][<INVALID>]
 :00027 [11] %10 = %10 & 240: i16                 [<INVALID>][<INVALID>]
 :00028 [09] %7 = %9 | %10                        [<INVALID>][<INVALID>]
 :00029 [10] %9 = const[MAPPER_DB]                [<INVALID>]
 :00030 [09] %8 = %9.[%7]                         [<INVALID>][<INVALID>]
 :00031 [09] condnotbr %8 =>:00033
+:00032 [09] br =>:00038
+:00033 [10] %9 = const[NotImplementedError]      [<INVALID>]
 :00034 [11] %10 = literal["Unsupported mapper type 0x%02x"]
 :00035 [11] %10 = %10 % %7                       [<INVALID>][<INVALID>]
 :00036 [09] _ = %0.raise(%9;2)                   [<INVALID>]
+:00038 [10] %9 = %1
 :00039 [11] %10 = %2
 :00040 [12] %11 = %3
 :00041 [13] %12 = %5
 :00042 [14] %13 = %6
 :00043 [10] %9 = %8.new(%9;5)                    [<INVALID>]
 :00045 [09] ret %9
------------------------------------
------------------------------------
<InvalidROM> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:49
meta:on_stack:true kind:Ruby mode:class_def FuncId(297) regs:2 ISeq(RubyFuncInfo { id:297 name:InvalidROM method:(FuncId(297), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<parse_header> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:52
meta:on_stack:true kind:Ruby mode:method FuncId(298) regs:9 ISeq(RubyFuncInfo { id:298 name:parse_header method:(FuncId(298), 0) args: 1 non_temp: 4 temp: 4})
[]
+:00000 [05] init_method reg:8 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [06] %5 = %1.size()                       [<INVALID>]
 :00003 [06] _%5 = %5 < 16: i16                   [<INVALID>][<INVALID>]
 :00004 [05] condnotbr _%5 =>:00009
+:00005 [06] %5 = const[InvalidROM]               [<INVALID>]
 :00006 [07] %6 = literal["Missing 16-byte header"]
 :00007 [05] _ = %0.raise(%5;2)                   [<INVALID>]
+:00009 [06] %5 = 0: i32
 :00010 [07] %6 = 4: i32
 :00011 [06] %5 = %1.[](%5;2)                     [<INVALID>]
 :00013 [07] %6 = literal["NES\u{1a}"]
 :00014 [07] %6 = %6.bytes()                      [<INVALID>]
 :00016 [06] _%5 = %5 != %6                       [<INVALID>][<INVALID>]
 :00017 [05] condnotbr _%5 =>:00022
+:00018 [06] %5 = const[InvalidROM]               [<INVALID>]
 :00019 [07] %6 = literal["Missing 'NES' constant in header"]
 :00020 [05] _ = %0.raise(%5;2)                   [<INVALID>]
+:00022 [06] %5 = 6: i32
 :00023 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00024 [07] %6 = 2: i32
 :00025 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00026 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00027 [05] condnotbr _%5 =>:00032
+:00028 [06] %5 = const[NotImplementedError]      [<INVALID>]
 :00029 [07] %6 = literal["trainer not supported"]
 :00030 [05] _ = %0.raise(%5;2)                   [<INVALID>]
+:00032 [06] %5 = 7: i32
 :00033 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00034 [07] %6 = 0: i32
 :00035 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00036 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00037 [05] condnotbr _%5 =>:00042
+:00038 [06] %5 = const[NotImplementedError]      [<INVALID>]
 :00039 [07] %6 = literal["VS cart not supported"]
 :00040 [05] _ = %0.raise(%5;2)                   [<INVALID>]
+:00042 [06] %5 = 9: i32
 :00043 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00044 [07] %6 = 0: i32
 :00045 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00046 [06] _%5 = %5 == 0: i16                   [<INVALID>][<INVALID>]
 :00047 [05] condnotbr _%5 =>:00049
+:00048 [05] br =>:00053
+:00049 [06] %5 = const[NotImplementedError]      [<INVALID>]
 :00050 [07] %6 = literal["PAL not supported"]
 :00051 [05] _ = %0.raise(%5;2)                   [<INVALID>]
+:00053 [06] %5 = 4: i32
 :00054 [05] %2 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00055 [06] %5 = 5: i32
 :00056 [05] %3 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00057 [06] %5 = 6: i32
 :00058 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00059 [07] %6 = 0: i32
 :00060 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00061 [06] _%5 = %5 == 0: i16                   [<INVALID>][<INVALID>]
 :00062 [05] condnotbr _%5 =>:00065
+:00063 [06] %5 = :horizontal
 :00064 [06] br =>:00066
+:00065 [06] %5 = :vertical
+:00066 [05] @mirroring: - = %5
 :00067 [06] %5 = 6: i32
 :00068 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00069 [07] %6 = 3: i32
 :00070 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00071 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00072 [05] condnotbr _%5 =>:00075
+:00073 [06] %5 = :four_screen
 :00074 [05] @mirroring: - = %5
+:00075 [06] %5 = 6: i32
 :00076 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00077 [07] %6 = 1: i32
 :00078 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00079 [06] %5 = %5 == 1: i16                    [<INVALID>][<INVALID>]
 :00080 [05] @battery: - = %5
 :00081 [06] %5 = 6: i32
 :00082 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00083 [07] %6 = 4: i32
 :00084 [06] %5 = %5.>>(%6;1)                     [<INVALID>]
 :00086 [07] %6 = 7: i32
 :00087 [07] %6 = %1.[%6]                         [<INVALID>][<INVALID>]
 :00088 [07] %6 = %6 & 240: i16                   [<INVALID>][<INVALID>]
 :00089 [06] %5 = %5 | %6                         [<INVALID>][<INVALID>]
 :00090 [05] @mapper: - = %5
 :00091 [07] %6 = 1: i32
 :00092 [08] %7 = 8: i32
 :00093 [08] %7 = %1.[%7]                         [<INVALID>][<INVALID>]
 :00094 [06] %5 = array[%6; 2]
 :00095 [05] %4 = %5.max()                        [<INVALID>]
 :00097 [07] %6 = %2
 :00098 [08] %7 = %3
 :00099 [09] %8 = %4
 :00100 [06] %5 = array[%6; 3]
 :00101 [05] ret %5
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:70
meta:on_stack:true kind:Ruby mode:method FuncId(299) regs:15 ISeq(RubyFuncInfo { id:299 name:initialize method:(FuncId(299), 0) args: 5 non_temp: 8 temp: 6})
[]
+:00000 [09] init_method reg:14 arg:5 req:5 opt:0 rest:false block:None stack_offset:11
 :00001 [09] @conf: - = %1
 :00002 [09] @cpu: - = %2
 :00003 [09] @ppu: - = %3
 :00004 [09] @basename: - = %4
 :00005 [10] %9 = 0: i32
 :00006 [11] %10 = 16: i32
 :00007 [10] %9 = %5.slice!(%9;2)                 [<INVALID>]
 :00009 [10] %9 = %0.parse_header(%9;1)           [<INVALID>]
 :00011 [10] %10; 3 = expand(%9)
 :00012 [10] %6 = %10
 :00013 [10] %7 = %11
 :00014 [10] %8 = %12
 :00015 [10] %9 = %5.size()                       [<INVALID>]
 :00017 [11] %10 = 16384: i16 * %6                [<INVALID>][<INVALID>]
 :00018 [10] _%9 = %9 < %10                       [<INVALID>][<INVALID>]
 :00019 [09] condnotbr _%9 =>:00024
+:00020 [10] %9 = const[InvalidROM]               [<INVALID>]
 :00021 [11] %10 = literal["EOF in ROM bank data"]
 :00022 [09] _ = %0.raise(%9;2)                   [<INVALID>]
+:00024 [11] %10 = 0: i32
 :00025 [10] %9 = %10 ... %6
 :00026 [11] %10 = literal[20250625]
 :00027 [10] %9 = %9.map( &%10)                   [<INVALID>]
 :00029 [09] @prg_banks: - = %9
 :00030 [10] %9 = %5.size()                       [<INVALID>]
 :00032 [11] %10 = 8192: i16 * %7                 [<INVALID>][<INVALID>]
 :00033 [10] _%9 = %9 < %10                       [<INVALID>][<INVALID>]
 :00034 [09] condnotbr _%9 =>:00039
+:00035 [10] %9 = const[InvalidROM]               [<INVALID>]
 :00036 [11] %10 = literal["EOF in CHR bank data"]
 :00037 [09] _ = %0.raise(%9;2)                   [<INVALID>]
+:00039 [11] %10 = 0: i32
 :00040 [10] %9 = %10 ... %7
 :00041 [11] %10 = literal[20316161]
 :00042 [10] %9 = %9.map( &%10)                   [<INVALID>]
 :00044 [09] @chr_banks: - = %9
 :00045 [10] %9 = literal[[nil]]
 :00046 [11] %10 = 65536: i32
 :00047 [10] %9 = %9 * %10                        [<INVALID>][<INVALID>]
 :00048 [09] @prg_ref: - = %9
 :00049 [10] %9 = @prg_ref: -
 :00050 [11] %10 = 32768: i32
 :00051 [12] %11 = 16384: i32
 :00052 [14] %13 = @prg_banks: -
 :00053 [14] %13 = %13.first()                    [<INVALID>]
 :00055 [09] %12 = %13
 :00056 [09] _ = %9.[]=(%10;3)                    [<INVALID>]
 :00058 [10] %9 = @prg_ref: -
 :00059 [11] %10 = 49152: i32
 :00060 [12] %11 = 16384: i32
 :00061 [14] %13 = @prg_banks: -
 :00062 [14] %13 = %13.last()                     [<INVALID>]
 :00064 [09] %12 = %13
 :00065 [09] _ = %9.[]=(%10;3)                    [<INVALID>]
 :00067 [10] %9 = %7 == 0: i16                    [<INVALID>][<INVALID>]
 :00068 [09] @chr_ram: - = %9
 :00069 [10] %9 = @chr_ram: -
 :00070 [09] condnotbr %9 =>:00074
+:00071 [10] %9 = literal[[0]]
 :00072 [10] %9 = %9 * 8192: i16                  [<INVALID>][<INVALID>]
 :00073 [10] br =>:00079
+:00074 [10] %9 = @chr_banks: -
 :00075 [11] %10 = 0: i32
 :00076 [10] %9 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00077 [10] %9 = %9.dup()                        [<INVALID>]
+:00079 [09] @chr_ref: - = %9
 :00080 [10] %9 = %8 > 0: i16                     [<INVALID>][<INVALID>]
 :00081 [09] @wrk_readable: - = %9
 :00082 [10] %9 = literal[false]
 :00083 [09] @wrk_writable: - = %9
 :00084 [10] _%9 = %8 > 0: i16                    [<INVALID>][<INVALID>]
 :00085 [09] condnotbr _%9 =>:00091
+:00086 [10] %9 = literal[24576..32767]
 :00087 [11] %10 = literal[20381697]
 :00088 [10] %9 = %9.map( &%10)                   [<INVALID>]
 :00090 [10] br =>:00092
+:00091 [10] %9 = nil
+:00092 [09] @wrk: - = %9
 :00093 [09] _ = %0.init()                        [<INVALID>]
 :00095 [10] %9 = @ppu: -
 :00096 [11] %10 = @mirroring: -
 :00097 [09] _ = %9.nametables=(%10;1)            [<INVALID>]
 :00099 [10] %9 = @ppu: -
 :00100 [11] %10 = @chr_ref: -
 :00101 [12] %11 = @chr_ram: -
 :00102 [10] %9 = %9.set_chr_mem(%10;2)           [<INVALID>]
 :00104 [09] ret %9
------------------------------------
------------------------------------
<init> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:101
meta:on_stack:true kind:Ruby mode:method FuncId(300) regs:2 ISeq(RubyFuncInfo { id:300 name:init method:(FuncId(300), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:104
meta:on_stack:true kind:Ruby mode:method FuncId(301) regs:5 ISeq(RubyFuncInfo { id:301 name:reset method:(FuncId(301), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @cpu: -
 :00002 [03] %2 = literal[32768..65535]
 :00003 [04] %3 = @prg_ref: -
 :00004 [05] %4 = nil
 :00005 [02] %1 = %1.add_mappings(%2;3)           [<INVALID>]
 :00007 [01] ret %1
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:108
meta:on_stack:true kind:Ruby mode:method FuncId(302) regs:7 ISeq(RubyFuncInfo { id:302 name:inspect method:(FuncId(302), 0) args: 0 non_temp: 0 temp: 6})
[]
+:00000 [01] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [03] %2 = literal["Mapper: "]
 :00002 [04] %3 = @mapper: -
 :00003 [05] %4 = literal[" ("]
 :00004 [06] %5 = %0.class()                      [<INVALID>]
 :00006 [06] %5 = %5.to_s()                       [<INVALID>]
 :00008 [07] %6 = literal["::"]
 :00009 [06] %5 = %5.split(%6;1)                  [<INVALID>]
 :00011 [06] %5 = %5.last()                       [<INVALID>]
 :00013 [07] %6 = literal[")"]
 :00014 [03] %2 = concat(%2; 5)
 :00015 [04] %3 = literal["PRG Banks: "]
 :00016 [05] %4 = @prg_banks: -
 :00017 [05] %4 = %4.size()                       [<INVALID>]
 :00019 [04] %3 = concat(%3; 2)
 :00020 [05] %4 = literal["CHR Banks: "]
 :00021 [06] %5 = @chr_banks: -
 :00022 [06] %5 = %5.size()                       [<INVALID>]
 :00024 [05] %4 = concat(%4; 2)
 :00025 [06] %5 = literal["Mirroring: "]
 :00026 [07] %6 = @mirroring: -
 :00027 [06] %5 = concat(%5; 2)
 :00028 [02] %1 = array[%2; 4]
 :00029 [03] %2 = literal["\n"]
 :00030 [02] %1 = %1.join(%2;1)                   [<INVALID>]
 :00032 [01] ret %1
------------------------------------
------------------------------------
<peek_6000> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:117
meta:on_stack:true kind:Ruby mode:method FuncId(303) regs:4 ISeq(RubyFuncInfo { id:303 name:peek_6000 method:(FuncId(303), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @wrk_readable: -
 :00002 [02] condnotbr %2 =>:00007
+:00003 [03] %2 = @wrk: -
 :00004 [04] %3 = %1 - 24576: i16                 [<INVALID>][<INVALID>]
 :00005 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00006 [02] ret %2
+:00007 [03] %2 = 8: i32
 :00008 [03] %2 = %1.>>(%2;1)                     [<INVALID>]
 :00010 [02] ret %2
------------------------------------
------------------------------------
<poke_6000> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:121
meta:on_stack:true kind:Ruby mode:method FuncId(304) regs:5 ISeq(RubyFuncInfo { id:304 name:poke_6000 method:(FuncId(304), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @wrk_writable: -
 :00002 [03] condnotbr %3 =>:00007
+:00003 [04] %3 = @wrk: -
 :00004 [05] %4 = %1 - 24576: i16                 [<INVALID>][<INVALID>]
 :00005 [03] %3:.[%4:] = %2
 :00006 [03] ret %2
+:00007 [04] %3 = nil
 :00008 [03] ret %3
------------------------------------
------------------------------------
<vsync> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:125
meta:on_stack:true kind:Ruby mode:method FuncId(305) regs:2 ISeq(RubyFuncInfo { id:305 name:vsync method:(FuncId(305), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<load_battery> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:128
meta:on_stack:true kind:Ruby mode:method FuncId(306) regs:4 ISeq(RubyFuncInfo { id:306 name:load_battery method:(FuncId(306), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @battery: -
 :00002 [02] condnotbr %2 =>:00004
+:00003 [02] br =>:00006
+:00004 [03] %2 = nil
 :00005 [02] ret %2
+:00006 [03] %2 = @basename: -
 :00007 [04] %3 = literal[".sav"]
 :00008 [02] %1 = %2 + %3                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = const[File]                     [<INVALID>]
 :00010 [03] %2 = %2.readable?(%1;1)              [<INVALID>]
 :00012 [02] condnotbr %2 =>:00014
+:00013 [02] br =>:00016
+:00014 [03] %2 = nil
 :00015 [02] ret %2
+:00016 [03] %2 = const[File]                     [<INVALID>]
 :00017 [02] %1 = %2.binread(%1;1)                [<INVALID>]
 :00019 [03] %2 = @wrk: -
 :00020 [04] %3 = %1.bytes()                      [<INVALID>]
 :00022 [03] %2 = %2.replace(%3;1)                [<INVALID>]
 :00024 [02] ret %2
------------------------------------
------------------------------------
<save_battery> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:136
meta:on_stack:true kind:Ruby mode:method FuncId(307) regs:6 ISeq(RubyFuncInfo { id:307 name:save_battery method:(FuncId(307), 0) args: 0 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @battery: -
 :00002 [02] condnotbr %2 =>:00004
+:00003 [02] br =>:00006
+:00004 [03] %2 = nil
 :00005 [02] ret %2
+:00006 [03] %2 = @basename: -
 :00007 [04] %3 = literal[".sav"]
 :00008 [02] %1 = %2 + %3                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = literal["Saving: "]
 :00010 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00011 [02] _ = %0.puts(%2;1)                    [<INVALID>]
 :00013 [03] %2 = const[File]                     [<INVALID>]
 :00014 [04] %3 = %1
 :00015 [05] %4 = @wrk: -
 :00016 [06] %5 = literal["C*"]
 :00017 [05] %4 = %4.pack(%5;1)                   [<INVALID>]
 :00019 [03] %2 = %2.binwrite(%3;2)               [<INVALID>]
 :00021 [02] ret %2
------------------------------------
------------------------------------
<block in zip_extract> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:15
meta:on_stack:true kind:Ruby mode:method FuncId(308) regs:23 ISeq(RubyFuncInfo { id:308 name:<unnamed> method:(FuncId(295), 1) args: 0 non_temp: 10 temp: 12})
[]
+:00000 [11] init_method reg:22 arg:0 req:0 opt:0 rest:false block:None stack_offset:15
 :00001 [12] %11 = dynvar(1, %2)
 :00002 [13] %12 = 0: i32
 :00003 [14] %13 = 30: i32
 :00004 [12] %11 = %11.slice!(%12;2)              [<INVALID>]
 :00006 [13] %12 = literal["a4v5V3v2"]
 :00007 [12] %11 = %11.unpack(%12;1)              [<INVALID>]
 :00009 [12] %12; 11 = expand(%11)
 :00010 [12] %1 = %12
 :00011 [12] %2 = %13
 :00012 [12] %3 = %14
 :00013 [12] %4 = %15
 :00014 [12] %2 = %16
 :00015 [12] %2 = %17
 :00016 [12] %2 = %18
 :00017 [12] %5 = %19
 :00018 [12] %2 = %20
 :00019 [12] %6 = %21
 :00020 [12] %7 = %22
 :00021 [12] %11 = literal["PK\u{3}\u{4}"]
 :00022 [12] %11 = %11.b()                        [<INVALID>]
 :00024 [12] _%11 = %1 != %11                     [<INVALID>][<INVALID>]
 :00025 [11] condnotbr _%11 =>:00028
+:00026 [12] %11 = nil
 :00027 [11] break %11
+:00028 [12] %11 = dynvar(1, %2)
 :00029 [13] %12 = 0: i32
 :00030 [14] %13 = %6
 :00031 [11] %8 = %11.slice!(%12;2)               [<INVALID>]
 :00033 [12] %11 = dynvar(1, %2)
 :00034 [13] %12 = 0: i32
 :00035 [14] %13 = %7
 :00036 [11] _ = %11.slice!(%12;2)                [<INVALID>]
 :00038 [12] %11 = dynvar(1, %2)
 :00039 [13] %12 = 0: i32
 :00040 [14] %13 = %5
 :00041 [11] %9 = %11.slice!(%12;2)               [<INVALID>]
 :00043 [12] %11 = const[File]                    [<INVALID>]
 :00044 [12] %11 = %11.extname(%8;1)              [<INVALID>]
 :00046 [12] %11 = %11.downcase()                 [<INVALID>]
 :00048 [13] %12 = literal[".nes"]
 :00049 [12] _%11 = %11 != %12                    [<INVALID>][<INVALID>]
 :00050 [11] condnotbr _%11 =>:00053
+:00051 [12] %11 = nil
 :00052 [11] ret %11
+:00053 [12] %11 = %3 & 17: i16                   [<INVALID>][<INVALID>]
 :00054 [12] _%11 = %11 != 0: i16                 [<INVALID>][<INVALID>]
 :00055 [11] condnotbr _%11 =>:00058
+:00056 [12] %11 = nil
 :00057 [11] ret %11
+:00058 [12] _%11 = %4 != 0: i16                  [<INVALID>][<INVALID>]
 :00059 [11] condnotbr _%11 =>:00064
+:00060 [12] _%11 = %4 != 8: i16                  [<INVALID>][<INVALID>]
 :00061 [11] condnotbr _%11 =>:00064
+:00062 [12] %11 = nil
 :00063 [11] ret %11
+:00064 [12] _%11 = %4 == 8: i16                  [<INVALID>][<INVALID>]
 :00065 [11] condnotbr _%11 =>:00076
+:00066 [12] %11 = const[Zlib::Inflate]           [<INVALID>]
 :00067 [13] %12 = -15: i32
 :00068 [11] %10 = %11.new(%12;1)                 [<INVALID>]
 :00070 [11] %9 = %10.inflate(%9;1)               [<INVALID>]
 :00072 [11] _ = %10.finish()                     [<INVALID>]
 :00074 [11] _ = %10.close()                      [<INVALID>]
+:00076 [11] method_ret %9
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:79
meta:on_stack:true kind:Ruby mode:method FuncId(309) regs:4 ISeq(RubyFuncInfo { id:309 name:<unnamed> method:(FuncId(299), 1) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = dynvar(1, %5)
 :00002 [03] %2 = 0: i32
 :00003 [04] %3 = 16384: i32
 :00004 [02] %1 = %1.slice!(%2;2)                 [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:82
meta:on_stack:true kind:Ruby mode:method FuncId(310) regs:4 ISeq(RubyFuncInfo { id:310 name:<unnamed> method:(FuncId(299), 1) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = dynvar(1, %5)
 :00002 [03] %2 = 0: i32
 :00003 [04] %3 = 8192: i32
 :00004 [02] %1 = %1.slice!(%2;2)                 [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/rom.rb:93
meta:on_stack:true kind:Ruby mode:method FuncId(311) regs:3 ISeq(RubyFuncInfo { id:311 name:<unnamed> method:(FuncId(299), 1) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 8: i32
 :00002 [03] %2 = %1.>>(%2;1)                     [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(312) regs:2 ISeq(RubyFuncInfo { id:312 name:/main method:(FuncId(312), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(313)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(313) regs:2 ISeq(RubyFuncInfo { id:313 name:Optcarrot method:(FuncId(313), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[ROM]                      [<INVALID>]
 :00002 [02] %1 = class_def MMC1 < %1: FuncId(314)
 :00003 [01] ret %1
------------------------------------
------------------------------------
<MMC1> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(314) regs:4 ISeq(RubyFuncInfo { id:314 name:MMC1 method:(FuncId(314), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = const[MAPPER_DB]                [<INVALID>]
 :00002 [03] %2 = 1: i32
 :00003 [04] %3 = %0
 :00004 [01] %1:.[%2:] = %3
 :00005 [02] %1 = literal[[:first, :second, :vertical, :horizontal]]
 :00006 [01] const[NMT_MODE] = %1
 :00007 [02] %1 = literal[[:conseq, :conseq, :fix_first, :fix_last]]
 :00008 [01] const[PRG_MODE] = %1
 :00009 [02] %1 = literal[[:conseq, :noconseq]]
 :00010 [01] const[CHR_MODE] = %1
 :00011 [01] method_def init: FuncId(315)
 :00012 [01] method_def reset: FuncId(316)
 :00013 [01] method_def poke_prg: FuncId(317)
 :00014 [01] method_def update_nmt: FuncId(318)
 :00015 [01] method_def update_prg: FuncId(319)
 :00016 [01] method_def update_chr: FuncId(320)
 :00017 [02] %1 = :update_chr
 :00018 [01] ret %1
------------------------------------
------------------------------------
<init> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:10
meta:on_stack:true kind:Ruby mode:method FuncId(315) regs:2 ISeq(RubyFuncInfo { id:315 name:init method:(FuncId(315), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] @chr_mode: - = %1
 :00003 [01] @prg_mode: - = %1
 :00004 [01] @nmt_mode: - = %1
 :00005 [02] %1 = 0: i32
 :00006 [01] @chr_bank_1: - = %1
 :00007 [01] @chr_bank_0: - = %1
 :00008 [01] @prg_bank: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:15
meta:on_stack:true kind:Ruby mode:method FuncId(316) regs:5 ISeq(RubyFuncInfo { id:316 name:reset method:(FuncId(316), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = 0: i32
 :00002 [01] @shift_count: - = %1
 :00003 [01] @shift: - = %1
 :00004 [02] %1 = @chr_banks: -
 :00005 [02] %1 = %1.flatten()                    [<INVALID>]
 :00007 [03] %2 = 4096: i32
 :00008 [02] %1 = %1.each_slice(%2;1)             [<INVALID>]
 :00010 [02] %1 = %1.to_a()                       [<INVALID>]
 :00012 [01] @chr_banks: - = %1
 :00013 [02] %1 = literal[true]
 :00014 [01] @wrk_writable: - = %1
 :00015 [01] @wrk_readable: - = %1
 :00016 [02] %1 = @cpu: -
 :00017 [03] %2 = literal[24576..32767]
 :00018 [04] %3 = :peek_6000
 :00019 [04] %3 = %0.method(%3;1)                 [<INVALID>]
 :00021 [05] %4 = :poke_6000
 :00022 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00024 [01] _ = %1.add_mappings(%2;3)            [<INVALID>]
 :00026 [02] %1 = @cpu: -
 :00027 [03] %2 = literal[32768..65535]
 :00028 [04] %3 = @prg_ref: -
 :00029 [05] %4 = :poke_prg
 :00030 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00032 [01] _ = %1.add_mappings(%2;3)            [<INVALID>]
 :00034 [02] %1 = :horizontal
 :00035 [01] _ = %0.update_nmt(%1;1)              [<INVALID>]
 :00037 [02] %1 = :fix_last
 :00038 [03] %2 = 0: i32
 :00039 [04] %3 = 0: i32
 :00040 [01] _ = %0.update_prg(%1;3)              [<INVALID>]
 :00042 [02] %1 = :conseq
 :00043 [03] %2 = 0: i32
 :00044 [04] %3 = 0: i32
 :00045 [02] %1 = %0.update_chr(%1;3)             [<INVALID>]
 :00047 [01] ret %1
------------------------------------
------------------------------------
<poke_prg> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:29
meta:on_stack:true kind:Ruby mode:method FuncId(317) regs:12 ISeq(RubyFuncInfo { id:317 name:poke_prg method:(FuncId(317), 0) args: 2 non_temp: 6 temp: 5})
[]
+:00000 [07] init_method reg:11 arg:2 req:2 opt:0 rest:false block:None stack_offset:9
 :00001 [08] %7 = 7: i32
 :00002 [08] %7 = %2.[%7]                         [<INVALID>][<INVALID>]
 :00003 [08] _%7 = %7 == 1: i16                   [<INVALID>][<INVALID>]
 :00004 [07] condnotbr _%7 =>:00009
+:00005 [08] %7 = 0: i32
 :00006 [07] @shift_count: - = %7
 :00007 [07] @shift: - = %7
 :00008 [07] ret %7
+:00009 [08] %7 = @shift: -
 :00010 [09] %8 = 0: i32
 :00011 [09] %8 = %2.[%8]                         [<INVALID>][<INVALID>]
 :00012 [10] %9 = @shift_count: -
 :00013 [09] %8 = %8.<<(%9;1)                     [<INVALID>]
 :00015 [08] %7 = %7 | %8                         [<INVALID>][<INVALID>]
 :00016 [07] @shift: - = %7
 :00017 [08] %7 = @shift_count: -
 :00018 [08] %7 = %7 + 1: i16                     [<INVALID>][<INVALID>]
 :00019 [07] @shift_count: - = %7
 :00020 [08] %7 = @shift_count: -
 :00021 [08] _%7 = %7 == 5: i16                   [<INVALID>][<INVALID>]
 :00022 [07] condnotbr _%7 =>:00100
+:00023 [09] %8 = 13: i32
 :00024 [09] %8 = %1.>>(%8;1)                     [<INVALID>]
 :00026 [09] %8 = %8 & 3: i16                     [<INVALID>][<INVALID>]
 :00027 [10] %9 = 0: i32
 :00028 [10] _%9 = %9 === %8                      [<INVALID>][<INVALID>]
 :00029 [09] condnotbr _%9 =>:00061
+:00030 [10] %9 = const[NMT_MODE]                 [<INVALID>]
 :00031 [11] %10 = @shift: -
 :00032 [11] %10 = %10 & 3: i16                   [<INVALID>][<INVALID>]
 :00033 [09] %3 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00034 [10] %9 = const[PRG_MODE]                 [<INVALID>]
 :00035 [11] %10 = @shift: -
 :00036 [12] %11 = 2: i32
 :00037 [11] %10 = %10.>>(%11;1)                  [<INVALID>]
 :00039 [11] %10 = %10 & 3: i16                   [<INVALID>][<INVALID>]
 :00040 [09] %4 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00041 [10] %9 = const[CHR_MODE]                 [<INVALID>]
 :00042 [11] %10 = @shift: -
 :00043 [12] %11 = 4: i32
 :00044 [11] %10 = %10.>>(%11;1)                  [<INVALID>]
 :00046 [11] %10 = %10 & 1: i16                   [<INVALID>][<INVALID>]
 :00047 [09] %5 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00048 [09] _ = %0.update_nmt(%3;1)              [<INVALID>]
 :00050 [10] %9 = %4
 :00051 [11] %10 = @prg_bank: -
 :00052 [12] %11 = @chr_bank_0: -
 :00053 [09] _ = %0.update_prg(%9;3)              [<INVALID>]
 :00055 [10] %9 = %5
 :00056 [11] %10 = @chr_bank_0: -
 :00057 [12] %11 = @chr_bank_1: -
 :00058 [09] %7 = %0.update_chr(%9;3)             [<INVALID>]
 :00060 [08] br =>:00096
+:00061 [10] %9 = 1: i32
 :00062 [10] _%9 = %9 === %8                      [<INVALID>][<INVALID>]
 :00063 [09] condnotbr _%9 =>:00077
+:00064 [09] %6 = @chr_bank_0: -
 :00065 [10] %9 = @prg_mode: -
 :00066 [11] %10 = @prg_bank: -
 :00067 [12] %11 = @shift: -
 :00068 [09] _ = %0.update_prg(%9;3)              [<INVALID>]
 :00070 [09] @chr_bank_0: - = %6
 :00071 [10] %9 = @chr_mode: -
 :00072 [11] %10 = @shift: -
 :00073 [12] %11 = @chr_bank_1: -
 :00074 [09] %7 = %0.update_chr(%9;3)             [<INVALID>]
 :00076 [08] br =>:00096
+:00077 [10] %9 = 2: i32
 :00078 [10] _%9 = %9 === %8                      [<INVALID>][<INVALID>]
 :00079 [09] condnotbr _%9 =>:00086
+:00080 [10] %9 = @chr_mode: -
 :00081 [11] %10 = @chr_bank_0: -
 :00082 [12] %11 = @shift: -
 :00083 [09] %7 = %0.update_chr(%9;3)             [<INVALID>]
 :00085 [08] br =>:00096
+:00086 [10] %9 = 3: i32
 :00087 [10] _%9 = %9 === %8                      [<INVALID>][<INVALID>]
 :00088 [09] condnotbr _%9 =>:00095
+:00089 [10] %9 = @prg_mode: -
 :00090 [11] %10 = @shift: -
 :00091 [12] %11 = @chr_bank_0: -
 :00092 [09] %7 = %0.update_prg(%9;3)             [<INVALID>]
 :00094 [08] br =>:00096
+:00095 [08] %7 = nil
+:00096 [08] %7 = 0: i32
 :00097 [07] @shift_count: - = %7
 :00098 [07] @shift: - = %7
 :00099 [07] ret %7
+:00100 [08] %7 = nil
 :00101 [07] ret %7
------------------------------------
------------------------------------
<update_nmt> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:61
meta:on_stack:true kind:Ruby mode:method FuncId(318) regs:4 ISeq(RubyFuncInfo { id:318 name:update_nmt method:(FuncId(318), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @nmt_mode: -
 :00002 [03] _%2 = %2 == %1                       [<INVALID>][<INVALID>]
 :00003 [02] condnotbr _%2 =>:00006
+:00004 [03] %2 = nil
 :00005 [02] ret %2
+:00006 [02] @nmt_mode: - = %1
 :00007 [03] %2 = @ppu: -
 :00008 [04] %3 = @nmt_mode: -
 :00009 [02] _ = %2.nametables=(%3;1)             [<INVALID>]
 :00011 [02] ret %3
------------------------------------
------------------------------------
<update_prg> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:67
meta:on_stack:true kind:Ruby mode:method FuncId(319) regs:13 ISeq(RubyFuncInfo { id:319 name:update_prg method:(FuncId(319), 0) args: 3 non_temp: 7 temp: 5})
[]
+:00000 [08] init_method reg:12 arg:3 req:3 opt:0 rest:false block:None stack_offset:10
 :00001 [09] %8 = @prg_mode: -
 :00002 [09] _%8 = %1 == %8                       [<INVALID>][<INVALID>]
 :00003 [08] condnotbr _%8 =>:00012
+:00004 [09] %8 = @prg_bank: -
 :00005 [09] _%8 = %2 == %8                       [<INVALID>][<INVALID>]
 :00006 [08] condnotbr _%8 =>:00012
+:00007 [09] %8 = @chr_bank_0: -
 :00008 [09] _%8 = %3 == %8                       [<INVALID>][<INVALID>]
 :00009 [08] condnotbr _%8 =>:00012
+:00010 [09] %8 = nil
 :00011 [08] ret %8
+:00012 [09] %8 = %1
 :00013 [10] %9 = %2
 :00014 [11] %10 = %3
 :00015 [11] @prg_mode: - = %8
 :00016 [11] @prg_bank: - = %9
 :00017 [11] @chr_bank_0: - = %10
 :00018 [09] %8 = @prg_banks: -
 :00019 [09] %8 = %8.size()                       [<INVALID>]
 :00021 [09] %8 = %8 - 1: i16                     [<INVALID>][<INVALID>]
 :00022 [09] %8 = 16: i16 & %8                    [<INVALID>][<INVALID>]
 :00023 [08] %4 = %3 & %8                         [<INVALID>][<INVALID>]
 :00024 [09] %8 = @prg_bank: -
 :00025 [09] %8 = %8 & 15: i16                    [<INVALID>][<INVALID>]
 :00026 [09] %8 = %8 | %4                         [<INVALID>][<INVALID>]
 :00027 [10] %9 = @prg_banks: -
 :00028 [10] %9 = %9.size()                       [<INVALID>]
 :00030 [10] %9 = %9 - 1: i16                     [<INVALID>][<INVALID>]
 :00031 [08] %5 = %8 & %9                         [<INVALID>][<INVALID>]
 :00032 [10] %9 = @prg_mode: -
 :00033 [11] %10 = :conseq
 :00034 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00035 [10] condnotbr _%10 =>:00042
+:00036 [11] %10 = 1: i32
 :00037 [11] %10 = ~%10                           [<INVALID>]
 :00038 [10] %6 = %5 & %10                        [<INVALID>][<INVALID>]
 :00039 [10] %7 = %6 + 1: i16                     [<INVALID>][<INVALID>]
 :00040 [10] %8 = %7
 :00041 [09] br =>:00062
+:00042 [11] %10 = :fix_first
 :00043 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00044 [10] condnotbr _%10 =>:00049
+:00045 [10] %6 = 0: i32
 :00046 [10] %7 = %5
 :00047 [10] %8 = %7
 :00048 [09] br =>:00062
+:00049 [11] %10 = :fix_last
 :00050 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00051 [10] condnotbr _%10 =>:00061
+:00052 [10] %6 = %5
 :00053 [11] %10 = @prg_banks: -
 :00054 [11] %10 = %10.size()                     [<INVALID>]
 :00056 [11] %10 = %10 - 1: i16                   [<INVALID>][<INVALID>]
 :00057 [11] %10 = %10 & 15: i16                  [<INVALID>][<INVALID>]
 :00058 [10] %7 = %10 | %4                        [<INVALID>][<INVALID>]
 :00059 [10] %8 = %7
 :00060 [09] br =>:00062
+:00061 [09] %8 = nil
+:00062 [09] %8 = @prg_ref: -
 :00063 [10] %9 = 32768: i32
 :00064 [11] %10 = 16384: i32
 :00065 [13] %12 = @prg_banks: -
 :00066 [13] %12 = %12.[%6]                       [<INVALID>][<INVALID>]
 :00067 [08] %11 = %12
 :00068 [08] _ = %8.[]=(%9;3)                     [<INVALID>]
 :00070 [09] %8 = @prg_ref: -
 :00071 [10] %9 = 49152: i32
 :00072 [11] %10 = 16384: i32
 :00073 [13] %12 = @prg_banks: -
 :00074 [13] %12 = %12.[%7]                       [<INVALID>][<INVALID>]
 :00075 [08] %11 = %12
 :00076 [08] _ = %8.[]=(%9;3)                     [<INVALID>]
 :00078 [08] ret %12
------------------------------------
------------------------------------
<update_chr> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc1.rb:88
meta:on_stack:true kind:Ruby mode:method FuncId(320) regs:11 ISeq(RubyFuncInfo { id:320 name:update_chr method:(FuncId(320), 0) args: 3 non_temp: 5 temp: 5})
[]
+:00000 [06] init_method reg:10 arg:3 req:3 opt:0 rest:false block:None stack_offset:9
 :00001 [07] %6 = @chr_mode: -
 :00002 [07] _%6 = %1 == %6                       [<INVALID>][<INVALID>]
 :00003 [06] condnotbr _%6 =>:00012
+:00004 [07] %6 = @chr_bank_0: -
 :00005 [07] _%6 = %2 == %6                       [<INVALID>][<INVALID>]
 :00006 [06] condnotbr _%6 =>:00012
+:00007 [07] %6 = @chr_bank_1: -
 :00008 [07] _%6 = %3 == %6                       [<INVALID>][<INVALID>]
 :00009 [06] condnotbr _%6 =>:00012
+:00010 [07] %6 = nil
 :00011 [06] ret %6
+:00012 [07] %6 = %1
 :00013 [08] %7 = %2
 :00014 [09] %8 = %3
 :00015 [09] @chr_mode: - = %6
 :00016 [09] @chr_bank_0: - = %7
 :00017 [09] @chr_bank_1: - = %8
 :00018 [07] %6 = @chr_ram: -
 :00019 [06] condnotbr %6 =>:00022
+:00020 [07] %6 = nil
 :00021 [06] ret %6
+:00022 [07] %6 = @ppu: -
 :00023 [08] %7 = 0: i32
 :00024 [06] _ = %6.update(%7;1)                  [<INVALID>]
 :00026 [07] %6 = @chr_mode: -
 :00027 [08] %7 = :conseq
 :00028 [07] _%6 = %6 == %7                       [<INVALID>][<INVALID>]
 :00029 [06] condnotbr _%6 =>:00034
+:00030 [07] %6 = @chr_bank_0: -
 :00031 [06] %4 = %6 & 30: i16                    [<INVALID>][<INVALID>]
 :00032 [06] %5 = %4 + 1: i16                     [<INVALID>][<INVALID>]
 :00033 [06] br =>:00036
+:00034 [06] %4 = @chr_bank_0: -
 :00035 [06] %5 = @chr_bank_1: -
+:00036 [07] %6 = @chr_ref: -
 :00037 [08] %7 = 0: i32
 :00038 [09] %8 = 4096: i32
 :00039 [11] %10 = @chr_banks: -
 :00040 [11] %10 = %10.[%4]                       [<INVALID>][<INVALID>]
 :00041 [06] %9 = %10
 :00042 [06] _ = %6.[]=(%7;3)                     [<INVALID>]
 :00044 [07] %6 = @chr_ref: -
 :00045 [08] %7 = 4096: i32
 :00046 [09] %8 = 4096: i32
 :00047 [11] %10 = @chr_banks: -
 :00048 [11] %10 = %10.[%5]                       [<INVALID>][<INVALID>]
 :00049 [06] %9 = %10
 :00050 [06] _ = %6.[]=(%7;3)                     [<INVALID>]
 :00052 [06] ret %10
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/mapper/uxrom.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(321) regs:2 ISeq(RubyFuncInfo { id:321 name:/main method:(FuncId(321), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(322)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/mapper/uxrom.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(322) regs:2 ISeq(RubyFuncInfo { id:322 name:Optcarrot method:(FuncId(322), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[ROM]                      [<INVALID>]
 :00002 [02] %1 = class_def UxROM < %1: FuncId(323)
 :00003 [01] ret %1
------------------------------------
------------------------------------
<UxROM> /home/monochrome/optcarrot/lib/optcarrot/mapper/uxrom.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(323) regs:4 ISeq(RubyFuncInfo { id:323 name:UxROM method:(FuncId(323), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = const[MAPPER_DB]                [<INVALID>]
 :00002 [03] %2 = 2: i32
 :00003 [04] %3 = %0
 :00004 [01] %1:.[%2:] = %3
 :00005 [01] method_def reset: FuncId(324)
 :00006 [01] method_def poke_8000: FuncId(325)
 :00007 [02] %1 = :poke_8000
 :00008 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/mapper/uxrom.rb:6
meta:on_stack:true kind:Ruby mode:method FuncId(324) regs:5 ISeq(RubyFuncInfo { id:324 name:reset method:(FuncId(324), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @cpu: -
 :00002 [03] %2 = literal[32768..65535]
 :00003 [04] %3 = @prg_ref: -
 :00004 [05] %4 = :poke_8000
 :00005 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00007 [02] %1 = %1.add_mappings(%2;3)           [<INVALID>]
 :00009 [01] ret %1
------------------------------------
------------------------------------
<poke_8000> /home/monochrome/optcarrot/lib/optcarrot/mapper/uxrom.rb:10
meta:on_stack:true kind:Ruby mode:method FuncId(325) regs:9 ISeq(RubyFuncInfo { id:325 name:poke_8000 method:(FuncId(325), 0) args: 2 non_temp: 2 temp: 6})
[]
+:00000 [03] init_method reg:8 arg:2 req:2 opt:0 rest:false block:None stack_offset:8
 :00001 [04] %3 = @prg_ref: -
 :00002 [05] %4 = 32768: i32
 :00003 [06] %5 = 16384: i32
 :00004 [08] %7 = @prg_banks: -
 :00005 [09] %8 = %2 & 7: i16                     [<INVALID>][<INVALID>]
 :00006 [08] %7 = %7.[%8]                         [<INVALID>][<INVALID>]
 :00007 [03] %6 = %7
 :00008 [03] _ = %3.[]=(%4;3)                     [<INVALID>]
 :00010 [03] ret %7
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/mapper/cnrom.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(326) regs:2 ISeq(RubyFuncInfo { id:326 name:/main method:(FuncId(326), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(327)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/mapper/cnrom.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(327) regs:2 ISeq(RubyFuncInfo { id:327 name:Optcarrot method:(FuncId(327), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[ROM]                      [<INVALID>]
 :00002 [02] %1 = class_def CNROM < %1: FuncId(328)
 :00003 [01] ret %1
------------------------------------
------------------------------------
<CNROM> /home/monochrome/optcarrot/lib/optcarrot/mapper/cnrom.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(328) regs:4 ISeq(RubyFuncInfo { id:328 name:CNROM method:(FuncId(328), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = const[MAPPER_DB]                [<INVALID>]
 :00002 [03] %2 = 3: i32
 :00003 [04] %3 = %0
 :00004 [01] %1:.[%2:] = %3
 :00005 [01] method_def reset: FuncId(329)
 :00006 [01] method_def poke_8000: FuncId(330)
 :00007 [02] %1 = :poke_8000
 :00008 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/mapper/cnrom.rb:6
meta:on_stack:true kind:Ruby mode:method FuncId(329) regs:5 ISeq(RubyFuncInfo { id:329 name:reset method:(FuncId(329), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @cpu: -
 :00002 [03] %2 = literal[32768..65535]
 :00003 [04] %3 = @prg_ref: -
 :00004 [05] %4 = @chr_ram: -
 :00005 [04] condnotbr %4 =>:00008
+:00006 [05] %4 = nil
 :00007 [05] br =>:00011
+:00008 [05] %4 = :poke_8000
 :00009 [05] %4 = %0.method(%4;1)                 [<INVALID>]
+:00011 [02] %1 = %1.add_mappings(%2;3)           [<INVALID>]
 :00013 [01] ret %1
------------------------------------
------------------------------------
<poke_8000> /home/monochrome/optcarrot/lib/optcarrot/mapper/cnrom.rb:10
meta:on_stack:true kind:Ruby mode:method FuncId(330) regs:6 ISeq(RubyFuncInfo { id:330 name:poke_8000 method:(FuncId(330), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @chr_ref: -
 :00002 [05] %4 = @chr_banks: -
 :00003 [06] %5 = %2 & 3: i16                     [<INVALID>][<INVALID>]
 :00004 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00005 [04] %3 = %3.replace(%4;1)                [<INVALID>]
 :00007 [03] ret %3
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(331) regs:2 ISeq(RubyFuncInfo { id:331 name:/main method:(FuncId(331), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(332)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(332) regs:2 ISeq(RubyFuncInfo { id:332 name:Optcarrot method:(FuncId(332), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[ROM]                      [<INVALID>]
 :00002 [02] %1 = class_def MMC3 < %1: FuncId(333)
 :00003 [01] ret %1
------------------------------------
------------------------------------
<MMC3> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(333) regs:4 ISeq(RubyFuncInfo { id:333 name:MMC3 method:(FuncId(333), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = const[MAPPER_DB]                [<INVALID>]
 :00002 [03] %2 = 4: i32
 :00003 [04] %3 = %0
 :00004 [01] %1:.[%2:] = %3
 :00005 [01] method_def init: FuncId(334)
 :00006 [01] method_def reset: FuncId(335)
 :00007 [01] method_def update_prg: FuncId(336)
 :00008 [01] method_def update_chr: FuncId(337)
 :00009 [01] method_def poke_8000: FuncId(338)
 :00010 [01] method_def poke_8001: FuncId(339)
 :00011 [01] method_def poke_a000: FuncId(340)
 :00012 [01] method_def poke_a001: FuncId(341)
 :00013 [01] method_def poke_c000: FuncId(342)
 :00014 [01] method_def poke_c001: FuncId(343)
 :00015 [01] method_def poke_e000: FuncId(344)
 :00016 [01] method_def poke_e001: FuncId(345)
 :00017 [01] method_def vsync: FuncId(346)
 :00018 [01] method_def a12_signaled: FuncId(347)
 :00019 [02] %1 = :a12_signaled
 :00020 [01] ret %1
------------------------------------
------------------------------------
<init> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:6
meta:on_stack:true kind:Ruby mode:method FuncId(334) regs:4 ISeq(RubyFuncInfo { id:334 name:init method:(FuncId(334), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:0 opt:1 rest:false block:None stack_offset:5
 :00001 [02] check_local(%1) =>:00003
+:00002 [02] %1 = :B
+:00003 [03] %2 = :A
 :00004 [03] %2 = %1 != %2                        [<INVALID>][<INVALID>]
 :00005 [02] @persistant: - = %2
 :00006 [03] %2 = @prg_banks: -
 :00007 [03] %2 = %2.flatten()                    [<INVALID>]
 :00009 [04] %3 = 8192: i32
 :00010 [03] %2 = %2.each_slice(%3;1)             [<INVALID>]
 :00012 [03] %2 = %2.to_a()                       [<INVALID>]
 :00014 [02] @prg_banks: - = %2
 :00015 [03] %2 = literal[false]
 :00016 [02] @prg_bank_swap: - = %2
 :00017 [03] %2 = @chr_banks: -
 :00018 [03] %2 = %2.flatten()                    [<INVALID>]
 :00020 [04] %3 = 1024: i32
 :00021 [03] %2 = %2.each_slice(%3;1)             [<INVALID>]
 :00023 [03] %2 = %2.to_a()                       [<INVALID>]
 :00025 [02] @chr_banks: - = %2
 :00026 [03] %2 = literal[[nil]]
 :00027 [03] %2 = %2 * 8: i16                     [<INVALID>][<INVALID>]
 :00028 [02] @chr_bank_mapping: - = %2
 :00029 [03] %2 = literal[false]
 :00030 [02] @chr_bank_swap: - = %2
 :00031 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:17
meta:on_stack:true kind:Ruby mode:method FuncId(335) regs:6 ISeq(RubyFuncInfo { id:335 name:reset method:(FuncId(335), 0) args: 0 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[true]
 :00002 [02] @wrk_readable: - = %2
 :00003 [03] %2 = literal[false]
 :00004 [02] @wrk_writable: - = %2
 :00005 [03] %2 = @mirroring: -
 :00006 [04] %3 = :FourScreen
 :00007 [03] _%2 = %2 != %3                       [<INVALID>][<INVALID>]
 :00008 [02] condnotbr _%2 =>:00013
+:00009 [03] %2 = :poke_a000
 :00010 [03] %2 = %0.method(%2;1)                 [<INVALID>]
 :00012 [03] br =>:00014
+:00013 [03] %2 = nil
+:00014 [03] %1 = %2
 :00015 [03] %2 = @cpu: -
 :00016 [04] %3 = literal[24576..32767]
 :00017 [05] %4 = :peek_6000
 :00018 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00020 [06] %5 = :poke_6000
 :00021 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00023 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00025 [03] %2 = @cpu: -
 :00026 [04] %3 = 32768: i32
 :00027 [05] %4 = 40959: i32
 :00028 [06] %5 = 2: i32
 :00029 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00031 [05] %4 = @prg_ref: -
 :00032 [06] %5 = :poke_8000
 :00033 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00035 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00037 [03] %2 = @cpu: -
 :00038 [04] %3 = 32769: i32
 :00039 [05] %4 = 40959: i32
 :00040 [06] %5 = 2: i32
 :00041 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00043 [05] %4 = @prg_ref: -
 :00044 [06] %5 = :poke_8001
 :00045 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00047 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00049 [03] %2 = @cpu: -
 :00050 [04] %3 = 40960: i32
 :00051 [05] %4 = 49151: i32
 :00052 [06] %5 = 2: i32
 :00053 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00055 [05] %4 = @prg_ref: -
 :00056 [06] %5 = %1
 :00057 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00059 [03] %2 = @cpu: -
 :00060 [04] %3 = 40961: i32
 :00061 [05] %4 = 49151: i32
 :00062 [06] %5 = 2: i32
 :00063 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00065 [05] %4 = @prg_ref: -
 :00066 [06] %5 = :poke_a001
 :00067 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00069 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00071 [03] %2 = @cpu: -
 :00072 [04] %3 = 49152: i32
 :00073 [05] %4 = 57343: i32
 :00074 [06] %5 = 2: i32
 :00075 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00077 [05] %4 = @prg_ref: -
 :00078 [06] %5 = :poke_c000
 :00079 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00081 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00083 [03] %2 = @cpu: -
 :00084 [04] %3 = 49153: i32
 :00085 [05] %4 = 57343: i32
 :00086 [06] %5 = 2: i32
 :00087 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00089 [05] %4 = @prg_ref: -
 :00090 [06] %5 = :poke_c001
 :00091 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00093 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00095 [03] %2 = @cpu: -
 :00096 [04] %3 = 57344: i32
 :00097 [05] %4 = 65535: i32
 :00098 [06] %5 = 2: i32
 :00099 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00101 [05] %4 = @prg_ref: -
 :00102 [06] %5 = :poke_e000
 :00103 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00105 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00107 [03] %2 = @cpu: -
 :00108 [04] %3 = 57345: i32
 :00109 [05] %4 = 65535: i32
 :00110 [06] %5 = 2: i32
 :00111 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00113 [05] %4 = @prg_ref: -
 :00114 [06] %5 = :poke_e001
 :00115 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00117 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00119 [03] %2 = 32768: i32
 :00120 [04] %3 = 0: i32
 :00121 [02] _ = %0.update_prg(%2;2)              [<INVALID>]
 :00123 [03] %2 = 40960: i32
 :00124 [04] %3 = 1: i32
 :00125 [02] _ = %0.update_prg(%2;2)              [<INVALID>]
 :00127 [03] %2 = 49152: i32
 :00128 [04] %3 = -2: i32
 :00129 [02] _ = %0.update_prg(%2;2)              [<INVALID>]
 :00131 [03] %2 = 57344: i32
 :00132 [04] %3 = -1: i32
 :00133 [02] _ = %0.update_prg(%2;2)              [<INVALID>]
 :00135 [03] %2 = 8: i32
 :00136 [04] %3 = literal[22806529]
 :00137 [02] _ = %2.times( &%3)                   [<INVALID>]
 :00139 [03] %2 = 0: i32
 :00140 [02] @clock: - = %2
 :00141 [03] %2 = const[PPU::RP2C02_CC]           [<INVALID>]
 :00142 [03] %2 = %2 * 16: i16                    [<INVALID>][<INVALID>]
 :00143 [02] @hold: - = %2
 :00144 [03] %2 = @ppu: -
 :00145 [04] %3 = %0
 :00146 [02] _ = %2.monitor_a12_rising_edge(%3;1) [<INVALID>]
 :00148 [03] %2 = @cpu: -
 :00149 [04] %3 = literal[true]
 :00150 [02] _ = %2.ppu_sync=(%3;1)               [<INVALID>]
 :00152 [03] %2 = 0: i32
 :00153 [02] @count: - = %2
 :00154 [03] %2 = 0: i32
 :00155 [02] @latch: - = %2
 :00156 [03] %2 = literal[false]
 :00157 [02] @reload: - = %2
 :00158 [03] %2 = literal[false]
 :00159 [02] @enabled: - = %2
 :00160 [02] ret %2
------------------------------------
------------------------------------
<update_prg> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:54
meta:on_stack:true kind:Ruby mode:method FuncId(336) regs:8 ISeq(RubyFuncInfo { id:336 name:update_prg method:(FuncId(336), 0) args: 2 non_temp: 2 temp: 5})
[]
+:00000 [03] init_method reg:7 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %3 = @prg_banks: -
 :00002 [04] %3 = %3.size()                       [<INVALID>]
 :00004 [03] %2 = %2 % %3                         [<INVALID>][<INVALID>]
 :00005 [04] %3 = @prg_bank_swap: -
 :00006 [03] condnotbr %3 =>:00012
+:00007 [04] %3 = 13: i32
 :00008 [04] %3 = %1.[%3]                         [<INVALID>][<INVALID>]
 :00009 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00010 [03] condnotbr _%3 =>:00012
+:00011 [03] %1 = %1 ^ 16384: i16                 [<INVALID>][<INVALID>]
+:00012 [04] %3 = @prg_ref: -
 :00013 [05] %4 = %1
 :00014 [06] %5 = 8192: i32
 :00015 [08] %7 = @prg_banks: -
 :00016 [08] %7 = %7.[%2]                         [<INVALID>][<INVALID>]
 :00017 [03] %6 = %7
 :00018 [03] _ = %3.[]=(%4;3)                     [<INVALID>]
 :00020 [03] ret %7
------------------------------------
------------------------------------
<update_chr> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:60
meta:on_stack:true kind:Ruby mode:method FuncId(337) regs:9 ISeq(RubyFuncInfo { id:337 name:update_chr method:(FuncId(337), 0) args: 2 non_temp: 3 temp: 5})
[]
+:00000 [04] init_method reg:8 arg:2 req:2 opt:0 rest:false block:None stack_offset:8
 :00001 [05] %4 = @chr_ram: -
 :00002 [04] condnotbr %4 =>:00005
+:00003 [05] %4 = nil
 :00004 [04] ret %4
+:00005 [04] %3 = %1 / 1024: i16                  [<INVALID>][<INVALID>]
 :00006 [05] %4 = @chr_banks: -
 :00007 [05] %4 = %4.size()                       [<INVALID>]
 :00009 [04] %2 = %2 % %4                         [<INVALID>][<INVALID>]
 :00010 [05] %4 = @chr_bank_mapping: -
 :00011 [05] %4 = %4.[%3]                         [<INVALID>][<INVALID>]
 :00012 [05] _%4 = %4 == %2                       [<INVALID>][<INVALID>]
 :00013 [04] condnotbr _%4 =>:00016
+:00014 [05] %4 = nil
 :00015 [04] ret %4
+:00016 [05] %4 = @chr_bank_swap: -
 :00017 [04] condnotbr %4 =>:00019
+:00018 [04] %1 = %1 ^ 4096: i16                  [<INVALID>][<INVALID>]
+:00019 [05] %4 = @ppu: -
 :00020 [06] %5 = 0: i32
 :00021 [04] _ = %4.update(%5;1)                  [<INVALID>]
 :00023 [05] %4 = @chr_ref: -
 :00024 [06] %5 = %1
 :00025 [07] %6 = 1024: i32
 :00026 [09] %8 = @chr_banks: -
 :00027 [09] %8 = %8.[%2]                         [<INVALID>][<INVALID>]
 :00028 [04] %7 = %8
 :00029 [04] _ = %4.[]=(%5;3)                     [<INVALID>]
 :00031 [05] %4 = @chr_bank_mapping: -
 :00032 [04] %4:.[%3:] = %2
 :00033 [04] ret %2
------------------------------------
------------------------------------
<poke_8000> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:71
meta:on_stack:true kind:Ruby mode:method FuncId(338) regs:17 ISeq(RubyFuncInfo { id:338 name:poke_8000 method:(FuncId(338), 0) args: 2 non_temp: 4 temp: 12})
[]
+:00000 [05] init_method reg:16 arg:2 req:2 opt:0 rest:false block:None stack_offset:12
 :00001 [06] %5 = %2 & 7: i16                     [<INVALID>][<INVALID>]
 :00002 [05] @reg_select: - = %5
 :00003 [06] %5 = 6: i32
 :00004 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00005 [05] %3 = %5 == 1: i16                    [<INVALID>][<INVALID>]
 :00006 [06] %5 = 7: i32
 :00007 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00008 [05] %4 = %5 == 1: i16                    [<INVALID>][<INVALID>]
 :00009 [06] %5 = @prg_bank_swap: -
 :00010 [06] _%5 = %3 != %5                       [<INVALID>][<INVALID>]
 :00011 [05] condnotbr _%5 =>:00035
+:00012 [05] @prg_bank_swap: - = %3
 :00013 [06] %5 = @prg_ref: -
 :00014 [07] %6 = 32768: i32
 :00015 [08] %7 = 8192: i32
 :00016 [10] %9 = @prg_ref: -
 :00017 [11] %10 = 49152: i32
 :00018 [12] %11 = 8192: i32
 :00019 [14] %13 = @prg_ref: -
 :00020 [15] %14 = 49152: i32
 :00021 [16] %15 = 8192: i32
 :00022 [14] %13 = %13.[](%14;2)                  [<INVALID>]
 :00024 [15] %14 = @prg_ref: -
 :00025 [16] %15 = 32768: i32
 :00026 [17] %16 = 8192: i32
 :00027 [15] %14 = %14.[](%15;2)                  [<INVALID>]
 :00029 [15] %8 = %13
 :00030 [15] _ = %5.[]=(%6;3)                     [<INVALID>]
 :00032 [15] %12 = %14
 :00033 [15] _ = %9.[]=(%10;3)                    [<INVALID>]
+:00035 [06] %5 = @chr_bank_swap: -
 :00036 [06] _%5 = %4 != %5                       [<INVALID>][<INVALID>]
 :00037 [05] condnotbr _%5 =>:00056
+:00038 [05] @chr_bank_swap: - = %4
 :00039 [06] %5 = @chr_ram: -
 :00040 [05] condnotbr %5 =>:00043
+:00041 [06] %5 = nil
 :00042 [05] ret %5
+:00043 [06] %5 = @ppu: -
 :00044 [07] %6 = 0: i32
 :00045 [05] _ = %5.update(%6;1)                  [<INVALID>]
 :00047 [06] %5 = @chr_ref: -
 :00048 [07] %6 = 4096: i32
 :00049 [05] _ = %5.rotate!(%6;1)                 [<INVALID>]
 :00051 [06] %5 = @chr_bank_mapping: -
 :00052 [07] %6 = 4: i32
 :00053 [06] %5 = %5.rotate!(%6;1)                [<INVALID>]
 :00055 [05] ret %5
+:00056 [06] %5 = nil
 :00057 [05] ret %5
------------------------------------
------------------------------------
<poke_8001> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:91
meta:on_stack:true kind:Ruby mode:method FuncId(339) regs:5 ISeq(RubyFuncInfo { id:339 name:poke_8001 method:(FuncId(339), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @reg_select: -
 :00002 [04] _%3 = %3 < 6: i16                    [<INVALID>][<INVALID>]
 :00003 [03] condnotbr _%3 =>:00027
+:00004 [04] %3 = @reg_select: -
 :00005 [04] _%3 = %3 < 2: i16                    [<INVALID>][<INVALID>]
 :00006 [03] condnotbr _%3 =>:00019
+:00007 [04] %3 = @reg_select: -
 :00008 [04] %3 = %3 * 2048: i16                  [<INVALID>][<INVALID>]
 :00009 [05] %4 = %2 & 254: i16                   [<INVALID>][<INVALID>]
 :00010 [03] _ = %0.update_chr(%3;2)              [<INVALID>]
 :00012 [04] %3 = @reg_select: -
 :00013 [04] %3 = %3 * 2048: i16                  [<INVALID>][<INVALID>]
 :00014 [04] %3 = %3 + 1024: i16                  [<INVALID>][<INVALID>]
 :00015 [05] %4 = %2 | 1: i16                     [<INVALID>][<INVALID>]
 :00016 [04] %3 = %0.update_chr(%3;2)             [<INVALID>]
 :00018 [03] ret %3
+:00019 [04] %3 = @reg_select: -
 :00020 [04] %3 = %3 - 2: i16                     [<INVALID>][<INVALID>]
 :00021 [04] %3 = %3 * 1024: i16                  [<INVALID>][<INVALID>]
 :00022 [04] %3 = %3 + 4096: i16                  [<INVALID>][<INVALID>]
 :00023 [05] %4 = %2
 :00024 [04] %3 = %0.update_chr(%3;2)             [<INVALID>]
 :00026 [03] ret %3
+:00027 [04] %3 = @reg_select: -
 :00028 [04] %3 = %3 - 6: i16                     [<INVALID>][<INVALID>]
 :00029 [04] %3 = %3 * 8192: i16                  [<INVALID>][<INVALID>]
 :00030 [05] %4 = 32768: i32
 :00031 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00032 [05] %4 = %2 & 63: i16                    [<INVALID>][<INVALID>]
 :00033 [04] %3 = %0.update_prg(%3;2)             [<INVALID>]
 :00035 [03] ret %3
------------------------------------
------------------------------------
<poke_a000> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:104
meta:on_stack:true kind:Ruby mode:method FuncId(340) regs:5 ISeq(RubyFuncInfo { id:340 name:poke_a000 method:(FuncId(340), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @ppu: -
 :00002 [05] %4 = 0: i32
 :00003 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00004 [05] _%4 = %4 == 1: i16                   [<INVALID>][<INVALID>]
 :00005 [04] condnotbr _%4 =>:00008
+:00006 [05] %4 = :horizontal
 :00007 [05] br =>:00009
+:00008 [05] %4 = :vertical
+:00009 [03] _ = %3.nametables=(%4;1)             [<INVALID>]
 :00011 [03] ret %4
------------------------------------
------------------------------------
<poke_a001> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:108
meta:on_stack:true kind:Ruby mode:method FuncId(341) regs:5 ISeq(RubyFuncInfo { id:341 name:poke_a001 method:(FuncId(341), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = 7: i32
 :00002 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00003 [04] %3 = %3 == 1: i16                    [<INVALID>][<INVALID>]
 :00004 [03] @wrk_readable: - = %3
 :00005 [05] %4 = 6: i32
 :00006 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00007 [04] %3 = %4 == 0: i16                    [<INVALID>][<INVALID>]
 :00008 [04] condnotbr %3 =>:00010
+:00009 [04] %3 = @wrk_readable: -
+:00010 [03] @wrk_writable: - = %3
 :00011 [03] ret %3
------------------------------------
------------------------------------
<poke_c000> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:113
meta:on_stack:true kind:Ruby mode:method FuncId(342) regs:5 ISeq(RubyFuncInfo { id:342 name:poke_c000 method:(FuncId(342), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @ppu: -
 :00002 [05] %4 = 0: i32
 :00003 [03] _ = %3.update(%4;1)                  [<INVALID>]
 :00005 [03] @latch: - = %2
 :00006 [03] ret %2
------------------------------------
------------------------------------
<poke_c001> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:118
meta:on_stack:true kind:Ruby mode:method FuncId(343) regs:5 ISeq(RubyFuncInfo { id:343 name:poke_c001 method:(FuncId(343), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @ppu: -
 :00002 [05] %4 = 0: i32
 :00003 [03] _ = %3.update(%4;1)                  [<INVALID>]
 :00005 [04] %3 = literal[true]
 :00006 [03] @reload: - = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
<poke_e000> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:123
meta:on_stack:true kind:Ruby mode:method FuncId(344) regs:5 ISeq(RubyFuncInfo { id:344 name:poke_e000 method:(FuncId(344), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @ppu: -
 :00002 [05] %4 = 0: i32
 :00003 [03] _ = %3.update(%4;1)                  [<INVALID>]
 :00005 [04] %3 = literal[false]
 :00006 [03] @enabled: - = %3
 :00007 [04] %3 = @cpu: -
 :00008 [05] %4 = const[CPU::IRQ_EXT]             [<INVALID>]
 :00009 [04] %3 = %3.clear_irq(%4;1)              [<INVALID>]
 :00011 [03] ret %3
------------------------------------
------------------------------------
<poke_e001> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:129
meta:on_stack:true kind:Ruby mode:method FuncId(345) regs:5 ISeq(RubyFuncInfo { id:345 name:poke_e001 method:(FuncId(345), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @ppu: -
 :00002 [05] %4 = 0: i32
 :00003 [03] _ = %3.update(%4;1)                  [<INVALID>]
 :00005 [04] %3 = literal[true]
 :00006 [03] @enabled: - = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
<vsync> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:134
meta:on_stack:true kind:Ruby mode:method FuncId(346) regs:4 ISeq(RubyFuncInfo { id:346 name:vsync method:(FuncId(346), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clock: -
 :00002 [03] %2 = @cpu: -
 :00003 [03] %2 = %2.next_frame_clock()           [<INVALID>]
 :00005 [02] _%1 = %1 > %2                        [<INVALID>][<INVALID>]
 :00006 [01] condnotbr _%1 =>:00013
+:00007 [02] %1 = @clock: -
 :00008 [03] %2 = @cpu: -
 :00009 [03] %2 = %2.next_frame_clock()           [<INVALID>]
 :00011 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00012 [02] br =>:00014
+:00013 [02] %1 = 0: i32
+:00014 [01] @clock: - = %1
 :00015 [01] ret %1
------------------------------------
------------------------------------
<a12_signaled> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:138
meta:on_stack:true kind:Ruby mode:method FuncId(347) regs:7 ISeq(RubyFuncInfo { id:347 name:a12_signaled method:(FuncId(347), 0) args: 1 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = @clock: -
 :00002 [06] %5 = @hold: -
 :00003 [06] %5 = %1 + %5                         [<INVALID>][<INVALID>]
 :00004 [06] %2 = %4
 :00005 [06] @clock: - = %5
 :00006 [05] _%4 = %1 < %2                        [<INVALID>][<INVALID>]
 :00007 [04] condnotbr _%4 =>:00010
+:00008 [05] %4 = nil
 :00009 [04] ret %4
+:00010 [05] %4 = @persistant: -
 :00011 [05] condbr %4 =>:00014
+:00012 [06] %5 = @count: -
 :00013 [05] %4 = %5 > 0: i16                     [<INVALID>][<INVALID>]
+:00014 [04] %3 = %4
 :00015 [05] %4 = @reload: -
 :00016 [04] condnotbr %4 =>:00022
+:00017 [05] %4 = literal[false]
 :00018 [04] @reload: - = %4
 :00019 [05] %4 = @latch: -
 :00020 [04] @count: - = %4
 :00021 [04] br =>:00031
+:00022 [05] %4 = @count: -
 :00023 [05] _%4 = %4 == 0: i16                   [<INVALID>][<INVALID>]
 :00024 [04] condnotbr _%4 =>:00028
+:00025 [05] %4 = @latch: -
 :00026 [04] @count: - = %4
 :00027 [04] br =>:00031
+:00028 [05] %4 = @count: -
 :00029 [05] %4 = %4 - 1: i16                     [<INVALID>][<INVALID>]
 :00030 [04] @count: - = %4
+:00031 [04] condnotbr %3 =>:00043
+:00032 [05] %4 = @count: -
 :00033 [05] _%4 = %4 == 0: i16                   [<INVALID>][<INVALID>]
 :00034 [04] condnotbr _%4 =>:00043
+:00035 [05] %4 = @enabled: -
 :00036 [04] condnotbr %4 =>:00043
+:00037 [05] %4 = @cpu: -
 :00038 [06] %5 = const[CPU::IRQ_EXT]             [<INVALID>]
 :00039 [07] %6 = %1
 :00040 [05] %4 = %4.do_irq(%5;2)                 [<INVALID>]
 :00042 [04] ret %4
+:00043 [05] %4 = nil
 :00044 [04] ret %4
------------------------------------
------------------------------------
<block in reset> /home/monochrome/optcarrot/lib/optcarrot/mapper/mmc3.rb:36
meta:on_stack:true kind:Ruby mode:method FuncId(348) regs:4 ISeq(RubyFuncInfo { id:348 name:<unnamed> method:(FuncId(335), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1 * 1024: i16                  [<INVALID>][<INVALID>]
 :00002 [04] %3 = %1
 :00003 [03] %2 = %0.update_chr(%2;2)             [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(349) regs:2 ISeq(RubyFuncInfo { id:349 name:/main method:(FuncId(349), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(350)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(350) regs:2 ISeq(RubyFuncInfo { id:350 name:Optcarrot method:(FuncId(350), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] _ = class_def Pads < _: FuncId(351)
 :00002 [02] %1 = class_def Pad < _: FuncId(352)
 :00003 [01] ret %1
------------------------------------
------------------------------------
<Pads> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(351) regs:2 ISeq(RubyFuncInfo { id:351 name:Pads method:(FuncId(351), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] method_def inspect: FuncId(353)
 :00002 [01] method_def initialize: FuncId(354)
 :00003 [01] method_def reset: FuncId(355)
 :00004 [01] method_def peek_401x: FuncId(356)
 :00005 [01] method_def poke_4016: FuncId(357)
 :00006 [01] method_def keydown: FuncId(358)
 :00007 [01] method_def keyup: FuncId(359)
 :00008 [02] %1 = :keyup
 :00009 [01] ret %1
------------------------------------
------------------------------------
<Pad> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:49
meta:on_stack:true kind:Ruby mode:class_def FuncId(352) regs:2 ISeq(RubyFuncInfo { id:352 name:Pad method:(FuncId(352), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 0: i32
 :00002 [01] const[A] = %1
 :00003 [02] %1 = 1: i32
 :00004 [01] const[B] = %1
 :00005 [02] %1 = 2: i32
 :00006 [01] const[SELECT] = %1
 :00007 [02] %1 = 3: i32
 :00008 [01] const[START] = %1
 :00009 [02] %1 = 4: i32
 :00010 [01] const[UP] = %1
 :00011 [02] %1 = 5: i32
 :00012 [01] const[DOWN] = %1
 :00013 [02] %1 = 6: i32
 :00014 [01] const[LEFT] = %1
 :00015 [02] %1 = 7: i32
 :00016 [01] const[RIGHT] = %1
 :00017 [01] method_def initialize: FuncId(360)
 :00018 [01] method_def reset: FuncId(361)
 :00019 [01] method_def poke: FuncId(362)
 :00020 [01] method_def peek: FuncId(363)
 :00021 [01] method_def poll_state: FuncId(364)
 :00022 [02] %1 = :buttons
 :00023 [02] %1 = %0.attr_accessor(%1;1)          [<INVALID>]
 :00025 [01] ret %1
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:4
meta:on_stack:true kind:Ruby mode:method FuncId(353) regs:4 ISeq(RubyFuncInfo { id:353 name:inspect method:(FuncId(353), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["#<"]
 :00002 [03] %2 = %0.class()                      [<INVALID>]
 :00004 [04] %3 = literal[">"]
 :00005 [02] %1 = concat(%1; 3)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:11
meta:on_stack:true kind:Ruby mode:method FuncId(354) regs:8 ISeq(RubyFuncInfo { id:354 name:initialize method:(FuncId(354), 0) args: 3 non_temp: 3 temp: 4})
[]
+:00000 [04] init_method reg:7 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [04] @conf: - = %1
 :00002 [04] @cpu: - = %2
 :00003 [04] @apu: - = %3
 :00004 [06] %5 = const[Pad]                      [<INVALID>]
 :00005 [06] %5 = %5.new()                        [<INVALID>]
 :00007 [07] %6 = const[Pad]                      [<INVALID>]
 :00008 [07] %6 = %6.new()                        [<INVALID>]
 :00010 [05] %4 = array[%5; 2]
 :00011 [04] @pads: - = %4
 :00012 [04] ret %4
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:18
meta:on_stack:true kind:Ruby mode:method FuncId(355) regs:6 ISeq(RubyFuncInfo { id:355 name:reset method:(FuncId(355), 0) args: 0 non_temp: 0 temp: 5})
[]
+:00000 [01] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @cpu: -
 :00002 [03] %2 = 16406: i32
 :00003 [04] %3 = :peek_401x
 :00004 [04] %3 = %0.method(%3;1)                 [<INVALID>]
 :00006 [05] %4 = :poke_4016
 :00007 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00009 [01] _ = %1.add_mappings(%2;3)            [<INVALID>]
 :00011 [02] %1 = @cpu: -
 :00012 [03] %2 = 16407: i32
 :00013 [04] %3 = :peek_401x
 :00014 [04] %3 = %0.method(%3;1)                 [<INVALID>]
 :00016 [05] %4 = @apu: -
 :00017 [06] %5 = :poke_4017
 :00018 [05] %4 = %4.method(%5;1)                 [<INVALID>]
 :00020 [01] _ = %1.add_mappings(%2;3)            [<INVALID>]
 :00022 [02] %1 = @pads: -
 :00023 [03] %2 = 0: i32
 :00024 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00025 [01] _ = %1.reset()                       [<INVALID>]
 :00027 [02] %1 = @pads: -
 :00028 [03] %2 = 1: i32
 :00029 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00030 [02] %1 = %1.reset()                      [<INVALID>]
 :00032 [01] ret %1
------------------------------------
------------------------------------
<peek_401x> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:25
meta:on_stack:true kind:Ruby mode:method FuncId(356) regs:4 ISeq(RubyFuncInfo { id:356 name:peek_401x method:(FuncId(356), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @cpu: -
 :00002 [02] _ = %2.update()                      [<INVALID>]
 :00004 [03] %2 = @pads: -
 :00005 [04] %3 = %1 - 16406: i16                 [<INVALID>][<INVALID>]
 :00006 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00007 [03] %2 = %2.peek()                       [<INVALID>]
 :00009 [03] %2 = %2 | 64: i16                    [<INVALID>][<INVALID>]
 :00010 [02] ret %2
------------------------------------
------------------------------------
<poke_4016> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:30
meta:on_stack:true kind:Ruby mode:method FuncId(357) regs:5 ISeq(RubyFuncInfo { id:357 name:poke_4016 method:(FuncId(357), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @pads: -
 :00002 [05] %4 = 0: i32
 :00003 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00004 [03] _ = %3.poke(%2;1)                    [<INVALID>]
 :00006 [04] %3 = @pads: -
 :00007 [05] %4 = 1: i32
 :00008 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00009 [04] %3 = %3.poke(%2;1)                   [<INVALID>]
 :00011 [03] ret %3
------------------------------------
------------------------------------
<keydown> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:38
meta:on_stack:true kind:Ruby mode:method FuncId(358) regs:6 ISeq(RubyFuncInfo { id:358 name:keydown method:(FuncId(358), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @pads: -
 :00002 [04] %3 = %3.[%1]                         [<INVALID>][<INVALID>]
 :00003 [05] %4 = @pads: -
 :00004 [05] %4 = %4.[%1]                         [<INVALID>][<INVALID>]
 :00005 [05] %4 = %4.buttons()                    [<INVALID>]
 :00007 [06] %5 = 1: i32
 :00008 [06] %5 = %5.<<(%2;1)                     [<INVALID>]
 :00010 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00011 [03] _ = %3.buttons=(%4;1)                [<INVALID>]
 :00013 [03] ret %4
------------------------------------
------------------------------------
<keyup> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:42
meta:on_stack:true kind:Ruby mode:method FuncId(359) regs:7 ISeq(RubyFuncInfo { id:359 name:keyup method:(FuncId(359), 0) args: 2 non_temp: 2 temp: 4})
[]
+:00000 [03] init_method reg:6 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %3 = @pads: -
 :00002 [04] %3 = %3.[%1]                         [<INVALID>][<INVALID>]
 :00003 [05] %4 = @pads: -
 :00004 [05] %4 = %4.[%1]                         [<INVALID>][<INVALID>]
 :00005 [05] %4 = %4.buttons()                    [<INVALID>]
 :00007 [07] %6 = 1: i32
 :00008 [06] %5 = %6.<<(%2;1)                     [<INVALID>]
 :00010 [06] %5 = ~%5                             [<INVALID>]
 :00011 [05] %4 = %4 & %5                         [<INVALID>][<INVALID>]
 :00012 [03] _ = %3.buttons=(%4;1)                [<INVALID>]
 :00014 [03] ret %4
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:59
meta:on_stack:true kind:Ruby mode:method FuncId(360) regs:2 ISeq(RubyFuncInfo { id:360 name:initialize method:(FuncId(360), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = %0.reset()                      [<INVALID>]
 :00003 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:63
meta:on_stack:true kind:Ruby mode:method FuncId(361) regs:2 ISeq(RubyFuncInfo { id:361 name:reset method:(FuncId(361), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[false]
 :00002 [01] @strobe: - = %1
 :00003 [02] %1 = 0: i32
 :00004 [01] @stream: - = %1
 :00005 [01] @buttons: - = %1
 :00006 [01] ret %1
------------------------------------
------------------------------------
<poke> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:68
meta:on_stack:true kind:Ruby mode:method FuncId(362) regs:5 ISeq(RubyFuncInfo { id:362 name:poke method:(FuncId(362), 0) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @strobe: -
 :00002 [04] %3 = 0: i32
 :00003 [04] %3 = %1.[%3]                         [<INVALID>][<INVALID>]
 :00004 [04] %3 = %3 == 1: i16                    [<INVALID>][<INVALID>]
 :00005 [03] @strobe: - = %3
 :00006 [03] condnotbr %2 =>:00018
+:00007 [04] %3 = @strobe: -
 :00008 [04] %3 = !%3                             [<INVALID>]
 :00009 [03] condnotbr %3 =>:00018
+:00010 [04] %3 = %0.poll_state()                 [<INVALID>]
 :00012 [05] %4 = 1: i32
 :00013 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00015 [04] %3 = %3 ^ -512: i16                  [<INVALID>][<INVALID>]
 :00016 [03] @stream: - = %3
 :00017 [03] ret %3
+:00018 [04] %3 = nil
 :00019 [03] ret %3
------------------------------------
------------------------------------
<peek> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:74
meta:on_stack:true kind:Ruby mode:method FuncId(363) regs:3 ISeq(RubyFuncInfo { id:363 name:peek method:(FuncId(363), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @strobe: -
 :00002 [01] condnotbr %1 =>:00007
+:00003 [02] %1 = %0.poll_state()                 [<INVALID>]
 :00005 [02] %1 = %1 & 1: i16                     [<INVALID>][<INVALID>]
 :00006 [01] ret %1
+:00007 [02] %1 = @stream: -
 :00008 [03] %2 = 1: i32
 :00009 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00011 [01] @stream: - = %1
 :00012 [02] %1 = @stream: -
 :00013 [03] %2 = 0: i32
 :00014 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00015 [01] ret %1
------------------------------------
------------------------------------
<poll_state> /home/monochrome/optcarrot/lib/optcarrot/pad.rb:80
meta:on_stack:true kind:Ruby mode:method FuncId(364) regs:3 ISeq(RubyFuncInfo { id:364 name:poll_state method:(FuncId(364), 0) args: 0 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @buttons: -
 :00002 [03] %2 = %1 & 48: i16                    [<INVALID>][<INVALID>]
 :00003 [03] _%2 = %2 == 48: i16                  [<INVALID>][<INVALID>]
 :00004 [02] condnotbr _%2 =>:00006
+:00005 [02] %1 = %1 & 207: i16                   [<INVALID>][<INVALID>]
+:00006 [03] %2 = %1 & 192: i16                   [<INVALID>][<INVALID>]
 :00007 [03] _%2 = %2 == 192: i16                 [<INVALID>][<INVALID>]
 :00008 [02] condnotbr _%2 =>:00010
+:00009 [02] %1 = %1 & 63: i16                    [<INVALID>][<INVALID>]
+:00010 [02] ret %1
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(367) regs:2 ISeq(RubyFuncInfo { id:367 name:/main method:(FuncId(367), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal["opt"]
 :00002 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00004 [02] %1 = module_def Optcarrot: FuncId(368)
 :00005 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(368) regs:2 ISeq(RubyFuncInfo { id:368 name:Optcarrot method:(FuncId(368), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = class_def CPU < _: FuncId(369)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<CPU> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:5
meta:on_stack:true kind:Ruby mode:class_def FuncId(369) regs:10 ISeq(RubyFuncInfo { id:369 name:CPU method:(FuncId(369), 0) args: 0 non_temp: 0 temp: 9})
[]
+:00000 [01] init_method reg:9 arg:0 req:0 opt:0 rest:false block:None stack_offset:8
 :00001 [02] %1 = 65530: i32
 :00002 [01] const[NMI_VECTOR] = %1
 :00003 [02] %1 = 65532: i32
 :00004 [01] const[RESET_VECTOR] = %1
 :00005 [02] %1 = 65534: i32
 :00006 [01] const[IRQ_VECTOR] = %1
 :00007 [02] %1 = 1: i32
 :00008 [01] const[IRQ_EXT] = %1
 :00009 [02] %1 = 64: i32
 :00010 [01] const[IRQ_FRAME] = %1
 :00011 [02] %1 = 128: i32
 :00012 [01] const[IRQ_DMC] = %1
 :00013 [02] %1 = literal[1..8]
 :00014 [03] %2 = literal[24248321]
 :00015 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00017 [02] %2; 8 = expand(%1)
 :00018 [02] const[CLK_1] = %2
 :00019 [02] const[CLK_2] = %3
 :00020 [02] const[CLK_3] = %4
 :00021 [02] const[CLK_4] = %5
 :00022 [02] const[CLK_5] = %6
 :00023 [02] const[CLK_6] = %7
 :00024 [02] const[CLK_7] = %8
 :00025 [02] const[CLK_8] = %9
 :00026 [01] method_def inspect: FuncId(371)
 :00027 [01] method_def initialize: FuncId(372)
 :00028 [01] method_def reset: FuncId(373)
 :00029 [01] method_def peek_ram: FuncId(374)
 :00030 [01] method_def poke_ram: FuncId(375)
 :00031 [01] method_def peek_nop: FuncId(376)
 :00032 [01] method_def peek_jam_1: FuncId(377)
 :00033 [01] method_def peek_jam_2: FuncId(378)
 :00034 [01] method_def add_mappings: FuncId(379)
 :00035 [02] %1 = %0
 :00036 [01] singleton_method_def %1.poke_nop: FuncId(380)
 :00037 [01] method_def fetch: FuncId(381)
 :00038 [01] method_def store: FuncId(382)
 :00039 [01] method_def peek16: FuncId(383)
 :00040 [02] %1 = :ram
 :00041 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00043 [02] %1 = :apu
 :00044 [03] %2 = :ppu
 :00045 [04] %3 = :ppu_sync
 :00046 [01] _ = %0.attr_writer(%1;3)             [<INVALID>]
 :00048 [01] method_def current_clock: FuncId(384)
 :00049 [01] method_def next_frame_clock: FuncId(385)
 :00050 [01] method_def next_frame_clock=: FuncId(386)
 :00051 [01] method_def steal_clocks: FuncId(387)
 :00052 [01] method_def odd_clock?: FuncId(388)
 :00053 [01] method_def update: FuncId(389)
 :00054 [01] method_def dmc_dma: FuncId(390)
 :00055 [01] method_def sprite_dma: FuncId(391)
 :00056 [01] method_def boot: FuncId(392)
 :00057 [01] method_def vsync: FuncId(393)
 :00058 [01] method_def clear_irq: FuncId(394)
 :00059 [01] method_def next_interrupt_clock: FuncId(395)
 :00060 [01] method_def do_irq: FuncId(396)
 :00061 [01] method_def do_nmi: FuncId(397)
 :00062 [01] method_def do_isr: FuncId(398)
 :00063 [01] method_def fetch_irq_isr_vector: FuncId(399)
 :00064 [01] method_def flags_pack: FuncId(400)
 :00065 [01] method_def flags_unpack: FuncId(401)
 :00066 [01] method_def branch: FuncId(402)
 :00067 [01] method_def store_mem: FuncId(403)
 :00068 [01] method_def store_zpg: FuncId(404)
 :00069 [01] method_def push8: FuncId(405)
 :00070 [01] method_def push16: FuncId(406)
 :00071 [01] method_def pull8: FuncId(407)
 :00072 [01] method_def pull16: FuncId(408)
 :00073 [01] method_def imm: FuncId(409)
 :00074 [01] method_def zpg: FuncId(410)
 :00075 [01] method_def zpg_reg: FuncId(411)
 :00076 [01] method_def zpg_x: FuncId(412)
 :00077 [01] method_def zpg_y: FuncId(413)
 :00078 [01] method_def abs: FuncId(414)
 :00079 [01] method_def abs_reg: FuncId(415)
 :00080 [01] method_def abs_x: FuncId(416)
 :00081 [01] method_def abs_y: FuncId(417)
 :00082 [01] method_def ind_x: FuncId(418)
 :00083 [01] method_def ind_y: FuncId(419)
 :00084 [01] method_def read_write: FuncId(420)
 :00085 [01] method_def _lda: FuncId(421)
 :00086 [01] method_def _ldx: FuncId(422)
 :00087 [01] method_def _ldy: FuncId(423)
 :00088 [01] method_def _sta: FuncId(424)
 :00089 [01] method_def _stx: FuncId(425)
 :00090 [01] method_def _sty: FuncId(426)
 :00091 [01] method_def _tax: FuncId(427)
 :00092 [01] method_def _tay: FuncId(428)
 :00093 [01] method_def _txa: FuncId(429)
 :00094 [01] method_def _tya: FuncId(430)
 :00095 [01] method_def _jmp_a: FuncId(431)
 :00096 [01] method_def _jmp_i: FuncId(432)
 :00097 [01] method_def _jsr: FuncId(433)
 :00098 [01] method_def _rts: FuncId(434)
 :00099 [01] method_def _rti: FuncId(435)
 :00100 [01] method_def _bne: FuncId(436)
 :00101 [01] method_def _beq: FuncId(437)
 :00102 [01] method_def _bmi: FuncId(438)
 :00103 [01] method_def _bpl: FuncId(439)
 :00104 [01] method_def _bcs: FuncId(440)
 :00105 [01] method_def _bcc: FuncId(441)
 :00106 [01] method_def _bvs: FuncId(442)
 :00107 [01] method_def _bvc: FuncId(443)
 :00108 [01] method_def _adc: FuncId(444)
 :00109 [01] method_def _sbc: FuncId(445)
 :00110 [01] method_def _and: FuncId(446)
 :00111 [01] method_def _ora: FuncId(447)
 :00112 [01] method_def _eor: FuncId(448)
 :00113 [01] method_def _bit: FuncId(449)
 :00114 [01] method_def _cmp: FuncId(450)
 :00115 [01] method_def _cpx: FuncId(451)
 :00116 [01] method_def _cpy: FuncId(452)
 :00117 [01] method_def _asl: FuncId(453)
 :00118 [01] method_def _lsr: FuncId(454)
 :00119 [01] method_def _rol: FuncId(455)
 :00120 [01] method_def _ror: FuncId(456)
 :00121 [01] method_def _dec: FuncId(457)
 :00122 [01] method_def _inc: FuncId(458)
 :00123 [01] method_def _dex: FuncId(459)
 :00124 [01] method_def _dey: FuncId(460)
 :00125 [01] method_def _inx: FuncId(461)
 :00126 [01] method_def _iny: FuncId(462)
 :00127 [01] method_def _clc: FuncId(463)
 :00128 [01] method_def _sec: FuncId(464)
 :00129 [01] method_def _cld: FuncId(465)
 :00130 [01] method_def _sed: FuncId(466)
 :00131 [01] method_def _clv: FuncId(467)
 :00132 [01] method_def _sei: FuncId(468)
 :00133 [01] method_def _cli: FuncId(469)
 :00134 [01] method_def _pha: FuncId(470)
 :00135 [01] method_def _php: FuncId(471)
 :00136 [01] method_def _pla: FuncId(472)
 :00137 [01] method_def _plp: FuncId(473)
 :00138 [01] method_def _tsx: FuncId(474)
 :00139 [01] method_def _txs: FuncId(475)
 :00140 [01] method_def _anc: FuncId(476)
 :00141 [01] method_def _ane: FuncId(477)
 :00142 [01] method_def _arr: FuncId(478)
 :00143 [01] method_def _asr: FuncId(479)
 :00144 [01] method_def _dcp: FuncId(480)
 :00145 [01] method_def _isb: FuncId(481)
 :00146 [01] method_def _las: FuncId(482)
 :00147 [01] method_def _lax: FuncId(483)
 :00148 [01] method_def _lxa: FuncId(484)
 :00149 [01] method_def _rla: FuncId(485)
 :00150 [01] method_def _rra: FuncId(486)
 :00151 [01] method_def _sax: FuncId(487)
 :00152 [01] method_def _sbx: FuncId(488)
 :00153 [01] method_def _sha: FuncId(489)
 :00154 [01] method_def _shs: FuncId(490)
 :00155 [01] method_def _shx: FuncId(491)
 :00156 [01] method_def _shy: FuncId(492)
 :00157 [01] method_def _slo: FuncId(493)
 :00158 [01] method_def _sre: FuncId(494)
 :00159 [01] method_def _nop: FuncId(495)
 :00160 [01] method_def _brk: FuncId(496)
 :00161 [01] method_def _jam: FuncId(497)
 :00162 [01] method_def r_op: FuncId(498)
 :00163 [01] method_def w_op: FuncId(499)
 :00164 [01] method_def rw_op: FuncId(500)
 :00165 [01] method_def a_op: FuncId(501)
 :00166 [01] method_def no_op: FuncId(502)
 :00167 [01] method_def do_clock: FuncId(503)
 :00168 [01] method_def run: FuncId(504)
 :00169 [03] %2 = :ctl
 :00170 [04] %3 = literal[[:imm, :zpg, :imm, :abs, nil, :zpg_x, nil, :abs_x]]
 :00171 [05] %4 = :rmw
 :00172 [06] %5 = literal[[:imm, :zpg, :imm, :abs, nil, :zpg_y, nil, :abs_y]]
 :00173 [07] %6 = :alu
 :00174 [08] %7 = literal[[:ind_x, :zpg, :imm, :abs, :ind_y, :zpg_x, :abs_y, :abs_x]]
 :00175 [09] %8 = :uno
 :00176 [10] %9 = literal[[:ind_x, :zpg, :imm, :abs, :ind_y, :zpg_y, :abs_y, :abs_y]]
 :00177 [02] %1 = hash[%2; 4]
 :00178 [01] const[ADDRESSING_MODES] = %1
 :00179 [02] %1 = literal[[]]
 :00180 [01] const[DISPATCH] = %1
 :00181 [02] %1 = %0
 :00182 [01] singleton_method_def %1.op: FuncId(505)
 :00183 [02] %1 = literal[[169, 165, 181, 173, 189, 185, 161, 177]]
 :00184 [03] %2 = literal[[:r_op, :_lda, :alu]]
 :00185 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00187 [02] %1 = literal[[162, 166, 182, 174, 190]]
 :00188 [03] %2 = literal[[:r_op, :_ldx, :rmw]]
 :00189 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00191 [02] %1 = literal[[160, 164, 180, 172, 188]]
 :00192 [03] %2 = literal[[:r_op, :_ldy, :ctl]]
 :00193 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00195 [02] %1 = literal[[133, 149, 141, 157, 153, 129, 145]]
 :00196 [03] %2 = literal[[:w_op, :_sta, :alu]]
 :00197 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00199 [02] %1 = literal[[134, 150, 142]]
 :00200 [03] %2 = literal[[:w_op, :_stx, :rmw]]
 :00201 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00203 [02] %1 = literal[[132, 148, 140]]
 :00204 [03] %2 = literal[[:w_op, :_sty, :ctl]]
 :00205 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00207 [02] %1 = literal[[170]]
 :00208 [03] %2 = :_tax
 :00209 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00211 [02] %1 = literal[[168]]
 :00212 [03] %2 = :_tay
 :00213 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00215 [02] %1 = literal[[138]]
 :00216 [03] %2 = :_txa
 :00217 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00219 [02] %1 = literal[[152]]
 :00220 [03] %2 = :_tya
 :00221 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00223 [02] %1 = literal[[76]]
 :00224 [03] %2 = :_jmp_a
 :00225 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00227 [02] %1 = literal[[108]]
 :00228 [03] %2 = :_jmp_i
 :00229 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00231 [02] %1 = literal[[32]]
 :00232 [03] %2 = :_jsr
 :00233 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00235 [02] %1 = literal[[96]]
 :00236 [03] %2 = :_rts
 :00237 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00239 [02] %1 = literal[[64]]
 :00240 [03] %2 = :_rti
 :00241 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00243 [02] %1 = literal[[208]]
 :00244 [03] %2 = :_bne
 :00245 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00247 [02] %1 = literal[[240]]
 :00248 [03] %2 = :_beq
 :00249 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00251 [02] %1 = literal[[48]]
 :00252 [03] %2 = :_bmi
 :00253 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00255 [02] %1 = literal[[16]]
 :00256 [03] %2 = :_bpl
 :00257 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00259 [02] %1 = literal[[176]]
 :00260 [03] %2 = :_bcs
 :00261 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00263 [02] %1 = literal[[144]]
 :00264 [03] %2 = :_bcc
 :00265 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00267 [02] %1 = literal[[112]]
 :00268 [03] %2 = :_bvs
 :00269 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00271 [02] %1 = literal[[80]]
 :00272 [03] %2 = :_bvc
 :00273 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00275 [02] %1 = literal[[105, 101, 117, 109, 125, 121, 97, 113]]
 :00276 [03] %2 = literal[[:r_op, :_adc, :alu]]
 :00277 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00279 [02] %1 = literal[[233, 235, 229, 245, 237, 253, 249, 225, 241]]
 :00280 [03] %2 = literal[[:r_op, :_sbc, :alu]]
 :00281 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00283 [02] %1 = literal[[41, 37, 53, 45, 61, 57, 33, 49]]
 :00284 [03] %2 = literal[[:r_op, :_and, :alu]]
 :00285 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00287 [02] %1 = literal[[9, 5, 21, 13, 29, 25, 1, 17]]
 :00288 [03] %2 = literal[[:r_op, :_ora, :alu]]
 :00289 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00291 [02] %1 = literal[[73, 69, 85, 77, 93, 89, 65, 81]]
 :00292 [03] %2 = literal[[:r_op, :_eor, :alu]]
 :00293 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00295 [02] %1 = literal[[36, 44]]
 :00296 [03] %2 = literal[[:r_op, :_bit, :alu]]
 :00297 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00299 [02] %1 = literal[[201, 197, 213, 205, 221, 217, 193, 209]]
 :00300 [03] %2 = literal[[:r_op, :_cmp, :alu]]
 :00301 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00303 [02] %1 = literal[[224, 228, 236]]
 :00304 [03] %2 = literal[[:r_op, :_cpx, :rmw]]
 :00305 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00307 [02] %1 = literal[[192, 196, 204]]
 :00308 [03] %2 = literal[[:r_op, :_cpy, :rmw]]
 :00309 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00311 [02] %1 = literal[[10]]
 :00312 [03] %2 = literal[[:a_op, :_asl]]
 :00313 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00315 [02] %1 = literal[[6, 22, 14, 30]]
 :00316 [03] %2 = literal[[:rw_op, :_asl, :alu]]
 :00317 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00319 [02] %1 = literal[[74]]
 :00320 [03] %2 = literal[[:a_op, :_lsr]]
 :00321 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00323 [02] %1 = literal[[70, 86, 78, 94]]
 :00324 [03] %2 = literal[[:rw_op, :_lsr, :alu]]
 :00325 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00327 [02] %1 = literal[[42]]
 :00328 [03] %2 = literal[[:a_op, :_rol]]
 :00329 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00331 [02] %1 = literal[[38, 54, 46, 62]]
 :00332 [03] %2 = literal[[:rw_op, :_rol, :alu]]
 :00333 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00335 [02] %1 = literal[[106]]
 :00336 [03] %2 = literal[[:a_op, :_ror]]
 :00337 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00339 [02] %1 = literal[[102, 118, 110, 126]]
 :00340 [03] %2 = literal[[:rw_op, :_ror, :alu]]
 :00341 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00343 [02] %1 = literal[[198, 214, 206, 222]]
 :00344 [03] %2 = literal[[:rw_op, :_dec, :alu]]
 :00345 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00347 [02] %1 = literal[[230, 246, 238, 254]]
 :00348 [03] %2 = literal[[:rw_op, :_inc, :alu]]
 :00349 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00351 [02] %1 = literal[[202]]
 :00352 [03] %2 = :_dex
 :00353 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00355 [02] %1 = literal[[136]]
 :00356 [03] %2 = :_dey
 :00357 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00359 [02] %1 = literal[[232]]
 :00360 [03] %2 = :_inx
 :00361 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00363 [02] %1 = literal[[200]]
 :00364 [03] %2 = :_iny
 :00365 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00367 [02] %1 = literal[[24]]
 :00368 [03] %2 = :_clc
 :00369 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00371 [02] %1 = literal[[56]]
 :00372 [03] %2 = :_sec
 :00373 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00375 [02] %1 = literal[[216]]
 :00376 [03] %2 = :_cld
 :00377 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00379 [02] %1 = literal[[248]]
 :00380 [03] %2 = :_sed
 :00381 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00383 [02] %1 = literal[[88]]
 :00384 [03] %2 = :_cli
 :00385 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00387 [02] %1 = literal[[120]]
 :00388 [03] %2 = :_sei
 :00389 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00391 [02] %1 = literal[[184]]
 :00392 [03] %2 = :_clv
 :00393 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00395 [02] %1 = literal[[72]]
 :00396 [03] %2 = :_pha
 :00397 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00399 [02] %1 = literal[[8]]
 :00400 [03] %2 = :_php
 :00401 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00403 [02] %1 = literal[[104]]
 :00404 [03] %2 = :_pla
 :00405 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00407 [02] %1 = literal[[40]]
 :00408 [03] %2 = :_plp
 :00409 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00411 [02] %1 = literal[[186]]
 :00412 [03] %2 = :_tsx
 :00413 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00415 [02] %1 = literal[[154]]
 :00416 [03] %2 = :_txs
 :00417 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00419 [02] %1 = literal[[11, 43]]
 :00420 [03] %2 = literal[[:r_op, :_anc, :uno]]
 :00421 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00423 [02] %1 = literal[[139]]
 :00424 [03] %2 = literal[[:r_op, :_ane, :uno]]
 :00425 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00427 [02] %1 = literal[[107]]
 :00428 [03] %2 = literal[[:r_op, :_arr, :uno]]
 :00429 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00431 [02] %1 = literal[[75]]
 :00432 [03] %2 = literal[[:r_op, :_asr, :uno]]
 :00433 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00435 [02] %1 = literal[[199, 215, 195, 211, 207, 223, 219]]
 :00436 [03] %2 = literal[[:rw_op, :_dcp, :alu]]
 :00437 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00439 [02] %1 = literal[[231, 247, 239, 255, 251, 227, 243]]
 :00440 [03] %2 = literal[[:rw_op, :_isb, :alu]]
 :00441 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00443 [02] %1 = literal[[187]]
 :00444 [03] %2 = literal[[:r_op, :_las, :uno]]
 :00445 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00447 [02] %1 = literal[[167, 183, 175, 191, 163, 179]]
 :00448 [03] %2 = literal[[:r_op, :_lax, :uno]]
 :00449 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00451 [02] %1 = literal[[171]]
 :00452 [03] %2 = literal[[:r_op, :_lxa, :uno]]
 :00453 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00455 [02] %1 = literal[[39, 55, 47, 63, 59, 35, 51]]
 :00456 [03] %2 = literal[[:rw_op, :_rla, :alu]]
 :00457 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00459 [02] %1 = literal[[103, 119, 111, 127, 123, 99, 115]]
 :00460 [03] %2 = literal[[:rw_op, :_rra, :alu]]
 :00461 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00463 [02] %1 = literal[[135, 151, 143, 131]]
 :00464 [03] %2 = literal[[:w_op, :_sax, :uno]]
 :00465 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00467 [02] %1 = literal[[203]]
 :00468 [03] %2 = literal[[:r_op, :_sbx, :uno]]
 :00469 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00471 [02] %1 = literal[[159, 147]]
 :00472 [03] %2 = literal[[:w_op, :_sha, :uno]]
 :00473 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00475 [02] %1 = literal[[155]]
 :00476 [03] %2 = literal[[:w_op, :_shs, :uno]]
 :00477 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00479 [02] %1 = literal[[158]]
 :00480 [03] %2 = literal[[:w_op, :_shx, :rmw]]
 :00481 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00483 [02] %1 = literal[[156]]
 :00484 [03] %2 = literal[[:w_op, :_shy, :ctl]]
 :00485 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00487 [02] %1 = literal[[7, 23, 15, 31, 27, 3, 19]]
 :00488 [03] %2 = literal[[:rw_op, :_slo, :alu]]
 :00489 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00491 [02] %1 = literal[[71, 87, 79, 95, 91, 67, 83]]
 :00492 [03] %2 = literal[[:rw_op, :_sre, :alu]]
 :00493 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00495 [02] %1 = literal[[26, 58, 90, 122, 218, 234, 250]]
 :00496 [03] %2 = literal[[:no_op, :_nop, 0, 2]]
 :00497 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00499 [02] %1 = literal[[128, 130, 137, 194, 226]]
 :00500 [03] %2 = literal[[:no_op, :_nop, 1, 2]]
 :00501 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00503 [02] %1 = literal[[4, 68, 100]]
 :00504 [03] %2 = literal[[:no_op, :_nop, 1, 3]]
 :00505 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00507 [02] %1 = literal[[20, 52, 84, 116, 212, 244]]
 :00508 [03] %2 = literal[[:no_op, :_nop, 1, 4]]
 :00509 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00511 [02] %1 = literal[[12]]
 :00512 [03] %2 = literal[[:no_op, :_nop, 2, 4]]
 :00513 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00515 [02] %1 = literal[[28, 60, 92, 124, 220, 252]]
 :00516 [03] %2 = literal[[:r_op, :_nop, :ctl]]
 :00517 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00519 [02] %1 = literal[[0]]
 :00520 [03] %2 = :_brk
 :00521 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00523 [02] %1 = literal[[2, 18, 34, 50, 66, 82, 98, 114, 146, 178, 210, 242]]
 :00524 [03] %2 = :_jam
 :00525 [01] _ = %0.op(%1;2)                      [<INVALID>]
 :00527 [02] %1 = class_def OptimizedCodeBuilder < _: FuncId(506)
 :00528 [01] ret %1
------------------------------------
------------------------------------
<block in CPU> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:14
meta:on_stack:true kind:Ruby mode:method FuncId(370) regs:3 ISeq(RubyFuncInfo { id:370 name:<unnamed> method:(FuncId(369), 1) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[RP2A03_CC]                [<INVALID>]
 :00002 [03] %2 = %1 * %2                         [<INVALID>][<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:16
meta:on_stack:true kind:Ruby mode:method FuncId(371) regs:4 ISeq(RubyFuncInfo { id:371 name:inspect method:(FuncId(371), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["#<"]
 :00002 [03] %2 = %0.class()                      [<INVALID>]
 :00004 [04] %3 = literal[">"]
 :00005 [02] %1 = concat(%1; 3)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:23
meta:on_stack:true kind:Ruby mode:method FuncId(372) regs:6 ISeq(RubyFuncInfo { id:372 name:initialize method:(FuncId(372), 0) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [02] @conf: - = %1
 :00002 [03] %2 = @conf: -
 :00003 [03] %2 = %2.load_cpu()                   [<INVALID>]
 :00005 [02] condnotbr %2 =>:00015
+:00006 [03] %2 = const[File]                     [<INVALID>]
 :00007 [04] %3 = @conf: -
 :00008 [04] %3 = %3.load_cpu()                   [<INVALID>]
 :00010 [03] %2 = %2.read(%3;1)                   [<INVALID>]
 :00012 [02] _ = %0.eval(%2;1)                    [<INVALID>]
 :00014 [02] br =>:00034
+:00015 [03] %2 = @conf: -
 :00016 [03] %2 = %2.opt_cpu()                    [<INVALID>]
 :00018 [02] condnotbr %2 =>:00034
+:00019 [03] %2 = const[OptimizedCodeBuilder]     [<INVALID>]
 :00020 [04] %3 = @conf: -
 :00021 [04] %3 = %3.loglevel()                   [<INVALID>]
 :00023 [05] %4 = @conf: -
 :00024 [05] %4 = %4.opt_cpu()                    [<INVALID>]
 :00026 [03] %2 = %2.new(%3;2)                    [<INVALID>]
 :00028 [03] %2 = %2.build()                      [<INVALID>]
 :00030 [04] %3 = nil
 :00031 [05] %4 = literal["(generated CPU core)"]
 :00032 [02] _ = %0.eval(%2;3)                    [<INVALID>]
+:00034 [03] %2 = literal[[nil]]
 :00035 [04] %3 = 65536: i32
 :00036 [03] %2 = %2 * %3                         [<INVALID>][<INVALID>]
 :00037 [02] @fetch: - = %2
 :00038 [03] %2 = literal[[nil]]
 :00039 [04] %3 = 65536: i32
 :00040 [03] %2 = %2 * %3                         [<INVALID>][<INVALID>]
 :00041 [02] @store: - = %2
 :00042 [03] %2 = literal[{}]
 :00043 [02] @peeks: - = %2
 :00044 [03] %2 = literal[{}]
 :00045 [02] @pokes: - = %2
 :00046 [03] %2 = literal[[0]]
 :00047 [03] %2 = %2 * 2048: i16                  [<INVALID>][<INVALID>]
 :00048 [02] @ram: - = %2
 :00049 [03] %2 = 0: i32
 :00050 [02] @clk: - = %2
 :00051 [03] %2 = 0: i32
 :00052 [02] @clk_frame: - = %2
 :00053 [03] %2 = 0: i32
 :00054 [02] @clk_target: - = %2
 :00055 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00056 [02] @clk_nmi: - = %2
 :00057 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00058 [02] @clk_irq: - = %2
 :00059 [03] %2 = 0: i32
 :00060 [02] @clk_total: - = %2
 :00061 [03] %2 = 0: i32
 :00062 [02] @irq_flags: - = %2
 :00063 [03] %2 = literal[false]
 :00064 [02] @jammed: - = %2
 :00065 [03] %2 = const[CPU]                      [<INVALID>]
 :00066 [04] %3 = :poke_nop
 :00067 [03] %2 = %2.method(%3;1)                 [<INVALID>]
 :00069 [02] @poke_nop: - = %2
 :00070 [02] _ = %0.reset()                       [<INVALID>]
 :00072 [03] %2 = 0: i32
 :00073 [02] @data: - = %2
 :00074 [02] @addr: - = %2
 :00075 [03] %2 = nil
 :00076 [02] @opcode: - = %2
 :00077 [03] %2 = literal[false]
 :00078 [02] @ppu_sync: - = %2
 :00079 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:63
meta:on_stack:true kind:Ruby mode:method FuncId(373) regs:5 ISeq(RubyFuncInfo { id:373 name:reset method:(FuncId(373), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = 0: i32
 :00002 [01] @_y: - = %1
 :00003 [01] @_x: - = %1
 :00004 [01] @_a: - = %1
 :00005 [02] %1 = 253: i32
 :00006 [01] @_sp: - = %1
 :00007 [02] %1 = 65532: i32
 :00008 [01] @_pc: - = %1
 :00009 [02] %1 = 1: i32
 :00010 [01] @_p_nz: - = %1
 :00011 [02] %1 = 0: i32
 :00012 [01] @_p_c: - = %1
 :00013 [02] %1 = 0: i32
 :00014 [01] @_p_v: - = %1
 :00015 [02] %1 = 4: i32
 :00016 [01] @_p_i: - = %1
 :00017 [02] %1 = 0: i32
 :00018 [01] @_p_d: - = %1
 :00019 [02] %1 = 0: i32
 :00020 [01] @clk_total: - = %1
 :00021 [01] @clk: - = %1
 :00022 [02] %1 = @ram: -
 :00023 [03] %2 = 255: i32
 :00024 [01] _ = %1.fill(%2;1)                    [<INVALID>]
 :00026 [02] %1 = literal[0..2047]
 :00027 [03] %2 = @ram: -
 :00028 [04] %3 = @ram: -
 :00029 [05] %4 = :[]=
 :00030 [04] %3 = %3.method(%4;1)                 [<INVALID>]
 :00032 [01] _ = %0.add_mappings(%1;3)            [<INVALID>]
 :00034 [02] %1 = literal[2048..8191]
 :00035 [03] %2 = :peek_ram
 :00036 [03] %2 = %0.method(%2;1)                 [<INVALID>]
 :00038 [04] %3 = :poke_ram
 :00039 [04] %3 = %0.method(%3;1)                 [<INVALID>]
 :00041 [01] _ = %0.add_mappings(%1;3)            [<INVALID>]
 :00043 [02] %1 = literal[8192..65535]
 :00044 [03] %2 = :peek_nop
 :00045 [03] %2 = %0.method(%2;1)                 [<INVALID>]
 :00047 [04] %3 = nil
 :00048 [01] _ = %0.add_mappings(%1;3)            [<INVALID>]
 :00050 [02] %1 = 65532: i32
 :00051 [03] %2 = :peek_jam_1
 :00052 [03] %2 = %0.method(%2;1)                 [<INVALID>]
 :00054 [04] %3 = nil
 :00055 [01] _ = %0.add_mappings(%1;3)            [<INVALID>]
 :00057 [02] %1 = 65533: i32
 :00058 [03] %2 = :peek_jam_2
 :00059 [03] %2 = %0.method(%2;1)                 [<INVALID>]
 :00061 [04] %3 = nil
 :00062 [02] %1 = %0.add_mappings(%1;3)           [<INVALID>]
 :00064 [01] ret %1
------------------------------------
------------------------------------
<peek_ram> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:90
meta:on_stack:true kind:Ruby mode:method FuncId(374) regs:4 ISeq(RubyFuncInfo { id:374 name:peek_ram method:(FuncId(374), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @ram: -
 :00002 [04] %3 = %1 % 2048: i16                  [<INVALID>][<INVALID>]
 :00003 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<poke_ram> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:94
meta:on_stack:true kind:Ruby mode:method FuncId(375) regs:5 ISeq(RubyFuncInfo { id:375 name:poke_ram method:(FuncId(375), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @ram: -
 :00002 [05] %4 = %1 % 2048: i16                  [<INVALID>][<INVALID>]
 :00003 [03] %3:.[%4:] = %2
 :00004 [03] ret %2
------------------------------------
------------------------------------
<peek_nop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:98
meta:on_stack:true kind:Ruby mode:method FuncId(376) regs:3 ISeq(RubyFuncInfo { id:376 name:peek_nop method:(FuncId(376), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 8: i32
 :00002 [03] %2 = %1.>>(%2;1)                     [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<peek_jam_1> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:102
meta:on_stack:true kind:Ruby mode:method FuncId(377) regs:4 ISeq(RubyFuncInfo { id:377 name:peek_jam_1 method:(FuncId(377), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @_pc: -
 :00002 [03] %2 = %2 - 1: i16                     [<INVALID>][<INVALID>]
 :00003 [04] %3 = 65535: i32
 :00004 [03] %2 = %2 & %3                         [<INVALID>][<INVALID>]
 :00005 [02] @_pc: - = %2
 :00006 [03] %2 = 252: i32
 :00007 [02] ret %2
------------------------------------
------------------------------------
<peek_jam_2> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:107
meta:on_stack:true kind:Ruby mode:method FuncId(378) regs:3 ISeq(RubyFuncInfo { id:378 name:peek_jam_2 method:(FuncId(378), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 255: i32
 :00002 [02] ret %2
------------------------------------
------------------------------------
<add_mappings> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:114
meta:on_stack:true kind:Ruby mode:method FuncId(379) regs:7 ISeq(RubyFuncInfo { id:379 name:add_mappings method:(FuncId(379), 0) args: 3 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [06] %5 = @peeks: -
 :00002 [05] %4 = %5.[%2]                         [<INVALID>][<INVALID>]
 :00003 [05] condbr %4 =>:00007
+:00004 [06] %5 = @peeks: -
 :00005 [06] %4 = %2
 :00006 [05] %5:.[%2:] = %4
+:00007 [04] %2 = %4
 :00008 [06] %5 = @pokes: -
 :00009 [05] %4 = %5.[%3]                         [<INVALID>][<INVALID>]
 :00010 [05] condbr %4 =>:00014
+:00011 [06] %5 = @pokes: -
 :00012 [06] %4 = %3
 :00013 [05] %5:.[%3:] = %4
+:00014 [04] %3 = %4
 :00015 [05] %4 = const[Integer]                  [<INVALID>]
 :00016 [05] %4 = %1.is_a?(%4;1)                  [<INVALID>]
 :00018 [04] condnotbr %4 =>:00022
+:00019 [06] %5 = %1
 :00020 [05] %4 = array[%5; 1]
 :00021 [05] br =>:00023
+:00022 [05] %4 = %1
+:00023 [06] %5 = literal[33226753]
 :00024 [05] %4 = %4.each( &%5)                   [<INVALID>]
 :00026 [04] ret %4
------------------------------------
------------------------------------
<poke_nop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:125
meta:on_stack:true kind:Ruby mode:method FuncId(380) regs:4 ISeq(RubyFuncInfo { id:380 name:poke_nop method:(FuncId(380), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [04] %3 = nil
 :00002 [03] ret %3
------------------------------------
------------------------------------
<fetch> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:128
meta:on_stack:true kind:Ruby mode:method FuncId(381) regs:3 ISeq(RubyFuncInfo { id:381 name:fetch method:(FuncId(381), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @fetch: -
 :00002 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00003 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<store> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:132
meta:on_stack:true kind:Ruby mode:method FuncId(382) regs:6 ISeq(RubyFuncInfo { id:382 name:store method:(FuncId(382), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @store: -
 :00002 [04] %3 = %3.[%1]                         [<INVALID>][<INVALID>]
 :00003 [05] %4 = %1
 :00004 [06] %5 = %2
 :00005 [04] %3 = %3.[](%4;2)                     [<INVALID>]
 :00007 [03] ret %3
------------------------------------
------------------------------------
<peek16> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:136
meta:on_stack:true kind:Ruby mode:method FuncId(383) regs:5 ISeq(RubyFuncInfo { id:383 name:peek16 method:(FuncId(383), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @fetch: -
 :00002 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00003 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00004 [04] %3 = @fetch: -
 :00005 [05] %4 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00006 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00007 [05] %4 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00008 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00009 [05] %4 = 8: i32
 :00010 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00012 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00013 [02] ret %2
------------------------------------
------------------------------------
<current_clock> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:146
meta:on_stack:true kind:Ruby mode:method FuncId(384) regs:2 ISeq(RubyFuncInfo { id:384 name:current_clock method:(FuncId(384), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @clk: -
 :00002 [01] ret %1
------------------------------------
------------------------------------
<next_frame_clock> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:150
meta:on_stack:true kind:Ruby mode:method FuncId(385) regs:2 ISeq(RubyFuncInfo { id:385 name:next_frame_clock method:(FuncId(385), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @clk_frame: -
 :00002 [01] ret %1
------------------------------------
------------------------------------
<next_frame_clock=> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:154
meta:on_stack:true kind:Ruby mode:method FuncId(386) regs:3 ISeq(RubyFuncInfo { id:386 name:next_frame_clock= method:(FuncId(386), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] @clk_frame: - = %1
 :00002 [03] %2 = @clk_target: -
 :00003 [03] _%2 = %1 < %2                        [<INVALID>][<INVALID>]
 :00004 [02] condnotbr _%2 =>:00007
+:00005 [02] @clk_target: - = %1
 :00006 [02] ret %1
+:00007 [03] %2 = nil
 :00008 [02] ret %2
------------------------------------
------------------------------------
<steal_clocks> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:159
meta:on_stack:true kind:Ruby mode:method FuncId(387) regs:3 ISeq(RubyFuncInfo { id:387 name:steal_clocks method:(FuncId(387), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @clk: -
 :00002 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00003 [02] @clk: - = %2
 :00004 [02] ret %2
------------------------------------
------------------------------------
<odd_clock?> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:163
meta:on_stack:true kind:Ruby mode:method FuncId(388) regs:3 ISeq(RubyFuncInfo { id:388 name:odd_clock? method:(FuncId(388), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk_total: -
 :00002 [03] %2 = @clk: -
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00005 [02] %1 = %1 % %2                         [<INVALID>][<INVALID>]
 :00006 [02] %1 = %1 != 0: i16                    [<INVALID>][<INVALID>]
 :00007 [01] ret %1
------------------------------------
------------------------------------
<update> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:167
meta:on_stack:true kind:Ruby mode:method FuncId(389) regs:3 ISeq(RubyFuncInfo { id:389 name:update method:(FuncId(389), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @apu: -
 :00002 [03] %2 = @clk: -
 :00003 [01] _ = %1.clock_dma(%2;1)               [<INVALID>]
 :00005 [02] %1 = @clk: -
 :00006 [01] ret %1
------------------------------------
------------------------------------
<dmc_dma> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:172
meta:on_stack:true kind:Ruby mode:method FuncId(390) regs:5 ISeq(RubyFuncInfo { id:390 name:dmc_dma method:(FuncId(390), 0) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @clk: -
 :00002 [05] %4 = const[CLK_3]                    [<INVALID>]
 :00003 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00004 [03] @clk: - = %3
 :00005 [03] %2 = %0.fetch(%1;1)                  [<INVALID>]
 :00007 [04] %3 = @clk: -
 :00008 [05] %4 = const[CLK_1]                    [<INVALID>]
 :00009 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00010 [03] @clk: - = %3
 :00011 [03] ret %2
------------------------------------
------------------------------------
<sprite_dma> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:181
meta:on_stack:true kind:Ruby mode:method FuncId(391) regs:6 ISeq(RubyFuncInfo { id:391 name:sprite_dma method:(FuncId(391), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = 256: i32
 :00002 [05] %4 = literal[33292289]
 :00003 [03] _ = %3.times( &%4)                   [<INVALID>]
 :00005 [04] %3 = 64: i32
 :00006 [05] %4 = literal[33357825]
 :00007 [04] %3 = %3.times( &%4)                  [<INVALID>]
 :00009 [03] ret %3
------------------------------------
------------------------------------
<boot> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:186
meta:on_stack:true kind:Ruby mode:method FuncId(392) regs:2 ISeq(RubyFuncInfo { id:392 name:boot method:(FuncId(392), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[CLK_7]                    [<INVALID>]
 :00002 [01] @clk: - = %1
 :00003 [02] %1 = const[RESET_VECTOR]             [<INVALID>]
 :00004 [02] %1 = %0.peek16(%1;1)                 [<INVALID>]
 :00006 [01] @_pc: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<vsync> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:191
meta:on_stack:true kind:Ruby mode:method FuncId(393) regs:3 ISeq(RubyFuncInfo { id:393 name:vsync method:(FuncId(393), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @ppu_sync: -
 :00002 [01] condnotbr %1 =>:00007
+:00003 [02] %1 = @ppu: -
 :00004 [03] %2 = @clk: -
 :00005 [01] _ = %1.sync(%2;1)                    [<INVALID>]
+:00007 [02] %1 = @clk: -
 :00008 [03] %2 = @clk_frame: -
 :00009 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00010 [01] @clk: - = %1
 :00011 [02] %1 = @clk_total: -
 :00012 [03] %2 = @clk_frame: -
 :00013 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00014 [01] @clk_total: - = %1
 :00015 [02] %1 = @clk_nmi: -
 :00016 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00017 [02] _%1 = %1 != %2                       [<INVALID>][<INVALID>]
 :00018 [01] condnotbr _%1 =>:00023
+:00019 [02] %1 = @clk_nmi: -
 :00020 [03] %2 = @clk_frame: -
 :00021 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00022 [01] @clk_nmi: - = %1
+:00023 [02] %1 = @clk_irq: -
 :00024 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00025 [02] _%1 = %1 != %2                       [<INVALID>][<INVALID>]
 :00026 [01] condnotbr _%1 =>:00031
+:00027 [02] %1 = @clk_irq: -
 :00028 [03] %2 = @clk_frame: -
 :00029 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00030 [01] @clk_irq: - = %1
+:00031 [02] %1 = @clk_irq: -
 :00032 [02] _%1 = %1 < 0: i16                    [<INVALID>][<INVALID>]
 :00033 [01] condnotbr _%1 =>:00037
+:00034 [02] %1 = 0: i32
 :00035 [01] @clk_irq: - = %1
 :00036 [01] ret %1
+:00037 [02] %1 = nil
 :00038 [01] ret %1
------------------------------------
------------------------------------
<clear_irq> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:205
meta:on_stack:true kind:Ruby mode:method FuncId(394) regs:6 ISeq(RubyFuncInfo { id:394 name:clear_irq method:(FuncId(394), 0) args: 1 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @irq_flags: -
 :00002 [05] %4 = const[IRQ_FRAME]                [<INVALID>]
 :00003 [06] %5 = const[IRQ_DMC]                  [<INVALID>]
 :00004 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00005 [03] %2 = %3 & %4                         [<INVALID>][<INVALID>]
 :00006 [04] %3 = @irq_flags: -
 :00007 [05] %4 = const[IRQ_EXT]                  [<INVALID>]
 :00008 [06] %5 = const[IRQ_FRAME]                [<INVALID>]
 :00009 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00010 [06] %5 = const[IRQ_DMC]                  [<INVALID>]
 :00011 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00012 [05] %4 = %1 ^ %4                         [<INVALID>][<INVALID>]
 :00013 [04] %3 = %3 & %4                         [<INVALID>][<INVALID>]
 :00014 [03] @irq_flags: - = %3
 :00015 [04] %3 = @irq_flags: -
 :00016 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00017 [03] condnotbr _%3 =>:00020
+:00018 [04] %3 = const[FOREVER_CLOCK]            [<INVALID>]
 :00019 [03] @clk_irq: - = %3
+:00020 [03] ret %2
------------------------------------
------------------------------------
<next_interrupt_clock> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:212
meta:on_stack:true kind:Ruby mode:method FuncId(395) regs:4 ISeq(RubyFuncInfo { id:395 name:next_interrupt_clock method:(FuncId(395), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[CLK_1]                    [<INVALID>]
 :00002 [04] %3 = const[CLK_1]                    [<INVALID>]
 :00003 [04] %3 = %3 / 2: i16                     [<INVALID>][<INVALID>]
 :00004 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00005 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00006 [03] %2 = @clk_target: -
 :00007 [03] _%2 = %2 > %1                        [<INVALID>][<INVALID>]
 :00008 [02] condnotbr _%2 =>:00010
+:00009 [02] @clk_target: - = %1
+:00010 [02] ret %1
------------------------------------
------------------------------------
<do_irq> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:218
meta:on_stack:true kind:Ruby mode:method FuncId(396) regs:5 ISeq(RubyFuncInfo { id:396 name:do_irq method:(FuncId(396), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @irq_flags: -
 :00002 [04] %3 = %3 | %1                         [<INVALID>][<INVALID>]
 :00003 [03] @irq_flags: - = %3
 :00004 [04] %3 = @clk_irq: -
 :00005 [05] %4 = const[FOREVER_CLOCK]            [<INVALID>]
 :00006 [04] _%3 = %3 == %4                       [<INVALID>][<INVALID>]
 :00007 [03] condnotbr _%3 =>:00015
+:00008 [04] %3 = @_p_i: -
 :00009 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00010 [03] condnotbr _%3 =>:00015
+:00011 [04] %3 = %0.next_interrupt_clock(%2;1)   [<INVALID>]
 :00013 [03] @clk_irq: - = %3
 :00014 [03] ret %3
+:00015 [04] %3 = nil
 :00016 [03] ret %3
------------------------------------
------------------------------------
<do_nmi> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:223
meta:on_stack:true kind:Ruby mode:method FuncId(397) regs:4 ISeq(RubyFuncInfo { id:397 name:do_nmi method:(FuncId(397), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @clk_nmi: -
 :00002 [04] %3 = const[FOREVER_CLOCK]            [<INVALID>]
 :00003 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00004 [02] condnotbr _%2 =>:00009
+:00005 [03] %2 = %0.next_interrupt_clock(%1;1)   [<INVALID>]
 :00007 [02] @clk_nmi: - = %2
 :00008 [02] ret %2
+:00009 [03] %2 = nil
 :00010 [02] ret %2
------------------------------------
------------------------------------
<do_isr> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:227
meta:on_stack:true kind:Ruby mode:method FuncId(398) regs:5 ISeq(RubyFuncInfo { id:398 name:do_isr method:(FuncId(398), 0) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @jammed: -
 :00002 [03] condnotbr %3 =>:00005
+:00003 [04] %3 = nil
 :00004 [03] ret %3
+:00005 [04] %3 = @_pc: -
 :00006 [03] _ = %0.push16(%3;1)                  [<INVALID>]
 :00008 [04] %3 = %0.flags_pack()                 [<INVALID>]
 :00010 [03] _ = %0.push8(%3;1)                   [<INVALID>]
 :00012 [04] %3 = 4: i32
 :00013 [03] @_p_i: - = %3
 :00014 [04] %3 = @clk: -
 :00015 [05] %4 = const[CLK_7]                    [<INVALID>]
 :00016 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00017 [03] @clk: - = %3
 :00018 [04] %3 = const[NMI_VECTOR]               [<INVALID>]
 :00019 [04] _%3 = %1 == %3                       [<INVALID>][<INVALID>]
 :00020 [03] condnotbr _%3 =>:00023
+:00021 [04] %3 = const[NMI_VECTOR]               [<INVALID>]
 :00022 [04] br =>:00025
+:00023 [04] %3 = %0.fetch_irq_isr_vector()       [<INVALID>]
+:00025 [04] %2 = %3
 :00026 [04] %3 = %0.peek16(%2;1)                 [<INVALID>]
 :00028 [03] @_pc: - = %3
 :00029 [03] ret %3
------------------------------------
------------------------------------
<fetch_irq_isr_vector> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:237
meta:on_stack:true kind:Ruby mode:method FuncId(399) regs:3 ISeq(RubyFuncInfo { id:399 name:fetch_irq_isr_vector method:(FuncId(399), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = @clk_frame: -
 :00003 [02] _%1 = %1 >= %2                       [<INVALID>][<INVALID>]
 :00004 [01] condnotbr _%1 =>:00008
+:00005 [02] %1 = 12288: i32
 :00006 [01] _ = %0.fetch(%1;1)                   [<INVALID>]
+:00008 [02] %1 = @clk_nmi: -
 :00009 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00010 [02] _%1 = %1 != %2                       [<INVALID>][<INVALID>]
 :00011 [01] condnotbr _%1 =>:00025
+:00012 [02] %1 = @clk_nmi: -
 :00013 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00014 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00015 [03] %2 = @clk: -
 :00016 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00017 [01] condnotbr _%1 =>:00022
+:00018 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00019 [01] @clk_nmi: - = %1
 :00020 [02] %1 = const[NMI_VECTOR]               [<INVALID>]
 :00021 [01] ret %1
+:00022 [02] %1 = @clk: -
 :00023 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00024 [01] @clk_nmi: - = %1
+:00025 [02] %1 = const[IRQ_VECTOR]               [<INVALID>]
 :00026 [01] ret %1
------------------------------------
------------------------------------
<flags_pack> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:254
meta:on_stack:true kind:Ruby mode:method FuncId(400) regs:4 ISeq(RubyFuncInfo { id:400 name:flags_pack method:(FuncId(400), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_p_nz: -
 :00002 [03] %2 = @_p_nz: -
 :00003 [04] %3 = 1: i32
 :00004 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00006 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & 128: i16                   [<INVALID>][<INVALID>]
 :00008 [03] %2 = @_p_nz: -
 :00009 [03] %2 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00010 [03] _%2 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00011 [02] condnotbr _%2 =>:00014
+:00012 [03] %2 = 0: i32
 :00013 [03] br =>:00015
+:00014 [03] %2 = 2: i32
+:00015 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00016 [03] %2 = @_p_c: -
 :00017 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00018 [03] %2 = @_p_v: -
 :00019 [03] _%2 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00020 [02] condnotbr _%2 =>:00023
+:00021 [03] %2 = 64: i32
 :00022 [03] br =>:00024
+:00023 [03] %2 = 0: i32
+:00024 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00025 [03] %2 = @_p_i: -
 :00026 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00027 [03] %2 = @_p_d: -
 :00028 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00029 [02] %1 = %1 | 32: i16                    [<INVALID>][<INVALID>]
 :00030 [01] ret %1
------------------------------------
------------------------------------
<flags_unpack> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:265
meta:on_stack:true kind:Ruby mode:method FuncId(401) regs:5 ISeq(RubyFuncInfo { id:401 name:flags_unpack method:(FuncId(401), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = ~%1                             [<INVALID>]
 :00002 [03] %2 = %2 & 2: i16                     [<INVALID>][<INVALID>]
 :00003 [04] %3 = %1 & 128: i16                   [<INVALID>][<INVALID>]
 :00004 [05] %4 = 1: i32
 :00005 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00007 [03] %2 = %2 | %3                         [<INVALID>][<INVALID>]
 :00008 [02] @_p_nz: - = %2
 :00009 [03] %2 = %1 & 1: i16                     [<INVALID>][<INVALID>]
 :00010 [02] @_p_c: - = %2
 :00011 [03] %2 = %1 & 64: i16                    [<INVALID>][<INVALID>]
 :00012 [02] @_p_v: - = %2
 :00013 [03] %2 = %1 & 4: i16                     [<INVALID>][<INVALID>]
 :00014 [02] @_p_i: - = %2
 :00015 [03] %2 = %1 & 8: i16                     [<INVALID>][<INVALID>]
 :00016 [02] @_p_d: - = %2
 :00017 [02] ret %2
------------------------------------
------------------------------------
<branch> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:274
meta:on_stack:true kind:Ruby mode:method FuncId(402) regs:8 ISeq(RubyFuncInfo { id:402 name:branch method:(FuncId(402), 0) args: 1 non_temp: 3 temp: 4})
[]
+:00000 [04] init_method reg:7 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [04] condnotbr %1 =>:00031
+:00002 [05] %4 = @_pc: -
 :00003 [04] %2 = %4 + 1: i16                     [<INVALID>][<INVALID>]
 :00004 [05] %4 = @_pc: -
 :00005 [04] %3 = %0.fetch(%4;1)                  [<INVALID>]
 :00007 [05] _%4 = %3 < 128: i16                  [<INVALID>][<INVALID>]
 :00008 [04] condnotbr _%4 =>:00011
+:00009 [05] %4 = %3
 :00010 [05] br =>:00013
+:00011 [05] %4 = 65280: i32
 :00012 [05] %4 = %3 | %4                         [<INVALID>][<INVALID>]
+:00013 [05] %4 = %2 + %4                         [<INVALID>][<INVALID>]
 :00014 [06] %5 = 65535: i32
 :00015 [05] %4 = %4 & %5                         [<INVALID>][<INVALID>]
 :00016 [04] @_pc: - = %4
 :00017 [05] %4 = @clk: -
 :00018 [06] %5 = 8: i32
 :00019 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00020 [07] %6 = @_pc: -
 :00021 [08] %7 = 8: i32
 :00022 [07] %6 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00023 [06] _%5 = %5 == %6                       [<INVALID>][<INVALID>]
 :00024 [05] condnotbr _%5 =>:00027
+:00025 [06] %5 = const[CLK_3]                    [<INVALID>]
 :00026 [06] br =>:00028
+:00027 [06] %5 = const[CLK_4]                    [<INVALID>]
+:00028 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00029 [04] @clk: - = %4
 :00030 [04] ret %4
+:00031 [05] %4 = @_pc: -
 :00032 [05] %4 = %4 + 1: i16                     [<INVALID>][<INVALID>]
 :00033 [04] @_pc: - = %4
 :00034 [05] %4 = @clk: -
 :00035 [06] %5 = const[CLK_2]                    [<INVALID>]
 :00036 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00037 [04] @clk: - = %4
 :00038 [04] ret %4
------------------------------------
------------------------------------
<store_mem> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:287
meta:on_stack:true kind:Ruby mode:method FuncId(403) regs:3 ISeq(RubyFuncInfo { id:403 name:store_mem method:(FuncId(403), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @addr: -
 :00002 [03] %2 = @data: -
 :00003 [01] _ = %0.store(%1;2)                   [<INVALID>]
 :00005 [02] %1 = @clk: -
 :00006 [03] %2 = const[CLK_1]                    [<INVALID>]
 :00007 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00008 [01] @clk: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<store_zpg> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:292
meta:on_stack:true kind:Ruby mode:method FuncId(404) regs:4 ISeq(RubyFuncInfo { id:404 name:store_zpg method:(FuncId(404), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @ram: -
 :00002 [03] %2 = @addr: -
 :00003 [04] %3 = @data: -
 :00004 [01] %1:.[%2:] = %3
 :00005 [01] ret %3
------------------------------------
------------------------------------
<push8> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:297
meta:on_stack:true kind:Ruby mode:method FuncId(405) regs:4 ISeq(RubyFuncInfo { id:405 name:push8 method:(FuncId(405), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @ram: -
 :00002 [04] %3 = @_sp: -
 :00003 [04] %3 = 256: i16 + %3                   [<INVALID>][<INVALID>]
 :00004 [02] %2:.[%3:] = %1
 :00005 [03] %2 = @_sp: -
 :00006 [03] %2 = %2 - 1: i16                     [<INVALID>][<INVALID>]
 :00007 [03] %2 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00008 [02] @_sp: - = %2
 :00009 [02] ret %2
------------------------------------
------------------------------------
<push16> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:302
meta:on_stack:true kind:Ruby mode:method FuncId(406) regs:3 ISeq(RubyFuncInfo { id:406 name:push16 method:(FuncId(406), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 8: i32
 :00002 [03] %2 = %1.>>(%2;1)                     [<INVALID>]
 :00004 [02] _ = %0.push8(%2;1)                   [<INVALID>]
 :00006 [03] %2 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00007 [03] %2 = %0.push8(%2;1)                  [<INVALID>]
 :00009 [02] ret %2
------------------------------------
------------------------------------
<pull8> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:307
meta:on_stack:true kind:Ruby mode:method FuncId(407) regs:3 ISeq(RubyFuncInfo { id:407 name:pull8 method:(FuncId(407), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_sp: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00004 [01] @_sp: - = %1
 :00005 [02] %1 = @ram: -
 :00006 [03] %2 = @_sp: -
 :00007 [03] %2 = 256: i16 + %2                   [<INVALID>][<INVALID>]
 :00008 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00009 [01] ret %1
------------------------------------
------------------------------------
<pull16> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:312
meta:on_stack:true kind:Ruby mode:method FuncId(408) regs:3 ISeq(RubyFuncInfo { id:408 name:pull16 method:(FuncId(408), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = %0.pull8()                      [<INVALID>]
 :00003 [03] %2 = %0.pull8()                      [<INVALID>]
 :00005 [03] %2 = 256: i16 * %2                   [<INVALID>][<INVALID>]
 :00006 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00007 [01] ret %1
------------------------------------
------------------------------------
<imm> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:320
meta:on_stack:true kind:Ruby mode:method FuncId(409) regs:5 ISeq(RubyFuncInfo { id:409 name:imm method:(FuncId(409), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_pc: -
 :00002 [04] %3 = %0.fetch(%3;1)                  [<INVALID>]
 :00004 [03] @data: - = %3
 :00005 [04] %3 = @_pc: -
 :00006 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00007 [03] @_pc: - = %3
 :00008 [04] %3 = @clk: -
 :00009 [05] %4 = const[CLK_2]                    [<INVALID>]
 :00010 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00011 [03] @clk: - = %3
 :00012 [03] ret %3
------------------------------------
------------------------------------
<zpg> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:327
meta:on_stack:true kind:Ruby mode:method FuncId(410) regs:5 ISeq(RubyFuncInfo { id:410 name:zpg method:(FuncId(410), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_pc: -
 :00002 [04] %3 = %0.fetch(%3;1)                  [<INVALID>]
 :00004 [03] @addr: - = %3
 :00005 [04] %3 = @_pc: -
 :00006 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00007 [03] @_pc: - = %3
 :00008 [04] %3 = @clk: -
 :00009 [05] %4 = const[CLK_3]                    [<INVALID>]
 :00010 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00011 [03] @clk: - = %3
 :00012 [03] condnotbr %1 =>:00025
+:00013 [04] %3 = @ram: -
 :00014 [05] %4 = @addr: -
 :00015 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00016 [03] @data: - = %3
 :00017 [03] condnotbr %2 =>:00023
+:00018 [04] %3 = @clk: -
 :00019 [05] %4 = const[CLK_2]                    [<INVALID>]
 :00020 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00021 [03] @clk: - = %3
 :00022 [03] ret %3
+:00023 [04] %3 = nil
 :00024 [03] ret %3
+:00025 [04] %3 = nil
 :00026 [03] ret %3
------------------------------------
------------------------------------
<zpg_reg> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:338
meta:on_stack:true kind:Ruby mode:method FuncId(411) regs:6 ISeq(RubyFuncInfo { id:411 name:zpg_reg method:(FuncId(411), 0) args: 3 non_temp: 3 temp: 2})
[]
+:00000 [04] init_method reg:5 arg:3 req:3 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = @_pc: -
 :00002 [05] %4 = %0.fetch(%4;1)                  [<INVALID>]
 :00004 [05] %4 = %1 + %4                         [<INVALID>][<INVALID>]
 :00005 [05] %4 = %4 & 255: i16                   [<INVALID>][<INVALID>]
 :00006 [04] @addr: - = %4
 :00007 [05] %4 = @_pc: -
 :00008 [05] %4 = %4 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [04] @_pc: - = %4
 :00010 [05] %4 = @clk: -
 :00011 [06] %5 = const[CLK_4]                    [<INVALID>]
 :00012 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00013 [04] @clk: - = %4
 :00014 [04] condnotbr %2 =>:00027
+:00015 [05] %4 = @ram: -
 :00016 [06] %5 = @addr: -
 :00017 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00018 [04] @data: - = %4
 :00019 [04] condnotbr %3 =>:00025
+:00020 [05] %4 = @clk: -
 :00021 [06] %5 = const[CLK_2]                    [<INVALID>]
 :00022 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00023 [04] @clk: - = %4
 :00024 [04] ret %4
+:00025 [05] %4 = nil
 :00026 [04] ret %4
+:00027 [05] %4 = nil
 :00028 [04] ret %4
------------------------------------
------------------------------------
<zpg_x> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:348
meta:on_stack:true kind:Ruby mode:method FuncId(412) regs:6 ISeq(RubyFuncInfo { id:412 name:zpg_x method:(FuncId(412), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_x: -
 :00002 [05] %4 = %1
 :00003 [06] %5 = %2
 :00004 [04] %3 = %0.zpg_reg(%3;3)                [<INVALID>]
 :00006 [03] ret %3
------------------------------------
------------------------------------
<zpg_y> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:352
meta:on_stack:true kind:Ruby mode:method FuncId(413) regs:6 ISeq(RubyFuncInfo { id:413 name:zpg_y method:(FuncId(413), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_y: -
 :00002 [05] %4 = %1
 :00003 [06] %5 = %2
 :00004 [04] %3 = %0.zpg_reg(%3;3)                [<INVALID>]
 :00006 [03] ret %3
------------------------------------
------------------------------------
<abs> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:357
meta:on_stack:true kind:Ruby mode:method FuncId(414) regs:5 ISeq(RubyFuncInfo { id:414 name:abs method:(FuncId(414), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_pc: -
 :00002 [04] %3 = %0.peek16(%3;1)                 [<INVALID>]
 :00004 [03] @addr: - = %3
 :00005 [04] %3 = @_pc: -
 :00006 [04] %3 = %3 + 2: i16                     [<INVALID>][<INVALID>]
 :00007 [03] @_pc: - = %3
 :00008 [04] %3 = @clk: -
 :00009 [05] %4 = const[CLK_3]                    [<INVALID>]
 :00010 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00011 [03] @clk: - = %3
 :00012 [04] %3 = %1
 :00013 [05] %4 = %2
 :00014 [04] %3 = %0.read_write(%3;2)             [<INVALID>]
 :00016 [03] ret %3
------------------------------------
------------------------------------
<abs_reg> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:365
meta:on_stack:true kind:Ruby mode:method FuncId(415) regs:8 ISeq(RubyFuncInfo { id:415 name:abs_reg method:(FuncId(415), 0) args: 3 non_temp: 5 temp: 2})
[]
+:00000 [06] init_method reg:7 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [07] %6 = @_pc: -
 :00002 [06] %4 = %6 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [07] %6 = @_pc: -
 :00004 [07] %6 = %0.fetch(%6;1)                  [<INVALID>]
 :00006 [06] %5 = %1 + %6                         [<INVALID>][<INVALID>]
 :00007 [07] %6 = %0.fetch(%4;1)                  [<INVALID>]
 :00009 [08] %7 = 8: i32
 :00010 [07] %6 = %6.<<(%7;1)                     [<INVALID>]
 :00012 [07] %6 = %6 + %5                         [<INVALID>][<INVALID>]
 :00013 [08] %7 = 65535: i32
 :00014 [07] %6 = %6 & %7                         [<INVALID>][<INVALID>]
 :00015 [06] @addr: - = %6
 :00016 [06] condnotbr %3 =>:00029
+:00017 [07] %6 = @addr: -
 :00018 [08] %7 = %5 & 256: i16                   [<INVALID>][<INVALID>]
 :00019 [07] %6 = %6 - %7                         [<INVALID>][<INVALID>]
 :00020 [08] %7 = 65535: i32
 :00021 [06] %4 = %6 & %7                         [<INVALID>][<INVALID>]
 :00022 [06] _ = %0.fetch(%4;1)                   [<INVALID>]
 :00024 [07] %6 = @clk: -
 :00025 [08] %7 = const[CLK_4]                    [<INVALID>]
 :00026 [07] %6 = %6 + %7                         [<INVALID>][<INVALID>]
 :00027 [06] @clk: - = %6
 :00028 [06] br =>:00046
+:00029 [07] %6 = @clk: -
 :00030 [08] %7 = const[CLK_3]                    [<INVALID>]
 :00031 [07] %6 = %6 + %7                         [<INVALID>][<INVALID>]
 :00032 [06] @clk: - = %6
 :00033 [07] %6 = %5 & 256: i16                   [<INVALID>][<INVALID>]
 :00034 [07] _%6 = %6 != 0: i16                   [<INVALID>][<INVALID>]
 :00035 [06] condnotbr _%6 =>:00046
+:00036 [07] %6 = @addr: -
 :00037 [07] %6 = %6 - 256: i16                   [<INVALID>][<INVALID>]
 :00038 [08] %7 = 65535: i32
 :00039 [06] %4 = %6 & %7                         [<INVALID>][<INVALID>]
 :00040 [06] _ = %0.fetch(%4;1)                   [<INVALID>]
 :00042 [07] %6 = @clk: -
 :00043 [08] %7 = const[CLK_1]                    [<INVALID>]
 :00044 [07] %6 = %6 + %7                         [<INVALID>][<INVALID>]
 :00045 [06] @clk: - = %6
+:00046 [07] %6 = %2
 :00047 [08] %7 = %3
 :00048 [06] _ = %0.read_write(%6;2)              [<INVALID>]
 :00050 [07] %6 = @_pc: -
 :00051 [07] %6 = %6 + 2: i16                     [<INVALID>][<INVALID>]
 :00052 [06] @_pc: - = %6
 :00053 [06] ret %6
------------------------------------
------------------------------------
<abs_x> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:385
meta:on_stack:true kind:Ruby mode:method FuncId(416) regs:6 ISeq(RubyFuncInfo { id:416 name:abs_x method:(FuncId(416), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_x: -
 :00002 [05] %4 = %1
 :00003 [06] %5 = %2
 :00004 [04] %3 = %0.abs_reg(%3;3)                [<INVALID>]
 :00006 [03] ret %3
------------------------------------
------------------------------------
<abs_y> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:389
meta:on_stack:true kind:Ruby mode:method FuncId(417) regs:6 ISeq(RubyFuncInfo { id:417 name:abs_y method:(FuncId(417), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_y: -
 :00002 [05] %4 = %1
 :00003 [06] %5 = %2
 :00004 [04] %3 = %0.abs_reg(%3;3)                [<INVALID>]
 :00006 [03] ret %3
------------------------------------
------------------------------------
<ind_x> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:394
meta:on_stack:true kind:Ruby mode:method FuncId(418) regs:7 ISeq(RubyFuncInfo { id:418 name:ind_x method:(FuncId(418), 0) args: 2 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = @_pc: -
 :00002 [05] %4 = %0.fetch(%4;1)                  [<INVALID>]
 :00004 [06] %5 = @_x: -
 :00005 [04] %3 = %4 + %5                         [<INVALID>][<INVALID>]
 :00006 [05] %4 = @_pc: -
 :00007 [05] %4 = %4 + 1: i16                     [<INVALID>][<INVALID>]
 :00008 [04] @_pc: - = %4
 :00009 [05] %4 = @clk: -
 :00010 [06] %5 = const[CLK_5]                    [<INVALID>]
 :00011 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00012 [04] @clk: - = %4
 :00013 [05] %4 = @ram: -
 :00014 [06] %5 = %3 & 255: i16                   [<INVALID>][<INVALID>]
 :00015 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00016 [06] %5 = @ram: -
 :00017 [07] %6 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00018 [07] %6 = %6 & 255: i16                   [<INVALID>][<INVALID>]
 :00019 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00020 [07] %6 = 8: i32
 :00021 [06] %5 = %5.<<(%6;1)                     [<INVALID>]
 :00023 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00024 [04] @addr: - = %4
 :00025 [05] %4 = %1
 :00026 [06] %5 = %2
 :00027 [05] %4 = %0.read_write(%4;2)             [<INVALID>]
 :00029 [04] ret %4
------------------------------------
------------------------------------
<ind_y> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:403
meta:on_stack:true kind:Ruby mode:method FuncId(419) regs:7 ISeq(RubyFuncInfo { id:419 name:ind_y method:(FuncId(419), 0) args: 2 non_temp: 4 temp: 2})
[]
+:00000 [05] init_method reg:6 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [06] %5 = @_pc: -
 :00002 [05] %3 = %0.fetch(%5;1)                  [<INVALID>]
 :00004 [06] %5 = @_pc: -
 :00005 [06] %5 = %5 + 1: i16                     [<INVALID>][<INVALID>]
 :00006 [05] @_pc: - = %5
 :00007 [06] %5 = @ram: -
 :00008 [06] %5 = %5.[%3]                         [<INVALID>][<INVALID>]
 :00009 [07] %6 = @_y: -
 :00010 [05] %4 = %5 + %6                         [<INVALID>][<INVALID>]
 :00011 [06] %5 = @clk: -
 :00012 [07] %6 = const[CLK_4]                    [<INVALID>]
 :00013 [06] %5 = %5 + %6                         [<INVALID>][<INVALID>]
 :00014 [05] @clk: - = %5
 :00015 [05] condnotbr %2 =>:00035
+:00016 [06] %5 = @clk: -
 :00017 [07] %6 = const[CLK_1]                    [<INVALID>]
 :00018 [06] %5 = %5 + %6                         [<INVALID>][<INVALID>]
 :00019 [05] @clk: - = %5
 :00020 [06] %5 = @ram: -
 :00021 [07] %6 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00022 [07] %6 = %6 & 255: i16                   [<INVALID>][<INVALID>]
 :00023 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00024 [07] %6 = 8: i32
 :00025 [06] %5 = %5.<<(%6;1)                     [<INVALID>]
 :00027 [06] %5 = %5 + %4                         [<INVALID>][<INVALID>]
 :00028 [05] @addr: - = %5
 :00029 [06] %5 = @addr: -
 :00030 [07] %6 = %4 & 256: i16                   [<INVALID>][<INVALID>]
 :00031 [05] %3 = %5 - %6                         [<INVALID>][<INVALID>]
 :00032 [05] _ = %0.fetch(%3;1)                   [<INVALID>]
 :00034 [05] br =>:00059
+:00035 [06] %5 = @ram: -
 :00036 [07] %6 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00037 [07] %6 = %6 & 255: i16                   [<INVALID>][<INVALID>]
 :00038 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00039 [07] %6 = 8: i32
 :00040 [06] %5 = %5.<<(%6;1)                     [<INVALID>]
 :00042 [06] %5 = %5 + %4                         [<INVALID>][<INVALID>]
 :00043 [07] %6 = 65535: i32
 :00044 [06] %5 = %5 & %6                         [<INVALID>][<INVALID>]
 :00045 [05] @addr: - = %5
 :00046 [06] %5 = %4 & 256: i16                   [<INVALID>][<INVALID>]
 :00047 [06] _%5 = %5 != 0: i16                   [<INVALID>][<INVALID>]
 :00048 [05] condnotbr _%5 =>:00059
+:00049 [06] %5 = @addr: -
 :00050 [06] %5 = %5 - 256: i16                   [<INVALID>][<INVALID>]
 :00051 [07] %6 = 65535: i32
 :00052 [05] %3 = %5 & %6                         [<INVALID>][<INVALID>]
 :00053 [05] _ = %0.fetch(%3;1)                   [<INVALID>]
 :00055 [06] %5 = @clk: -
 :00056 [07] %6 = const[CLK_1]                    [<INVALID>]
 :00057 [06] %5 = %5 + %6                         [<INVALID>][<INVALID>]
 :00058 [05] @clk: - = %5
+:00059 [06] %5 = %1
 :00060 [07] %6 = %2
 :00061 [06] %5 = %0.read_write(%5;2)             [<INVALID>]
 :00063 [05] ret %5
------------------------------------
------------------------------------
<read_write> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:424
meta:on_stack:true kind:Ruby mode:method FuncId(420) regs:5 ISeq(RubyFuncInfo { id:420 name:read_write method:(FuncId(420), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [03] condnotbr %1 =>:00022
+:00002 [04] %3 = @addr: -
 :00003 [04] %3 = %0.fetch(%3;1)                  [<INVALID>]
 :00005 [03] @data: - = %3
 :00006 [04] %3 = @clk: -
 :00007 [05] %4 = const[CLK_1]                    [<INVALID>]
 :00008 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00009 [03] @clk: - = %3
 :00010 [03] condnotbr %2 =>:00020
+:00011 [04] %3 = @addr: -
 :00012 [05] %4 = @data: -
 :00013 [03] _ = %0.store(%3;2)                   [<INVALID>]
 :00015 [04] %3 = @clk: -
 :00016 [05] %4 = const[CLK_1]                    [<INVALID>]
 :00017 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00018 [03] @clk: - = %3
 :00019 [03] ret %3
+:00020 [04] %3 = nil
 :00021 [03] ret %3
+:00022 [04] %3 = nil
 :00023 [03] ret %3
------------------------------------
------------------------------------
<_lda> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:439
meta:on_stack:true kind:Ruby mode:method FuncId(421) regs:2 ISeq(RubyFuncInfo { id:421 name:_lda method:(FuncId(421), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [01] @_a: - = %1
 :00003 [01] @_p_nz: - = %1
 :00004 [01] ret %1
------------------------------------
------------------------------------
<_ldx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:443
meta:on_stack:true kind:Ruby mode:method FuncId(422) regs:2 ISeq(RubyFuncInfo { id:422 name:_ldx method:(FuncId(422), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [01] @_x: - = %1
 :00003 [01] @_p_nz: - = %1
 :00004 [01] ret %1
------------------------------------
------------------------------------
<_ldy> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:447
meta:on_stack:true kind:Ruby mode:method FuncId(423) regs:2 ISeq(RubyFuncInfo { id:423 name:_ldy method:(FuncId(423), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [01] @_y: - = %1
 :00003 [01] @_p_nz: - = %1
 :00004 [01] ret %1
------------------------------------
------------------------------------
<_sta> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:452
meta:on_stack:true kind:Ruby mode:method FuncId(424) regs:2 ISeq(RubyFuncInfo { id:424 name:_sta method:(FuncId(424), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_a: -
 :00002 [01] @data: - = %1
 :00003 [01] ret %1
------------------------------------
------------------------------------
<_stx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:456
meta:on_stack:true kind:Ruby mode:method FuncId(425) regs:2 ISeq(RubyFuncInfo { id:425 name:_stx method:(FuncId(425), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_x: -
 :00002 [01] @data: - = %1
 :00003 [01] ret %1
------------------------------------
------------------------------------
<_sty> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:460
meta:on_stack:true kind:Ruby mode:method FuncId(426) regs:2 ISeq(RubyFuncInfo { id:426 name:_sty method:(FuncId(426), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_y: -
 :00002 [01] @data: - = %1
 :00003 [01] ret %1
------------------------------------
------------------------------------
<_tax> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:465
meta:on_stack:true kind:Ruby mode:method FuncId(427) regs:3 ISeq(RubyFuncInfo { id:427 name:_tax method:(FuncId(427), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_a: -
 :00006 [01] @_x: - = %1
 :00007 [01] @_p_nz: - = %1
 :00008 [01] ret %1
------------------------------------
------------------------------------
<_tay> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:470
meta:on_stack:true kind:Ruby mode:method FuncId(428) regs:3 ISeq(RubyFuncInfo { id:428 name:_tay method:(FuncId(428), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_a: -
 :00006 [01] @_y: - = %1
 :00007 [01] @_p_nz: - = %1
 :00008 [01] ret %1
------------------------------------
------------------------------------
<_txa> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:475
meta:on_stack:true kind:Ruby mode:method FuncId(429) regs:3 ISeq(RubyFuncInfo { id:429 name:_txa method:(FuncId(429), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_x: -
 :00006 [01] @_a: - = %1
 :00007 [01] @_p_nz: - = %1
 :00008 [01] ret %1
------------------------------------
------------------------------------
<_tya> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:480
meta:on_stack:true kind:Ruby mode:method FuncId(430) regs:3 ISeq(RubyFuncInfo { id:430 name:_tya method:(FuncId(430), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_y: -
 :00006 [01] @_a: - = %1
 :00007 [01] @_p_nz: - = %1
 :00008 [01] ret %1
------------------------------------
------------------------------------
<_jmp_a> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:486
meta:on_stack:true kind:Ruby mode:method FuncId(431) regs:3 ISeq(RubyFuncInfo { id:431 name:_jmp_a method:(FuncId(431), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_pc: -
 :00002 [02] %1 = %0.peek16(%1;1)                 [<INVALID>]
 :00004 [01] @_pc: - = %1
 :00005 [02] %1 = @clk: -
 :00006 [03] %2 = const[CLK_3]                    [<INVALID>]
 :00007 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00008 [01] @clk: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<_jmp_i> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:491
meta:on_stack:true kind:Ruby mode:method FuncId(432) regs:6 ISeq(RubyFuncInfo { id:432 name:_jmp_i method:(FuncId(432), 0) args: 0 non_temp: 3 temp: 2})
[]
+:00000 [04] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = @_pc: -
 :00002 [04] %1 = %0.peek16(%4;1)                 [<INVALID>]
 :00004 [04] %2 = %0.fetch(%1;1)                  [<INVALID>]
 :00006 [05] %4 = 65280: i32
 :00007 [05] %4 = %1 & %4                         [<INVALID>][<INVALID>]
 :00008 [06] %5 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [06] %5 = %5 & 255: i16                   [<INVALID>][<INVALID>]
 :00010 [04] %1 = %4 | %5                         [<INVALID>][<INVALID>]
 :00011 [04] %3 = %0.fetch(%1;1)                  [<INVALID>]
 :00013 [05] %4 = %3 * 256: i16                   [<INVALID>][<INVALID>]
 :00014 [05] %4 = %4 + %2                         [<INVALID>][<INVALID>]
 :00015 [04] @_pc: - = %4
 :00016 [05] %4 = @clk: -
 :00017 [06] %5 = const[CLK_5]                    [<INVALID>]
 :00018 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00019 [04] @clk: - = %4
 :00020 [04] ret %4
------------------------------------
------------------------------------
<_jsr> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:500
meta:on_stack:true kind:Ruby mode:method FuncId(433) regs:4 ISeq(RubyFuncInfo { id:433 name:_jsr method:(FuncId(433), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @_pc: -
 :00002 [02] %1 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [02] _ = %0.push16(%1;1)                  [<INVALID>]
 :00005 [03] %2 = @_pc: -
 :00006 [03] %2 = %0.peek16(%2;1)                 [<INVALID>]
 :00008 [02] @_pc: - = %2
 :00009 [03] %2 = @clk: -
 :00010 [04] %3 = const[CLK_6]                    [<INVALID>]
 :00011 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00012 [02] @clk: - = %2
 :00013 [02] ret %2
------------------------------------
------------------------------------
<_rts> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:507
meta:on_stack:true kind:Ruby mode:method FuncId(434) regs:3 ISeq(RubyFuncInfo { id:434 name:_rts method:(FuncId(434), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = %0.pull16()                     [<INVALID>]
 :00003 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00004 [03] %2 = 65535: i32
 :00005 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00006 [01] @_pc: - = %1
 :00007 [02] %1 = @clk: -
 :00008 [03] %2 = const[CLK_6]                    [<INVALID>]
 :00009 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00010 [01] @clk: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_rti> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:512
meta:on_stack:true kind:Ruby mode:method FuncId(435) regs:4 ISeq(RubyFuncInfo { id:435 name:_rti method:(FuncId(435), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @clk: -
 :00002 [04] %3 = const[CLK_6]                    [<INVALID>]
 :00003 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00004 [02] @clk: - = %2
 :00005 [03] %2 = %0.pull8()                      [<INVALID>]
 :00007 [03] %1 = %2
 :00008 [03] %2 = %0.pull16()                     [<INVALID>]
 :00010 [02] @_pc: - = %2
 :00011 [02] _ = %0.flags_unpack(%1;1)            [<INVALID>]
 :00013 [03] %2 = @irq_flags: -
 :00014 [03] _%2 = %2 == 0: i16                   [<INVALID>][<INVALID>]
 :00015 [02] condbr _%2 =>:00019
+:00016 [03] %2 = @_p_i: -
 :00017 [03] _%2 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00018 [02] condnotbr _%2 =>:00021
+:00019 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00020 [03] br =>:00023
+:00021 [03] %2 = 0: i32
 :00022 [02] @clk_target: - = %2
+:00023 [02] @clk_irq: - = %2
 :00024 [02] ret %2
------------------------------------
------------------------------------
<_bne> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:520
meta:on_stack:true kind:Ruby mode:method FuncId(436) regs:2 ISeq(RubyFuncInfo { id:436 name:_bne method:(FuncId(436), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_nz: -
 :00002 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 != 0: i16                    [<INVALID>][<INVALID>]
 :00004 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_beq> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:524
meta:on_stack:true kind:Ruby mode:method FuncId(437) regs:2 ISeq(RubyFuncInfo { id:437 name:_beq method:(FuncId(437), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_nz: -
 :00002 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 == 0: i16                    [<INVALID>][<INVALID>]
 :00004 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_bmi> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:528
meta:on_stack:true kind:Ruby mode:method FuncId(438) regs:2 ISeq(RubyFuncInfo { id:438 name:_bmi method:(FuncId(438), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_nz: -
 :00002 [02] %1 = %1 & 384: i16                   [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 != 0: i16                    [<INVALID>][<INVALID>]
 :00004 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_bpl> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:532
meta:on_stack:true kind:Ruby mode:method FuncId(439) regs:2 ISeq(RubyFuncInfo { id:439 name:_bpl method:(FuncId(439), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_nz: -
 :00002 [02] %1 = %1 & 384: i16                   [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 == 0: i16                    [<INVALID>][<INVALID>]
 :00004 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_bcs> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:536
meta:on_stack:true kind:Ruby mode:method FuncId(440) regs:2 ISeq(RubyFuncInfo { id:440 name:_bcs method:(FuncId(440), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_c: -
 :00002 [02] %1 = %1 != 0: i16                    [<INVALID>][<INVALID>]
 :00003 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_bcc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:540
meta:on_stack:true kind:Ruby mode:method FuncId(441) regs:2 ISeq(RubyFuncInfo { id:441 name:_bcc method:(FuncId(441), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_c: -
 :00002 [02] %1 = %1 == 0: i16                    [<INVALID>][<INVALID>]
 :00003 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_bvs> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:544
meta:on_stack:true kind:Ruby mode:method FuncId(442) regs:2 ISeq(RubyFuncInfo { id:442 name:_bvs method:(FuncId(442), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_v: -
 :00002 [02] %1 = %1 != 0: i16                    [<INVALID>][<INVALID>]
 :00003 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_bvc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:548
meta:on_stack:true kind:Ruby mode:method FuncId(443) regs:2 ISeq(RubyFuncInfo { id:443 name:_bvc method:(FuncId(443), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @_p_v: -
 :00002 [02] %1 = %1 == 0: i16                    [<INVALID>][<INVALID>]
 :00003 [02] %1 = %0.branch(%1;1)                 [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_adc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:553
meta:on_stack:true kind:Ruby mode:method FuncId(444) regs:5 ISeq(RubyFuncInfo { id:444 name:_adc method:(FuncId(444), 0) args: 0 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @_a: -
 :00002 [04] %3 = @data: -
 :00003 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00004 [04] %3 = @_p_c: -
 :00005 [02] %1 = %2 + %3                         [<INVALID>][<INVALID>]
 :00006 [04] %3 = @_a: -
 :00007 [05] %4 = @data: -
 :00008 [03] %2 = %3 ^ %4                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = ~%2                             [<INVALID>]
 :00010 [04] %3 = @_a: -
 :00011 [04] %3 = %3 ^ %1                         [<INVALID>][<INVALID>]
 :00012 [03] %2 = %2 & %3                         [<INVALID>][<INVALID>]
 :00013 [03] %2 = %2 & 128: i16                   [<INVALID>][<INVALID>]
 :00014 [02] @_p_v: - = %2
 :00015 [03] %2 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00016 [02] @_a: - = %2
 :00017 [02] @_p_nz: - = %2
 :00018 [03] %2 = 8: i32
 :00019 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00020 [02] @_p_c: - = %2
 :00021 [02] ret %2
------------------------------------
------------------------------------
<_sbc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:560
meta:on_stack:true kind:Ruby mode:method FuncId(445) regs:5 ISeq(RubyFuncInfo { id:445 name:_sbc method:(FuncId(445), 0) args: 0 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @data: -
 :00002 [03] %1 = %3 ^ 255: i16                   [<INVALID>][<INVALID>]
 :00003 [04] %3 = @_a: -
 :00004 [04] %3 = %3 + %1                         [<INVALID>][<INVALID>]
 :00005 [05] %4 = @_p_c: -
 :00006 [03] %2 = %3 + %4                         [<INVALID>][<INVALID>]
 :00007 [05] %4 = @_a: -
 :00008 [04] %3 = %4 ^ %1                         [<INVALID>][<INVALID>]
 :00009 [04] %3 = ~%3                             [<INVALID>]
 :00010 [05] %4 = @_a: -
 :00011 [05] %4 = %4 ^ %2                         [<INVALID>][<INVALID>]
 :00012 [04] %3 = %3 & %4                         [<INVALID>][<INVALID>]
 :00013 [04] %3 = %3 & 128: i16                   [<INVALID>][<INVALID>]
 :00014 [03] @_p_v: - = %3
 :00015 [04] %3 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00016 [03] @_a: - = %3
 :00017 [03] @_p_nz: - = %3
 :00018 [04] %3 = 8: i32
 :00019 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00020 [03] @_p_c: - = %3
 :00021 [03] ret %3
------------------------------------
------------------------------------
<_and> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:569
meta:on_stack:true kind:Ruby mode:method FuncId(446) regs:3 ISeq(RubyFuncInfo { id:446 name:_and method:(FuncId(446), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @data: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [01] @_a: - = %1
 :00005 [01] @_p_nz: - = %1
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_ora> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:573
meta:on_stack:true kind:Ruby mode:method FuncId(447) regs:3 ISeq(RubyFuncInfo { id:447 name:_ora method:(FuncId(447), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @data: -
 :00003 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00004 [01] @_a: - = %1
 :00005 [01] @_p_nz: - = %1
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_eor> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:577
meta:on_stack:true kind:Ruby mode:method FuncId(448) regs:3 ISeq(RubyFuncInfo { id:448 name:_eor method:(FuncId(448), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @data: -
 :00003 [02] %1 = %1 ^ %2                         [<INVALID>][<INVALID>]
 :00004 [01] @_a: - = %1
 :00005 [01] @_p_nz: - = %1
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_bit> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:581
meta:on_stack:true kind:Ruby mode:method FuncId(449) regs:4 ISeq(RubyFuncInfo { id:449 name:_bit method:(FuncId(449), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = @_a: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [02] _%1 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00005 [01] condnotbr _%1 =>:00008
+:00006 [02] %1 = 1: i32
 :00007 [02] br =>:00009
+:00008 [02] %1 = 0: i32
+:00009 [03] %2 = @data: -
 :00010 [03] %2 = %2 & 128: i16                   [<INVALID>][<INVALID>]
 :00011 [04] %3 = 1: i32
 :00012 [03] %2 = %2.<<(%3;1)                     [<INVALID>]
 :00014 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00015 [01] @_p_nz: - = %1
 :00016 [02] %1 = @data: -
 :00017 [02] %1 = %1 & 64: i16                    [<INVALID>][<INVALID>]
 :00018 [01] @_p_v: - = %1
 :00019 [01] ret %1
------------------------------------
------------------------------------
<_cmp> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:586
meta:on_stack:true kind:Ruby mode:method FuncId(450) regs:4 ISeq(RubyFuncInfo { id:450 name:_cmp method:(FuncId(450), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @_a: -
 :00002 [04] %3 = @data: -
 :00003 [02] %1 = %2 - %3                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00005 [02] @_p_nz: - = %2
 :00006 [03] %2 = 8: i32
 :00007 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00008 [03] %2 = 1: i16 - %2                     [<INVALID>][<INVALID>]
 :00009 [02] @_p_c: - = %2
 :00010 [02] ret %2
------------------------------------
------------------------------------
<_cpx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:592
meta:on_stack:true kind:Ruby mode:method FuncId(451) regs:4 ISeq(RubyFuncInfo { id:451 name:_cpx method:(FuncId(451), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @_x: -
 :00002 [04] %3 = @data: -
 :00003 [02] %1 = %2 - %3                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00005 [02] @_p_nz: - = %2
 :00006 [03] %2 = 8: i32
 :00007 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00008 [03] %2 = 1: i16 - %2                     [<INVALID>][<INVALID>]
 :00009 [02] @_p_c: - = %2
 :00010 [02] ret %2
------------------------------------
------------------------------------
<_cpy> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:598
meta:on_stack:true kind:Ruby mode:method FuncId(452) regs:4 ISeq(RubyFuncInfo { id:452 name:_cpy method:(FuncId(452), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @_y: -
 :00002 [04] %3 = @data: -
 :00003 [02] %1 = %2 - %3                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00005 [02] @_p_nz: - = %2
 :00006 [03] %2 = 8: i32
 :00007 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00008 [03] %2 = 1: i16 - %2                     [<INVALID>][<INVALID>]
 :00009 [02] @_p_c: - = %2
 :00010 [02] ret %2
------------------------------------
------------------------------------
<_asl> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:605
meta:on_stack:true kind:Ruby mode:method FuncId(453) regs:3 ISeq(RubyFuncInfo { id:453 name:_asl method:(FuncId(453), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = 7: i32
 :00003 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00005 [01] @_p_c: - = %1
 :00006 [02] %1 = @data: -
 :00007 [03] %2 = 1: i32
 :00008 [02] %1 = %1.<<(%2;1)                     [<INVALID>]
 :00010 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00011 [01] @_p_nz: - = %1
 :00012 [01] @data: - = %1
 :00013 [01] ret %1
------------------------------------
------------------------------------
<_lsr> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:610
meta:on_stack:true kind:Ruby mode:method FuncId(454) regs:3 ISeq(RubyFuncInfo { id:454 name:_lsr method:(FuncId(454), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [02] %1 = %1 & 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @_p_c: - = %1
 :00004 [02] %1 = @data: -
 :00005 [03] %2 = 1: i32
 :00006 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00008 [01] @_p_nz: - = %1
 :00009 [01] @data: - = %1
 :00010 [01] ret %1
------------------------------------
------------------------------------
<_rol> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:615
meta:on_stack:true kind:Ruby mode:method FuncId(455) regs:3 ISeq(RubyFuncInfo { id:455 name:_rol method:(FuncId(455), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = 1: i32
 :00003 [02] %1 = %1.<<(%2;1)                     [<INVALID>]
 :00005 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00006 [03] %2 = @_p_c: -
 :00007 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00008 [01] @_p_nz: - = %1
 :00009 [02] %1 = @data: -
 :00010 [03] %2 = 7: i32
 :00011 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00013 [01] @_p_c: - = %1
 :00014 [02] %1 = @_p_nz: -
 :00015 [01] @data: - = %1
 :00016 [01] ret %1
------------------------------------
------------------------------------
<_ror> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:621
meta:on_stack:true kind:Ruby mode:method FuncId(456) regs:4 ISeq(RubyFuncInfo { id:456 name:_ror method:(FuncId(456), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = 1: i32
 :00003 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00005 [03] %2 = @_p_c: -
 :00006 [04] %3 = 7: i32
 :00007 [03] %2 = %2.<<(%3;1)                     [<INVALID>]
 :00009 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00010 [01] @_p_nz: - = %1
 :00011 [02] %1 = @data: -
 :00012 [02] %1 = %1 & 1: i16                     [<INVALID>][<INVALID>]
 :00013 [01] @_p_c: - = %1
 :00014 [02] %1 = @_p_nz: -
 :00015 [01] @data: - = %1
 :00016 [01] ret %1
------------------------------------
------------------------------------
<_dec> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:628
meta:on_stack:true kind:Ruby mode:method FuncId(457) regs:2 ISeq(RubyFuncInfo { id:457 name:_dec method:(FuncId(457), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00004 [01] @_p_nz: - = %1
 :00005 [01] @data: - = %1
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_inc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:632
meta:on_stack:true kind:Ruby mode:method FuncId(458) regs:2 ISeq(RubyFuncInfo { id:458 name:_inc method:(FuncId(458), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00004 [01] @_p_nz: - = %1
 :00005 [01] @data: - = %1
 :00006 [01] ret %1
------------------------------------
------------------------------------
<_dex> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:636
meta:on_stack:true kind:Ruby mode:method FuncId(459) regs:3 ISeq(RubyFuncInfo { id:459 name:_dex method:(FuncId(459), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_x: -
 :00006 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00008 [01] @_x: - = %1
 :00009 [01] @_p_nz: - = %1
 :00010 [01] @data: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_dey> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:641
meta:on_stack:true kind:Ruby mode:method FuncId(460) regs:3 ISeq(RubyFuncInfo { id:460 name:_dey method:(FuncId(460), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_y: -
 :00006 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00008 [01] @_y: - = %1
 :00009 [01] @_p_nz: - = %1
 :00010 [01] @data: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_inx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:646
meta:on_stack:true kind:Ruby mode:method FuncId(461) regs:3 ISeq(RubyFuncInfo { id:461 name:_inx method:(FuncId(461), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_x: -
 :00006 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00008 [01] @_x: - = %1
 :00009 [01] @_p_nz: - = %1
 :00010 [01] @data: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_iny> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:651
meta:on_stack:true kind:Ruby mode:method FuncId(462) regs:3 ISeq(RubyFuncInfo { id:462 name:_iny method:(FuncId(462), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_y: -
 :00006 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00008 [01] @_y: - = %1
 :00009 [01] @_p_nz: - = %1
 :00010 [01] @data: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_clc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:657
meta:on_stack:true kind:Ruby mode:method FuncId(463) regs:3 ISeq(RubyFuncInfo { id:463 name:_clc method:(FuncId(463), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = 0: i32
 :00006 [01] @_p_c: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_sec> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:662
meta:on_stack:true kind:Ruby mode:method FuncId(464) regs:3 ISeq(RubyFuncInfo { id:464 name:_sec method:(FuncId(464), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = 1: i32
 :00006 [01] @_p_c: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_cld> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:667
meta:on_stack:true kind:Ruby mode:method FuncId(465) regs:3 ISeq(RubyFuncInfo { id:465 name:_cld method:(FuncId(465), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = 0: i32
 :00006 [01] @_p_d: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_sed> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:672
meta:on_stack:true kind:Ruby mode:method FuncId(466) regs:3 ISeq(RubyFuncInfo { id:466 name:_sed method:(FuncId(466), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = 8: i32
 :00006 [01] @_p_d: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_clv> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:677
meta:on_stack:true kind:Ruby mode:method FuncId(467) regs:3 ISeq(RubyFuncInfo { id:467 name:_clv method:(FuncId(467), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = 0: i32
 :00006 [01] @_p_v: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_sei> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:682
meta:on_stack:true kind:Ruby mode:method FuncId(468) regs:3 ISeq(RubyFuncInfo { id:468 name:_sei method:(FuncId(468), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_p_i: -
 :00006 [02] _%1 = %1 == 0: i16                   [<INVALID>][<INVALID>]
 :00007 [01] condnotbr _%1 =>:00021
+:00008 [02] %1 = 4: i32
 :00009 [01] @_p_i: - = %1
 :00010 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00011 [01] @clk_irq: - = %1
 :00012 [02] %1 = @irq_flags: -
 :00013 [02] _%1 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00014 [01] condnotbr _%1 =>:00019
+:00015 [02] %1 = const[IRQ_VECTOR]               [<INVALID>]
 :00016 [02] %1 = %0.do_isr(%1;1)                 [<INVALID>]
 :00018 [01] ret %1
+:00019 [02] %1 = nil
 :00020 [01] ret %1
+:00021 [02] %1 = nil
 :00022 [01] ret %1
------------------------------------
------------------------------------
<_cli> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:691
meta:on_stack:true kind:Ruby mode:method FuncId(469) regs:4 ISeq(RubyFuncInfo { id:469 name:_cli method:(FuncId(469), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @clk: -
 :00002 [04] %3 = const[CLK_2]                    [<INVALID>]
 :00003 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00004 [02] @clk: - = %2
 :00005 [03] %2 = @_p_i: -
 :00006 [03] _%2 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00007 [02] condnotbr _%2 =>:00025
+:00008 [03] %2 = 0: i32
 :00009 [02] @_p_i: - = %2
 :00010 [03] %2 = @irq_flags: -
 :00011 [03] _%2 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00012 [02] condnotbr _%2 =>:00023
+:00013 [03] %2 = @clk: -
 :00014 [02] %1 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00015 [02] @clk_irq: - = %1
 :00016 [03] %2 = @clk_target: -
 :00017 [03] _%2 = %2 > %1                        [<INVALID>][<INVALID>]
 :00018 [02] condnotbr _%2 =>:00021
+:00019 [02] @clk_target: - = %1
 :00020 [02] ret %1
+:00021 [03] %2 = nil
 :00022 [02] ret %2
+:00023 [03] %2 = nil
 :00024 [02] ret %2
+:00025 [03] %2 = nil
 :00026 [02] ret %2
------------------------------------
------------------------------------
<_pha> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:703
meta:on_stack:true kind:Ruby mode:method FuncId(470) regs:3 ISeq(RubyFuncInfo { id:470 name:_pha method:(FuncId(470), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_3]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_a: -
 :00006 [02] %1 = %0.push8(%1;1)                  [<INVALID>]
 :00008 [01] ret %1
------------------------------------
------------------------------------
<_php> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:708
meta:on_stack:true kind:Ruby mode:method FuncId(471) regs:4 ISeq(RubyFuncInfo { id:471 name:_php method:(FuncId(471), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @clk: -
 :00002 [04] %3 = const[CLK_3]                    [<INVALID>]
 :00003 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00004 [02] @clk: - = %2
 :00005 [03] %2 = %0.flags_pack()                 [<INVALID>]
 :00007 [02] %1 = %2 | 16: i16                    [<INVALID>][<INVALID>]
 :00008 [03] %2 = %0.push8(%1;1)                  [<INVALID>]
 :00010 [02] ret %2
------------------------------------
------------------------------------
<_pla> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:714
meta:on_stack:true kind:Ruby mode:method FuncId(472) regs:3 ISeq(RubyFuncInfo { id:472 name:_pla method:(FuncId(472), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_4]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = %0.pull8()                      [<INVALID>]
 :00007 [01] @_a: - = %1
 :00008 [01] @_p_nz: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<_plp> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:719
meta:on_stack:true kind:Ruby mode:method FuncId(473) regs:5 ISeq(RubyFuncInfo { id:473 name:_plp method:(FuncId(473), 0) args: 0 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @clk: -
 :00002 [05] %4 = const[CLK_4]                    [<INVALID>]
 :00003 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00004 [03] @clk: - = %3
 :00005 [03] %1 = @_p_i: -
 :00006 [04] %3 = %0.pull8()                      [<INVALID>]
 :00008 [03] _ = %0.flags_unpack(%3;1)            [<INVALID>]
 :00010 [04] %3 = @irq_flags: -
 :00011 [04] _%3 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00012 [03] condnotbr _%3 =>:00037
+:00013 [04] %3 = @_p_i: -
 :00014 [04] _%3 = %1 > %3                        [<INVALID>][<INVALID>]
 :00015 [03] condnotbr _%3 =>:00026
+:00016 [04] %3 = @clk: -
 :00017 [03] %2 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00018 [03] @clk_irq: - = %2
 :00019 [04] %3 = @clk_target: -
 :00020 [04] _%3 = %3 > %2                        [<INVALID>][<INVALID>]
 :00021 [03] condnotbr _%3 =>:00024
+:00022 [03] @clk_target: - = %2
 :00023 [03] ret %2
+:00024 [04] %3 = nil
 :00025 [03] ret %3
+:00026 [04] %3 = @_p_i: -
 :00027 [04] _%3 = %1 < %3                        [<INVALID>][<INVALID>]
 :00028 [03] condnotbr _%3 =>:00035
+:00029 [04] %3 = const[FOREVER_CLOCK]            [<INVALID>]
 :00030 [03] @clk_irq: - = %3
 :00031 [04] %3 = const[IRQ_VECTOR]               [<INVALID>]
 :00032 [04] %3 = %0.do_isr(%3;1)                 [<INVALID>]
 :00034 [03] ret %3
+:00035 [04] %3 = nil
 :00036 [03] ret %3
+:00037 [04] %3 = nil
 :00038 [03] ret %3
------------------------------------
------------------------------------
<_tsx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:734
meta:on_stack:true kind:Ruby mode:method FuncId(474) regs:3 ISeq(RubyFuncInfo { id:474 name:_tsx method:(FuncId(474), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_sp: -
 :00006 [01] @_x: - = %1
 :00007 [01] @_p_nz: - = %1
 :00008 [01] ret %1
------------------------------------
------------------------------------
<_txs> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:739
meta:on_stack:true kind:Ruby mode:method FuncId(475) regs:3 ISeq(RubyFuncInfo { id:475 name:_txs method:(FuncId(475), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @clk: -
 :00002 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [01] @clk: - = %1
 :00005 [02] %1 = @_x: -
 :00006 [01] @_sp: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_anc> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:745
meta:on_stack:true kind:Ruby mode:method FuncId(476) regs:3 ISeq(RubyFuncInfo { id:476 name:_anc method:(FuncId(476), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @data: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [01] @_a: - = %1
 :00005 [01] @_p_nz: - = %1
 :00006 [02] %1 = @_p_nz: -
 :00007 [03] %2 = 7: i32
 :00008 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00010 [01] @_p_c: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_ane> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:750
meta:on_stack:true kind:Ruby mode:method FuncId(477) regs:3 ISeq(RubyFuncInfo { id:477 name:_ane method:(FuncId(477), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [02] %1 = %1 | 238: i16                   [<INVALID>][<INVALID>]
 :00003 [03] %2 = @_x: -
 :00004 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00005 [03] %2 = @data: -
 :00006 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00007 [01] @_a: - = %1
 :00008 [02] %1 = @_a: -
 :00009 [01] @_p_nz: - = %1
 :00010 [01] ret %1
------------------------------------
------------------------------------
<_arr> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:755
meta:on_stack:true kind:Ruby mode:method FuncId(478) regs:4 ISeq(RubyFuncInfo { id:478 name:_arr method:(FuncId(478), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = @_a: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = 1: i32
 :00005 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00007 [03] %2 = @_p_c: -
 :00008 [04] %3 = 7: i32
 :00009 [03] %2 = %2.<<(%3;1)                     [<INVALID>]
 :00011 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00012 [01] @_a: - = %1
 :00013 [02] %1 = @_a: -
 :00014 [01] @_p_nz: - = %1
 :00015 [02] %1 = @_a: -
 :00016 [03] %2 = 6: i32
 :00017 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00018 [01] @_p_c: - = %1
 :00019 [02] %1 = @_a: -
 :00020 [03] %2 = 6: i32
 :00021 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00022 [03] %2 = @_a: -
 :00023 [04] %3 = 5: i32
 :00024 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00025 [02] %1 = %1 ^ %2                         [<INVALID>][<INVALID>]
 :00026 [01] @_p_v: - = %1
 :00027 [01] ret %1
------------------------------------
------------------------------------
<_asr> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:762
meta:on_stack:true kind:Ruby mode:method FuncId(479) regs:3 ISeq(RubyFuncInfo { id:479 name:_asr method:(FuncId(479), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = @_a: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [02] %1 = %1 & 1: i16                     [<INVALID>][<INVALID>]
 :00005 [01] @_p_c: - = %1
 :00006 [02] %1 = @data: -
 :00007 [03] %2 = @_a: -
 :00008 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = 1: i32
 :00010 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00012 [01] @_a: - = %1
 :00013 [01] @_p_nz: - = %1
 :00014 [01] ret %1
------------------------------------
------------------------------------
<_dcp> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:767
meta:on_stack:true kind:Ruby mode:method FuncId(480) regs:2 ISeq(RubyFuncInfo { id:480 name:_dcp method:(FuncId(480), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00004 [01] @data: - = %1
 :00005 [02] %1 = %0._cmp()                       [<INVALID>]
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_isb> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:772
meta:on_stack:true kind:Ruby mode:method FuncId(481) regs:2 ISeq(RubyFuncInfo { id:481 name:_isb method:(FuncId(481), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00004 [01] @data: - = %1
 :00005 [02] %1 = %0._sbc()                       [<INVALID>]
 :00007 [01] ret %1
------------------------------------
------------------------------------
<_las> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:777
meta:on_stack:true kind:Ruby mode:method FuncId(482) regs:3 ISeq(RubyFuncInfo { id:482 name:_las method:(FuncId(482), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_sp: -
 :00002 [03] %2 = @data: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [01] @_sp: - = %1
 :00005 [02] %1 = @_sp: -
 :00006 [01] @_x: - = %1
 :00007 [01] @_a: - = %1
 :00008 [01] @_p_nz: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<_lax> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:782
meta:on_stack:true kind:Ruby mode:method FuncId(483) regs:2 ISeq(RubyFuncInfo { id:483 name:_lax method:(FuncId(483), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [01] @_x: - = %1
 :00003 [01] @_a: - = %1
 :00004 [01] @_p_nz: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_lxa> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:786
meta:on_stack:true kind:Ruby mode:method FuncId(484) regs:2 ISeq(RubyFuncInfo { id:484 name:_lxa method:(FuncId(484), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @data: -
 :00002 [01] @_x: - = %1
 :00003 [01] @_a: - = %1
 :00004 [01] @_p_nz: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_rla> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:790
meta:on_stack:true kind:Ruby mode:method FuncId(485) regs:4 ISeq(RubyFuncInfo { id:485 name:_rla method:(FuncId(485), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_p_c: -
 :00002 [03] %2 = @data: -
 :00003 [04] %3 = 7: i32
 :00004 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00006 [02] @_p_c: - = %2
 :00007 [03] %2 = @data: -
 :00008 [04] %3 = 1: i32
 :00009 [03] %2 = %2.<<(%3;1)                     [<INVALID>]
 :00011 [03] %2 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00012 [03] %2 = %2 | %1                         [<INVALID>][<INVALID>]
 :00013 [02] @data: - = %2
 :00014 [03] %2 = @_a: -
 :00015 [04] %3 = @data: -
 :00016 [03] %2 = %2 & %3                         [<INVALID>][<INVALID>]
 :00017 [02] @_a: - = %2
 :00018 [02] @_p_nz: - = %2
 :00019 [02] ret %2
------------------------------------
------------------------------------
<_rra> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:797
meta:on_stack:true kind:Ruby mode:method FuncId(486) regs:4 ISeq(RubyFuncInfo { id:486 name:_rra method:(FuncId(486), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @_p_c: -
 :00002 [04] %3 = 7: i32
 :00003 [02] %1 = %2.<<(%3;1)                     [<INVALID>]
 :00005 [03] %2 = @data: -
 :00006 [03] %2 = %2 & 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] @_p_c: - = %2
 :00008 [03] %2 = @data: -
 :00009 [04] %3 = 1: i32
 :00010 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00012 [03] %2 = %2 | %1                         [<INVALID>][<INVALID>]
 :00013 [02] @data: - = %2
 :00014 [03] %2 = %0._adc()                       [<INVALID>]
 :00016 [02] ret %2
------------------------------------
------------------------------------
<_sax> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:804
meta:on_stack:true kind:Ruby mode:method FuncId(487) regs:3 ISeq(RubyFuncInfo { id:487 name:_sax method:(FuncId(487), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @_x: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [01] @data: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<_sbx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:808
meta:on_stack:true kind:Ruby mode:method FuncId(488) regs:3 ISeq(RubyFuncInfo { id:488 name:_sbx method:(FuncId(488), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @_x: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = @data: -
 :00005 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00006 [01] @data: - = %1
 :00007 [02] %1 = @data: -
 :00008 [03] %2 = 65535: i32
 :00009 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00010 [02] _%1 = %1 <= 255: i16                 [<INVALID>][<INVALID>]
 :00011 [01] condnotbr _%1 =>:00014
+:00012 [02] %1 = 1: i32
 :00013 [02] br =>:00015
+:00014 [02] %1 = 0: i32
+:00015 [01] @_p_c: - = %1
 :00016 [02] %1 = @data: -
 :00017 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00018 [01] @_x: - = %1
 :00019 [01] @_p_nz: - = %1
 :00020 [01] ret %1
------------------------------------
------------------------------------
<_sha> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:814
meta:on_stack:true kind:Ruby mode:method FuncId(489) regs:4 ISeq(RubyFuncInfo { id:489 name:_sha method:(FuncId(489), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @_x: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = @addr: -
 :00005 [04] %3 = 8: i32
 :00006 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00008 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00010 [01] @data: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<_shs> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:818
meta:on_stack:true kind:Ruby mode:method FuncId(490) regs:4 ISeq(RubyFuncInfo { id:490 name:_shs method:(FuncId(490), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_a: -
 :00002 [03] %2 = @_x: -
 :00003 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00004 [01] @_sp: - = %1
 :00005 [02] %1 = @_sp: -
 :00006 [03] %2 = @addr: -
 :00007 [04] %3 = 8: i32
 :00008 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00010 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00011 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00012 [01] @data: - = %1
 :00013 [01] ret %1
------------------------------------
------------------------------------
<_shx> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:823
meta:on_stack:true kind:Ruby mode:method FuncId(491) regs:4 ISeq(RubyFuncInfo { id:491 name:_shx method:(FuncId(491), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_x: -
 :00002 [03] %2 = @addr: -
 :00003 [04] %3 = 8: i32
 :00004 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00006 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00008 [01] @data: - = %1
 :00009 [02] %1 = @data: -
 :00010 [03] %2 = 8: i32
 :00011 [02] %1 = %1.<<(%2;1)                     [<INVALID>]
 :00013 [03] %2 = @addr: -
 :00014 [03] %2 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00015 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00016 [01] @addr: - = %1
 :00017 [01] ret %1
------------------------------------
------------------------------------
<_shy> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:828
meta:on_stack:true kind:Ruby mode:method FuncId(492) regs:4 ISeq(RubyFuncInfo { id:492 name:_shy method:(FuncId(492), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_y: -
 :00002 [03] %2 = @addr: -
 :00003 [04] %3 = 8: i32
 :00004 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00006 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00007 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00008 [01] @data: - = %1
 :00009 [02] %1 = @data: -
 :00010 [03] %2 = 8: i32
 :00011 [02] %1 = %1.<<(%2;1)                     [<INVALID>]
 :00013 [03] %2 = @addr: -
 :00014 [03] %2 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00015 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00016 [01] @addr: - = %1
 :00017 [01] ret %1
------------------------------------
------------------------------------
<_slo> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:833
meta:on_stack:true kind:Ruby mode:method FuncId(493) regs:3 ISeq(RubyFuncInfo { id:493 name:_slo method:(FuncId(493), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [03] %2 = 7: i32
 :00003 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00005 [01] @_p_c: - = %1
 :00006 [02] %1 = @data: -
 :00007 [03] %2 = 1: i32
 :00008 [02] %1 = %1.<<(%2;1)                     [<INVALID>]
 :00010 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00011 [01] @data: - = %1
 :00012 [02] %1 = @_a: -
 :00013 [03] %2 = @data: -
 :00014 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00015 [01] @_a: - = %1
 :00016 [01] @_p_nz: - = %1
 :00017 [01] ret %1
------------------------------------
------------------------------------
<_sre> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:839
meta:on_stack:true kind:Ruby mode:method FuncId(494) regs:3 ISeq(RubyFuncInfo { id:494 name:_sre method:(FuncId(494), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @data: -
 :00002 [02] %1 = %1 & 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @_p_c: - = %1
 :00004 [02] %1 = @data: -
 :00005 [03] %2 = 1: i32
 :00006 [02] %1 = %1.>>(%2;1)                     [<INVALID>]
 :00008 [01] @data: - = %1
 :00009 [02] %1 = @_a: -
 :00010 [03] %2 = @data: -
 :00011 [02] %1 = %1 ^ %2                         [<INVALID>][<INVALID>]
 :00012 [01] @_a: - = %1
 :00013 [01] @_p_nz: - = %1
 :00014 [01] ret %1
------------------------------------
------------------------------------
<_nop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:846
meta:on_stack:true kind:Ruby mode:method FuncId(495) regs:2 ISeq(RubyFuncInfo { id:495 name:_nop method:(FuncId(495), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<_brk> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:850
meta:on_stack:true kind:Ruby mode:method FuncId(496) regs:5 ISeq(RubyFuncInfo { id:496 name:_brk method:(FuncId(496), 0) args: 0 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @_pc: -
 :00002 [03] %1 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [03] _ = %0.push16(%1;1)                  [<INVALID>]
 :00005 [04] %3 = %0.flags_pack()                 [<INVALID>]
 :00007 [03] %1 = %3 | 16: i16                    [<INVALID>][<INVALID>]
 :00008 [03] _ = %0.push8(%1;1)                   [<INVALID>]
 :00010 [04] %3 = 4: i32
 :00011 [03] @_p_i: - = %3
 :00012 [04] %3 = const[FOREVER_CLOCK]            [<INVALID>]
 :00013 [03] @clk_irq: - = %3
 :00014 [04] %3 = @clk: -
 :00015 [05] %4 = const[CLK_7]                    [<INVALID>]
 :00016 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00017 [03] @clk: - = %3
 :00018 [04] %3 = %0.fetch_irq_isr_vector()       [<INVALID>]
 :00020 [04] %2 = %3
 :00021 [04] %3 = %0.peek16(%2;1)                 [<INVALID>]
 :00023 [03] @_pc: - = %3
 :00024 [03] ret %3
------------------------------------
------------------------------------
<_jam> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:862
meta:on_stack:true kind:Ruby mode:method FuncId(497) regs:3 ISeq(RubyFuncInfo { id:497 name:_jam method:(FuncId(497), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @_pc: -
 :00002 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00003 [03] %2 = 65535: i32
 :00004 [02] %1 = %1 & %2                         [<INVALID>][<INVALID>]
 :00005 [01] @_pc: - = %1
 :00006 [02] %1 = @clk: -
 :00007 [03] %2 = const[CLK_2]                    [<INVALID>]
 :00008 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00009 [01] @clk: - = %1
 :00010 [02] %1 = @jammed: -
 :00011 [01] condnotbr %1 =>:00014
+:00012 [02] %1 = nil
 :00013 [01] ret %1
+:00014 [02] %1 = literal[true]
 :00015 [01] @jammed: - = %1
 :00016 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00017 [01] @clk_nmi: - = %1
 :00018 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00019 [01] @clk_irq: - = %1
 :00020 [02] %1 = 0: i32
 :00021 [01] @irq_flags: - = %1
 :00022 [01] ret %1
------------------------------------
------------------------------------
<r_op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:877
meta:on_stack:true kind:Ruby mode:method FuncId(498) regs:6 ISeq(RubyFuncInfo { id:498 name:r_op method:(FuncId(498), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = %2
 :00002 [05] %4 = literal[true]
 :00003 [06] %5 = literal[false]
 :00004 [03] _ = %0.send(%3;3)                    [<INVALID>]
 :00006 [04] %3 = %0.send(%1;1)                   [<INVALID>]
 :00008 [03] ret %3
------------------------------------
------------------------------------
<w_op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:882
meta:on_stack:true kind:Ruby mode:method FuncId(499) regs:7 ISeq(RubyFuncInfo { id:499 name:w_op method:(FuncId(499), 0) args: 3 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = %2
 :00002 [06] %5 = literal[false]
 :00003 [07] %6 = literal[true]
 :00004 [04] _ = %0.send(%4;3)                    [<INVALID>]
 :00006 [04] _ = %0.send(%1;1)                    [<INVALID>]
 :00008 [05] %4 = %0.send(%3;1)                   [<INVALID>]
 :00010 [04] ret %4
------------------------------------
------------------------------------
<rw_op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:888
meta:on_stack:true kind:Ruby mode:method FuncId(500) regs:7 ISeq(RubyFuncInfo { id:500 name:rw_op method:(FuncId(500), 0) args: 3 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = %2
 :00002 [06] %5 = literal[true]
 :00003 [07] %6 = literal[true]
 :00004 [04] _ = %0.send(%4;3)                    [<INVALID>]
 :00006 [04] _ = %0.send(%1;1)                    [<INVALID>]
 :00008 [05] %4 = %0.send(%3;1)                   [<INVALID>]
 :00010 [04] ret %4
------------------------------------
------------------------------------
<a_op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:894
meta:on_stack:true kind:Ruby mode:method FuncId(501) regs:4 ISeq(RubyFuncInfo { id:501 name:a_op method:(FuncId(501), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @clk: -
 :00002 [04] %3 = const[CLK_2]                    [<INVALID>]
 :00003 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00004 [02] @clk: - = %2
 :00005 [03] %2 = @_a: -
 :00006 [02] @data: - = %2
 :00007 [02] _ = %0.send(%1;1)                    [<INVALID>]
 :00009 [03] %2 = @data: -
 :00010 [02] @_a: - = %2
 :00011 [02] ret %2
------------------------------------
------------------------------------
<no_op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:901
meta:on_stack:true kind:Ruby mode:method FuncId(502) regs:6 ISeq(RubyFuncInfo { id:502 name:no_op method:(FuncId(502), 0) args: 3 non_temp: 3 temp: 2})
[]
+:00000 [04] init_method reg:5 arg:3 req:3 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = @_pc: -
 :00002 [05] %4 = %4 + %2                         [<INVALID>][<INVALID>]
 :00003 [04] @_pc: - = %4
 :00004 [05] %4 = @clk: -
 :00005 [06] %5 = const[RP2A03_CC]                [<INVALID>]
 :00006 [06] %5 = %3 * %5                         [<INVALID>][<INVALID>]
 :00007 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00008 [04] @clk: - = %4
 :00009 [04] ret %4
------------------------------------
------------------------------------
<do_clock> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:906
meta:on_stack:true kind:Ruby mode:method FuncId(503) regs:4 ISeq(RubyFuncInfo { id:503 name:do_clock method:(FuncId(503), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @apu: -
 :00002 [02] %1 = %2.do_clock()                   [<INVALID>]
 :00004 [03] %2 = @clk_frame: -
 :00005 [03] _%2 = %1 > %2                        [<INVALID>][<INVALID>]
 :00006 [02] condnotbr _%2 =>:00008
+:00007 [02] %1 = @clk_frame: -
+:00008 [03] %2 = @clk: -
 :00009 [04] %3 = @clk_nmi: -
 :00010 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00011 [02] condnotbr _%2 =>:00031
+:00012 [03] %2 = @clk_nmi: -
 :00013 [03] _%2 = %1 > %2                        [<INVALID>][<INVALID>]
 :00014 [02] condnotbr _%2 =>:00016
+:00015 [02] %1 = @clk_nmi: -
+:00016 [03] %2 = @clk: -
 :00017 [04] %3 = @clk_irq: -
 :00018 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00019 [02] condnotbr _%2 =>:00025
+:00020 [03] %2 = @clk_irq: -
 :00021 [03] _%2 = %1 > %2                        [<INVALID>][<INVALID>]
 :00022 [02] condnotbr _%2 =>:00024
+:00023 [02] %1 = @clk_irq: -
+:00024 [02] br =>:00030
+:00025 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00026 [02] @clk_irq: - = %2
 :00027 [03] %2 = const[IRQ_VECTOR]               [<INVALID>]
 :00028 [02] _ = %0.do_isr(%2;1)                  [<INVALID>]
+:00030 [02] br =>:00037
+:00031 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00032 [02] @clk_irq: - = %2
 :00033 [02] @clk_nmi: - = %2
 :00034 [03] %2 = const[NMI_VECTOR]               [<INVALID>]
 :00035 [02] _ = %0.do_isr(%2;1)                  [<INVALID>]
+:00037 [02] @clk_target: - = %1
 :00038 [02] ret %1
------------------------------------
------------------------------------
<run> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:926
meta:on_stack:true kind:Ruby mode:method FuncId(504) regs:14 ISeq(RubyFuncInfo { id:504 name:run method:(FuncId(504), 0) args: 0 non_temp: 0 temp: 13})
[]
+:00000 [01] init_method reg:13 arg:0 req:0 opt:0 rest:false block:None stack_offset:10
 :00001 [01] _ = %0.do_clock()                    [<INVALID>]
+:00003 [01] loop_start counter=0 jit-addr=0000000000000000
+:00004 [01] loop_start counter=0 jit-addr=0000000000000000
 :00005 [02] %1 = @_pc: -
 :00006 [02] %1 = %0.fetch(%1;1)                  [<INVALID>]
 :00008 [01] @opcode: - = %1
 :00009 [02] %1 = @conf: -
 :00010 [02] %1 = %1.loglevel()                   [<INVALID>]
 :00012 [02] _%1 = %1 >= 3: i16                   [<INVALID>][<INVALID>]
 :00013 [01] condnotbr _%1 =>:00033
+:00014 [02] %1 = @conf: -
 :00015 [03] %2 = literal["PC:%04X A:%02X X:%02X Y:%02X P:%02X SP:%02X CYC:%3d : OPCODE:%02X (%d, %d)"]
 :00016 [05] %4 = @_pc: -
 :00017 [06] %5 = @_a: -
 :00018 [07] %6 = @_x: -
 :00019 [08] %7 = @_y: -
 :00020 [09] %8 = %0.flags_pack()                 [<INVALID>]
 :00022 [10] %9 = @_sp: -
 :00023 [11] %10 = @clk: -
 :00024 [11] %10 = %10 / 4: i16                   [<INVALID>][<INVALID>]
 :00025 [11] %10 = %10 % 341: i16                 [<INVALID>][<INVALID>]
 :00026 [12] %11 = @opcode: -
 :00027 [13] %12 = @clk: -
 :00028 [14] %13 = @clk_target: -
 :00029 [04] %3 = array[%4; 10]
 :00030 [03] %2 = %2 % %3                         [<INVALID>][<INVALID>]
 :00031 [01] _ = %1.debug(%2;1)                   [<INVALID>]
+:00033 [02] %1 = @_pc: -
 :00034 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00035 [01] @_pc: - = %1
 :00036 [02] %1 = const[DISPATCH]                 [<INVALID>]
 :00037 [03] %2 = @opcode: -
 :00038 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00039 [01] _ = %0.send(%1;1)*                   [<INVALID>]
 :00041 [02] %1 = @ppu_sync: -
 :00042 [01] condnotbr %1 =>:00047
+:00043 [02] %1 = @ppu: -
 :00044 [03] %2 = @clk: -
 :00045 [01] _ = %1.sync(%2;1)                    [<INVALID>]
+:00047 [02] %1 = @clk: -
 :00048 [03] %2 = @clk_target: -
 :00049 [02] _%1 = %1 < %2                        [<INVALID>][<INVALID>]
 :00050 [01] condbr _%1 =>:00004
+:00051 [01] loop_end
+:00052 [01] _ = %0.do_clock()                    [<INVALID>]
 :00054 [02] %1 = @clk: -
 :00055 [03] %2 = @clk_frame: -
 :00056 [02] _%1 = %1 < %2                        [<INVALID>][<INVALID>]
 :00057 [01] condbr _%1 =>:00003
+:00058 [02] %1 = nil
 :00059 [02] loop_end
+:00060 [01] ret %1
------------------------------------
------------------------------------
<op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:957
meta:on_stack:true kind:Ruby mode:method FuncId(505) regs:5 ISeq(RubyFuncInfo { id:505 name:op method:(FuncId(505), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal[33423361]
 :00002 [04] %3 = %1.each( &%3)                   [<INVALID>]
 :00004 [03] ret %3
------------------------------------
------------------------------------
<OptimizedCodeBuilder> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1085
meta:on_stack:true kind:Ruby mode:class_def FuncId(506) regs:2 ISeq(RubyFuncInfo { id:506 name:OptimizedCodeBuilder method:(FuncId(506), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[CodeOptimizationHelper]   [<INVALID>]
 :00002 [01] _ = %0.include(%1;1)                 [<INVALID>]
 :00004 [02] %1 = literal[[:method_inlining, :constant_inlining, :ivar_localization, :trivial_branches]]
 :00005 [01] const[OPTIONS] = %1
 :00006 [02] %1 = literal[[:@addr, :@data, :@_a, :@_x, :@_y, :@_pc, :@_sp, :@fetch, :@store, :@ram, :@opcode]]
 :00007 [01] const[LOCALIZE_IVARS] = %1
 :00008 [01] method_def build: FuncId(511)
 :00009 [01] method_def build_loop: FuncId(512)
 :00010 [01] method_def cpu_expand_methods: FuncId(513)
 :00011 [01] method_def expand_constants: FuncId(514)
 :00012 [02] %1 = :expand_constants
 :00013 [01] ret %1
------------------------------------
------------------------------------
<block in add_mappings> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:119
meta:on_stack:true kind:Ruby mode:method FuncId(507) regs:4 ISeq(RubyFuncInfo { id:507 name:<unnamed> method:(FuncId(379), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @fetch: -
 :00002 [04] %3 = dynvar(1, %2)
 :00003 [02] %2:.[%1:] = %3
 :00004 [03] %2 = @store: -
 :00005 [04] %3 = dynvar(1, %3)
 :00006 [04] condbr %3 =>:00008
+:00007 [04] %3 = @poke_nop: -
+:00008 [02] %2:.[%1:] = %3
 :00009 [02] ret %3
------------------------------------
------------------------------------
<block in sprite_dma> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:182
meta:on_stack:true kind:Ruby mode:method FuncId(508) regs:5 ISeq(RubyFuncInfo { id:508 name:<unnamed> method:(FuncId(391), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = dynvar(1, %2)
 :00002 [04] %3 = @ram: -
 :00003 [05] %4 = dynvar(1, %1)
 :00004 [05] %4 = %4 + %1                         [<INVALID>][<INVALID>]
 :00005 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00006 [02] %2:.[%1:] = %3
 :00007 [02] ret %3
------------------------------------
------------------------------------
<block in sprite_dma> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:183
meta:on_stack:true kind:Ruby mode:method FuncId(509) regs:6 ISeq(RubyFuncInfo { id:509 name:<unnamed> method:(FuncId(391), 1) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = dynvar(1, %2)
 :00002 [04] %3 = %1 * 4: i16                     [<INVALID>][<INVALID>]
 :00003 [04] %3 = %3 + 2: i16                     [<INVALID>][<INVALID>]
 :00004 [05] %4 = dynvar(1, %2)
 :00005 [06] %5 = %1 * 4: i16                     [<INVALID>][<INVALID>]
 :00006 [06] %5 = %5 + 2: i16                     [<INVALID>][<INVALID>]
 :00007 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00008 [05] %4 = %4 & 227: i16                   [<INVALID>][<INVALID>]
 :00009 [02] %2:.[%3:] = %4
 :00010 [02] ret %4
------------------------------------
------------------------------------
<block in op> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:958
meta:on_stack:true kind:Ruby mode:method FuncId(510) regs:10 ISeq(RubyFuncInfo { id:510 name:<unnamed> method:(FuncId(505), 1) args: 1 non_temp: 5 temp: 4})
[]
+:00000 [06] init_method reg:9 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [07] %6 = dynvar(1, %2)
 :00002 [08] %7 = const[Array]                    [<INVALID>]
 :00003 [07] %6 = %6.is_a?(%7;1)                  [<INVALID>]
 :00005 [06] condnotbr %6 =>:00046
+:00006 [07] %6 = literal[[:r_op, :w_op, :rw_op]]
 :00007 [08] %7 = dynvar(1, %2)
 :00008 [09] %8 = 0: i32
 :00009 [08] %7 = %7.[%8]                         [<INVALID>][<INVALID>]
 :00010 [07] %6 = %6.include?(%7;1)               [<INVALID>]
 :00012 [06] condnotbr %6 =>:00046
+:00013 [07] %6 = dynvar(1, %2)
 :00014 [07] %7; 3 = expand(%6)
 :00015 [07] %2 = %7
 :00016 [07] %3 = %8
 :00017 [07] %4 = %9
 :00018 [07] %6 = const[ADDRESSING_MODES]         [<INVALID>]
 :00019 [07] %6 = %6.[%4]                         [<INVALID>][<INVALID>]
 :00020 [08] %7 = 2: i32
 :00021 [08] %7 = %1.>>(%7;1)                     [<INVALID>]
 :00023 [08] %7 = %7 & 7: i16                     [<INVALID>][<INVALID>]
 :00024 [06] %4 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00025 [07] %6 = %2
 :00026 [08] %7 = %3
 :00027 [09] %8 = %4
 :00028 [06] %5 = array[%6; 3]
 :00029 [07] %6 = :r_op
 :00030 [07] _%6 = %2 != %6                       [<INVALID>][<INVALID>]
 :00031 [06] condnotbr _%6 =>:00043
+:00032 [07] %6 = %4.to_s()                       [<INVALID>]
 :00034 [08] %7 = literal["zpg"]
 :00035 [07] %6 = %6.start_with?(%7;1)            [<INVALID>]
 :00037 [06] condnotbr %6 =>:00040
+:00038 [07] %6 = :store_zpg
 :00039 [07] br =>:00041
+:00040 [07] %6 = :store_mem
+:00041 [06] _ = %5.<<(%6;1)                      [<INVALID>]
+:00043 [07] %6 = const[DISPATCH]                 [<INVALID>]
 :00044 [06] %6:.[%1:] = %5
 :00045 [06] ret %5
+:00046 [07] %6 = const[DISPATCH]                 [<INVALID>]
 :00047 [09] %8 = dynvar(1, %2)
 :00048 [08] %7 = array[%8; 1]
 :00049 [06] %6:.[%1:] = %7
 :00050 [06] ret %7
------------------------------------
------------------------------------
<build> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1092
meta:on_stack:true kind:Ruby mode:method FuncId(511) regs:6 ISeq(RubyFuncInfo { id:511 name:build method:(FuncId(511), 0) args: 0 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = :ivar_localization
 :00002 [05] %4 = :method_inlining
 :00003 [03] _ = %0.depends(%3;2)                 [<INVALID>]
 :00005 [04] %3 = literal["/home/monochrome/optcarrot/lib/optcarrot/cpu.rb"]
 :00006 [03] %1 = %0.parse_method_definitions(%3;1) [<INVALID>]
 :00008 [03] %2 = %0.build_loop(%1;1)             [<INVALID>]
 :00010 [04] %3 = @method_inlining: -
 :00011 [03] condnotbr %3 =>:00016
+:00012 [04] %3 = %2
 :00013 [05] %4 = %1
 :00014 [03] %2 = %0.cpu_expand_methods(%3;2)     [<INVALID>]
+:00016 [04] %3 = @trivial_branches: -
 :00017 [03] condnotbr %3 =>:00020
+:00018 [03] %2 = %0.remove_trivial_branches(%2;1) [<INVALID>]
+:00020 [04] %3 = @constant_inlining: -
 :00021 [03] condnotbr %3 =>:00024
+:00022 [03] %2 = %0.expand_constants(%2;1)       [<INVALID>]
+:00024 [04] %3 = @ivar_localization: -
 :00025 [03] condnotbr %3 =>:00030
+:00026 [04] %3 = %2
 :00027 [05] %4 = const[LOCALIZE_IVARS]           [<INVALID>]
 :00028 [03] %2 = %0.localize_instance_variables(%3;2) [<INVALID>]
+:00030 [04] %3 = literal["def self.run"]
 :00031 [05] %4 = 2: i32
 :00032 [06] %5 = %2
 :00033 [05] %4 = %0.indent(%4;2)                 [<INVALID>]
 :00035 [06] %5 = literal["end"]
 :00036 [04] %3 = %0.gen(%3;3)                    [<INVALID>]
 :00038 [03] ret %3
------------------------------------
------------------------------------
<build_loop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1112
meta:on_stack:true kind:Ruby mode:method FuncId(512) regs:8 ISeq(RubyFuncInfo { id:512 name:build_loop method:(FuncId(512), 0) args: 1 non_temp: 3 temp: 4})
[]
+:00000 [04] init_method reg:7 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = literal["case @opcode"]
 :00002 [06] %5 = const[DISPATCH]                 [<INVALID>]
 :00003 [06] %5 = %5.map()                        [<INVALID>]
 :00005 [07] %6 = literal[33751041]
 :00006 [06] %5 = %5.with_index( &%6)             [<INVALID>]
 :00008 [07] %6 = literal["end"]
 :00009 [04] %2 = %0.gen(%4;3)*                   [<INVALID>]
 :00011 [05] %4 = :run
 :00012 [05] %4 = %1.[%4]                         [<INVALID>][<INVALID>]
 :00013 [05] %4 = %4.body()                       [<INVALID>]
 :00015 [06] %5 = literal[33816577]
 :00016 [07] %6 = literal["@conf.loglevel >= 3"]
 :00017 [04] %3 = %4.sub(%6;1 &%5)                [<INVALID>]
 :00019 [05] %4 = literal[33882113]
 :00020 [06] %5 = literal[/(?m)^ *send.*\n/]
 :00021 [05] %4 = %3.sub(%5;1 &%4)                [<INVALID>]
 :00023 [04] ret %4
------------------------------------
------------------------------------
<cpu_expand_methods> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1134
meta:on_stack:true kind:Ruby mode:method FuncId(513) regs:12 ISeq(RubyFuncInfo { id:513 name:cpu_expand_methods method:(FuncId(513), 0) args: 2 non_temp: 2 temp: 9})
[]
+:00000 [03] init_method reg:11 arg:2 req:2 opt:0 rest:false block:None stack_offset:9
 :00001 [04] %3 = %1
 :00002 [05] %4 = %2
 :00003 [06] %5 = %2.keys()                       [<INVALID>]
 :00005 [07] %6 = literal[/(?m)^_/]
 :00006 [06] %5 = %5.grep(%6;1)                   [<INVALID>]
 :00008 [03] %1 = %0.expand_methods(%3;3)         [<INVALID>]
 :00010 [05] %4 = literal[[:_adc, :_sbc, :_cmp, :store_mem, :store_zpg]]
 :00011 [06] %5 = literal[[:imm, :abs, :zpg, :abs_x, :abs_y, :zpg_x, :zpg_y, :ind_x, :ind_y]]
 :00012 [07] %6 = literal[[:abs_reg, :zpg_reg]]
 :00013 [08] %7 = literal[[:read_write]]
 :00014 [09] %8 = literal[[:do_clock]]
 :00015 [10] %9 = literal[[:do_isr]]
 :00016 [11] %10 = literal[[:branch, :push16]]
 :00017 [12] %11 = literal[[:push8]]
 :00018 [04] %3 = array[%4; 8]
 :00019 [05] %4 = literal[33947649]
 :00020 [03] _ = %3.each( &%4)                    [<INVALID>]
 :00022 [04] %3 = literal[[:fetch, :peek16, :store, :pull16, :pull8]]
 :00023 [05] %4 = literal[34013185]
 :00024 [03] _ = %3.each( &%4)                    [<INVALID>]
 :00026 [03] ret %1
------------------------------------
------------------------------------
<expand_constants> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1155
meta:on_stack:true kind:Ruby mode:method FuncId(514) regs:4 ISeq(RubyFuncInfo { id:514 name:expand_constants method:(FuncId(514), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[34078721]
 :00002 [04] %3 = literal[/(?m)CLK_(\d+)/]
 :00003 [02] %1 = %1.gsub(%3;1 &%2)               [<INVALID>]
 :00005 [03] %2 = literal[34144257]
 :00006 [04] %3 = literal[/(?m)FOREVER_CLOCK/]
 :00007 [02] %1 = %1.gsub(%3;1 &%2)               [<INVALID>]
 :00009 [02] ret %1
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1115
meta:on_stack:true kind:Ruby mode:method FuncId(515) regs:10 ISeq(RubyFuncInfo { id:515 name:<unnamed> method:(FuncId(512), 1) args: 2 non_temp: 5 temp: 4})
[]
+:00000 [06] init_method reg:9 arg:2 req:2 opt:0 rest:false block:None stack_offset:8
 :00001 [07] %6 = %1.size()                       [<INVALID>]
 :00003 [07] _%6 = %6 > 1: i16                    [<INVALID>][<INVALID>]
 :00004 [06] condnotbr _%6 =>:00038
+:00005 [07] %6 = %1
 :00006 [07] %7; 2 = expand(%6)
 :00007 [07] %3 = %7
 :00008 [07] %4 = %8
 :00009 [07] %6 = %3
 :00010 [08] %7 = literal["("]
 :00011 [09] %8 = 1: i32
 :00012 [09] %8 = %1.drop(%8;1)                   [<INVALID>]
 :00014 [10] %9 = literal[", "]
 :00015 [09] %8 = %8.join(%9;1)                   [<INVALID>]
 :00017 [10] %9 = literal[")"]
 :00018 [07] %6 = concat(%6; 4)
 :00019 [08] %7 = %3
 :00020 [09] %8 = dynvar(1, %1)
 :00021 [09] %8 = %8.[%3]                         [<INVALID>][<INVALID>]
 :00022 [06] %5 = %0.expand_inline_methods(%6;3)  [<INVALID>]
 :00024 [07] %6 = literal[34209793]
 :00025 [08] %7 = literal[/(?m)send\((\w+), (.*?)\)/]
 :00026 [06] %5 = %5.gsub(%7;1 &%6)               [<INVALID>]
 :00028 [07] %6 = literal[34275329]
 :00029 [08] %7 = literal[/(?m)send\((\w+)\)/]
 :00030 [06] %5 = %5.gsub(%7;1 &%6)               [<INVALID>]
 :00032 [07] %6 = literal[1..-2]
 :00033 [07] %6 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00034 [08] %7 = literal["; "]
 :00035 [06] %5 = %6.split(%7;1)                  [<INVALID>]
 :00037 [06] br =>:00041
+:00038 [07] %6 = 0: i32
 :00039 [06] %5 = %1.[%6]                         [<INVALID>][<INVALID>]
 :00040 [06] %4 = %5
+:00041 [07] %6 = literal["when 0x%02x # "]
 :00042 [08] %7 = %4
 :00043 [09] %8 = literal["\n"]
 :00044 [07] %6 = concat(%6; 3)
 :00045 [07] %6 = %6 % %2                         [<INVALID>][<INVALID>]
 :00046 [08] %7 = 2: i32
 :00047 [09] %8 = %0.gen(%5;1)*                   [<INVALID>]
 :00049 [08] %7 = %0.indent(%7;2)                 [<INVALID>]
 :00051 [07] %6 = %6 + %7                         [<INVALID>][<INVALID>]
 :00052 [06] ret %6
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1129
meta:on_stack:true kind:Ruby mode:method FuncId(516) regs:2 ISeq(RubyFuncInfo { id:516 name:<unnamed> method:(FuncId(512), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @loglevel: -
 :00002 [02] %1 = %1 >= 3: i16                    [<INVALID>][<INVALID>]
 :00003 [01] ret %1
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1130
meta:on_stack:true kind:Ruby mode:method FuncId(517) regs:3 ISeq(RubyFuncInfo { id:517 name:<unnamed> method:(FuncId(512), 1) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = 4: i32
 :00002 [03] %2 = dynvar(1, %2)
 :00003 [02] %1 = %0.indent(%1;2)                 [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<block in cpu_expand_methods> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1145
meta:on_stack:true kind:Ruby mode:method FuncId(518) regs:5 ISeq(RubyFuncInfo { id:518 name:<unnamed> method:(FuncId(513), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = dynvar(1, %1)
 :00002 [04] %3 = dynvar(1, %2)
 :00003 [05] %4 = %1
 :00004 [03] %2 = %0.expand_methods(%2;3)         [<INVALID>]
 :00006 [02] dynvar(1, %1) = %2
 :00007 [02] ret %2
------------------------------------
------------------------------------
<block in cpu_expand_methods> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1148
meta:on_stack:true kind:Ruby mode:method FuncId(519) regs:5 ISeq(RubyFuncInfo { id:519 name:<unnamed> method:(FuncId(513), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = dynvar(1, %1)
 :00002 [04] %3 = %1
 :00003 [05] %4 = dynvar(1, %2)
 :00004 [05] %4 = %4.[%1]                         [<INVALID>][<INVALID>]
 :00005 [03] %2 = %0.expand_inline_methods(%2;3)  [<INVALID>]
 :00007 [02] dynvar(1, %1) = %2
 :00008 [02] ret %2
------------------------------------
------------------------------------
<block in expand_constants> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1156
meta:on_stack:true kind:Ruby mode:method FuncId(520) regs:2 ISeq(RubyFuncInfo { id:520 name:<unnamed> method:(FuncId(514), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = $&
 :00002 [02] %1 = %0.eval(%1;1)                   [<INVALID>]
 :00004 [01] ret %1
------------------------------------
------------------------------------
<block in expand_constants> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1157
meta:on_stack:true kind:Ruby mode:method FuncId(521) regs:2 ISeq(RubyFuncInfo { id:521 name:<unnamed> method:(FuncId(514), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal["0xffffffff"]
 :00002 [01] ret %1
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1119
meta:on_stack:true kind:Ruby mode:method FuncId(522) regs:5 ISeq(RubyFuncInfo { id:522 name:<unnamed> method:(FuncId(512), 2) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = $1
 :00002 [03] %2 = literal["("]
 :00003 [04] %3 = $2
 :00004 [05] %4 = literal[")"]
 :00005 [02] %1 = concat(%1; 4)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/cpu.rb:1120
meta:on_stack:true kind:Ruby mode:method FuncId(523) regs:2 ISeq(RubyFuncInfo { id:523 name:<unnamed> method:(FuncId(512), 2) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = $1
 :00002 [01] ret %1
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(524) regs:2 ISeq(RubyFuncInfo { id:524 name:/main method:(FuncId(524), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(525)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(525) regs:2 ISeq(RubyFuncInfo { id:525 name:Optcarrot method:(FuncId(525), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def CodeOptimizationHelper: FuncId(526)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<CodeOptimizationHelper> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(526) regs:4 ISeq(RubyFuncInfo { id:526 name:CodeOptimizationHelper method:(FuncId(526), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [01] method_def initialize: FuncId(527)
 :00002 [01] method_def depends: FuncId(528)
 :00003 [01] method_def gen: FuncId(529)
 :00004 [01] method_def indent: FuncId(530)
 :00005 [01] method_def branch: FuncId(531)
 :00006 [02] %1 = const[Struct]                   [<INVALID>]
 :00007 [03] %2 = :params
 :00008 [04] %3 = :body
 :00009 [02] %1 = %1.new(%2;2)                    [<INVALID>]
 :00011 [01] const[MethodDef] = %1
 :00012 [02] %1 = literal[/(?mx)
      ^(\ +)def[[:space:]]+(\w+)(?:\((.*)\))?\n
      ^((?:\1\ +.*\n|\n)*)
      ^\1end$
    /]
 :00013 [01] const[METHOD_DEFINITIONS_RE] = %1
 :00014 [01] method_def parse_method_definitions: FuncId(532)
 :00015 [01] method_def expand_methods: FuncId(533)
 :00016 [01] method_def expand_inline_methods: FuncId(534)
 :00017 [01] method_def replace_var: FuncId(535)
 :00018 [01] method_def replace_cond_var: FuncId(536)
 :00019 [02] %1 = literal[/(?mx)
      ^(\ *)(if|unless)\ (true|false)\n
      ^((?:\1\ +.*\n|\n)*)
       (?:
         \1else\n
         ((?:\1\ +.*\n|\n)*)
       )?
      ^\1end\n
    /]
 :00020 [01] const[TRIVIAL_BRANCH_RE] = %1
 :00021 [01] method_def remove_trivial_branches: FuncId(537)
 :00022 [01] method_def localize_instance_variables: FuncId(538)
 :00023 [02] %1 = :localize_instance_variables
 :00024 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:4
meta:on_stack:true kind:Ruby mode:method FuncId(527) regs:9 ISeq(RubyFuncInfo { id:527 name:initialize method:(FuncId(527), 0) args: 2 non_temp: 5 temp: 3})
[]
+:00000 [06] init_method reg:8 arg:2 req:2 opt:0 rest:false block:None stack_offset:8
 :00001 [06] @loglevel: - = %1
 :00002 [06] %3 = const[OPTIONS]                  [<INVALID>]
 :00003 [06] %4 = literal[{}]
 :00004 [07] %6 = %2
 :00005 [07] condbr %6 =>:00008
+:00006 [07] %2 = literal[[:all]]
 :00007 [07] %6 = %2
+:00008 [08] %7 = literal[[:all]]
 :00009 [07] %6 = %2 == %7                        [<INVALID>][<INVALID>]
 :00010 [07] condbr %6 =>:00017
+:00011 [08] %7 = literal[[]]
 :00012 [07] %6 = %2 != %7                        [<INVALID>][<INVALID>]
 :00013 [07] condnotbr %6 =>:00017
+:00014 [08] %7 = literal[35323905]
 :00015 [07] %6 = %2.all?( &%7)                   [<INVALID>]
+:00017 [06] %5 = %6
 :00018 [07] %6 = literal[35389441]
 :00019 [06] _ = %3.each( &%6)                    [<INVALID>]
 :00021 [07] %6 = literal[[:none, :all]]
 :00022 [07] %6 = %2 - %6                         [<INVALID>][<INVALID>]
 :00023 [08] %7 = literal[35454977]
 :00024 [06] _ = %6.each( &%7)                    [<INVALID>]
 :00026 [07] %6 = literal[35520513]
 :00027 [07] %6 = %3.each( &%6)                   [<INVALID>]
 :00029 [06] ret %6
------------------------------------
------------------------------------
<depends> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:24
meta:on_stack:true kind:Ruby mode:method FuncId(528) regs:8 ISeq(RubyFuncInfo { id:528 name:depends method:(FuncId(528), 0) args: 2 non_temp: 2 temp: 5})
[]
+:00000 [03] init_method reg:7 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %3 = literal["@"]
 :00002 [05] %4 = %1
 :00003 [04] %3 = concat(%3; 2)
 :00004 [04] %3 = %3.to_sym()                     [<INVALID>]
 :00006 [04] %3 = %0.instance_variable_get(%3;1)  [<INVALID>]
 :00008 [03] condnotbr %3 =>:00027
+:00009 [05] %4 = literal["@"]
 :00010 [06] %5 = %2
 :00011 [05] %4 = concat(%4; 2)
 :00012 [05] %4 = %4.to_sym()                     [<INVALID>]
 :00014 [04] %3 = %0.instance_variable_get(%4;1)  [<INVALID>]
 :00016 [04] %3 = !%3                             [<INVALID>]
 :00017 [03] condnotbr %3 =>:00027
+:00018 [04] %3 = literal["`"]
 :00019 [05] %4 = %1
 :00020 [06] %5 = literal["' depends upon `"]
 :00021 [07] %6 = %2
 :00022 [08] %7 = literal["'"]
 :00023 [04] %3 = concat(%3; 5)
 :00024 [04] %3 = %0.raise(%3;1)                  [<INVALID>]
 :00026 [03] ret %3
+:00027 [04] %3 = nil
 :00028 [03] ret %3
------------------------------------
------------------------------------
<gen> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:30
meta:on_stack:true kind:Ruby mode:method FuncId(529) regs:4 ISeq(RubyFuncInfo { id:529 name:gen method:(FuncId(529), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:0 opt:0 rest:true block:None stack_offset:5
 :00001 [03] %2 = literal[35586049]
 :00002 [03] %2 = %1.map( &%2)                    [<INVALID>]
 :00004 [04] %3 = literal["\n"]
 :00005 [03] %2 = %2.join(%3;1)                   [<INVALID>]
 :00007 [04] %3 = literal["\n"]
 :00008 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00009 [02] ret %2
------------------------------------
------------------------------------
<indent> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:35
meta:on_stack:true kind:Ruby mode:method FuncId(530) regs:8 ISeq(RubyFuncInfo { id:530 name:indent method:(FuncId(530), 0) args: 2 non_temp: 2 temp: 5})
[]
+:00000 [03] init_method reg:7 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [04] _%3 = %1 > 0: i16                    [<INVALID>][<INVALID>]
 :00002 [03] condnotbr _%3 =>:00008
+:00003 [04] %3 = literal[35651585]
 :00004 [05] %4 = literal[/(?m)^(.+)$/]
 :00005 [04] %3 = %2.gsub(%4;1 &%3)               [<INVALID>]
 :00007 [03] ret %3
+:00008 [04] _%3 = %1 < 0: i16                    [<INVALID>][<INVALID>]
 :00009 [03] condnotbr _%3 =>:00019
+:00010 [04] %4 = literal["(?m)"]
 :00011 [06] %5 = literal["^ {"]
 :00012 [07] %6 = -%1                             [<INVALID>]
 :00013 [08] %7 = literal["}"]
 :00014 [04] %3 = concat_regexp(%4; 4)
 :00015 [05] %4 = literal[""]
 :00016 [04] %3 = %2.gsub(%3;2)                   [<INVALID>]
 :00018 [03] ret %3
+:00019 [03] ret %2
------------------------------------
------------------------------------
<branch> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:46
meta:on_stack:true kind:Ruby mode:method FuncId(531) regs:9 ISeq(RubyFuncInfo { id:531 name:branch method:(FuncId(531), 0) args: 3 non_temp: 3 temp: 5})
[]
+:00000 [04] init_method reg:8 arg:3 req:3 opt:0 rest:false block:None stack_offset:8
 :00001 [05] %4 = literal["if "]
 :00002 [06] %5 = %1
 :00003 [05] %4 = concat(%4; 2)
 :00004 [06] %5 = 2: i32
 :00005 [07] %6 = %2
 :00006 [06] %5 = %0.indent(%5;2)                 [<INVALID>]
 :00008 [07] %6 = literal["else"]
 :00009 [08] %7 = 2: i32
 :00010 [09] %8 = %3
 :00011 [08] %7 = %0.indent(%7;2)                 [<INVALID>]
 :00013 [09] %8 = literal["end"]
 :00014 [05] %4 = %0.gen(%4;5)                    [<INVALID>]
 :00016 [04] ret %4
------------------------------------
------------------------------------
<parse_method_definitions> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:64
meta:on_stack:true kind:Ruby mode:method FuncId(532) regs:6 ISeq(RubyFuncInfo { id:532 name:parse_method_definitions method:(FuncId(532), 0) args: 1 non_temp: 3 temp: 2})
[]
+:00000 [04] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = const[File]                     [<INVALID>]
 :00002 [04] %2 = %4.read(%1;1)                   [<INVALID>]
 :00004 [04] %3 = literal[{}]
 :00005 [05] %4 = literal[35717121]
 :00006 [06] %5 = const[METHOD_DEFINITIONS_RE]    [<INVALID>]
 :00007 [04] _ = %2.scan(%5;1 &%4)                [<INVALID>]
 :00009 [04] ret %3
------------------------------------
------------------------------------
<expand_methods> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:85
meta:on_stack:true kind:Ruby mode:method FuncId(533) regs:10 ISeq(RubyFuncInfo { id:533 name:expand_methods method:(FuncId(533), 0) args: 3 non_temp: 3 temp: 6})
[]
+:00000 [04] init_method reg:9 arg:3 req:2 opt:1 rest:false block:None stack_offset:8
 :00001 [04] check_local(%3) =>:00004
+:00002 [04] %3 = %2.keys()                       [<INVALID>]
+:00004 [05] %4 = literal[35782657]
 :00005 [06] %6 = literal["(?m)"]
 :00006 [08] %7 = literal["^( *)\\b("]
 :00007 [09] %8 = literal["|"]
 :00008 [09] %8 = %3 * %8                         [<INVALID>][<INVALID>]
 :00009 [10] %9 = literal[")\\b(?:\\((.*?)\\))?\\n"]
 :00010 [06] %5 = concat_regexp(%6; 4)
 :00011 [05] %4 = %1.gsub(%5;1 &%4)               [<INVALID>]
 :00013 [04] ret %4
------------------------------------
------------------------------------
<expand_inline_methods> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:99
meta:on_stack:true kind:Ruby mode:method FuncId(534) regs:10 ISeq(RubyFuncInfo { id:534 name:expand_inline_methods method:(FuncId(534), 0) args: 3 non_temp: 3 temp: 6})
[]
+:00000 [04] init_method reg:9 arg:3 req:3 opt:0 rest:false block:None stack_offset:8
 :00001 [05] %4 = literal[35848193]
 :00002 [06] %6 = literal["(?m)"]
 :00003 [08] %7 = literal["\\b"]
 :00004 [09] %8 = %2
 :00005 [10] %9 = literal["\\b(?:\\(((?:@?\\w+, )*@?\\w+)\\))?"]
 :00006 [06] %5 = concat_regexp(%6; 4)
 :00007 [05] %4 = %1.gsub(%5;1 &%4)               [<INVALID>]
 :00009 [04] ret %4
------------------------------------
------------------------------------
<replace_var> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:112
meta:on_stack:true kind:Ruby mode:method FuncId(535) regs:10 ISeq(RubyFuncInfo { id:535 name:replace_var method:(FuncId(535), 0) args: 3 non_temp: 4 temp: 5})
[]
+:00000 [05] init_method reg:9 arg:3 req:3 opt:0 rest:false block:None stack_offset:8
 :00001 [06] %5 = literal["@"]
 :00002 [06] %5 = %2.start_with?(%5;1)            [<INVALID>]
 :00004 [05] condnotbr %5 =>:00011
+:00005 [06] %6 = literal["(?m)"]
 :00006 [08] %7 = literal[""]
 :00007 [09] %8 = %2
 :00008 [10] %9 = literal["\\b"]
 :00009 [06] %5 = concat_regexp(%6; 4)
 :00010 [06] br =>:00016
+:00011 [06] %6 = literal["(?m)"]
 :00012 [08] %7 = literal["\\b"]
 :00013 [09] %8 = %2
 :00014 [10] %9 = literal["\\b"]
 :00015 [06] %5 = concat_regexp(%6; 4)
+:00016 [06] %4 = %5
 :00017 [06] %5 = literal[35913729]
 :00018 [07] %6 = %4
 :00019 [06] %5 = %1.gsub(%6;1 &%5)               [<INVALID>]
 :00021 [05] ret %5
------------------------------------
------------------------------------
<replace_cond_var> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:117
meta:on_stack:true kind:Ruby mode:method FuncId(536) regs:10 ISeq(RubyFuncInfo { id:536 name:replace_cond_var method:(FuncId(536), 0) args: 3 non_temp: 3 temp: 6})
[]
+:00000 [04] init_method reg:9 arg:3 req:3 opt:0 rest:false block:None stack_offset:8
 :00001 [05] %4 = literal[35979265]
 :00002 [06] %6 = literal["(?m)"]
 :00003 [08] %7 = literal["(if|unless)[[:space:]]"]
 :00004 [09] %8 = %2
 :00005 [10] %9 = literal["\\b"]
 :00006 [06] %5 = concat_regexp(%6; 4)
 :00007 [05] %4 = %1.gsub(%5;1 &%4)               [<INVALID>]
 :00009 [04] ret %4
------------------------------------
------------------------------------
<remove_trivial_branches> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:131
meta:on_stack:true kind:Ruby mode:method FuncId(537) regs:4 ISeq(RubyFuncInfo { id:537 name:remove_trivial_branches method:(FuncId(537), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = %1.dup()                        [<INVALID>]
+:00003 [02] loop_start counter=0 jit-addr=0000000000000000
 :00004 [03] %2 = literal[36044801]
 :00005 [04] %3 = const[TRIVIAL_BRANCH_RE]        [<INVALID>]
 :00006 [03] %2 = %1.gsub!(%3;1 &%2)              [<INVALID>]
 :00008 [02] condnotbr %2 =>:00010
+:00009 [02] br =>:00003
+:00010 [02] loop_end
+:00011 [02] ret %1
------------------------------------
------------------------------------
<localize_instance_variables> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:146
meta:on_stack:true kind:Ruby mode:method FuncId(538) regs:11 ISeq(RubyFuncInfo { id:538 name:localize_instance_variables method:(FuncId(538), 0) args: 2 non_temp: 4 temp: 6})
[]
+:00000 [05] init_method reg:10 arg:2 req:1 opt:1 rest:false block:None stack_offset:9
 :00001 [05] check_local(%2) =>:00009
+:00002 [06] %5 = literal[/(?m)@\w+/]
 :00003 [06] %5 = %1.scan(%5;1)                   [<INVALID>]
 :00005 [06] %5 = %5.uniq()                       [<INVALID>]
 :00007 [05] %2 = %5.sort()                       [<INVALID>]
+:00009 [06] %5 = literal[36110337]
 :00010 [05] %2 = %2.map( &%5)                    [<INVALID>]
 :00012 [06] %5 = literal[[]]
 :00013 [07] %6 = literal[[]]
 :00014 [07] %3 = %5
 :00015 [07] %4 = %6
 :00016 [06] %5 = literal[36175873]
 :00017 [05] _ = %2.each( &%5)                    [<INVALID>]
 :00019 [06] %5 = literal[36241409]
 :00020 [07] %7 = literal["(?m)"]
 :00021 [09] %8 = literal["@("]
 :00022 [10] %9 = literal["|"]
 :00023 [10] %9 = %2 * %9                         [<INVALID>][<INVALID>]
 :00024 [11] %10 = literal[")\\b"]
 :00025 [07] %6 = concat_regexp(%7; 4)
 :00026 [05] %1 = %1.gsub(%6;1 &%5)               [<INVALID>]
 :00028 [06] %5 = literal["begin"]
 :00029 [07] %6 = 2: i32
 :00030 [08] %7 = literal["\n"]
 :00031 [08] %7 = %3.join(%7;1)                   [<INVALID>]
 :00033 [07] %6 = %0.indent(%6;2)                 [<INVALID>]
 :00035 [08] %7 = 2: i32
 :00036 [09] %8 = %1
 :00037 [08] %7 = %0.indent(%7;2)                 [<INVALID>]
 :00039 [09] %8 = literal["ensure"]
 :00040 [10] %9 = 2: i32
 :00041 [11] %10 = literal["\n"]
 :00042 [11] %10 = %4.join(%10;1)                 [<INVALID>]
 :00044 [10] %9 = %0.indent(%9;2)                 [<INVALID>]
 :00046 [11] %10 = literal["end"]
 :00047 [06] %5 = %0.gen(%5;6)                    [<INVALID>]
 :00049 [05] ret %5
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:10
meta:on_stack:true kind:Ruby mode:method FuncId(539) regs:4 ISeq(RubyFuncInfo { id:539 name:<unnamed> method:(FuncId(527), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1.to_s()                       [<INVALID>]
 :00003 [04] %3 = literal["-"]
 :00004 [03] %2 = %2.start_with?(%3;1)            [<INVALID>]
 :00006 [02] ret %2
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:11
meta:on_stack:true kind:Ruby mode:method FuncId(540) regs:4 ISeq(RubyFuncInfo { id:540 name:<unnamed> method:(FuncId(527), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = dynvar(1, %4)
 :00002 [04] %3 = dynvar(1, %5)
 :00003 [02] %2:.[%1:] = %3
 :00004 [02] ret %3
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:12
meta:on_stack:true kind:Ruby mode:method FuncId(541) regs:6 ISeq(RubyFuncInfo { id:541 name:<unnamed> method:(FuncId(527), 1) args: 1 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[true]
 :00002 [04] %3 = %1.to_s()                       [<INVALID>]
 :00004 [05] %4 = literal["-"]
 :00005 [04] %3 = %3.start_with?(%4;1)            [<INVALID>]
 :00007 [03] condnotbr %3 =>:00015
+:00008 [04] %3 = %1.to_s()                       [<INVALID>]
 :00010 [05] %4 = literal[1..-1]
 :00011 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00012 [03] %1 = %3.to_sym()                     [<INVALID>]
 :00014 [03] %2 = literal[false]
+:00015 [04] %3 = dynvar(1, %3)
 :00016 [04] %3 = %3.include?(%1;1)               [<INVALID>]
 :00018 [03] condnotbr %3 =>:00020
+:00019 [03] br =>:00026
+:00020 [04] %3 = literal["unknown optimization: `"]
 :00021 [05] %4 = %1
 :00022 [06] %5 = literal["'"]
 :00023 [04] %3 = concat(%3; 3)
 :00024 [03] _ = %0.raise(%3;1)                   [<INVALID>]
+:00026 [04] %3 = dynvar(1, %4)
 :00027 [03] %3:.[%1:] = %2
 :00028 [03] ret %2
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:21
meta:on_stack:true kind:Ruby mode:method FuncId(542) regs:4 ISeq(RubyFuncInfo { id:542 name:<unnamed> method:(FuncId(527), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal["@"]
 :00002 [04] %3 = %1
 :00003 [03] %2 = concat(%2; 2)
 :00004 [03] %2 = %2.to_sym()                     [<INVALID>]
 :00006 [04] %3 = dynvar(1, %4)
 :00007 [04] %3 = %3.[%1]                         [<INVALID>][<INVALID>]
 :00008 [03] %2 = %0.instance_variable_set(%2;2)  [<INVALID>]
 :00010 [02] ret %2
------------------------------------
------------------------------------
<block in gen> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:31
meta:on_stack:true kind:Ruby mode:method FuncId(543) regs:4 ISeq(RubyFuncInfo { id:543 name:<unnamed> method:(FuncId(529), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1.to_s()                       [<INVALID>]
 :00003 [03] %2 = %2.chomp()                      [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in indent> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:37
meta:on_stack:true kind:Ruby mode:method FuncId(544) regs:3 ISeq(RubyFuncInfo { id:544 name:<unnamed> method:(FuncId(530), 1) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal[" "]
 :00002 [03] %2 = dynvar(1, %1)
 :00003 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = $1
 :00005 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<block in parse_method_definitions> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:67
meta:on_stack:true kind:Ruby mode:method FuncId(545) regs:10 ISeq(RubyFuncInfo { id:545 name:<unnamed> method:(FuncId(532), 1) args: 4 non_temp: 4 temp: 5})
[]
+:00000 [05] init_method reg:9 arg:4 req:4 opt:0 rest:false block:None stack_offset:8
 :00001 [06] %5 = %1.size()                       [<INVALID>]
 :00003 [06] %5 = -%5                             [<INVALID>]
 :00004 [06] %5 = %5 - 2: i16                     [<INVALID>][<INVALID>]
 :00005 [07] %6 = %4
 :00006 [05] %4 = %0.indent(%5;2)                 [<INVALID>]
 :00008 [06] %5 = literal[36306945]
 :00009 [07] %6 = literal[/(?m)^( *)when +(.*?) +then +(.*)/]
 :00010 [05] %4 = %4.gsub(%6;1 &%5)               [<INVALID>]
 :00012 [06] %5 = literal[/(?m)\Areturn unless (.*)/]
 :00013 [06] %5 = %4.=~(%5;1)                     [<INVALID>]
 :00015 [05] condnotbr %5 =>:00026
+:00016 [06] %5 = literal["if "]
 :00017 [07] %6 = $1
 :00018 [06] %5 = %5 + %6                         [<INVALID>][<INVALID>]
 :00019 [07] %6 = 2: i32
 :00020 [08] %7 = $'
 :00021 [07] %6 = %0.indent(%6;2)                 [<INVALID>]
 :00023 [06] %5 = %5 + %6                         [<INVALID>][<INVALID>]
 :00024 [07] %6 = literal["end\n"]
 :00025 [05] %4 = %5 + %6                         [<INVALID>][<INVALID>]
+:00026 [05] loop_start counter=0 jit-addr=0000000000000000
 :00027 [06] %5 = literal[36372481]
 :00028 [07] %6 = literal[/(?m)^( *)((?!#)\S.*) ((?:if|unless) .*\n)/]
 :00029 [06] %5 = %4.gsub!(%6;1 &%5)              [<INVALID>]
 :00031 [05] condnotbr %5 =>:00033
+:00032 [05] br =>:00026
+:00033 [05] loop_end
+:00034 [06] %5 = dynvar(1, %3)
 :00035 [07] %6 = %2.to_sym()                     [<INVALID>]
 :00037 [08] %7 = const[MethodDef]                [<INVALID>]
 :00038 [08] condnotbr %3 =>:00043
+:00039 [09] %8 = literal[", "]
 :00040 [09] %8 = %3.split(%8;1)                  [<INVALID>]
 :00042 [09] br =>:00044
+:00043 [09] %8 = nil
+:00044 [10] %9 = %4
 :00045 [08] %7 = %7.[](%8;2)                     [<INVALID>]
 :00047 [05] %5:.[%6:] = %7
 :00048 [05] ret %7
------------------------------------
------------------------------------
<block in expand_methods> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:86
meta:on_stack:true kind:Ruby mode:method FuncId(546) regs:8 ISeq(RubyFuncInfo { id:546 name:<unnamed> method:(FuncId(533), 1) args: 0 non_temp: 4 temp: 3})
[]
+:00000 [05] init_method reg:7 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [06] %5 = $1
 :00002 [07] %6 = $2
 :00003 [08] %7 = $3
 :00004 [08] %1 = %5
 :00005 [08] %2 = %6
 :00006 [08] %3 = %7
 :00007 [06] %5 = dynvar(1, %2)
 :00008 [07] %6 = %2.to_sym()                     [<INVALID>]
 :00010 [05] %4 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00011 [06] %5 = const[MethodDef]                [<INVALID>]
 :00012 [06] %5 = %4.is_a?(%5;1)                  [<INVALID>]
 :00014 [05] condnotbr %5 =>:00017
+:00015 [05] %4 = %4.body()                       [<INVALID>]
+:00017 [05] condnotbr %3 =>:00030
+:00018 [06] %5 = dynvar(1, %2)
 :00019 [07] %6 = %2.to_sym()                     [<INVALID>]
 :00021 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00022 [06] %5 = %5.params()                     [<INVALID>]
 :00024 [07] %6 = literal[36438017]
 :00025 [08] %7 = literal[", "]
 :00026 [08] %7 = %3.split(%7;1)                  [<INVALID>]
 :00028 [05] _ = %5.zip(%7;1 &%6)                 [<INVALID>]
+:00030 [06] %5 = %1.size()                       [<INVALID>]
 :00032 [07] %6 = %4
 :00033 [06] %5 = %0.indent(%5;2)                 [<INVALID>]
 :00035 [05] ret %5
------------------------------------
------------------------------------
<block in expand_inline_methods> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:100
meta:on_stack:true kind:Ruby mode:method FuncId(547) regs:7 ISeq(RubyFuncInfo { id:547 name:<unnamed> method:(FuncId(534), 1) args: 0 non_temp: 2 temp: 4})
[]
+:00000 [03] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [03] %1 = $1
 :00002 [04] %3 = literal["("]
 :00003 [05] %4 = dynvar(1, %3)
 :00004 [05] %4 = %4.body()                       [<INVALID>]
 :00006 [05] %4 = %4.chomp()                      [<INVALID>]
 :00008 [06] %5 = literal[/(?m) *#.*/]
 :00009 [07] %6 = literal[""]
 :00010 [05] %4 = %4.gsub(%5;2)                   [<INVALID>]
 :00012 [06] %5 = literal["\n"]
 :00013 [07] %6 = literal["; "]
 :00014 [05] %4 = %4.gsub(%5;2)                   [<INVALID>]
 :00016 [06] %5 = literal[")"]
 :00017 [04] %3 = concat(%3; 3)
 :00018 [04] %2 = %3
 :00019 [03] condnotbr %1 =>:00029
+:00020 [04] %3 = dynvar(1, %3)
 :00021 [04] %3 = %3.params()                     [<INVALID>]
 :00023 [05] %4 = literal[36503553]
 :00024 [06] %5 = literal[", "]
 :00025 [06] %5 = %1.split(%5;1)                  [<INVALID>]
 :00027 [03] _ = %3.zip(%5;1 &%4)                 [<INVALID>]
+:00029 [03] ret %2
------------------------------------
------------------------------------
<block in replace_var> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:114
meta:on_stack:true kind:Ruby mode:method FuncId(548) regs:2 ISeq(RubyFuncInfo { id:548 name:<unnamed> method:(FuncId(535), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = dynvar(1, %3)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<block in replace_cond_var> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:118
meta:on_stack:true kind:Ruby mode:method FuncId(549) regs:3 ISeq(RubyFuncInfo { id:549 name:<unnamed> method:(FuncId(536), 1) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = $1
 :00002 [03] %2 = literal[" "]
 :00003 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = dynvar(1, %3)
 :00005 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<block in remove_trivial_branches> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:134
meta:on_stack:true kind:Ruby mode:method FuncId(550) regs:4 ISeq(RubyFuncInfo { id:550 name:<unnamed> method:(FuncId(537), 1) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = $2
 :00002 [03] %2 = literal["if"]
 :00003 [02] %1 = %1 == %2                        [<INVALID>][<INVALID>]
 :00004 [03] %2 = $3
 :00005 [04] %3 = literal["true"]
 :00006 [03] %2 = %2 == %3                        [<INVALID>][<INVALID>]
 :00007 [02] _%1 = %1 == %2                       [<INVALID>][<INVALID>]
 :00008 [01] condnotbr _%1 =>:00014
+:00009 [02] %1 = -2: i32
 :00010 [03] %2 = $4
 :00011 [02] %1 = %0.indent(%1;2)                 [<INVALID>]
 :00013 [01] ret %1
+:00014 [02] %1 = $5
 :00015 [01] condnotbr %1 =>:00021
+:00016 [02] %1 = -2: i32
 :00017 [03] %2 = $5
 :00018 [02] %1 = %0.indent(%1;2)                 [<INVALID>]
 :00020 [01] ret %1
+:00021 [02] %1 = literal[""]
 :00022 [01] ret %1
------------------------------------
------------------------------------
<block in localize_instance_variables> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:147
meta:on_stack:true kind:Ruby mode:method FuncId(551) regs:4 ISeq(RubyFuncInfo { id:551 name:<unnamed> method:(FuncId(538), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1.to_s()                       [<INVALID>]
 :00003 [04] %3 = literal[1..-1]
 :00004 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in localize_instance_variables> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:150
meta:on_stack:true kind:Ruby mode:method FuncId(552) regs:8 ISeq(RubyFuncInfo { id:552 name:<unnamed> method:(FuncId(538), 1) args: 1 non_temp: 2 temp: 5})
[]
+:00000 [03] init_method reg:7 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %3 = literal["__"]
 :00002 [05] %4 = %1
 :00003 [06] %5 = literal["__"]
 :00004 [04] %3 = concat(%3; 3)
 :00005 [04] %2 = %3
 :00006 [04] %3 = dynvar(1, %3)
 :00007 [05] %4 = %2
 :00008 [06] %5 = literal[" = @"]
 :00009 [07] %6 = %1
 :00010 [05] %4 = concat(%4; 3)
 :00011 [03] _ = %3.<<(%4;1)                      [<INVALID>]
 :00013 [04] %3 = dynvar(1, %4)
 :00014 [05] %4 = literal["@"]
 :00015 [06] %5 = %1
 :00016 [07] %6 = literal[" = "]
 :00017 [08] %7 = %2
 :00018 [05] %4 = concat(%4; 4)
 :00019 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00021 [03] ret %3
------------------------------------
------------------------------------
<block in localize_instance_variables> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:156
meta:on_stack:true kind:Ruby mode:method FuncId(553) regs:4 ISeq(RubyFuncInfo { id:553 name:<unnamed> method:(FuncId(538), 1) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["__"]
 :00002 [03] %2 = $1
 :00003 [04] %3 = literal["__"]
 :00004 [02] %1 = concat(%1; 3)
 :00005 [01] ret %1
------------------------------------
------------------------------------
<block in parse_method_definitions> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:71
meta:on_stack:true kind:Ruby mode:method FuncId(554) regs:5 ISeq(RubyFuncInfo { id:554 name:<unnamed> method:(FuncId(532), 2) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = $1
 :00002 [03] %2 = literal["when "]
 :00003 [04] %3 = $2
 :00004 [05] %4 = literal["\n"]
 :00005 [03] %2 = concat(%2; 3)
 :00006 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00007 [03] %2 = $1
 :00008 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = literal["  "]
 :00010 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00011 [03] %2 = $3
 :00012 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00013 [01] ret %1
------------------------------------
------------------------------------
<block in parse_method_definitions> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:77
meta:on_stack:true kind:Ruby mode:method FuncId(555) regs:5 ISeq(RubyFuncInfo { id:555 name:<unnamed> method:(FuncId(532), 2) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = $1
 :00002 [02] %1 = %1.size()                       [<INVALID>]
 :00004 [03] %2 = $3
 :00005 [04] %3 = literal["  "]
 :00006 [05] %4 = $2
 :00007 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00008 [05] %4 = literal["end"]
 :00009 [03] %2 = %0.gen(%2;3)                    [<INVALID>]
 :00011 [02] %1 = %0.indent(%1;2)                 [<INVALID>]
 :00013 [01] ret %1
------------------------------------
------------------------------------
<block in expand_methods> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:91
meta:on_stack:true kind:Ruby mode:method FuncId(556) regs:6 ISeq(RubyFuncInfo { id:556 name:<unnamed> method:(FuncId(533), 2) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = dynvar(1, %4)
 :00002 [05] %4 = %1
 :00003 [06] %5 = %2
 :00004 [04] %3 = %0.replace_var(%3;3)            [<INVALID>]
 :00006 [03] dynvar(1, %4) = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
<block in expand_inline_methods> /home/monochrome/optcarrot/lib/optcarrot/opt.rb:104
meta:on_stack:true kind:Ruby mode:method FuncId(557) regs:6 ISeq(RubyFuncInfo { id:557 name:<unnamed> method:(FuncId(534), 2) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = dynvar(1, %2)
 :00002 [05] %4 = %1
 :00003 [06] %5 = %2
 :00004 [04] %3 = %0.replace_var(%3;3)            [<INVALID>]
 :00006 [03] dynvar(1, %2) = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(571) regs:2 ISeq(RubyFuncInfo { id:571 name:/main method:(FuncId(571), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(572)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(572) regs:2 ISeq(RubyFuncInfo { id:572 name:Optcarrot method:(FuncId(572), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = class_def APU < _: FuncId(573)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<APU> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(573) regs:8 ISeq(RubyFuncInfo { id:573 name:APU method:(FuncId(573), 0) args: 0 non_temp: 0 temp: 7})
[]
+:00000 [01] init_method reg:7 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [02] %1 = 6: i32
 :00002 [01] const[CLK_M2_MUL] = %1
 :00003 [02] %1 = 39375000: i32
 :00004 [03] %2 = const[CLK_M2_MUL]               [<INVALID>]
 :00005 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00006 [01] const[CLK_NTSC] = %1
 :00007 [02] %1 = 11: i32
 :00008 [01] const[CLK_NTSC_DIV] = %1
 :00009 [02] %1 = 256: i32
 :00010 [01] const[CHANNEL_OUTPUT_MUL] = %1
 :00011 [02] %1 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00012 [02] %1 = %1 / 4: i16                     [<INVALID>][<INVALID>]
 :00013 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00014 [01] const[CHANNEL_OUTPUT_DECAY] = %1
 :00015 [02] %1 = literal[[29830, 1, 1, 29828]]
 :00016 [03] %2 = literal[37617665]
 :00017 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00019 [01] const[FRAME_CLOCKS] = %1
 :00020 [03] %2 = literal[[7458, 7456, 7458, 7458]]
 :00021 [05] %4 = 7458: i32
 :00022 [06] %5 = 7456: i32
 :00023 [07] %6 = 7458: i32
 :00024 [08] %7 = 7458: i32
 :00025 [08] %7 = %7 + 7452: i16                  [<INVALID>][<INVALID>]
 :00026 [04] %3 = array[%4; 4]
 :00027 [02] %1 = array[%2; 2]
 :00028 [03] %2 = literal[37683201]
 :00029 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00031 [01] const[OSCILLATOR_CLOCKS] = %1
 :00032 [01] method_def inspect: FuncId(576)
 :00033 [01] method_def initialize: FuncId(577)
 :00034 [01] method_def reset_mapping: FuncId(578)
 :00035 [01] method_def reset: FuncId(579)
 :00036 [02] %1 = :output
 :00037 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00039 [01] method_def do_clock: FuncId(580)
 :00040 [01] method_def clock_dma: FuncId(581)
 :00041 [01] method_def update: FuncId(582)
 :00042 [01] method_def update_latency: FuncId(583)
 :00043 [01] method_def update_delta: FuncId(584)
 :00044 [01] method_def vsync: FuncId(585)
 :00045 [01] method_def clock_oscillators: FuncId(586)
 :00046 [01] method_def clock_dmc: FuncId(587)
 :00047 [01] method_def clock_frame_counter: FuncId(588)
 :00048 [01] method_def clock_frame_irq: FuncId(589)
 :00049 [01] method_def flush_sound: FuncId(590)
 :00050 [01] method_def proceed: FuncId(591)
 :00051 [01] method_def poke_4015: FuncId(592)
 :00052 [01] method_def peek_4015: FuncId(593)
 :00053 [01] method_def poke_4017: FuncId(594)
 :00054 [01] method_def peek_40xx: FuncId(595)
 :00055 [01] _ = class_def LengthCounter < _: FuncId(596)
 :00056 [01] _ = class_def Envelope < _: FuncId(597)
 :00057 [01] _ = class_def Mixer < _: FuncId(598)
 :00058 [01] _ = class_def Oscillator < _: FuncId(599)
 :00059 [02] %1 = const[Oscillator]               [<INVALID>]
 :00060 [01] _ = class_def Pulse < %1: FuncId(600)
 :00061 [02] %1 = const[Oscillator]               [<INVALID>]
 :00062 [01] _ = class_def Triangle < %1: FuncId(601)
 :00063 [02] %1 = const[Oscillator]               [<INVALID>]
 :00064 [01] _ = class_def Noise < %1: FuncId(602)
 :00065 [02] %1 = class_def DMC < _: FuncId(603)
 :00066 [01] ret %1
------------------------------------
------------------------------------
<block in APU> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:11
meta:on_stack:true kind:Ruby mode:method FuncId(574) regs:3 ISeq(RubyFuncInfo { id:574 name:<unnamed> method:(FuncId(573), 1) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[RP2A03_CC]                [<INVALID>]
 :00002 [03] %2 = %2 * %1                         [<INVALID>][<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<block in APU> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:15
meta:on_stack:true kind:Ruby mode:method FuncId(575) regs:4 ISeq(RubyFuncInfo { id:575 name:<unnamed> method:(FuncId(573), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[39583745]
 :00002 [03] %2 = %1.map( &%2)                    [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:17
meta:on_stack:true kind:Ruby mode:method FuncId(576) regs:4 ISeq(RubyFuncInfo { id:576 name:inspect method:(FuncId(576), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["#<"]
 :00002 [03] %2 = %0.class()                      [<INVALID>]
 :00004 [04] %3 = literal[">"]
 :00005 [02] %1 = concat(%1; 3)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:24
meta:on_stack:true kind:Ruby mode:method FuncId(577) regs:11 ISeq(RubyFuncInfo { id:577 name:initialize method:(FuncId(577), 0) args: 4 non_temp: 4 temp: 6})
[]
+:00000 [05] init_method reg:10 arg:4 req:4 opt:0 rest:false block:None stack_offset:9
 :00001 [05] @conf: - = %1
 :00002 [05] @cpu: - = %2
 :00003 [06] %5 = const[Pulse]                    [<INVALID>]
 :00004 [07] %6 = %0
 :00005 [06] %5 = %5.new(%6;1)                    [<INVALID>]
 :00007 [07] %6 = const[Pulse]                    [<INVALID>]
 :00008 [08] %7 = %0
 :00009 [07] %6 = %6.new(%7;1)                    [<INVALID>]
 :00011 [07] @pulse_0: - = %5
 :00012 [07] @pulse_1: - = %6
 :00013 [06] %5 = const[Triangle]                 [<INVALID>]
 :00014 [07] %6 = %0
 :00015 [06] %5 = %5.new(%6;1)                    [<INVALID>]
 :00017 [05] @triangle: - = %5
 :00018 [06] %5 = const[Noise]                    [<INVALID>]
 :00019 [07] %6 = %0
 :00020 [06] %5 = %5.new(%6;1)                    [<INVALID>]
 :00022 [05] @noise: - = %5
 :00023 [06] %5 = const[DMC]                      [<INVALID>]
 :00024 [07] %6 = @cpu: -
 :00025 [08] %7 = %0
 :00026 [06] %5 = %5.new(%6;2)                    [<INVALID>]
 :00028 [05] @dmc: - = %5
 :00029 [06] %5 = const[Mixer]                    [<INVALID>]
 :00030 [07] %6 = @pulse_0: -
 :00031 [08] %7 = @pulse_1: -
 :00032 [09] %8 = @triangle: -
 :00033 [10] %9 = @noise: -
 :00034 [11] %10 = @dmc: -
 :00035 [06] %5 = %5.new(%6;5)                    [<INVALID>]
 :00037 [05] @mixer: - = %5
 :00038 [06] _%5 = %3 < 11050: i16                [<INVALID>][<INVALID>]
 :00039 [05] condnotbr _%5 =>:00044
+:00040 [06] %5 = @conf: -
 :00041 [07] %6 = literal["audio sample rate must be >= 11050"]
 :00042 [05] _ = %5.fatal(%6;1)                   [<INVALID>]
+:00044 [06] _%5 = %4 != 8: i16                   [<INVALID>][<INVALID>]
 :00045 [05] condnotbr _%5 =>:00052
+:00046 [06] _%5 = %4 != 16: i16                  [<INVALID>][<INVALID>]
 :00047 [05] condnotbr _%5 =>:00052
+:00048 [06] %5 = @conf: -
 :00049 [07] %6 = literal["audio bit depth must be 8 or 16"]
 :00050 [05] _ = %5.fatal(%6;1)                   [<INVALID>]
+:00052 [05] @settings_rate: - = %3
 :00053 [06] %5 = literal[[]]
 :00054 [05] @output: - = %5
 :00055 [06] %5 = literal[[]]
 :00056 [05] @buffer: - = %5
 :00057 [06] %5 = 1: i32
 :00058 [05] @fixed_clock: - = %5
 :00059 [06] %5 = 1: i32
 :00060 [05] @rate_clock: - = %5
 :00061 [06] %5 = 0: i32
 :00062 [05] @rate_counter: - = %5
 :00063 [06] %5 = 0: i32
 :00064 [05] @frame_counter: - = %5
 :00065 [06] %5 = 0: i32
 :00066 [05] @frame_divider: - = %5
 :00067 [06] %5 = 0: i32
 :00068 [05] @frame_irq_clock: - = %5
 :00069 [06] %5 = 0: i32
 :00070 [05] @frame_irq_repeat: - = %5
 :00071 [06] %5 = 0: i32
 :00072 [05] @dmc_clock: - = %5
 :00073 [06] %5 = literal[false]
 :00074 [06] %5 = %0.reset(%5;1)                  [<INVALID>]
 :00076 [05] ret %5
------------------------------------
------------------------------------
<reset_mapping> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:54
meta:on_stack:true kind:Ruby mode:method FuncId(578) regs:9 ISeq(RubyFuncInfo { id:578 name:reset_mapping method:(FuncId(578), 0) args: 0 non_temp: 3 temp: 5})
[]
+:00000 [04] init_method reg:8 arg:0 req:0 opt:0 rest:false block:None stack_offset:8
 :00001 [05] %4 = @frame_counter: -
 :00002 [06] %5 = @fixed_clock: -
 :00003 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00004 [04] @frame_counter: - = %4
 :00005 [05] %4 = @rate_counter: -
 :00006 [06] %5 = @fixed_clock: -
 :00007 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00008 [04] @rate_counter: - = %4
 :00009 [04] %1 = 0: i32
+:00010 [04] loop_start counter=0 jit-addr=0000000000000000
 :00011 [05] %4 = literal[true]
 :00012 [04] condnotbr %4 =>:00025
+:00013 [04] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00014 [05] _%4 = %1 >= 512: i16                 [<INVALID>][<INVALID>]
 :00015 [04] condnotbr _%4 =>:00017
+:00016 [04] br =>:00025
+:00017 [05] %4 = const[CLK_NTSC]                 [<INVALID>]
 :00018 [05] %4 = %4 * %1                         [<INVALID>][<INVALID>]
 :00019 [06] %5 = @settings_rate: -
 :00020 [05] %4 = %4 % %5                         [<INVALID>][<INVALID>]
 :00021 [05] _%4 = %4 == 0: i16                   [<INVALID>][<INVALID>]
 :00022 [04] condnotbr _%4 =>:00024
+:00023 [04] br =>:00025
+:00024 [04] br =>:00010
+:00025 [04] loop_end
+:00026 [05] %4 = const[CLK_NTSC]                 [<INVALID>]
 :00027 [05] %4 = %4 * %1                         [<INVALID>][<INVALID>]
 :00028 [06] %5 = @settings_rate: -
 :00029 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00030 [04] @rate_clock: - = %4
 :00031 [05] %4 = const[CLK_NTSC_DIV]             [<INVALID>]
 :00032 [05] %4 = %4 * %1                         [<INVALID>][<INVALID>]
 :00033 [04] @fixed_clock: - = %4
 :00034 [05] %4 = @frame_counter: -
 :00035 [06] %5 = @fixed_clock: -
 :00036 [05] %4 = %4 * %5                         [<INVALID>][<INVALID>]
 :00037 [04] @frame_counter: - = %4
 :00038 [05] %4 = @rate_counter: -
 :00039 [06] %5 = @fixed_clock: -
 :00040 [05] %4 = %4 * %5                         [<INVALID>][<INVALID>]
 :00041 [04] @rate_counter: - = %4
 :00042 [05] %4 = @mixer: -
 :00043 [04] _ = %4.reset()                       [<INVALID>]
 :00045 [05] %4 = @buffer: -
 :00046 [04] _ = %4.clear()                       [<INVALID>]
 :00048 [04] %1 = 0: i32
+:00049 [04] loop_start counter=0 jit-addr=0000000000000000
 :00050 [05] %4 = literal[true]
 :00051 [04] condnotbr %4 =>:00073
+:00052 [04] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00053 [05] _%4 = %1 >= 4096: i16                [<INVALID>][<INVALID>]
 :00054 [04] condnotbr _%4 =>:00056
+:00055 [04] br =>:00073
+:00056 [05] %4 = const[CLK_NTSC]                 [<INVALID>]
 :00057 [06] %5 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00058 [05] %4 = %4 * %5                         [<INVALID>][<INVALID>]
 :00059 [06] %5 = @settings_rate: -
 :00060 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00061 [06] %5 = 524287: i32
 :00062 [05] _%4 = %4 > %5                        [<INVALID>][<INVALID>]
 :00063 [04] condnotbr _%4 =>:00065
+:00064 [04] br =>:00073
+:00065 [05] %4 = const[CLK_NTSC]                 [<INVALID>]
 :00066 [05] %4 = %4 * %1                         [<INVALID>][<INVALID>]
 :00067 [06] %5 = @settings_rate: -
 :00068 [05] %4 = %4 % %5                         [<INVALID>][<INVALID>]
 :00069 [05] _%4 = %4 == 0: i16                   [<INVALID>][<INVALID>]
 :00070 [04] condnotbr _%4 =>:00072
+:00071 [04] br =>:00073
+:00072 [04] br =>:00049
+:00073 [04] loop_end
+:00074 [05] %4 = const[CLK_NTSC]                 [<INVALID>]
 :00075 [05] %4 = %4 * %1                         [<INVALID>][<INVALID>]
 :00076 [06] %5 = @settings_rate: -
 :00077 [04] %2 = %4 / %5                         [<INVALID>][<INVALID>]
 :00078 [05] %4 = const[CLK_NTSC_DIV]             [<INVALID>]
 :00079 [06] %5 = const[CPU::CLK_1]               [<INVALID>]
 :00080 [05] %4 = %4 * %5                         [<INVALID>][<INVALID>]
 :00081 [04] %3 = %4 * %1                         [<INVALID>][<INVALID>]
 :00082 [05] %4 = @pulse_0: -
 :00083 [06] %5 = %2
 :00084 [07] %6 = %3
 :00085 [04] _ = %4.update_settings(%5;2)         [<INVALID>]
 :00087 [05] %4 = @pulse_1: -
 :00088 [06] %5 = %2
 :00089 [07] %6 = %3
 :00090 [04] _ = %4.update_settings(%5;2)         [<INVALID>]
 :00092 [05] %4 = @triangle: -
 :00093 [06] %5 = %2
 :00094 [07] %6 = %3
 :00095 [04] _ = %4.update_settings(%5;2)         [<INVALID>]
 :00097 [05] %4 = @noise: -
 :00098 [06] %5 = %2
 :00099 [07] %6 = %3
 :00100 [04] _ = %4.update_settings(%5;2)         [<INVALID>]
 :00102 [05] %4 = @cpu: -
 :00103 [06] %5 = 16384: i32
 :00104 [07] %6 = :peek_40xx
 :00105 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00107 [08] %7 = @pulse_0: -
 :00108 [09] %8 = :poke_0
 :00109 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00111 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00113 [05] %4 = @cpu: -
 :00114 [06] %5 = 16385: i32
 :00115 [07] %6 = :peek_40xx
 :00116 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00118 [08] %7 = @pulse_0: -
 :00119 [09] %8 = :poke_1
 :00120 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00122 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00124 [05] %4 = @cpu: -
 :00125 [06] %5 = 16386: i32
 :00126 [07] %6 = :peek_40xx
 :00127 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00129 [08] %7 = @pulse_0: -
 :00130 [09] %8 = :poke_2
 :00131 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00133 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00135 [05] %4 = @cpu: -
 :00136 [06] %5 = 16387: i32
 :00137 [07] %6 = :peek_40xx
 :00138 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00140 [08] %7 = @pulse_0: -
 :00141 [09] %8 = :poke_3
 :00142 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00144 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00146 [05] %4 = @cpu: -
 :00147 [06] %5 = 16388: i32
 :00148 [07] %6 = :peek_40xx
 :00149 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00151 [08] %7 = @pulse_1: -
 :00152 [09] %8 = :poke_0
 :00153 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00155 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00157 [05] %4 = @cpu: -
 :00158 [06] %5 = 16389: i32
 :00159 [07] %6 = :peek_40xx
 :00160 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00162 [08] %7 = @pulse_1: -
 :00163 [09] %8 = :poke_1
 :00164 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00166 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00168 [05] %4 = @cpu: -
 :00169 [06] %5 = 16390: i32
 :00170 [07] %6 = :peek_40xx
 :00171 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00173 [08] %7 = @pulse_1: -
 :00174 [09] %8 = :poke_2
 :00175 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00177 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00179 [05] %4 = @cpu: -
 :00180 [06] %5 = 16391: i32
 :00181 [07] %6 = :peek_40xx
 :00182 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00184 [08] %7 = @pulse_1: -
 :00185 [09] %8 = :poke_3
 :00186 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00188 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00190 [05] %4 = @cpu: -
 :00191 [06] %5 = 16392: i32
 :00192 [07] %6 = :peek_40xx
 :00193 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00195 [08] %7 = @triangle: -
 :00196 [09] %8 = :poke_0
 :00197 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00199 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00201 [05] %4 = @cpu: -
 :00202 [06] %5 = 16394: i32
 :00203 [07] %6 = :peek_40xx
 :00204 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00206 [08] %7 = @triangle: -
 :00207 [09] %8 = :poke_2
 :00208 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00210 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00212 [05] %4 = @cpu: -
 :00213 [06] %5 = 16395: i32
 :00214 [07] %6 = :peek_40xx
 :00215 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00217 [08] %7 = @triangle: -
 :00218 [09] %8 = :poke_3
 :00219 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00221 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00223 [05] %4 = @cpu: -
 :00224 [06] %5 = 16396: i32
 :00225 [07] %6 = :peek_40xx
 :00226 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00228 [08] %7 = @noise: -
 :00229 [09] %8 = :poke_0
 :00230 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00232 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00234 [05] %4 = @cpu: -
 :00235 [06] %5 = 16398: i32
 :00236 [07] %6 = :peek_40xx
 :00237 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00239 [08] %7 = @noise: -
 :00240 [09] %8 = :poke_2
 :00241 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00243 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00245 [05] %4 = @cpu: -
 :00246 [06] %5 = 16399: i32
 :00247 [07] %6 = :peek_40xx
 :00248 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00250 [08] %7 = @noise: -
 :00251 [09] %8 = :poke_3
 :00252 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00254 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00256 [05] %4 = @cpu: -
 :00257 [06] %5 = 16400: i32
 :00258 [07] %6 = :peek_40xx
 :00259 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00261 [08] %7 = @dmc: -
 :00262 [09] %8 = :poke_0
 :00263 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00265 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00267 [05] %4 = @cpu: -
 :00268 [06] %5 = 16401: i32
 :00269 [07] %6 = :peek_40xx
 :00270 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00272 [08] %7 = @dmc: -
 :00273 [09] %8 = :poke_1
 :00274 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00276 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00278 [05] %4 = @cpu: -
 :00279 [06] %5 = 16402: i32
 :00280 [07] %6 = :peek_40xx
 :00281 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00283 [08] %7 = @dmc: -
 :00284 [09] %8 = :poke_2
 :00285 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00287 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00289 [05] %4 = @cpu: -
 :00290 [06] %5 = 16403: i32
 :00291 [07] %6 = :peek_40xx
 :00292 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00294 [08] %7 = @dmc: -
 :00295 [09] %8 = :poke_3
 :00296 [08] %7 = %7.method(%8;1)                 [<INVALID>]
 :00298 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00300 [05] %4 = @cpu: -
 :00301 [06] %5 = 16405: i32
 :00302 [07] %6 = :peek_4015
 :00303 [07] %6 = %0.method(%6;1)                 [<INVALID>]
 :00305 [08] %7 = :poke_4015
 :00306 [08] %7 = %0.method(%7;1)                 [<INVALID>]
 :00308 [04] _ = %4.add_mappings(%5;3)            [<INVALID>]
 :00310 [05] %4 = @frame_counter: -
 :00311 [06] %5 = @fixed_clock: -
 :00312 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00313 [06] %5 = const[CPU::CLK_1]               [<INVALID>]
 :00314 [05] %4 = %4 - %5                         [<INVALID>][<INVALID>]
 :00315 [04] @frame_irq_clock: - = %4
 :00316 [04] ret %4
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:108
meta:on_stack:true kind:Ruby mode:method FuncId(579) regs:4 ISeq(RubyFuncInfo { id:579 name:reset method:(FuncId(579), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:0 opt:1 rest:false block:None stack_offset:5
 :00001 [02] check_local(%1) =>:00003
+:00002 [02] %1 = literal[true]
+:00003 [03] %2 = 0: i32
 :00004 [02] @cycles_ratecounter: - = %2
 :00005 [03] %2 = 0: i32
 :00006 [02] @frame_divider: - = %2
 :00007 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00008 [02] @frame_irq_clock: - = %2
 :00009 [03] %2 = 0: i32
 :00010 [02] @frame_irq_repeat: - = %2
 :00011 [03] %2 = const[DMC::LUT]                 [<INVALID>]
 :00012 [04] %3 = 0: i32
 :00013 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00014 [02] @dmc_clock: - = %2
 :00015 [03] %2 = const[FRAME_CLOCKS]             [<INVALID>]
 :00016 [04] %3 = 0: i32
 :00017 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00018 [04] %3 = @fixed_clock: -
 :00019 [03] %2 = %2 * %3                         [<INVALID>][<INVALID>]
 :00020 [02] @frame_counter: - = %2
 :00021 [02] condnotbr %1 =>:00024
+:00022 [02] _ = %0.reset_mapping()               [<INVALID>]
+:00024 [03] %2 = @pulse_0: -
 :00025 [02] _ = %2.reset()                       [<INVALID>]
 :00027 [03] %2 = @pulse_1: -
 :00028 [02] _ = %2.reset()                       [<INVALID>]
 :00030 [03] %2 = @triangle: -
 :00031 [02] _ = %2.reset()                       [<INVALID>]
 :00033 [03] %2 = @noise: -
 :00034 [02] _ = %2.reset()                       [<INVALID>]
 :00036 [03] %2 = @dmc: -
 :00037 [02] _ = %2.reset()                       [<INVALID>]
 :00039 [03] %2 = @mixer: -
 :00040 [02] _ = %2.reset()                       [<INVALID>]
 :00042 [03] %2 = @buffer: -
 :00043 [02] _ = %2.clear()                       [<INVALID>]
 :00045 [03] %2 = const[OSCILLATOR_CLOCKS]        [<INVALID>]
 :00046 [04] %3 = 0: i32
 :00047 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00048 [02] @oscillator_clocks: - = %2
 :00049 [02] ret %2
------------------------------------
------------------------------------
<do_clock> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:133
meta:on_stack:true kind:Ruby mode:method FuncId(580) regs:4 ISeq(RubyFuncInfo { id:580 name:do_clock method:(FuncId(580), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @cpu: -
 :00002 [02] %1 = %1.current_clock()              [<INVALID>]
 :00004 [01] _ = %0.clock_dma(%1;1)               [<INVALID>]
 :00006 [02] %1 = @frame_irq_clock: -
 :00007 [03] %2 = @cpu: -
 :00008 [03] %2 = %2.current_clock()              [<INVALID>]
 :00010 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00011 [01] condnotbr _%1 =>:00017
+:00012 [02] %1 = @cpu: -
 :00013 [02] %1 = %1.current_clock()              [<INVALID>]
 :00015 [01] _ = %0.clock_frame_irq(%1;1)         [<INVALID>]
+:00017 [02] %1 = @dmc_clock: -
 :00018 [03] %2 = @frame_irq_clock: -
 :00019 [02] _%1 = %1 < %2                        [<INVALID>][<INVALID>]
 :00020 [01] condnotbr _%1 =>:00023
+:00021 [02] %1 = @dmc_clock: -
 :00022 [01] ret %1
+:00023 [02] %1 = @frame_irq_clock: -
 :00024 [01] ret %1
------------------------------------
------------------------------------
<clock_dma> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:139
meta:on_stack:true kind:Ruby mode:method FuncId(581) regs:3 ISeq(RubyFuncInfo { id:581 name:clock_dma method:(FuncId(581), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @dmc_clock: -
 :00002 [03] _%2 = %2 <= %1                       [<INVALID>][<INVALID>]
 :00003 [02] condnotbr _%2 =>:00007
+:00004 [03] %2 = %0.clock_dmc(%1;1)              [<INVALID>]
 :00006 [02] ret %2
+:00007 [03] %2 = nil
 :00008 [02] ret %2
------------------------------------
------------------------------------
<update> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:143
meta:on_stack:true kind:Ruby mode:method FuncId(582) regs:4 ISeq(RubyFuncInfo { id:582 name:update method:(FuncId(582), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:0 opt:1 rest:false block:None stack_offset:5
 :00001 [02] check_local(%1) =>:00005
+:00002 [03] %2 = @cpu: -
 :00003 [02] %1 = %2.update()                     [<INVALID>]
+:00005 [03] %2 = @fixed_clock: -
 :00006 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00007 [02] _ = %0.proceed(%1;1)                 [<INVALID>]
 :00009 [03] %2 = @frame_counter: -
 :00010 [03] _%2 = %2 < %1                        [<INVALID>][<INVALID>]
 :00011 [02] condnotbr _%2 =>:00015
+:00012 [03] %2 = %0.clock_frame_counter()        [<INVALID>]
 :00014 [02] ret %2
+:00015 [03] %2 = nil
 :00016 [02] ret %2
------------------------------------
------------------------------------
<update_latency> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:149
meta:on_stack:true kind:Ruby mode:method FuncId(583) regs:3 ISeq(RubyFuncInfo { id:583 name:update_latency method:(FuncId(583), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @cpu: -
 :00002 [02] %1 = %1.update()                     [<INVALID>]
 :00004 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00005 [02] %1 = %0.update(%1;1)                 [<INVALID>]
 :00007 [01] ret %1
------------------------------------
------------------------------------
<update_delta> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:153
meta:on_stack:true kind:Ruby mode:method FuncId(584) regs:5 ISeq(RubyFuncInfo { id:584 name:update_delta method:(FuncId(584), 0) args: 0 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @cpu: -
 :00002 [03] %1 = %3.update()                     [<INVALID>]
 :00004 [04] %3 = @frame_counter: -
 :00005 [05] %4 = @fixed_clock: -
 :00006 [05] %4 = %1 * %4                         [<INVALID>][<INVALID>]
 :00007 [03] %2 = %3 != %4                        [<INVALID>][<INVALID>]
 :00008 [04] %3 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00011 [03] ret %2
------------------------------------
------------------------------------
<vsync> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:160
meta:on_stack:true kind:Ruby mode:method FuncId(585) regs:4 ISeq(RubyFuncInfo { id:585 name:vsync method:(FuncId(585), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] _ = %0.flush_sound()                 [<INVALID>]
 :00003 [03] %2 = @cpu: -
 :00004 [03] %2 = %2.current_clock()              [<INVALID>]
 :00006 [02] _ = %0.update(%2;1)                  [<INVALID>]
 :00008 [03] %2 = @cpu: -
 :00009 [02] %1 = %2.next_frame_clock()           [<INVALID>]
 :00011 [03] %2 = @dmc_clock: -
 :00012 [03] %2 = %2 - %1                         [<INVALID>][<INVALID>]
 :00013 [02] @dmc_clock: - = %2
 :00014 [03] %2 = @frame_irq_clock: -
 :00015 [04] %3 = const[FOREVER_CLOCK]            [<INVALID>]
 :00016 [03] _%2 = %2 != %3                       [<INVALID>][<INVALID>]
 :00017 [02] condnotbr _%2 =>:00021
+:00018 [03] %2 = @frame_irq_clock: -
 :00019 [03] %2 = %2 - %1                         [<INVALID>][<INVALID>]
 :00020 [02] @frame_irq_clock: - = %2
+:00021 [03] %2 = @fixed_clock: -
 :00022 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00023 [03] %2 = @rate_counter: -
 :00024 [03] %2 = %2 - %1                         [<INVALID>][<INVALID>]
 :00025 [02] @rate_counter: - = %2
 :00026 [03] %2 = @frame_counter: -
 :00027 [03] %2 = %2 - %1                         [<INVALID>][<INVALID>]
 :00028 [02] @frame_counter: - = %2
 :00029 [02] ret %2
------------------------------------
------------------------------------
<clock_oscillators> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:174
meta:on_stack:true kind:Ruby mode:method FuncId(586) regs:4 ISeq(RubyFuncInfo { id:586 name:clock_oscillators method:(FuncId(586), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @pulse_0: -
 :00002 [02] _ = %2.clock_envelope()              [<INVALID>]
 :00004 [03] %2 = @pulse_1: -
 :00005 [02] _ = %2.clock_envelope()              [<INVALID>]
 :00007 [03] %2 = @triangle: -
 :00008 [02] _ = %2.clock_linear_counter()        [<INVALID>]
 :00010 [03] %2 = @noise: -
 :00011 [02] _ = %2.clock_envelope()              [<INVALID>]
 :00013 [02] condnotbr %1 =>:00015
+:00014 [02] br =>:00017
+:00015 [03] %2 = nil
 :00016 [02] ret %2
+:00017 [03] %2 = @pulse_0: -
 :00018 [04] %3 = -1: i32
 :00019 [02] _ = %2.clock_sweep(%3;1)             [<INVALID>]
 :00021 [03] %2 = @pulse_1: -
 :00022 [04] %3 = 0: i32
 :00023 [02] _ = %2.clock_sweep(%3;1)             [<INVALID>]
 :00025 [03] %2 = @triangle: -
 :00026 [02] _ = %2.clock_length_counter()        [<INVALID>]
 :00028 [03] %2 = @noise: -
 :00029 [03] %2 = %2.clock_length_counter()       [<INVALID>]
 :00031 [02] ret %2
------------------------------------
------------------------------------
<clock_dmc> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:186
meta:on_stack:true kind:Ruby mode:method FuncId(587) regs:5 ISeq(RubyFuncInfo { id:587 name:clock_dmc method:(FuncId(587), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
+:00001 [02] loop_start counter=0 jit-addr=0000000000000000
 :00002 [03] %2 = @dmc: -
 :00003 [03] %2 = %2.clock_dac()                  [<INVALID>]
 :00005 [02] condnotbr %2 =>:00012
+:00006 [03] %2 = @dmc_clock: -
 :00007 [02] _ = %0.update(%2;1)                  [<INVALID>]
 :00009 [03] %2 = @dmc: -
 :00010 [02] _ = %2.update()                      [<INVALID>]
+:00012 [03] %2 = @dmc_clock: -
 :00013 [04] %3 = @dmc: -
 :00014 [04] %3 = %3.freq()                       [<INVALID>]
 :00016 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00017 [02] @dmc_clock: - = %2
 :00018 [03] %2 = @dmc: -
 :00019 [02] _ = %2.clock_dma()                   [<INVALID>]
 :00021 [03] %2 = @dmc_clock: -
 :00022 [03] _%2 = %2 <= %1                       [<INVALID>][<INVALID>]
 :00023 [02] condbr _%2 =>:00001
+:00024 [03] %2 = nil
 :00025 [03] loop_end
+:00026 [02] ret %2
------------------------------------
------------------------------------
<clock_frame_counter> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:197
meta:on_stack:true kind:Ruby mode:method FuncId(588) regs:4 ISeq(RubyFuncInfo { id:588 name:clock_frame_counter method:(FuncId(588), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @frame_divider: -
 :00002 [03] %2 = 0: i32
 :00003 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00004 [02] %1 = %1 == 1: i16                    [<INVALID>][<INVALID>]
 :00005 [01] _ = %0.clock_oscillators(%1;1)       [<INVALID>]
 :00007 [02] %1 = @frame_divider: -
 :00008 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [02] %1 = %1 & 3: i16                     [<INVALID>][<INVALID>]
 :00010 [01] @frame_divider: - = %1
 :00011 [02] %1 = @frame_counter: -
 :00012 [03] %2 = @oscillator_clocks: -
 :00013 [04] %3 = @frame_divider: -
 :00014 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00015 [04] %3 = @fixed_clock: -
 :00016 [03] %2 = %2 * %3                         [<INVALID>][<INVALID>]
 :00017 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00018 [01] @frame_counter: - = %1
 :00019 [01] ret %1
------------------------------------
------------------------------------
<clock_frame_irq> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:203
meta:on_stack:true kind:Ruby mode:method FuncId(589) regs:5 ISeq(RubyFuncInfo { id:589 name:clock_frame_irq method:(FuncId(589), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @cpu: -
 :00002 [04] %3 = const[CPU::IRQ_FRAME]           [<INVALID>]
 :00003 [05] %4 = @frame_irq_clock: -
 :00004 [02] _ = %2.do_irq(%3;2)                  [<INVALID>]
+:00006 [02] loop_start counter=0 jit-addr=0000000000000000
 :00007 [03] %2 = @frame_irq_clock: -
 :00008 [04] %3 = const[FRAME_CLOCKS]             [<INVALID>]
 :00009 [05] %4 = @frame_irq_repeat: -
 :00010 [05] %4 = %4 % 3: i16                     [<INVALID>][<INVALID>]
 :00011 [05] %4 = 1: i16 + %4                     [<INVALID>][<INVALID>]
 :00012 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00013 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00014 [02] @frame_irq_clock: - = %2
 :00015 [03] %2 = @frame_irq_repeat: -
 :00016 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00017 [02] @frame_irq_repeat: - = %2
 :00018 [03] %2 = @frame_irq_clock: -
 :00019 [03] _%2 = %2 <= %1                       [<INVALID>][<INVALID>]
 :00020 [02] condbr _%2 =>:00006
+:00021 [03] %2 = nil
 :00022 [03] loop_end
+:00023 [02] ret %2
------------------------------------
------------------------------------
<flush_sound> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:211
meta:on_stack:true kind:Ruby mode:method FuncId(590) regs:5 ISeq(RubyFuncInfo { id:590 name:flush_sound method:(FuncId(590), 0) args: 0 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @buffer: -
 :00002 [03] %2 = %2.size()                       [<INVALID>]
 :00004 [04] %3 = @settings_rate: -
 :00005 [04] %3 = %3 / 60: i16                    [<INVALID>][<INVALID>]
 :00006 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00007 [02] condnotbr _%2 =>:00043
+:00008 [03] %2 = @cpu: -
 :00009 [03] %2 = %2.current_clock()              [<INVALID>]
 :00011 [04] %3 = @fixed_clock: -
 :00012 [02] %1 = %2 * %3                         [<INVALID>][<INVALID>]
 :00013 [02] _ = %0.proceed(%1;1)                 [<INVALID>]
 :00015 [03] %2 = @buffer: -
 :00016 [03] %2 = %2.size()                       [<INVALID>]
 :00018 [04] %3 = @settings_rate: -
 :00019 [04] %3 = %3 / 60: i16                    [<INVALID>][<INVALID>]
 :00020 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00021 [02] condnotbr _%2 =>:00043
+:00022 [03] %2 = @frame_counter: -
 :00023 [03] _%2 = %2 < %1                        [<INVALID>][<INVALID>]
 :00024 [02] condnotbr _%2 =>:00027
+:00025 [02] _ = %0.clock_frame_counter()         [<INVALID>]
+:00027 [02] loop_start counter=0 jit-addr=0000000000000000
 :00028 [03] %2 = @buffer: -
 :00029 [03] %2 = %2.size()                       [<INVALID>]
 :00031 [04] %3 = @settings_rate: -
 :00032 [04] %3 = %3 / 60: i16                    [<INVALID>][<INVALID>]
 :00033 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00034 [02] condnotbr _%2 =>:00042
+:00035 [03] %2 = @buffer: -
 :00036 [04] %3 = @mixer: -
 :00037 [04] %3 = %3.sample()                     [<INVALID>]
 :00039 [02] _ = %2.<<(%3;1)                      [<INVALID>]
 :00041 [02] br =>:00027
+:00042 [02] loop_end
+:00043 [03] %2 = @output: -
 :00044 [02] _ = %2.clear()                       [<INVALID>]
 :00046 [03] %2 = @output: -
 :00047 [04] %3 = @buffer: -
 :00048 [02] _ = %2.concat(%3;1)                  [<INVALID>]
 :00050 [03] %2 = @buffer: -
 :00051 [03] %2 = %2.clear()                      [<INVALID>]
 :00053 [02] ret %2
------------------------------------
------------------------------------
<proceed> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:225
meta:on_stack:true kind:Ruby mode:method FuncId(591) regs:6 ISeq(RubyFuncInfo { id:591 name:proceed method:(FuncId(591), 0) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = nil
+:00002 [03] loop_start counter=0 jit-addr=0000000000000000
 :00003 [04] %3 = @rate_counter: -
 :00004 [04] _%3 = %3 < %1                        [<INVALID>][<INVALID>]
 :00005 [03] condnotbr _%3 =>:00030
+:00006 [04] %3 = @buffer: -
 :00007 [04] %3 = %3.size()                       [<INVALID>]
 :00009 [05] %4 = @settings_rate: -
 :00010 [05] %4 = %4 / 60: i16                    [<INVALID>][<INVALID>]
 :00011 [04] _%3 = %3 < %4                        [<INVALID>][<INVALID>]
 :00012 [03] condnotbr _%3 =>:00030
+:00013 [04] %3 = @buffer: -
 :00014 [05] %4 = @mixer: -
 :00015 [05] %4 = %4.sample()                     [<INVALID>]
 :00017 [03] _ = %3.<<(%4;1)                      [<INVALID>]
 :00019 [04] %3 = @frame_counter: -
 :00020 [05] %4 = @rate_counter: -
 :00021 [04] _%3 = %3 <= %4                       [<INVALID>][<INVALID>]
 :00022 [03] condnotbr _%3 =>:00025
+:00023 [03] _ = %0.clock_frame_counter()         [<INVALID>]
+:00025 [04] %3 = @rate_counter: -
 :00026 [05] %4 = @rate_clock: -
 :00027 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00028 [03] @rate_counter: - = %3
 :00029 [03] br =>:00002
+:00030 [03] loop_end
+:00031 [02] ret %2
------------------------------------
------------------------------------
<poke_4015> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:237
meta:on_stack:true kind:Ruby mode:method FuncId(592) regs:5 ISeq(RubyFuncInfo { id:592 name:poke_4015 method:(FuncId(592), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [03] _ = %0.update()                      [<INVALID>]
 :00003 [04] %3 = @pulse_0: -
 :00004 [05] %4 = 0: i32
 :00005 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00006 [05] %4 = %4 == 1: i16                    [<INVALID>][<INVALID>]
 :00007 [03] _ = %3.enable(%4;1)                  [<INVALID>]
 :00009 [04] %3 = @pulse_1: -
 :00010 [05] %4 = 1: i32
 :00011 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00012 [05] %4 = %4 == 1: i16                    [<INVALID>][<INVALID>]
 :00013 [03] _ = %3.enable(%4;1)                  [<INVALID>]
 :00015 [04] %3 = @triangle: -
 :00016 [05] %4 = 2: i32
 :00017 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00018 [05] %4 = %4 == 1: i16                    [<INVALID>][<INVALID>]
 :00019 [03] _ = %3.enable(%4;1)                  [<INVALID>]
 :00021 [04] %3 = @noise: -
 :00022 [05] %4 = 3: i32
 :00023 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00024 [05] %4 = %4 == 1: i16                    [<INVALID>][<INVALID>]
 :00025 [03] _ = %3.enable(%4;1)                  [<INVALID>]
 :00027 [04] %3 = @dmc: -
 :00028 [05] %4 = 4: i32
 :00029 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00030 [05] %4 = %4 == 1: i16                    [<INVALID>][<INVALID>]
 :00031 [04] %3 = %3.enable(%4;1)                 [<INVALID>]
 :00033 [03] ret %3
------------------------------------
------------------------------------
<peek_4015> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:247
meta:on_stack:true kind:Ruby mode:method FuncId(593) regs:6 ISeq(RubyFuncInfo { id:593 name:peek_4015 method:(FuncId(593), 0) args: 1 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @cpu: -
 :00002 [03] %2 = %3.update()                     [<INVALID>]
 :00004 [04] %3 = @frame_irq_clock: -
 :00005 [04] _%3 = %3 <= %2                       [<INVALID>][<INVALID>]
 :00006 [03] condnotbr _%3 =>:00009
+:00007 [03] _ = %0.clock_frame_irq(%2;1)         [<INVALID>]
+:00009 [04] %3 = @frame_counter: -
 :00010 [05] %4 = @fixed_clock: -
 :00011 [05] %4 = %2 * %4                         [<INVALID>][<INVALID>]
 :00012 [04] _%3 = %3 < %4                        [<INVALID>][<INVALID>]
 :00013 [03] condnotbr _%3 =>:00016
+:00014 [03] _ = %0.update(%2;1)                  [<INVALID>]
+:00016 [04] %3 = @cpu: -
 :00017 [05] %4 = const[CPU::IRQ_FRAME]           [<INVALID>]
 :00018 [04] %3 = %3.clear_irq(%4;1)              [<INVALID>]
 :00020 [05] %4 = @pulse_0: -
 :00021 [05] %4 = %4.status()                     [<INVALID>]
 :00023 [04] condnotbr %4 =>:00026
+:00024 [05] %4 = 1: i32
 :00025 [05] br =>:00027
+:00026 [05] %4 = 0: i32
+:00027 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00028 [05] %4 = @pulse_1: -
 :00029 [05] %4 = %4.status()                     [<INVALID>]
 :00031 [04] condnotbr %4 =>:00034
+:00032 [05] %4 = 2: i32
 :00033 [05] br =>:00035
+:00034 [05] %4 = 0: i32
+:00035 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00036 [05] %4 = @triangle: -
 :00037 [05] %4 = %4.status()                     [<INVALID>]
 :00039 [04] condnotbr %4 =>:00042
+:00040 [05] %4 = 4: i32
 :00041 [05] br =>:00043
+:00042 [05] %4 = 0: i32
+:00043 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00044 [05] %4 = @noise: -
 :00045 [05] %4 = %4.status()                     [<INVALID>]
 :00047 [04] condnotbr %4 =>:00050
+:00048 [05] %4 = 8: i32
 :00049 [05] br =>:00051
+:00050 [05] %4 = 0: i32
+:00051 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00052 [05] %4 = @dmc: -
 :00053 [05] %4 = %4.status()                     [<INVALID>]
 :00055 [04] condnotbr %4 =>:00058
+:00056 [05] %4 = 16: i32
 :00057 [05] br =>:00059
+:00058 [05] %4 = 0: i32
+:00059 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00060 [03] ret %3
------------------------------------
------------------------------------
<poke_4017> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:260
meta:on_stack:true kind:Ruby mode:method FuncId(594) regs:6 ISeq(RubyFuncInfo { id:594 name:poke_4017 method:(FuncId(594), 0) args: 2 non_temp: 3 temp: 2})
[]
+:00000 [04] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = @cpu: -
 :00002 [04] %3 = %4.update()                     [<INVALID>]
 :00004 [05] %4 = @cpu: -
 :00005 [05] %4 = %4.odd_clock?()                 [<INVALID>]
 :00007 [04] condnotbr %4 =>:00010
+:00008 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00009 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
+:00010 [04] _ = %0.update(%3;1)                  [<INVALID>]
 :00012 [05] %4 = @frame_irq_clock: -
 :00013 [05] _%4 = %4 <= %3                       [<INVALID>][<INVALID>]
 :00014 [04] condnotbr _%4 =>:00017
+:00015 [04] _ = %0.clock_frame_irq(%3;1)         [<INVALID>]
+:00017 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00018 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00019 [05] %4 = const[OSCILLATOR_CLOCKS]        [<INVALID>]
 :00020 [06] %5 = 7: i32
 :00021 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00022 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00023 [04] @oscillator_clocks: - = %4
 :00024 [05] %4 = @oscillator_clocks: -
 :00025 [06] %5 = 0: i32
 :00026 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00027 [05] %4 = %3 + %4                         [<INVALID>][<INVALID>]
 :00028 [06] %5 = @fixed_clock: -
 :00029 [05] %4 = %4 * %5                         [<INVALID>][<INVALID>]
 :00030 [04] @frame_counter: - = %4
 :00031 [05] %4 = 0: i32
 :00032 [04] @frame_divider: - = %4
 :00033 [05] %4 = %2 & 192: i16                   [<INVALID>][<INVALID>]
 :00034 [05] _%4 = %4 != 0: i16                   [<INVALID>][<INVALID>]
 :00035 [04] condnotbr _%4 =>:00038
+:00036 [05] %4 = const[FOREVER_CLOCK]            [<INVALID>]
 :00037 [05] br =>:00042
+:00038 [05] %4 = const[FRAME_CLOCKS]             [<INVALID>]
 :00039 [06] %5 = 0: i32
 :00040 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00041 [05] %4 = %3 + %4                         [<INVALID>][<INVALID>]
+:00042 [04] @frame_irq_clock: - = %4
 :00043 [05] %4 = 0: i32
 :00044 [04] @frame_irq_repeat: - = %4
 :00045 [05] %4 = 6: i32
 :00046 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00047 [05] _%4 = %4 != 0: i16                   [<INVALID>][<INVALID>]
 :00048 [04] condnotbr _%4 =>:00053
+:00049 [05] %4 = @cpu: -
 :00050 [06] %5 = const[CPU::IRQ_FRAME]           [<INVALID>]
 :00051 [04] _ = %4.clear_irq(%5;1)               [<INVALID>]
+:00053 [05] %4 = 7: i32
 :00054 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00055 [05] _%4 = %4 != 0: i16                   [<INVALID>][<INVALID>]
 :00056 [04] condnotbr _%4 =>:00061
+:00057 [05] %4 = literal[true]
 :00058 [05] %4 = %0.clock_oscillators(%4;1)      [<INVALID>]
 :00060 [04] ret %4
+:00061 [05] %4 = nil
 :00062 [04] ret %4
------------------------------------
------------------------------------
<peek_40xx> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:275
meta:on_stack:true kind:Ruby mode:method FuncId(595) regs:3 ISeq(RubyFuncInfo { id:595 name:peek_40xx method:(FuncId(595), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 64: i32
 :00002 [02] ret %2
------------------------------------
------------------------------------
<LengthCounter> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:283
meta:on_stack:true kind:Ruby mode:class_def FuncId(596) regs:2 ISeq(RubyFuncInfo { id:596 name:LengthCounter method:(FuncId(596), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[[10, 254, 20, 2, 40, 4, 80, 6, 160, 8, 60, 10, 14, 12, 26, 14, 12, 16, 24, 18, 48, 20, 96, 22, 192, 24, 72, 26, 16, 28, 32, 30]]
 :00002 [01] const[LUT] = %1
 :00003 [01] method_def reset: FuncId(605)
 :00004 [02] %1 = :count
 :00005 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00007 [01] method_def enable: FuncId(606)
 :00008 [01] method_def write: FuncId(607)
 :00009 [01] method_def clock: FuncId(608)
 :00010 [02] %1 = :clock
 :00011 [01] ret %1
------------------------------------
------------------------------------
<Envelope> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:313
meta:on_stack:true kind:Ruby mode:class_def FuncId(597) regs:3 ISeq(RubyFuncInfo { id:597 name:Envelope method:(FuncId(597), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = :output
 :00002 [03] %2 = :looping
 :00003 [01] _ = %0.attr_reader(%1;2)             [<INVALID>]
 :00005 [01] method_def reset_clock: FuncId(609)
 :00006 [01] method_def reset: FuncId(610)
 :00007 [01] method_def clock: FuncId(611)
 :00008 [01] method_def write: FuncId(612)
 :00009 [01] method_def update_output: FuncId(613)
 :00010 [02] %1 = :update_output
 :00011 [01] ret %1
------------------------------------
------------------------------------
<Mixer> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:358
meta:on_stack:true kind:Ruby mode:class_def FuncId(598) regs:3 ISeq(RubyFuncInfo { id:598 name:Mixer method:(FuncId(598), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = 192: i32
 :00002 [01] const[VOL] = %1
 :00003 [02] %1 = 900: i32
 :00004 [01] const[P_F] = %1
 :00005 [02] %1 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00006 [02] %1 = 9552: i16 * %1                  [<INVALID>][<INVALID>]
 :00007 [03] %2 = const[VOL]                      [<INVALID>]
 :00008 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = const[P_F]                      [<INVALID>]
 :00010 [03] %2 = %2 / 100: i16                   [<INVALID>][<INVALID>]
 :00011 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00012 [01] const[P_0] = %1
 :00013 [02] %1 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00014 [02] %1 = 8128: i16 * %1                  [<INVALID>][<INVALID>]
 :00015 [03] %2 = const[P_F]                      [<INVALID>]
 :00016 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00017 [01] const[P_1] = %1
 :00018 [02] %1 = const[P_F]                      [<INVALID>]
 :00019 [02] %1 = %1 * 100: i16                   [<INVALID>][<INVALID>]
 :00020 [01] const[P_2] = %1
 :00021 [02] %1 = 500: i32
 :00022 [01] const[TND_F] = %1
 :00023 [02] %1 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00024 [02] %1 = 16367: i16 * %1                 [<INVALID>][<INVALID>]
 :00025 [03] %2 = const[VOL]                      [<INVALID>]
 :00026 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00027 [03] %2 = const[TND_F]                    [<INVALID>]
 :00028 [03] %2 = %2 / 100: i16                   [<INVALID>][<INVALID>]
 :00029 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00030 [01] const[TND_0] = %1
 :00031 [02] %1 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00032 [02] %1 = 24329: i16 * %1                 [<INVALID>][<INVALID>]
 :00033 [03] %2 = const[TND_F]                    [<INVALID>]
 :00034 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00035 [01] const[TND_1] = %1
 :00036 [02] %1 = const[TND_F]                    [<INVALID>]
 :00037 [02] %1 = %1 * 100: i16                   [<INVALID>][<INVALID>]
 :00038 [01] const[TND_2] = %1
 :00039 [01] method_def initialize: FuncId(614)
 :00040 [01] method_def reset: FuncId(615)
 :00041 [01] method_def sample: FuncId(616)
 :00042 [02] %1 = :sample
 :00043 [01] ret %1
------------------------------------
------------------------------------
<Oscillator> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:394
meta:on_stack:true kind:Ruby mode:class_def FuncId(599) regs:2 ISeq(RubyFuncInfo { id:599 name:Oscillator method:(FuncId(599), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] method_def inspect: FuncId(617)
 :00002 [01] method_def initialize: FuncId(618)
 :00003 [01] method_def reset: FuncId(619)
 :00004 [01] method_def active?: FuncId(620)
 :00005 [01] method_def poke_0: FuncId(621)
 :00006 [01] method_def poke_2: FuncId(622)
 :00007 [01] method_def poke_3: FuncId(623)
 :00008 [01] method_def enable: FuncId(624)
 :00009 [01] method_def update_settings: FuncId(625)
 :00010 [01] method_def status: FuncId(626)
 :00011 [01] method_def clock_envelope: FuncId(627)
 :00012 [02] %1 = :clock_envelope
 :00013 [01] ret %1
------------------------------------
------------------------------------
<Pulse> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:473
meta:on_stack:true kind:Ruby mode:class_def FuncId(600) regs:4 ISeq(RubyFuncInfo { id:600 name:Pulse method:(FuncId(600), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = 8: i32
 :00002 [01] const[MIN_FREQ] = %1
 :00003 [02] %1 = 2047: i32
 :00004 [01] const[MAX_FREQ] = %1
 :00005 [02] %1 = literal[[253, 249, 225, 6]]
 :00006 [03] %2 = literal[41156609]
 :00007 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00009 [01] const[WAVE_FORM] = %1
 :00010 [01] method_def initialize: FuncId(629)
 :00011 [01] method_def reset: FuncId(630)
 :00012 [01] method_def active?: FuncId(631)
 :00013 [01] method_def update_freq: FuncId(632)
 :00014 [01] method_def poke_0: FuncId(633)
 :00015 [01] method_def poke_1: FuncId(634)
 :00016 [01] method_def poke_3: FuncId(635)
 :00017 [01] method_def clock_sweep: FuncId(636)
 :00018 [01] method_def sample: FuncId(637)
 :00019 [02] %1 = :sample
 :00020 [01] ret %1
------------------------------------
------------------------------------
<Triangle> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:591
meta:on_stack:true kind:Ruby mode:class_def FuncId(601) regs:4 ISeq(RubyFuncInfo { id:601 name:Triangle method:(FuncId(601), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = 2: i32
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] const[MIN_FREQ] = %1
 :00004 [02] %1 = literal[0..15]
 :00005 [02] %1 = %1.to_a()                       [<INVALID>]
 :00007 [03] %2 = literal[0..15]
 :00008 [03] %2 = %2.to_a()                       [<INVALID>]
 :00010 [03] %2 = %2.reverse()                    [<INVALID>]
 :00012 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00013 [01] const[WAVE_FORM] = %1
 :00014 [01] method_def initialize: FuncId(638)
 :00015 [01] method_def reset: FuncId(639)
 :00016 [01] method_def active?: FuncId(640)
 :00017 [01] method_def update_freq: FuncId(641)
 :00018 [01] method_def poke_0: FuncId(642)
 :00019 [01] method_def poke_3: FuncId(643)
 :00020 [01] method_def clock_linear_counter: FuncId(644)
 :00021 [01] method_def clock_length_counter: FuncId(645)
 :00022 [01] method_def sample: FuncId(646)
 :00023 [02] %1 = :sample
 :00024 [01] ret %1
------------------------------------
------------------------------------
<Noise> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:673
meta:on_stack:true kind:Ruby mode:class_def FuncId(602) regs:4 ISeq(RubyFuncInfo { id:602 name:Noise method:(FuncId(602), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal[[4, 8, 16, 32, 64, 96, 128, 160, 202, 254, 380, 508, 762, 1016, 2034, 4068]]
 :00002 [01] const[LUT] = %1
 :00003 [02] %1 = literal[[1, 6]]
 :00004 [03] %2 = literal[42401793]
 :00005 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00007 [02] %2; 2 = expand(%1)
 :00008 [02] const[NEXT_BITS_1] = %2
 :00009 [02] const[NEXT_BITS_6] = %3
 :00010 [01] method_def initialize: FuncId(648)
 :00011 [01] method_def reset: FuncId(649)
 :00012 [01] method_def poke_2: FuncId(650)
 :00013 [01] method_def clock_length_counter: FuncId(651)
 :00014 [01] method_def sample: FuncId(652)
 :00015 [02] %1 = :sample
 :00016 [01] ret %1
------------------------------------
------------------------------------
<DMC> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:731
meta:on_stack:true kind:Ruby mode:class_def FuncId(603) regs:4 ISeq(RubyFuncInfo { id:603 name:DMC method:(FuncId(603), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal[[428, 380, 340, 320, 286, 254, 226, 214, 190, 160, 142, 128, 106, 84, 72, 54]]
 :00002 [03] %2 = literal[42795009]
 :00003 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00005 [01] const[LUT] = %1
 :00006 [01] method_def initialize: FuncId(654)
 :00007 [01] method_def reset: FuncId(655)
 :00008 [02] %1 = :freq
 :00009 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00011 [01] method_def enable: FuncId(656)
 :00012 [01] method_def sample: FuncId(657)
 :00013 [01] method_def do_dma: FuncId(658)
 :00014 [01] method_def update: FuncId(659)
 :00015 [01] method_def poke_0: FuncId(660)
 :00016 [01] method_def poke_1: FuncId(661)
 :00017 [01] method_def poke_2: FuncId(662)
 :00018 [01] method_def poke_3: FuncId(663)
 :00019 [01] method_def clock_dac: FuncId(664)
 :00020 [01] method_def clock_dma: FuncId(665)
 :00021 [01] method_def status: FuncId(666)
 :00022 [02] %1 = :status
 :00023 [01] ret %1
------------------------------------
------------------------------------
<block in APU> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:15
meta:on_stack:true kind:Ruby mode:method FuncId(604) regs:3 ISeq(RubyFuncInfo { id:604 name:<unnamed> method:(FuncId(573), 2) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[RP2A03_CC]                [<INVALID>]
 :00002 [03] %2 = %2 * %1                         [<INVALID>][<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:288
meta:on_stack:true kind:Ruby mode:method FuncId(605) regs:2 ISeq(RubyFuncInfo { id:605 name:reset method:(FuncId(605), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[false]
 :00002 [01] @enabled: - = %1
 :00003 [02] %1 = 0: i32
 :00004 [01] @count: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<enable> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:295
meta:on_stack:true kind:Ruby mode:method FuncId(606) regs:3 ISeq(RubyFuncInfo { id:606 name:enable method:(FuncId(606), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] @enabled: - = %1
 :00002 [03] %2 = @enabled: -
 :00003 [02] condnotbr %2 =>:00005
+:00004 [02] br =>:00007
+:00005 [03] %2 = 0: i32
 :00006 [02] @count: - = %2
+:00007 [03] %2 = @enabled: -
 :00008 [02] ret %2
------------------------------------
------------------------------------
<write> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:301
meta:on_stack:true kind:Ruby mode:method FuncId(607) regs:4 ISeq(RubyFuncInfo { id:607 name:write method:(FuncId(607), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [03] condbr %2 =>:00005
+:00002 [04] %3 = @count: -
 :00003 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00004 [03] condnotbr _%3 =>:00013
+:00005 [04] %3 = @enabled: -
 :00006 [03] condnotbr %3 =>:00010
+:00007 [04] %3 = const[LUT]                      [<INVALID>]
 :00008 [04] %3 = %3.[%1]                         [<INVALID>][<INVALID>]
 :00009 [04] br =>:00011
+:00010 [04] %3 = 0: i32
+:00011 [03] @count: - = %3
 :00012 [03] ret %3
+:00013 [04] %3 = nil
 :00014 [03] ret %3
------------------------------------
------------------------------------
<clock> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:305
meta:on_stack:true kind:Ruby mode:method FuncId(608) regs:2 ISeq(RubyFuncInfo { id:608 name:clock method:(FuncId(608), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @count: -
 :00002 [02] _%1 = %1 == 0: i16                   [<INVALID>][<INVALID>]
 :00003 [01] condnotbr _%1 =>:00006
+:00004 [02] %1 = literal[false]
 :00005 [01] ret %1
+:00006 [02] %1 = @count: -
 :00007 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00008 [01] @count: - = %1
 :00009 [02] %1 = @count: -
 :00010 [02] %1 = %1 == 0: i16                    [<INVALID>][<INVALID>]
 :00011 [01] ret %1
------------------------------------
------------------------------------
<reset_clock> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:316
meta:on_stack:true kind:Ruby mode:method FuncId(609) regs:2 ISeq(RubyFuncInfo { id:609 name:reset_clock method:(FuncId(609), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[true]
 :00002 [01] @reset: - = %1
 :00003 [01] ret %1
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:320
meta:on_stack:true kind:Ruby mode:method FuncId(610) regs:2 ISeq(RubyFuncInfo { id:610 name:reset method:(FuncId(610), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 0: i32
 :00002 [01] @output: - = %1
 :00003 [02] %1 = 0: i32
 :00004 [01] @count: - = %1
 :00005 [02] %1 = 0: i32
 :00006 [01] @volume: - = %1
 :00007 [01] @volume_base: - = %1
 :00008 [02] %1 = literal[true]
 :00009 [01] @constant: - = %1
 :00010 [02] %1 = literal[false]
 :00011 [01] @looping: - = %1
 :00012 [02] %1 = literal[false]
 :00013 [01] @reset: - = %1
 :00014 [02] %1 = %0.update_output()              [<INVALID>]
 :00016 [01] ret %1
------------------------------------
------------------------------------
<clock> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:330
meta:on_stack:true kind:Ruby mode:method FuncId(611) regs:2 ISeq(RubyFuncInfo { id:611 name:clock method:(FuncId(611), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @reset: -
 :00002 [01] condnotbr %1 =>:00008
+:00003 [02] %1 = literal[false]
 :00004 [01] @reset: - = %1
 :00005 [02] %1 = 15: i32
 :00006 [01] @volume: - = %1
 :00007 [01] br =>:00025
+:00008 [02] %1 = @count: -
 :00009 [02] _%1 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00010 [01] condnotbr _%1 =>:00016
+:00011 [02] %1 = @count: -
 :00012 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00013 [01] @count: - = %1
 :00014 [02] %1 = nil
 :00015 [01] ret %1
+:00016 [02] %1 = @volume: -
 :00017 [02] _%1 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00018 [01] condbr _%1 =>:00021
+:00019 [02] %1 = @looping: -
 :00020 [01] condnotbr %1 =>:00025
+:00021 [02] %1 = @volume: -
 :00022 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00023 [02] %1 = %1 & 15: i16                    [<INVALID>][<INVALID>]
 :00024 [01] @volume: - = %1
+:00025 [02] %1 = @volume_base: -
 :00026 [01] @count: - = %1
 :00027 [02] %1 = %0.update_output()              [<INVALID>]
 :00029 [01] ret %1
------------------------------------
------------------------------------
<write> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:345
meta:on_stack:true kind:Ruby mode:method FuncId(612) regs:3 ISeq(RubyFuncInfo { id:612 name:write method:(FuncId(612), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1 & 15: i16                    [<INVALID>][<INVALID>]
 :00002 [02] @volume_base: - = %2
 :00003 [03] %2 = 4: i32
 :00004 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00005 [03] %2 = %2 == 1: i16                    [<INVALID>][<INVALID>]
 :00006 [02] @constant: - = %2
 :00007 [03] %2 = 5: i32
 :00008 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00009 [03] %2 = %2 == 1: i16                    [<INVALID>][<INVALID>]
 :00010 [02] @looping: - = %2
 :00011 [03] %2 = %0.update_output()              [<INVALID>]
 :00013 [02] ret %2
------------------------------------
------------------------------------
<update_output> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:352
meta:on_stack:true kind:Ruby mode:method FuncId(613) regs:3 ISeq(RubyFuncInfo { id:613 name:update_output method:(FuncId(613), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @constant: -
 :00002 [01] condnotbr %1 =>:00005
+:00003 [02] %1 = @volume_base: -
 :00004 [02] br =>:00006
+:00005 [02] %1 = @volume: -
+:00006 [03] %2 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00007 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00008 [01] @output: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:369
meta:on_stack:true kind:Ruby mode:method FuncId(614) regs:11 ISeq(RubyFuncInfo { id:614 name:initialize method:(FuncId(614), 0) args: 5 non_temp: 5 temp: 5})
[]
+:00000 [06] init_method reg:10 arg:5 req:5 opt:0 rest:false block:None stack_offset:9
 :00001 [07] %6 = %1
 :00002 [08] %7 = %2
 :00003 [09] %8 = %3
 :00004 [10] %9 = %4
 :00005 [11] %10 = %5
 :00006 [11] @pulse_0: - = %6
 :00007 [11] @pulse_1: - = %7
 :00008 [11] @triangle: - = %8
 :00009 [11] @noise: - = %9
 :00010 [11] @dmc: - = %10
 :00011 [07] %6 = array[%6; 5]
 :00012 [06] ret %6
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:373
meta:on_stack:true kind:Ruby mode:method FuncId(615) regs:2 ISeq(RubyFuncInfo { id:615 name:reset method:(FuncId(615), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 0: i32
 :00002 [01] @next: - = %1
 :00003 [01] @prev: - = %1
 :00004 [01] @acc: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<sample> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:377
meta:on_stack:true kind:Ruby mode:method FuncId(616) regs:8 ISeq(RubyFuncInfo { id:616 name:sample method:(FuncId(616), 0) args: 0 non_temp: 3 temp: 4})
[]
+:00000 [04] init_method reg:7 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = @pulse_0: -
 :00002 [05] %4 = %4.sample()                     [<INVALID>]
 :00004 [06] %5 = @pulse_1: -
 :00005 [06] %5 = %5.sample()                     [<INVALID>]
 :00007 [04] %1 = %4 + %5                         [<INVALID>][<INVALID>]
 :00008 [05] %4 = @triangle: -
 :00009 [05] %4 = %4.sample()                     [<INVALID>]
 :00011 [06] %5 = @noise: -
 :00012 [06] %5 = %5.sample()                     [<INVALID>]
 :00014 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00015 [06] %5 = @dmc: -
 :00016 [06] %5 = %5.sample()                     [<INVALID>]
 :00018 [04] %2 = %4 + %5                         [<INVALID>][<INVALID>]
 :00019 [05] %4 = const[P_0]                      [<INVALID>]
 :00020 [05] %4 = %4 * %1                         [<INVALID>][<INVALID>]
 :00021 [06] %5 = const[P_1]                      [<INVALID>]
 :00022 [07] %6 = const[P_2]                      [<INVALID>]
 :00023 [07] %6 = %6 * %1                         [<INVALID>][<INVALID>]
 :00024 [06] %5 = %5 + %6                         [<INVALID>][<INVALID>]
 :00025 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00026 [06] %5 = const[TND_0]                    [<INVALID>]
 :00027 [06] %5 = %5 * %2                         [<INVALID>][<INVALID>]
 :00028 [07] %6 = const[TND_1]                    [<INVALID>]
 :00029 [08] %7 = const[TND_2]                    [<INVALID>]
 :00030 [08] %7 = %7 * %2                         [<INVALID>][<INVALID>]
 :00031 [07] %6 = %6 + %7                         [<INVALID>][<INVALID>]
 :00032 [06] %5 = %5 / %6                         [<INVALID>][<INVALID>]
 :00033 [04] %3 = %4 + %5                         [<INVALID>][<INVALID>]
 :00034 [05] %4 = @acc: -
 :00035 [06] %5 = @prev: -
 :00036 [05] %4 = %4 - %5                         [<INVALID>][<INVALID>]
 :00037 [04] @acc: - = %4
 :00038 [05] %4 = 15: i32
 :00039 [05] %4 = %3.<<(%4;1)                     [<INVALID>]
 :00041 [04] @prev: - = %4
 :00042 [05] %4 = @acc: -
 :00043 [06] %5 = @prev: -
 :00044 [07] %6 = @next: -
 :00045 [07] %6 = %6 * 3: i16                     [<INVALID>][<INVALID>]
 :00046 [06] %5 = %5 - %6                         [<INVALID>][<INVALID>]
 :00047 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00048 [04] @acc: - = %4
 :00049 [05] %4 = @acc: -
 :00050 [06] %5 = 15: i32
 :00051 [04] %3 = %4.>>(%5;1)                     [<INVALID>]
 :00053 [04] @next: - = %3
 :00054 [05] _%4 = %3 < -32767: i16               [<INVALID>][<INVALID>]
 :00055 [04] condnotbr _%4 =>:00057
+:00056 [04] %3 = -32767: i32
+:00057 [05] _%4 = %3 > 32767: i16                [<INVALID>][<INVALID>]
 :00058 [04] condnotbr _%4 =>:00060
+:00059 [04] %3 = 32767: i32
+:00060 [04] ret %3
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:395
meta:on_stack:true kind:Ruby mode:method FuncId(617) regs:4 ISeq(RubyFuncInfo { id:617 name:inspect method:(FuncId(617), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["#<"]
 :00002 [03] %2 = %0.class()                      [<INVALID>]
 :00004 [04] %3 = literal[">"]
 :00005 [02] %1 = concat(%1; 3)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:399
meta:on_stack:true kind:Ruby mode:method FuncId(618) regs:3 ISeq(RubyFuncInfo { id:618 name:initialize method:(FuncId(618), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] @apu: - = %1
 :00002 [03] %2 = 1: i32
 :00003 [02] @fixed: - = %2
 :00004 [02] @rate: - = %2
 :00005 [03] %2 = nil
 :00006 [02] @wave_length: - = %2
 :00007 [02] @length_counter: - = %2
 :00008 [02] @envelope: - = %2
 :00009 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:405
meta:on_stack:true kind:Ruby mode:method FuncId(619) regs:3 ISeq(RubyFuncInfo { id:619 name:reset method:(FuncId(619), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @fixed: -
 :00002 [02] %1 = 2048: i16 * %1                  [<INVALID>][<INVALID>]
 :00003 [01] @timer: - = %1
 :00004 [02] %1 = @fixed: -
 :00005 [01] @freq: - = %1
 :00006 [02] %1 = 0: i32
 :00007 [01] @amp: - = %1
 :00008 [02] %1 = @wave_length: -
 :00009 [01] condnotbr %1 =>:00012
+:00010 [02] %1 = 0: i32
 :00011 [01] @wave_length: - = %1
+:00012 [02] %1 = @envelope: -
 :00013 [01] condnotbr %1 =>:00017
+:00014 [02] %1 = @envelope: -
 :00015 [01] _ = %1.reset()                       [<INVALID>]
+:00017 [02] %1 = @length_counter: -
 :00018 [01] condnotbr %1 =>:00022
+:00019 [02] %1 = @length_counter: -
 :00020 [01] _ = %1.reset()                       [<INVALID>]
+:00022 [02] %1 = %0.active?()                    [<INVALID>]
 :00024 [01] @active: - = %1
 :00025 [01] ret %1
------------------------------------
------------------------------------
<active?> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:416
meta:on_stack:true kind:Ruby mode:method FuncId(620) regs:3 ISeq(RubyFuncInfo { id:620 name:active? method:(FuncId(620), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @length_counter: -
 :00002 [01] condnotbr %1 =>:00010
+:00003 [02] %1 = @length_counter: -
 :00004 [02] %1 = %1.count()                      [<INVALID>]
 :00006 [02] _%1 = %1 == 0: i16                   [<INVALID>][<INVALID>]
 :00007 [01] condnotbr _%1 =>:00010
+:00008 [02] %1 = literal[false]
 :00009 [01] ret %1
+:00010 [02] %1 = @envelope: -
 :00011 [01] condnotbr %1 =>:00019
+:00012 [02] %1 = @envelope: -
 :00013 [02] %1 = %1.output()                     [<INVALID>]
 :00015 [02] _%1 = %1 == 0: i16                   [<INVALID>][<INVALID>]
 :00016 [01] condnotbr _%1 =>:00019
+:00017 [02] %1 = literal[false]
 :00018 [01] ret %1
+:00019 [02] %1 = literal[true]
 :00020 [01] ret %1
------------------------------------
------------------------------------
<poke_0> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:422
meta:on_stack:true kind:Ruby mode:method FuncId(621) regs:5 ISeq(RubyFuncInfo { id:621 name:poke_0 method:(FuncId(621), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @envelope: -
 :00002 [03] condnotbr %3 =>:00013
+:00003 [04] %3 = @apu: -
 :00004 [03] _ = %3.update_latency()              [<INVALID>]
 :00006 [04] %3 = @envelope: -
 :00007 [03] _ = %3.write(%2;1)                   [<INVALID>]
 :00009 [04] %3 = %0.active?()                    [<INVALID>]
 :00011 [03] @active: - = %3
 :00012 [03] ret %3
+:00013 [04] %3 = nil
 :00014 [03] ret %3
------------------------------------
------------------------------------
<poke_2> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:430
meta:on_stack:true kind:Ruby mode:method FuncId(622) regs:5 ISeq(RubyFuncInfo { id:622 name:poke_2 method:(FuncId(622), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @apu: -
 :00002 [03] _ = %3.update()                      [<INVALID>]
 :00004 [04] %3 = @wave_length: -
 :00005 [03] condnotbr %3 =>:00014
+:00006 [04] %3 = @wave_length: -
 :00007 [04] %3 = %3 & 1792: i16                  [<INVALID>][<INVALID>]
 :00008 [05] %4 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00009 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00010 [03] @wave_length: - = %3
 :00011 [04] %3 = %0.update_freq()                [<INVALID>]
 :00013 [03] ret %3
+:00014 [04] %3 = nil
 :00015 [03] ret %3
------------------------------------
------------------------------------
<poke_3> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:438
meta:on_stack:true kind:Ruby mode:method FuncId(623) regs:7 ISeq(RubyFuncInfo { id:623 name:poke_3 method:(FuncId(623), 0) args: 2 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = @apu: -
 :00002 [04] %3 = %4.update_delta()               [<INVALID>]
 :00004 [05] %4 = @wave_length: -
 :00005 [04] condnotbr %4 =>:00016
+:00006 [05] %4 = @wave_length: -
 :00007 [05] %4 = %4 & 255: i16                   [<INVALID>][<INVALID>]
 :00008 [06] %5 = %2 & 7: i16                     [<INVALID>][<INVALID>]
 :00009 [07] %6 = 8: i32
 :00010 [06] %5 = %5.<<(%6;1)                     [<INVALID>]
 :00012 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00013 [04] @wave_length: - = %4
 :00014 [04] _ = %0.update_freq()                 [<INVALID>]
+:00016 [05] %4 = @envelope: -
 :00017 [04] condnotbr %4 =>:00021
+:00018 [05] %4 = @envelope: -
 :00019 [04] _ = %4.reset_clock()                 [<INVALID>]
+:00021 [05] %4 = @length_counter: -
 :00022 [04] condnotbr %4 =>:00030
+:00023 [05] %4 = @length_counter: -
 :00024 [06] %5 = 3: i32
 :00025 [06] %5 = %2.>>(%5;1)                     [<INVALID>]
 :00027 [07] %6 = %3
 :00028 [04] _ = %4.write(%5;2)                   [<INVALID>]
+:00030 [05] %4 = %0.active?()                    [<INVALID>]
 :00032 [04] @active: - = %4
 :00033 [04] ret %4
------------------------------------
------------------------------------
<enable> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:449
meta:on_stack:true kind:Ruby mode:method FuncId(624) regs:4 ISeq(RubyFuncInfo { id:624 name:enable method:(FuncId(624), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @length_counter: -
 :00002 [02] _ = %2.enable(%1;1)                  [<INVALID>]
 :00004 [03] %2 = %0.active?()                    [<INVALID>]
 :00006 [02] @active: - = %2
 :00007 [02] ret %2
------------------------------------
------------------------------------
<update_settings> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:454
meta:on_stack:true kind:Ruby mode:method FuncId(625) regs:5 ISeq(RubyFuncInfo { id:625 name:update_settings method:(FuncId(625), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @freq: -
 :00002 [05] %4 = @fixed: -
 :00003 [04] %3 = %3 / %4                         [<INVALID>][<INVALID>]
 :00004 [04] %3 = %3 * %2                         [<INVALID>][<INVALID>]
 :00005 [03] @freq: - = %3
 :00006 [04] %3 = @timer: -
 :00007 [05] %4 = @fixed: -
 :00008 [04] %3 = %3 / %4                         [<INVALID>][<INVALID>]
 :00009 [04] %3 = %3 * %2                         [<INVALID>][<INVALID>]
 :00010 [03] @timer: - = %3
 :00011 [04] %3 = %1
 :00012 [05] %4 = %2
 :00013 [05] @rate: - = %3
 :00014 [05] @fixed: - = %4
 :00015 [04] %3 = array[%3; 2]
 :00016 [03] ret %3
------------------------------------
------------------------------------
<status> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:460
meta:on_stack:true kind:Ruby mode:method FuncId(626) regs:3 ISeq(RubyFuncInfo { id:626 name:status method:(FuncId(626), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @length_counter: -
 :00002 [02] %1 = %1.count()                      [<INVALID>]
 :00004 [02] %1 = %1 > 0: i16                     [<INVALID>][<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<clock_envelope> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:464
meta:on_stack:true kind:Ruby mode:method FuncId(627) regs:3 ISeq(RubyFuncInfo { id:627 name:clock_envelope method:(FuncId(627), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @envelope: -
 :00002 [01] _ = %1.clock()                       [<INVALID>]
 :00004 [02] %1 = %0.active?()                    [<INVALID>]
 :00006 [01] @active: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<block in Pulse> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:476
meta:on_stack:true kind:Ruby mode:method FuncId(628) regs:5 ISeq(RubyFuncInfo { id:628 name:<unnamed> method:(FuncId(600), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[0..7]
 :00002 [04] %3 = literal[43712513]
 :00003 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:478
meta:on_stack:true kind:Ruby mode:method FuncId(629) regs:4 ISeq(RubyFuncInfo { id:629 name:initialize method:(FuncId(629), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] _ = super(%1;1)                      [<INVALID>]
 :00003 [03] %2 = 0: i32
 :00004 [02] @wave_length: - = %2
 :00005 [03] %2 = const[Envelope]                 [<INVALID>]
 :00006 [03] %2 = %2.new()                        [<INVALID>]
 :00008 [02] @envelope: - = %2
 :00009 [03] %2 = const[LengthCounter]            [<INVALID>]
 :00010 [03] %2 = %2.new()                        [<INVALID>]
 :00012 [02] @length_counter: - = %2
 :00013 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:485
meta:on_stack:true kind:Ruby mode:method FuncId(630) regs:3 ISeq(RubyFuncInfo { id:630 name:reset method:(FuncId(630), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [01] _ = super()                          [<INVALID>]
 :00003 [02] %1 = @fixed: -
 :00004 [02] %1 = %1 * 2: i16                     [<INVALID>][<INVALID>]
 :00005 [01] @freq: - = %1
 :00006 [02] %1 = literal[false]
 :00007 [01] @valid_freq: - = %1
 :00008 [02] %1 = 0: i32
 :00009 [01] @step: - = %1
 :00010 [02] %1 = const[WAVE_FORM]                [<INVALID>]
 :00011 [03] %2 = 0: i32
 :00012 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00013 [01] @form: - = %1
 :00014 [02] %1 = 0: i32
 :00015 [01] @sweep_rate: - = %1
 :00016 [02] %1 = 1: i32
 :00017 [01] @sweep_count: - = %1
 :00018 [02] %1 = literal[false]
 :00019 [01] @sweep_reload: - = %1
 :00020 [02] %1 = -1: i32
 :00021 [01] @sweep_increase: - = %1
 :00022 [02] %1 = 0: i32
 :00023 [01] @sweep_shift: - = %1
 :00024 [01] ret %1
------------------------------------
------------------------------------
<active?> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:498
meta:on_stack:true kind:Ruby mode:method FuncId(631) regs:3 ISeq(RubyFuncInfo { id:631 name:active? method:(FuncId(631), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = super()                         [<INVALID>]
 :00003 [03] %1 = %2
 :00004 [02] condnotbr %1 =>:00006
+:00005 [02] %1 = @valid_freq: -
+:00006 [01] ret %1
------------------------------------
------------------------------------
<update_freq> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:502
meta:on_stack:true kind:Ruby mode:method FuncId(632) regs:5 ISeq(RubyFuncInfo { id:632 name:update_freq method:(FuncId(632), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @wave_length: -
 :00002 [03] %2 = const[MIN_FREQ]                 [<INVALID>]
 :00003 [02] _%1 = %1 >= %2                       [<INVALID>][<INVALID>]
 :00004 [01] condnotbr _%1 =>:00025
+:00005 [02] %1 = @wave_length: -
 :00006 [03] %2 = @sweep_increase: -
 :00007 [04] %3 = @wave_length: -
 :00008 [05] %4 = @sweep_shift: -
 :00009 [04] %3 = %3.>>(%4;1)                     [<INVALID>]
 :00011 [03] %2 = %2 & %3                         [<INVALID>][<INVALID>]
 :00012 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00013 [03] %2 = const[MAX_FREQ]                 [<INVALID>]
 :00014 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00015 [01] condnotbr _%1 =>:00025
+:00016 [02] %1 = @wave_length: -
 :00017 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00018 [02] %1 = %1 * 2: i16                     [<INVALID>][<INVALID>]
 :00019 [03] %2 = @fixed: -
 :00020 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00021 [01] @freq: - = %1
 :00022 [02] %1 = literal[true]
 :00023 [01] @valid_freq: - = %1
 :00024 [01] br =>:00027
+:00025 [02] %1 = literal[false]
 :00026 [01] @valid_freq: - = %1
+:00027 [02] %1 = %0.active?()                    [<INVALID>]
 :00029 [01] @active: - = %1
 :00030 [01] ret %1
------------------------------------
------------------------------------
<poke_0> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:512
meta:on_stack:true kind:Ruby mode:method FuncId(633) regs:5 ISeq(RubyFuncInfo { id:633 name:poke_0 method:(FuncId(633), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [03] _ = super(%1;2)                      [<INVALID>]
 :00003 [04] %3 = const[WAVE_FORM]                [<INVALID>]
 :00004 [05] %4 = 6: i32
 :00005 [05] %4 = %2.>>(%4;1)                     [<INVALID>]
 :00007 [05] %4 = %4 & 3: i16                     [<INVALID>][<INVALID>]
 :00008 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00009 [03] @form: - = %3
 :00010 [03] ret %3
------------------------------------
------------------------------------
<poke_1> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:517
meta:on_stack:true kind:Ruby mode:method FuncId(634) regs:5 ISeq(RubyFuncInfo { id:634 name:poke_1 method:(FuncId(634), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @apu: -
 :00002 [03] _ = %3.update()                      [<INVALID>]
 :00004 [04] %3 = 3: i32
 :00005 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00006 [04] _%3 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00007 [03] condnotbr _%3 =>:00010
+:00008 [04] %3 = 0: i32
 :00009 [04] br =>:00011
+:00010 [04] %3 = -1: i32
+:00011 [03] @sweep_increase: - = %3
 :00012 [04] %3 = %2 & 7: i16                     [<INVALID>][<INVALID>]
 :00013 [03] @sweep_shift: - = %3
 :00014 [04] %3 = 0: i32
 :00015 [03] @sweep_rate: - = %3
 :00016 [04] %3 = 7: i32
 :00017 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00018 [04] _%3 = %3 == 1: i16                   [<INVALID>][<INVALID>]
 :00019 [03] condnotbr _%3 =>:00031
+:00020 [04] %3 = @sweep_shift: -
 :00021 [04] _%3 = %3 > 0: i16                    [<INVALID>][<INVALID>]
 :00022 [03] condnotbr _%3 =>:00031
+:00023 [04] %3 = 4: i32
 :00024 [04] %3 = %2.>>(%3;1)                     [<INVALID>]
 :00026 [04] %3 = %3 & 7: i16                     [<INVALID>][<INVALID>]
 :00027 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00028 [03] @sweep_rate: - = %3
 :00029 [04] %3 = literal[true]
 :00030 [03] @sweep_reload: - = %3
+:00031 [04] %3 = %0.update_freq()                [<INVALID>]
 :00033 [03] ret %3
------------------------------------
------------------------------------
<poke_3> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:529
meta:on_stack:true kind:Ruby mode:method FuncId(635) regs:4 ISeq(RubyFuncInfo { id:635 name:poke_3 method:(FuncId(635), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [03] _ = super(%1;2)                      [<INVALID>]
 :00003 [04] %3 = 0: i32
 :00004 [03] @step: - = %3
 :00005 [03] ret %3
------------------------------------
------------------------------------
<clock_sweep> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:534
meta:on_stack:true kind:Ruby mode:method FuncId(636) regs:6 ISeq(RubyFuncInfo { id:636 name:clock_sweep method:(FuncId(636), 0) args: 1 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = @envelope: -
 :00002 [04] %3 = %4.looping()                    [<INVALID>]
 :00004 [04] %3 = !%3                             [<INVALID>]
 :00005 [03] condnotbr %3 =>:00012
+:00006 [04] %3 = @length_counter: -
 :00007 [04] %3 = %3.clock()                      [<INVALID>]
 :00009 [03] condnotbr %3 =>:00012
+:00010 [04] %3 = literal[false]
 :00011 [03] @active: - = %3
+:00012 [04] %3 = @sweep_rate: -
 :00013 [04] _%3 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00014 [03] condnotbr _%3 =>:00051
+:00015 [04] %3 = @sweep_count: -
 :00016 [04] %3 = %3 - 1: i16                     [<INVALID>][<INVALID>]
 :00017 [03] @sweep_count: - = %3
 :00018 [04] %3 = @sweep_count: -
 :00019 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00020 [03] condnotbr _%3 =>:00051
+:00021 [04] %3 = @sweep_rate: -
 :00022 [03] @sweep_count: - = %3
 :00023 [04] %3 = @wave_length: -
 :00024 [05] %4 = const[MIN_FREQ]                 [<INVALID>]
 :00025 [04] _%3 = %3 >= %4                       [<INVALID>][<INVALID>]
 :00026 [03] condnotbr _%3 =>:00051
+:00027 [04] %3 = @wave_length: -
 :00028 [05] %4 = @sweep_shift: -
 :00029 [03] %2 = %3.>>(%4;1)                     [<INVALID>]
 :00031 [04] %3 = @sweep_increase: -
 :00032 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00033 [03] condnotbr _%3 =>:00041
+:00034 [04] %3 = @wave_length: -
 :00035 [05] %4 = %1 - %2                         [<INVALID>][<INVALID>]
 :00036 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00037 [03] @wave_length: - = %3
 :00038 [03] _ = %0.update_freq()                 [<INVALID>]
 :00040 [03] br =>:00051
+:00041 [04] %3 = @wave_length: -
 :00042 [04] %3 = %3 + %2                         [<INVALID>][<INVALID>]
 :00043 [05] %4 = const[MAX_FREQ]                 [<INVALID>]
 :00044 [04] _%3 = %3 <= %4                       [<INVALID>][<INVALID>]
 :00045 [03] condnotbr _%3 =>:00051
+:00046 [04] %3 = @wave_length: -
 :00047 [04] %3 = %3 + %2                         [<INVALID>][<INVALID>]
 :00048 [03] @wave_length: - = %3
 :00049 [03] _ = %0.update_freq()                 [<INVALID>]
+:00051 [04] %3 = @sweep_reload: -
 :00052 [03] condnotbr %3 =>:00054
+:00053 [03] br =>:00056
+:00054 [04] %3 = nil
 :00055 [03] ret %3
+:00056 [04] %3 = literal[false]
 :00057 [03] @sweep_reload: - = %3
 :00058 [04] %3 = @sweep_rate: -
 :00059 [03] @sweep_count: - = %3
 :00060 [03] ret %3
------------------------------------
------------------------------------
<sample> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:559
meta:on_stack:true kind:Ruby mode:method FuncId(637) regs:7 ISeq(RubyFuncInfo { id:637 name:sample method:(FuncId(637), 0) args: 0 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %1 = @timer: -
 :00002 [05] %4 = @timer: -
 :00003 [06] %5 = @rate: -
 :00004 [05] %4 = %4 - %5                         [<INVALID>][<INVALID>]
 :00005 [04] @timer: - = %4
 :00006 [05] %4 = @active: -
 :00007 [04] condnotbr %4 =>:00061
+:00008 [05] %4 = @timer: -
 :00009 [05] _%4 = %4 < 0: i16                    [<INVALID>][<INVALID>]
 :00010 [04] condnotbr _%4 =>:00051
+:00011 [05] %4 = @form: -
 :00012 [06] %5 = @step: -
 :00013 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00014 [04] %1 = %1.>>(%4;1)                     [<INVALID>]
+:00016 [04] loop_start counter=0 jit-addr=0000000000000000
 :00017 [04] %2 = @timer: -
 :00018 [04] %2 = -%2                             [<INVALID>]
 :00019 [05] %4 = @freq: -
 :00020 [05] _%4 = %2 > %4                        [<INVALID>][<INVALID>]
 :00021 [04] condnotbr _%4 =>:00023
+:00022 [04] %2 = @freq: -
+:00023 [05] %4 = @form: -
 :00024 [06] %5 = @step: -
 :00025 [06] %5 = %5 + 1: i16                     [<INVALID>][<INVALID>]
 :00026 [06] %5 = %5 & 7: i16                     [<INVALID>][<INVALID>]
 :00027 [05] @step: - = %5
 :00028 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00029 [05] %4 = %2.>>(%4;1)                     [<INVALID>]
 :00031 [04] %1 = %1 + %4                         [<INVALID>][<INVALID>]
 :00032 [05] %4 = @timer: -
 :00033 [06] %5 = @freq: -
 :00034 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00035 [04] @timer: - = %4
 :00036 [05] %4 = @timer: -
 :00037 [05] _%4 = %4 < 0: i16                    [<INVALID>][<INVALID>]
 :00038 [04] condbr _%4 =>:00016
+:00039 [04] loop_end
+:00040 [05] %4 = @envelope: -
 :00041 [05] %4 = %4.output()                     [<INVALID>]
 :00043 [05] %4 = %1 * %4                         [<INVALID>][<INVALID>]
 :00044 [06] %5 = @rate: -
 :00045 [06] %5 = %5 / 2: i16                     [<INVALID>][<INVALID>]
 :00046 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00047 [06] %5 = @rate: -
 :00048 [05] %4 = %4 / %5                         [<INVALID>][<INVALID>]
 :00049 [04] @amp: - = %4
 :00050 [04] br =>:00060
+:00051 [05] %4 = @envelope: -
 :00052 [05] %4 = %4.output()                     [<INVALID>]
 :00054 [06] %5 = @form: -
 :00055 [07] %6 = @step: -
 :00056 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00057 [05] %4 = %4.>>(%5;1)                     [<INVALID>]
 :00059 [04] @amp: - = %4
+:00060 [04] br =>:00090
+:00061 [05] %4 = @timer: -
 :00062 [05] _%4 = %4 < 0: i16                    [<INVALID>][<INVALID>]
 :00063 [04] condnotbr _%4 =>:00080
+:00064 [05] %4 = @timer: -
 :00065 [05] %4 = -%4                             [<INVALID>]
 :00066 [06] %5 = @freq: -
 :00067 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00068 [05] %4 = %4 - 1: i16                     [<INVALID>][<INVALID>]
 :00069 [06] %5 = @freq: -
 :00070 [04] %3 = %4 / %5                         [<INVALID>][<INVALID>]
 :00071 [05] %4 = @step: -
 :00072 [05] %4 = %4 + %3                         [<INVALID>][<INVALID>]
 :00073 [05] %4 = %4 & 7: i16                     [<INVALID>][<INVALID>]
 :00074 [04] @step: - = %4
 :00075 [05] %4 = @timer: -
 :00076 [06] %5 = @freq: -
 :00077 [06] %5 = %3 * %5                         [<INVALID>][<INVALID>]
 :00078 [05] %4 = %4 + %5                         [<INVALID>][<INVALID>]
 :00079 [04] @timer: - = %4
+:00080 [05] %4 = @amp: -
 :00081 [06] %5 = const[CHANNEL_OUTPUT_DECAY]     [<INVALID>]
 :00082 [05] _%4 = %4 < %5                        [<INVALID>][<INVALID>]
 :00083 [04] condnotbr _%4 =>:00086
+:00084 [05] %4 = 0: i32
 :00085 [04] ret %4
+:00086 [05] %4 = @amp: -
 :00087 [06] %5 = const[CHANNEL_OUTPUT_DECAY]     [<INVALID>]
 :00088 [05] %4 = %4 - %5                         [<INVALID>][<INVALID>]
 :00089 [04] @amp: - = %4
+:00090 [05] %4 = @amp: -
 :00091 [04] ret %4
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:595
meta:on_stack:true kind:Ruby mode:method FuncId(638) regs:4 ISeq(RubyFuncInfo { id:638 name:initialize method:(FuncId(638), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] _ = super(%1;1)                      [<INVALID>]
 :00003 [03] %2 = 0: i32
 :00004 [02] @wave_length: - = %2
 :00005 [03] %2 = const[LengthCounter]            [<INVALID>]
 :00006 [03] %2 = %2.new()                        [<INVALID>]
 :00008 [02] @length_counter: - = %2
 :00009 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:601
meta:on_stack:true kind:Ruby mode:method FuncId(639) regs:2 ISeq(RubyFuncInfo { id:639 name:reset method:(FuncId(639), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] _ = super()                          [<INVALID>]
 :00003 [02] %1 = 7: i32
 :00004 [01] @step: - = %1
 :00005 [02] %1 = :counting
 :00006 [01] @status: - = %1
 :00007 [02] %1 = 0: i32
 :00008 [01] @linear_counter_load: - = %1
 :00009 [02] %1 = literal[true]
 :00010 [01] @linear_counter_start: - = %1
 :00011 [02] %1 = 0: i32
 :00012 [01] @linear_counter: - = %1
 :00013 [01] ret %1
------------------------------------
------------------------------------
<active?> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:610
meta:on_stack:true kind:Ruby mode:method FuncId(640) regs:4 ISeq(RubyFuncInfo { id:640 name:active? method:(FuncId(640), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = super()                         [<INVALID>]
 :00003 [03] %1 = %2
 :00004 [02] condnotbr %1 =>:00007
+:00005 [03] %2 = @linear_counter: -
 :00006 [02] %1 = %2 != 0: i16                    [<INVALID>][<INVALID>]
+:00007 [02] condnotbr %1 =>:00011
+:00008 [03] %2 = @wave_length: -
 :00009 [04] %3 = const[MIN_FREQ]                 [<INVALID>]
 :00010 [02] %1 = %2 >= %3                        [<INVALID>][<INVALID>]
+:00011 [01] ret %1
------------------------------------
------------------------------------
<update_freq> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:614
meta:on_stack:true kind:Ruby mode:method FuncId(641) regs:3 ISeq(RubyFuncInfo { id:641 name:update_freq method:(FuncId(641), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @wave_length: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [03] %2 = @fixed: -
 :00004 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00005 [01] @freq: - = %1
 :00006 [02] %1 = %0.active?()                    [<INVALID>]
 :00008 [01] @active: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<poke_0> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:619
meta:on_stack:true kind:Ruby mode:method FuncId(642) regs:5 ISeq(RubyFuncInfo { id:642 name:poke_0 method:(FuncId(642), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [03] _ = super(%1;2)                      [<INVALID>]
 :00003 [04] %3 = @apu: -
 :00004 [03] _ = %3.update()                      [<INVALID>]
 :00006 [04] %3 = %2 & 127: i16                   [<INVALID>][<INVALID>]
 :00007 [03] @linear_counter_load: - = %3
 :00008 [04] %3 = 7: i32
 :00009 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00010 [04] %3 = %3 == 0: i16                    [<INVALID>][<INVALID>]
 :00011 [03] @linear_counter_start: - = %3
 :00012 [03] ret %3
------------------------------------
------------------------------------
<poke_3> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:626
meta:on_stack:true kind:Ruby mode:method FuncId(643) regs:4 ISeq(RubyFuncInfo { id:643 name:poke_3 method:(FuncId(643), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [03] _ = super(%1;2)                      [<INVALID>]
 :00003 [04] %3 = :reload
 :00004 [03] @status: - = %3
 :00005 [03] ret %3
------------------------------------
------------------------------------
<clock_linear_counter> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:631
meta:on_stack:true kind:Ruby mode:method FuncId(644) regs:3 ISeq(RubyFuncInfo { id:644 name:clock_linear_counter method:(FuncId(644), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @status: -
 :00002 [03] %2 = :counting
 :00003 [02] _%1 = %1 == %2                       [<INVALID>][<INVALID>]
 :00004 [01] condnotbr _%1 =>:00012
+:00005 [02] %1 = @linear_counter: -
 :00006 [02] _%1 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00007 [01] condnotbr _%1 =>:00011
+:00008 [02] %1 = @linear_counter: -
 :00009 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00010 [01] @linear_counter: - = %1
+:00011 [01] br =>:00018
+:00012 [02] %1 = @linear_counter_start: -
 :00013 [01] condnotbr %1 =>:00016
+:00014 [02] %1 = :counting
 :00015 [01] @status: - = %1
+:00016 [02] %1 = @linear_counter_load: -
 :00017 [01] @linear_counter: - = %1
+:00018 [02] %1 = %0.active?()                    [<INVALID>]
 :00020 [01] @active: - = %1
 :00021 [01] ret %1
------------------------------------
------------------------------------
<clock_length_counter> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:641
meta:on_stack:true kind:Ruby mode:method FuncId(645) regs:3 ISeq(RubyFuncInfo { id:645 name:clock_length_counter method:(FuncId(645), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @linear_counter_start: -
 :00002 [01] condnotbr %1 =>:00010
+:00003 [02] %1 = @length_counter: -
 :00004 [02] %1 = %1.clock()                      [<INVALID>]
 :00006 [01] condnotbr %1 =>:00010
+:00007 [02] %1 = literal[false]
 :00008 [01] @active: - = %1
 :00009 [01] ret %1
+:00010 [02] %1 = nil
 :00011 [01] ret %1
------------------------------------
------------------------------------
<sample> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:645
meta:on_stack:true kind:Ruby mode:method FuncId(646) regs:5 ISeq(RubyFuncInfo { id:646 name:sample method:(FuncId(646), 0) args: 0 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @active: -
 :00002 [03] condnotbr %3 =>:00056
+:00003 [03] %1 = @timer: -
 :00004 [04] %3 = @timer: -
 :00005 [05] %4 = @rate: -
 :00006 [04] %3 = %3 - %4                         [<INVALID>][<INVALID>]
 :00007 [03] @timer: - = %3
 :00008 [04] %3 = @timer: -
 :00009 [04] _%3 = %3 < 0: i16                    [<INVALID>][<INVALID>]
 :00010 [03] condnotbr _%3 =>:00048
+:00011 [04] %3 = const[WAVE_FORM]                [<INVALID>]
 :00012 [05] %4 = @step: -
 :00013 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00014 [03] %1 = %1 * %3                         [<INVALID>][<INVALID>]
+:00015 [03] loop_start counter=0 jit-addr=0000000000000000
 :00016 [03] %2 = @timer: -
 :00017 [03] %2 = -%2                             [<INVALID>]
 :00018 [04] %3 = @freq: -
 :00019 [04] _%3 = %2 > %3                        [<INVALID>][<INVALID>]
 :00020 [03] condnotbr _%3 =>:00022
+:00021 [03] %2 = @freq: -
+:00022 [04] %3 = const[WAVE_FORM]                [<INVALID>]
 :00023 [05] %4 = @step: -
 :00024 [05] %4 = %4 + 1: i16                     [<INVALID>][<INVALID>]
 :00025 [05] %4 = %4 & 31: i16                    [<INVALID>][<INVALID>]
 :00026 [04] @step: - = %4
 :00027 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00028 [04] %3 = %2 * %3                         [<INVALID>][<INVALID>]
 :00029 [03] %1 = %1 + %3                         [<INVALID>][<INVALID>]
 :00030 [04] %3 = @timer: -
 :00031 [05] %4 = @freq: -
 :00032 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00033 [03] @timer: - = %3
 :00034 [04] %3 = @timer: -
 :00035 [04] _%3 = %3 < 0: i16                    [<INVALID>][<INVALID>]
 :00036 [03] condbr _%3 =>:00015
+:00037 [03] loop_end
+:00038 [04] %3 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00039 [04] %3 = %1 * %3                         [<INVALID>][<INVALID>]
 :00040 [05] %4 = @rate: -
 :00041 [05] %4 = %4 / 2: i16                     [<INVALID>][<INVALID>]
 :00042 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00043 [05] %4 = @rate: -
 :00044 [04] %3 = %3 / %4                         [<INVALID>][<INVALID>]
 :00045 [04] %3 = %3 * 3: i16                     [<INVALID>][<INVALID>]
 :00046 [03] @amp: - = %3
 :00047 [03] br =>:00055
+:00048 [04] %3 = const[WAVE_FORM]                [<INVALID>]
 :00049 [05] %4 = @step: -
 :00050 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00051 [05] %4 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00052 [04] %3 = %3 * %4                         [<INVALID>][<INVALID>]
 :00053 [04] %3 = %3 * 3: i16                     [<INVALID>][<INVALID>]
 :00054 [03] @amp: - = %3
+:00055 [03] br =>:00068
+:00056 [04] %3 = @amp: -
 :00057 [05] %4 = const[CHANNEL_OUTPUT_DECAY]     [<INVALID>]
 :00058 [04] _%3 = %3 < %4                        [<INVALID>][<INVALID>]
 :00059 [03] condnotbr _%3 =>:00062
+:00060 [04] %3 = 0: i32
 :00061 [03] ret %3
+:00062 [04] %3 = @amp: -
 :00063 [05] %4 = const[CHANNEL_OUTPUT_DECAY]     [<INVALID>]
 :00064 [04] %3 = %3 - %4                         [<INVALID>][<INVALID>]
 :00065 [03] @amp: - = %3
 :00066 [04] %3 = 0: i32
 :00067 [03] @step: - = %3
+:00068 [04] %3 = @amp: -
 :00069 [03] ret %3
------------------------------------
------------------------------------
<block in Noise> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:675
meta:on_stack:true kind:Ruby mode:method FuncId(647) regs:5 ISeq(RubyFuncInfo { id:647 name:<unnamed> method:(FuncId(602), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[0..32767]
 :00002 [04] %3 = literal[43778049]
 :00003 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:679
meta:on_stack:true kind:Ruby mode:method FuncId(648) regs:4 ISeq(RubyFuncInfo { id:648 name:initialize method:(FuncId(648), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] _ = super(%1;1)                      [<INVALID>]
 :00003 [03] %2 = const[Envelope]                 [<INVALID>]
 :00004 [03] %2 = %2.new()                        [<INVALID>]
 :00006 [02] @envelope: - = %2
 :00007 [03] %2 = const[LengthCounter]            [<INVALID>]
 :00008 [03] %2 = %2.new()                        [<INVALID>]
 :00010 [02] @length_counter: - = %2
 :00011 [02] ret %2
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:685
meta:on_stack:true kind:Ruby mode:method FuncId(649) regs:3 ISeq(RubyFuncInfo { id:649 name:reset method:(FuncId(649), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [01] _ = super()                          [<INVALID>]
 :00003 [02] %1 = const[LUT]                      [<INVALID>]
 :00004 [03] %2 = 0: i32
 :00005 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00006 [03] %2 = @fixed: -
 :00007 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00008 [01] @freq: - = %1
 :00009 [02] %1 = 16384: i32
 :00010 [01] @bits: - = %1
 :00011 [02] %1 = const[NEXT_BITS_1]              [<INVALID>]
 :00012 [01] @shifter: - = %1
 :00013 [01] ret %1
------------------------------------
------------------------------------
<poke_2> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:692
meta:on_stack:true kind:Ruby mode:method FuncId(650) regs:5 ISeq(RubyFuncInfo { id:650 name:poke_2 method:(FuncId(650), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @apu: -
 :00002 [03] _ = %3.update()                      [<INVALID>]
 :00004 [04] %3 = const[LUT]                      [<INVALID>]
 :00005 [05] %4 = %2 & 15: i16                    [<INVALID>][<INVALID>]
 :00006 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00007 [05] %4 = @fixed: -
 :00008 [04] %3 = %3 * %4                         [<INVALID>][<INVALID>]
 :00009 [03] @freq: - = %3
 :00010 [04] %3 = 7: i32
 :00011 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00012 [04] _%3 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00013 [03] condnotbr _%3 =>:00016
+:00014 [04] %3 = const[NEXT_BITS_6]              [<INVALID>]
 :00015 [04] br =>:00017
+:00016 [04] %3 = const[NEXT_BITS_1]              [<INVALID>]
+:00017 [03] @shifter: - = %3
 :00018 [03] ret %3
------------------------------------
------------------------------------
<clock_length_counter> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:698
meta:on_stack:true kind:Ruby mode:method FuncId(651) regs:4 ISeq(RubyFuncInfo { id:651 name:clock_length_counter method:(FuncId(651), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @envelope: -
 :00002 [02] %1 = %2.looping()                    [<INVALID>]
 :00004 [02] %1 = !%1                             [<INVALID>]
 :00005 [01] condnotbr %1 =>:00013
+:00006 [02] %1 = @length_counter: -
 :00007 [02] %1 = %1.clock()                      [<INVALID>]
 :00009 [01] condnotbr %1 =>:00013
+:00010 [02] %1 = literal[false]
 :00011 [01] @active: - = %1
 :00012 [01] ret %1
+:00013 [02] %1 = nil
 :00014 [01] ret %1
------------------------------------
------------------------------------
<sample> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:702
meta:on_stack:true kind:Ruby mode:method FuncId(652) regs:5 ISeq(RubyFuncInfo { id:652 name:sample method:(FuncId(652), 0) args: 0 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @timer: -
 :00002 [05] %4 = @rate: -
 :00003 [04] %3 = %3 - %4                         [<INVALID>][<INVALID>]
 :00004 [03] @timer: - = %3
 :00005 [04] %3 = @active: -
 :00006 [03] condnotbr %3 =>:00066
+:00007 [04] %3 = @timer: -
 :00008 [04] _%3 = %3 >= 0: i16                   [<INVALID>][<INVALID>]
 :00009 [03] condnotbr _%3 =>:00021
+:00010 [04] %3 = @bits: -
 :00011 [04] %3 = %3.even?()                      [<INVALID>]
 :00013 [03] condnotbr %3 =>:00019
+:00014 [04] %3 = @envelope: -
 :00015 [04] %3 = %3.output()                     [<INVALID>]
 :00017 [04] %3 = %3 * 2: i16                     [<INVALID>][<INVALID>]
 :00018 [03] ret %3
+:00019 [04] %3 = 0: i32
 :00020 [03] ret %3
+:00021 [04] %3 = @bits: -
 :00022 [04] %3 = %3.even?()                      [<INVALID>]
 :00024 [03] condnotbr %3 =>:00029
+:00025 [04] %3 = @timer: -
 :00026 [05] %4 = @rate: -
 :00027 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00028 [04] br =>:00030
+:00029 [04] %3 = 0: i32
+:00030 [04] %1 = %3
+:00031 [03] loop_start counter=0 jit-addr=0000000000000000
 :00032 [04] %3 = @shifter: -
 :00033 [05] %4 = @bits: -
 :00034 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00035 [03] @bits: - = %3
 :00036 [04] %3 = @bits: -
 :00037 [04] %3 = %3.even?()                      [<INVALID>]
 :00039 [03] condnotbr %3 =>:00047
+:00040 [03] %2 = @timer: -
 :00041 [03] %2 = -%2                             [<INVALID>]
 :00042 [04] %3 = @freq: -
 :00043 [04] _%3 = %2 > %3                        [<INVALID>][<INVALID>]
 :00044 [03] condnotbr _%3 =>:00046
+:00045 [03] %2 = @freq: -
+:00046 [03] %1 = %1 + %2                         [<INVALID>][<INVALID>]
+:00047 [04] %3 = @timer: -
 :00048 [05] %4 = @freq: -
 :00049 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00050 [03] @timer: - = %3
 :00051 [04] %3 = @timer: -
 :00052 [04] _%3 = %3 < 0: i16                    [<INVALID>][<INVALID>]
 :00053 [03] condbr _%3 =>:00031
+:00054 [03] loop_end
+:00055 [04] %3 = @envelope: -
 :00056 [04] %3 = %3.output()                     [<INVALID>]
 :00058 [04] %3 = %1 * %3                         [<INVALID>][<INVALID>]
 :00059 [05] %4 = @rate: -
 :00060 [05] %4 = %4 / 2: i16                     [<INVALID>][<INVALID>]
 :00061 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00062 [05] %4 = @rate: -
 :00063 [04] %3 = %3 / %4                         [<INVALID>][<INVALID>]
 :00064 [04] %3 = %3 * 2: i16                     [<INVALID>][<INVALID>]
 :00065 [03] ret %3
+:00066 [03] loop_start counter=0 jit-addr=0000000000000000
 :00067 [04] %3 = @timer: -
 :00068 [04] _%3 = %3 < 0: i16                    [<INVALID>][<INVALID>]
 :00069 [03] condnotbr _%3 =>:00079
+:00070 [04] %3 = @shifter: -
 :00071 [05] %4 = @bits: -
 :00072 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00073 [03] @bits: - = %3
 :00074 [04] %3 = @timer: -
 :00075 [05] %4 = @freq: -
 :00076 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00077 [03] @timer: - = %3
 :00078 [03] br =>:00066
+:00079 [03] loop_end
+:00080 [04] %3 = 0: i32
 :00081 [03] ret %3
------------------------------------
------------------------------------
<block in DMC> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:732
meta:on_stack:true kind:Ruby mode:method FuncId(653) regs:3 ISeq(RubyFuncInfo { id:653 name:<unnamed> method:(FuncId(603), 1) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[RP2A03_CC]                [<INVALID>]
 :00002 [03] %2 = %1 * %2                         [<INVALID>][<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:734
meta:on_stack:true kind:Ruby mode:method FuncId(654) regs:5 ISeq(RubyFuncInfo { id:654 name:initialize method:(FuncId(654), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [03] @apu: - = %2
 :00002 [03] @cpu: - = %1
 :00003 [04] %3 = const[LUT]                      [<INVALID>]
 :00004 [05] %4 = 0: i32
 :00005 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00006 [03] @freq: - = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:740
meta:on_stack:true kind:Ruby mode:method FuncId(655) regs:3 ISeq(RubyFuncInfo { id:655 name:reset method:(FuncId(655), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = 0: i32
 :00002 [01] @cur_sample: - = %1
 :00003 [02] %1 = 0: i32
 :00004 [01] @lin_sample: - = %1
 :00005 [02] %1 = const[LUT]                      [<INVALID>]
 :00006 [03] %2 = 0: i32
 :00007 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00008 [01] @freq: - = %1
 :00009 [02] %1 = literal[false]
 :00010 [01] @loop: - = %1
 :00011 [02] %1 = literal[false]
 :00012 [01] @irq_enable: - = %1
 :00013 [02] %1 = 1: i32
 :00014 [01] @regs_length_counter: - = %1
 :00015 [02] %1 = 49152: i32
 :00016 [01] @regs_address: - = %1
 :00017 [02] %1 = literal[false]
 :00018 [01] @out_active: - = %1
 :00019 [02] %1 = 0: i32
 :00020 [01] @out_shifter: - = %1
 :00021 [02] %1 = 0: i32
 :00022 [01] @out_dac: - = %1
 :00023 [02] %1 = 0: i32
 :00024 [01] @out_buffer: - = %1
 :00025 [02] %1 = 0: i32
 :00026 [01] @dma_length_counter: - = %1
 :00027 [02] %1 = literal[false]
 :00028 [01] @dma_buffered: - = %1
 :00029 [02] %1 = 49152: i32
 :00030 [01] @dma_address: - = %1
 :00031 [02] %1 = 0: i32
 :00032 [01] @dma_buffer: - = %1
 :00033 [01] ret %1
------------------------------------
------------------------------------
<enable> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:760
meta:on_stack:true kind:Ruby mode:method FuncId(656) regs:4 ISeq(RubyFuncInfo { id:656 name:enable method:(FuncId(656), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @cpu: -
 :00002 [04] %3 = const[CPU::IRQ_DMC]             [<INVALID>]
 :00003 [02] _ = %2.clear_irq(%3;1)               [<INVALID>]
 :00005 [03] %2 = !%1                             [<INVALID>]
 :00006 [02] condnotbr %2 =>:00010
+:00007 [03] %2 = 0: i32
 :00008 [02] @dma_length_counter: - = %2
 :00009 [02] ret %2
+:00010 [03] %2 = @dma_length_counter: -
 :00011 [03] _%2 = %2 == 0: i16                   [<INVALID>][<INVALID>]
 :00012 [02] condnotbr _%2 =>:00024
+:00013 [03] %2 = @regs_length_counter: -
 :00014 [02] @dma_length_counter: - = %2
 :00015 [03] %2 = @regs_address: -
 :00016 [02] @dma_address: - = %2
 :00017 [03] %2 = @dma_buffered: -
 :00018 [02] condnotbr %2 =>:00021
+:00019 [03] %2 = nil
 :00020 [02] ret %2
+:00021 [03] %2 = %0.do_dma()                     [<INVALID>]
 :00023 [02] ret %2
+:00024 [03] %2 = nil
 :00025 [02] ret %2
------------------------------------
------------------------------------
<sample> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:771
meta:on_stack:true kind:Ruby mode:method FuncId(657) regs:4 ISeq(RubyFuncInfo { id:657 name:sample method:(FuncId(657), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @cur_sample: -
 :00002 [04] %3 = @lin_sample: -
 :00003 [03] _%2 = %2 != %3                       [<INVALID>][<INVALID>]
 :00004 [02] condnotbr _%2 =>:00027
+:00005 [03] %2 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00006 [02] %1 = %2 * 8: i16                     [<INVALID>][<INVALID>]
 :00007 [03] %2 = @lin_sample: -
 :00008 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00009 [04] %3 = @cur_sample: -
 :00010 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00011 [02] condnotbr _%2 =>:00016
+:00012 [03] %2 = @lin_sample: -
 :00013 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00014 [02] @lin_sample: - = %2
 :00015 [02] br =>:00027
+:00016 [03] %2 = @cur_sample: -
 :00017 [04] %3 = @lin_sample: -
 :00018 [04] %3 = %3 - %1                         [<INVALID>][<INVALID>]
 :00019 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00020 [02] condnotbr _%2 =>:00025
+:00021 [03] %2 = @lin_sample: -
 :00022 [03] %2 = %2 - %1                         [<INVALID>][<INVALID>]
 :00023 [02] @lin_sample: - = %2
 :00024 [02] br =>:00027
+:00025 [03] %2 = @cur_sample: -
 :00026 [02] @lin_sample: - = %2
+:00027 [03] %2 = @lin_sample: -
 :00028 [02] ret %2
------------------------------------
------------------------------------
<do_dma> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:785
meta:on_stack:true kind:Ruby mode:method FuncId(658) regs:5 ISeq(RubyFuncInfo { id:658 name:do_dma method:(FuncId(658), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @cpu: -
 :00002 [03] %2 = @dma_address: -
 :00003 [02] %1 = %1.dmc_dma(%2;1)                [<INVALID>]
 :00005 [01] @dma_buffer: - = %1
 :00006 [02] %1 = 32768: i32
 :00007 [03] %2 = @dma_address: -
 :00008 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [03] %2 = %2 & 32767: i16                 [<INVALID>][<INVALID>]
 :00010 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00011 [01] @dma_address: - = %1
 :00012 [02] %1 = literal[true]
 :00013 [01] @dma_buffered: - = %1
 :00014 [02] %1 = @dma_length_counter: -
 :00015 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00016 [01] @dma_length_counter: - = %1
 :00017 [02] %1 = @dma_length_counter: -
 :00018 [02] _%1 = %1 == 0: i16                   [<INVALID>][<INVALID>]
 :00019 [01] condnotbr _%1 =>:00039
+:00020 [02] %1 = @loop: -
 :00021 [01] condnotbr %1 =>:00027
+:00022 [02] %1 = @regs_address: -
 :00023 [01] @dma_address: - = %1
 :00024 [02] %1 = @regs_length_counter: -
 :00025 [01] @dma_length_counter: - = %1
 :00026 [01] ret %1
+:00027 [02] %1 = @irq_enable: -
 :00028 [01] condnotbr %1 =>:00037
+:00029 [02] %1 = @cpu: -
 :00030 [03] %2 = const[CPU::IRQ_DMC]             [<INVALID>]
 :00031 [04] %3 = @cpu: -
 :00032 [04] %3 = %3.current_clock()              [<INVALID>]
 :00034 [02] %1 = %1.do_irq(%2;2)                 [<INVALID>]
 :00036 [01] ret %1
+:00037 [02] %1 = nil
 :00038 [01] ret %1
+:00039 [02] %1 = nil
 :00040 [01] ret %1
------------------------------------
------------------------------------
<update> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:800
meta:on_stack:true kind:Ruby mode:method FuncId(659) regs:3 ISeq(RubyFuncInfo { id:659 name:update method:(FuncId(659), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @out_dac: -
 :00002 [03] %2 = const[CHANNEL_OUTPUT_MUL]       [<INVALID>]
 :00003 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00004 [01] @cur_sample: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<poke_0> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:804
meta:on_stack:true kind:Ruby mode:method FuncId(660) regs:5 ISeq(RubyFuncInfo { id:660 name:poke_0 method:(FuncId(660), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = 6: i32
 :00002 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00003 [04] %3 = %3 != 0: i16                    [<INVALID>][<INVALID>]
 :00004 [03] @loop: - = %3
 :00005 [04] %3 = 7: i32
 :00006 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00007 [04] %3 = %3 != 0: i16                    [<INVALID>][<INVALID>]
 :00008 [03] @irq_enable: - = %3
 :00009 [04] %3 = const[LUT]                      [<INVALID>]
 :00010 [05] %4 = %2 & 15: i16                    [<INVALID>][<INVALID>]
 :00011 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00012 [03] @freq: - = %3
 :00013 [04] %3 = @irq_enable: -
 :00014 [03] condnotbr %3 =>:00017
+:00015 [04] %3 = nil
 :00016 [03] ret %3
+:00017 [04] %3 = @cpu: -
 :00018 [05] %4 = const[CPU::IRQ_DMC]             [<INVALID>]
 :00019 [04] %3 = %3.clear_irq(%4;1)              [<INVALID>]
 :00021 [03] ret %3
------------------------------------
------------------------------------
<poke_1> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:811
meta:on_stack:true kind:Ruby mode:method FuncId(661) regs:5 ISeq(RubyFuncInfo { id:661 name:poke_1 method:(FuncId(661), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @apu: -
 :00002 [03] _ = %3.update()                      [<INVALID>]
 :00004 [04] %3 = %2 & 127: i16                   [<INVALID>][<INVALID>]
 :00005 [03] @out_dac: - = %3
 :00006 [04] %3 = %0.update()                     [<INVALID>]
 :00008 [03] ret %3
------------------------------------
------------------------------------
<poke_2> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:817
meta:on_stack:true kind:Ruby mode:method FuncId(662) regs:5 ISeq(RubyFuncInfo { id:662 name:poke_2 method:(FuncId(662), 0) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = 49152: i32
 :00002 [05] %4 = 6: i32
 :00003 [05] %4 = %2.<<(%4;1)                     [<INVALID>]
 :00005 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00006 [03] @regs_address: - = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
<poke_3> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:821
meta:on_stack:true kind:Ruby mode:method FuncId(663) regs:4 ISeq(RubyFuncInfo { id:663 name:poke_3 method:(FuncId(663), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [04] %3 = 4: i32
 :00002 [04] %3 = %2.<<(%3;1)                     [<INVALID>]
 :00004 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00005 [03] @regs_length_counter: - = %3
 :00006 [03] ret %3
------------------------------------
------------------------------------
<clock_dac> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:825
meta:on_stack:true kind:Ruby mode:method FuncId(664) regs:5 ISeq(RubyFuncInfo { id:664 name:clock_dac method:(FuncId(664), 0) args: 0 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @out_active: -
 :00002 [02] condnotbr %2 =>:00027
+:00003 [03] %2 = @out_dac: -
 :00004 [04] %3 = @out_buffer: -
 :00005 [04] %3 = %3 & 1: i16                     [<INVALID>][<INVALID>]
 :00006 [05] %4 = 2: i32
 :00007 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00009 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00010 [02] %1 = %2 - 2: i16                     [<INVALID>][<INVALID>]
 :00011 [03] %2 = @out_buffer: -
 :00012 [04] %3 = 1: i32
 :00013 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00015 [02] @out_buffer: - = %2
 :00016 [03] %2 = 0: i32
 :00017 [03] _%2 = %2 <= %1                       [<INVALID>][<INVALID>]
 :00018 [02] condnotbr _%2 =>:00027
+:00019 [03] _%2 = %1 <= 127: i16                 [<INVALID>][<INVALID>]
 :00020 [02] condnotbr _%2 =>:00027
+:00021 [03] %2 = @out_dac: -
 :00022 [03] _%2 = %1 != %2                       [<INVALID>][<INVALID>]
 :00023 [02] condnotbr _%2 =>:00027
+:00024 [02] @out_dac: - = %1
 :00025 [03] %2 = literal[true]
 :00026 [02] ret %2
+:00027 [03] %2 = literal[false]
 :00028 [02] ret %2
------------------------------------
------------------------------------
<clock_dma> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:837
meta:on_stack:true kind:Ruby mode:method FuncId(665) regs:2 ISeq(RubyFuncInfo { id:665 name:clock_dma method:(FuncId(665), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @out_shifter: -
 :00002 [02] _%1 = %1 == 0: i16                   [<INVALID>][<INVALID>]
 :00003 [01] condnotbr _%1 =>:00024
+:00004 [02] %1 = 7: i32
 :00005 [01] @out_shifter: - = %1
 :00006 [02] %1 = @dma_buffered: -
 :00007 [01] @out_active: - = %1
 :00008 [02] %1 = @out_active: -
 :00009 [01] condnotbr %1 =>:00022
+:00010 [02] %1 = literal[false]
 :00011 [01] @dma_buffered: - = %1
 :00012 [02] %1 = @dma_buffer: -
 :00013 [01] @out_buffer: - = %1
 :00014 [02] %1 = @dma_length_counter: -
 :00015 [02] _%1 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00016 [01] condnotbr _%1 =>:00020
+:00017 [02] %1 = %0.do_dma()                     [<INVALID>]
 :00019 [01] ret %1
+:00020 [02] %1 = nil
 :00021 [01] ret %1
+:00022 [02] %1 = nil
 :00023 [01] ret %1
+:00024 [02] %1 = @out_shifter: -
 :00025 [02] %1 = %1 - 1: i16                     [<INVALID>][<INVALID>]
 :00026 [01] @out_shifter: - = %1
 :00027 [01] ret %1
------------------------------------
------------------------------------
<status> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:851
meta:on_stack:true kind:Ruby mode:method FuncId(666) regs:2 ISeq(RubyFuncInfo { id:666 name:status method:(FuncId(666), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @dma_length_counter: -
 :00002 [02] %1 = %1 > 0: i16                     [<INVALID>][<INVALID>]
 :00003 [01] ret %1
------------------------------------
------------------------------------
<block in Pulse> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:476
meta:on_stack:true kind:Ruby mode:method FuncId(667) regs:3 ISeq(RubyFuncInfo { id:667 name:<unnamed> method:(FuncId(600), 2) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = dynvar(1, %1)
 :00002 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00003 [03] %2 = %2 * 31: i16                    [<INVALID>][<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<block in Noise> /home/monochrome/optcarrot/lib/optcarrot/apu.rb:676
meta:on_stack:true kind:Ruby mode:method FuncId(668) regs:4 ISeq(RubyFuncInfo { id:668 name:<unnamed> method:(FuncId(602), 2) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 0: i32
 :00002 [03] %2 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00003 [04] %3 = dynvar(1, %1)
 :00004 [04] %3 = %1.[%3]                         [<INVALID>][<INVALID>]
 :00005 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00006 [02] condnotbr _%2 =>:00009
+:00007 [03] %2 = %1 / 2: i16                     [<INVALID>][<INVALID>]
 :00008 [02] ret %2
+:00009 [03] %2 = %1 / 2: i16                     [<INVALID>][<INVALID>]
 :00010 [03] %2 = %2 + 16384: i16                 [<INVALID>][<INVALID>]
 :00011 [02] ret %2
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(674) regs:2 ISeq(RubyFuncInfo { id:674 name:/main method:(FuncId(674), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal["opt"]
 :00002 [01] _ = %0.require_relative(%1;1)        [<INVALID>]
 :00004 [02] %1 = module_def Optcarrot: FuncId(675)
 :00005 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(675) regs:2 ISeq(RubyFuncInfo { id:675 name:Optcarrot method:(FuncId(675), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = class_def PPU < _: FuncId(676)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<PPU> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:5
meta:on_stack:true kind:Ruby mode:class_def FuncId(676) regs:12 ISeq(RubyFuncInfo { id:676 name:PPU method:(FuncId(676), 0) args: 0 non_temp: 0 temp: 11})
[]
+:00000 [01] init_method reg:11 arg:0 req:0 opt:0 rest:false block:None stack_offset:9
 :00001 [02] %1 = 4: i32
 :00002 [01] const[RP2C02_CC] = %1
 :00003 [02] %1 = const[RP2C02_CC]                [<INVALID>]
 :00004 [02] %1 = %1 * 256: i16                   [<INVALID>][<INVALID>]
 :00005 [01] const[RP2C02_HACTIVE] = %1
 :00006 [02] %1 = const[RP2C02_CC]                [<INVALID>]
 :00007 [02] %1 = %1 * 85: i16                    [<INVALID>][<INVALID>]
 :00008 [01] const[RP2C02_HBLANK] = %1
 :00009 [02] %1 = const[RP2C02_HACTIVE]           [<INVALID>]
 :00010 [03] %2 = const[RP2C02_HBLANK]            [<INVALID>]
 :00011 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00012 [01] const[RP2C02_HSYNC] = %1
 :00013 [02] %1 = 240: i32
 :00014 [01] const[RP2C02_VACTIVE] = %1
 :00015 [02] %1 = 1: i32
 :00016 [01] const[RP2C02_VSLEEP] = %1
 :00017 [02] %1 = 20: i32
 :00018 [01] const[RP2C02_VINT] = %1
 :00019 [02] %1 = 1: i32
 :00020 [01] const[RP2C02_VDUMMY] = %1
 :00021 [02] %1 = const[RP2C02_VSLEEP]            [<INVALID>]
 :00022 [03] %2 = const[RP2C02_VINT]              [<INVALID>]
 :00023 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00024 [03] %2 = const[RP2C02_VDUMMY]            [<INVALID>]
 :00025 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00026 [01] const[RP2C02_VBLANK] = %1
 :00027 [02] %1 = const[RP2C02_VACTIVE]           [<INVALID>]
 :00028 [03] %2 = const[RP2C02_VBLANK]            [<INVALID>]
 :00029 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00030 [01] const[RP2C02_VSYNC] = %1
 :00031 [02] %1 = const[RP2C02_VACTIVE]           [<INVALID>]
 :00032 [03] %2 = const[RP2C02_HSYNC]             [<INVALID>]
 :00033 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00034 [03] %2 = const[RP2C02_CC]                [<INVALID>]
 :00035 [03] %2 = %2 * 312: i16                   [<INVALID>][<INVALID>]
 :00036 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00037 [01] const[RP2C02_HVSYNCBOOT] = %1
 :00038 [02] %1 = const[RP2C02_VINT]              [<INVALID>]
 :00039 [03] %2 = const[RP2C02_HSYNC]             [<INVALID>]
 :00040 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00041 [01] const[RP2C02_HVINT] = %1
 :00042 [02] %1 = const[RP2C02_VSYNC]             [<INVALID>]
 :00043 [03] %2 = const[RP2C02_HSYNC]             [<INVALID>]
 :00044 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00045 [01] const[RP2C02_HVSYNC_0] = %1
 :00046 [02] %1 = const[RP2C02_VSYNC]             [<INVALID>]
 :00047 [03] %2 = const[RP2C02_HSYNC]             [<INVALID>]
 :00048 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00049 [03] %2 = const[RP2C02_CC]                [<INVALID>]
 :00050 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00051 [01] const[RP2C02_HVSYNC_1] = %1
 :00052 [02] %1 = -1: i32
 :00053 [01] const[SCANLINE_HDUMMY] = %1
 :00054 [02] %1 = 240: i32
 :00055 [01] const[SCANLINE_VBLANK] = %1
 :00056 [02] %1 = 341: i32
 :00057 [01] const[HCLOCK_DUMMY] = %1
 :00058 [02] %1 = 681: i32
 :00059 [01] const[HCLOCK_VBLANK_0] = %1
 :00060 [02] %1 = 682: i32
 :00061 [01] const[HCLOCK_VBLANK_1] = %1
 :00062 [02] %1 = 684: i32
 :00063 [01] const[HCLOCK_VBLANK_2] = %1
 :00064 [02] %1 = 685: i32
 :00065 [01] const[HCLOCK_BOOT] = %1
 :00066 [03] %2 = const[RP2C02_HVINT]             [<INVALID>]
 :00067 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00068 [03] %2 = %2 / %3                         [<INVALID>][<INVALID>]
 :00069 [04] %3 = const[HCLOCK_DUMMY]             [<INVALID>]
 :00070 [03] %2 = %2 - %3                         [<INVALID>][<INVALID>]
 :00071 [04] %3 = const[RP2C02_HVINT]             [<INVALID>]
 :00072 [05] %4 = const[RP2C02_HVSYNC_0]          [<INVALID>]
 :00073 [02] %1 = array[%2; 3]
 :00074 [01] const[DUMMY_FRAME] = %1
 :00075 [03] %2 = const[RP2C02_HVSYNCBOOT]        [<INVALID>]
 :00076 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00077 [03] %2 = %2 / %3                         [<INVALID>][<INVALID>]
 :00078 [04] %3 = const[HCLOCK_BOOT]              [<INVALID>]
 :00079 [03] %2 = %2 - %3                         [<INVALID>][<INVALID>]
 :00080 [04] %3 = const[RP2C02_HVSYNCBOOT]        [<INVALID>]
 :00081 [05] %4 = const[RP2C02_HVSYNCBOOT]        [<INVALID>]
 :00082 [02] %1 = array[%2; 3]
 :00083 [01] const[BOOT_FRAME] = %1
 :00084 [03] %2 = 0: i32
 :00085 [04] %3 = literal[[3, 7, 2, 6, 1, 5, 0, 4]]
 :00086 [05] %4 = 1: i32
 :00087 [06] %5 = literal[[4, 0, 5, 1, 6, 2, 7, 3]]
 :00088 [02] %1 = hash[%2; 2]
 :00089 [01] const[SP_PIXEL_POSITIONS] = %1
 :00090 [02] %1 = literal[[0, 4, 8, 12]]
 :00091 [03] %2 = literal[44367873]
 :00092 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00094 [01] const[TILE_LUT] = %1
 :00095 [01] method_def inspect: FuncId(678)
 :00096 [01] method_def initialize: FuncId(679)
 :00097 [01] method_def reset: FuncId(680)
 :00098 [01] method_def update_output_color: FuncId(681)
 :00099 [01] method_def setup_lut: FuncId(682)
 :00100 [02] %1 = :output_pixels
 :00101 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00103 [01] method_def set_chr_mem: FuncId(683)
 :00104 [03] %2 = :horizontal
 :00105 [04] %3 = literal[[0, 0, 1, 1]]
 :00106 [05] %4 = :vertical
 :00107 [06] %5 = literal[[0, 1, 0, 1]]
 :00108 [07] %6 = :four_screen
 :00109 [08] %7 = literal[[0, 1, 2, 3]]
 :00110 [09] %8 = :first
 :00111 [10] %9 = literal[[0, 0, 0, 0]]
 :00112 [11] %10 = :second
 :00113 [12] %11 = literal[[1, 1, 1, 1]]
 :00114 [02] %1 = hash[%2; 5]
 :00115 [01] const[NMT_TABLE] = %1
 :00116 [01] method_def nametables=: FuncId(684)
 :00117 [01] method_def update: FuncId(685)
 :00118 [01] method_def setup_frame: FuncId(686)
 :00119 [01] method_def vsync: FuncId(687)
 :00120 [01] method_def monitor_a12_rising_edge: FuncId(688)
 :00121 [01] method_def update_vram_addr: FuncId(689)
 :00122 [01] method_def update_scroll_address_line: FuncId(690)
 :00123 [01] method_def active?: FuncId(691)
 :00124 [01] method_def sync: FuncId(692)
 :00125 [01] method_def make_sure_invariants: FuncId(693)
 :00126 [01] method_def io_latch_mask: FuncId(694)
 :00127 [01] method_def poke_2000: FuncId(695)
 :00128 [01] method_def poke_2001: FuncId(696)
 :00129 [01] method_def peek_2002: FuncId(697)
 :00130 [01] method_def poke_2003: FuncId(698)
 :00131 [01] method_def poke_2004: FuncId(699)
 :00132 [01] method_def peek_2004: FuncId(700)
 :00133 [01] method_def poke_2005: FuncId(701)
 :00134 [01] method_def poke_2006: FuncId(702)
 :00135 [01] method_def poke_2007: FuncId(703)
 :00136 [01] method_def peek_2007: FuncId(704)
 :00137 [01] method_def poke_2xxx: FuncId(705)
 :00138 [01] method_def peek_2xxx: FuncId(706)
 :00139 [01] method_def peek_3000: FuncId(707)
 :00140 [01] method_def poke_4014: FuncId(708)
 :00141 [01] method_def peek_4014: FuncId(709)
 :00142 [01] method_def open_pattern: FuncId(710)
 :00143 [01] method_def open_sprite: FuncId(711)
 :00144 [01] method_def load_sprite: FuncId(712)
 :00145 [01] method_def update_address_line: FuncId(713)
 :00146 [01] method_def open_name: FuncId(714)
 :00147 [01] method_def fetch_name: FuncId(715)
 :00148 [01] method_def open_attr: FuncId(716)
 :00149 [01] method_def fetch_attr: FuncId(717)
 :00150 [01] method_def fetch_bg_pattern_0: FuncId(718)
 :00151 [01] method_def fetch_bg_pattern_1: FuncId(719)
 :00152 [01] method_def scroll_clock_x: FuncId(720)
 :00153 [01] method_def scroll_reset_x: FuncId(721)
 :00154 [01] method_def scroll_clock_y: FuncId(722)
 :00155 [01] method_def preload_tiles: FuncId(723)
 :00156 [01] method_def load_tiles: FuncId(724)
 :00157 [01] method_def evaluate_sprites_even: FuncId(725)
 :00158 [01] method_def evaluate_sprites_odd: FuncId(726)
 :00159 [01] method_def evaluate_sprites_odd_phase_1: FuncId(727)
 :00160 [01] method_def evaluate_sprites_odd_phase_2: FuncId(728)
 :00161 [01] method_def evaluate_sprites_odd_phase_3: FuncId(729)
 :00162 [01] method_def evaluate_sprites_odd_phase_4: FuncId(730)
 :00163 [01] method_def evaluate_sprites_odd_phase_5: FuncId(731)
 :00164 [01] method_def evaluate_sprites_odd_phase_6: FuncId(732)
 :00165 [01] method_def evaluate_sprites_odd_phase_7: FuncId(733)
 :00166 [01] method_def evaluate_sprites_odd_phase_8: FuncId(734)
 :00167 [01] method_def evaluate_sprites_odd_phase_9: FuncId(735)
 :00168 [01] method_def load_extended_sprites: FuncId(736)
 :00169 [01] method_def render_pixel: FuncId(737)
 :00170 [01] method_def batch_render_eight_pixels: FuncId(738)
 :00171 [01] method_def boot: FuncId(739)
 :00172 [01] method_def vblank_0: FuncId(740)
 :00173 [01] method_def vblank_1: FuncId(741)
 :00174 [01] method_def vblank_2: FuncId(742)
 :00175 [01] method_def update_enabled_flags: FuncId(743)
 :00176 [01] method_def update_enabled_flags_edge: FuncId(744)
 :00177 [01] method_def debug_logging: FuncId(745)
 :00178 [01] method_def run: FuncId(746)
 :00179 [01] method_def dispose: FuncId(747)
 :00180 [01] method_def wait_frame: FuncId(748)
 :00181 [01] method_def wait_zero_clocks: FuncId(749)
 :00182 [01] method_def wait_one_clock: FuncId(750)
 :00183 [01] method_def wait_two_clocks: FuncId(751)
 :00184 [01] method_def main_loop: FuncId(752)
 :00185 [02] %1 = class_def OptimizedCodeBuilder < _: FuncId(753)
 :00186 [01] ret %1
------------------------------------
------------------------------------
<block in PPU> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:43
meta:on_stack:true kind:Ruby mode:method FuncId(677) regs:5 ISeq(RubyFuncInfo { id:677 name:<unnamed> method:(FuncId(676), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[0..7]
 :00002 [04] %3 = literal[49414145]
 :00003 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00005 [03] %2 = %2.transpose()                  [<INVALID>]
 :00007 [02] ret %2
------------------------------------
------------------------------------
<inspect> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:54
meta:on_stack:true kind:Ruby mode:method FuncId(678) regs:4 ISeq(RubyFuncInfo { id:678 name:inspect method:(FuncId(678), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["#<"]
 :00002 [03] %2 = %0.class()                      [<INVALID>]
 :00004 [04] %3 = literal[">"]
 :00005 [02] %1 = concat(%1; 3)
 :00006 [01] ret %1
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:61
meta:on_stack:true kind:Ruby mode:method FuncId(679) regs:8 ISeq(RubyFuncInfo { id:679 name:initialize method:(FuncId(679), 0) args: 3 non_temp: 3 temp: 4})
[]
+:00000 [04] init_method reg:7 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [04] @conf: - = %1
 :00002 [04] @cpu: - = %2
 :00003 [04] @palette: - = %3
 :00004 [05] %4 = @conf: -
 :00005 [05] %4 = %4.load_ppu()                   [<INVALID>]
 :00007 [04] condnotbr %4 =>:00017
+:00008 [05] %4 = const[File]                     [<INVALID>]
 :00009 [06] %5 = @conf: -
 :00010 [06] %5 = %5.load_ppu()                   [<INVALID>]
 :00012 [05] %4 = %4.read(%5;1)                   [<INVALID>]
 :00014 [04] _ = %0.eval(%4;1)                    [<INVALID>]
 :00016 [04] br =>:00036
+:00017 [05] %4 = @conf: -
 :00018 [05] %4 = %4.opt_ppu()                    [<INVALID>]
 :00020 [04] condnotbr %4 =>:00036
+:00021 [05] %4 = const[OptimizedCodeBuilder]     [<INVALID>]
 :00022 [06] %5 = @conf: -
 :00023 [06] %5 = %5.loglevel()                   [<INVALID>]
 :00025 [07] %6 = @conf: -
 :00026 [07] %6 = %6.opt_ppu()                    [<INVALID>]
 :00028 [05] %4 = %4.new(%5;2)                    [<INVALID>]
 :00030 [05] %4 = %4.build()                      [<INVALID>]
 :00032 [06] %5 = nil
 :00033 [07] %6 = literal["(generated PPU core)"]
 :00034 [04] _ = %0.eval(%4;3)                    [<INVALID>]
+:00036 [06] %5 = literal[[255]]
 :00037 [06] %5 = %5 * 1024: i16                  [<INVALID>][<INVALID>]
 :00038 [07] %6 = literal[[255]]
 :00039 [07] %6 = %6 * 1024: i16                  [<INVALID>][<INVALID>]
 :00040 [05] %4 = array[%5; 2]
 :00041 [04] @nmt_mem: - = %4
 :00042 [05] %4 = literal[[0, 1, 0, 1]]
 :00043 [06] %5 = literal[49479681]
 :00044 [05] %4 = %4.map( &%5)                    [<INVALID>]
 :00046 [04] @nmt_ref: - = %4
 :00047 [05] %4 = literal[[]]
 :00048 [04] @output_pixels: - = %4
 :00049 [06] %5 = @palette: -
 :00050 [07] %6 = 0: i32
 :00051 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00052 [05] %4 = array[%5; 1]
 :00053 [05] %4 = %4 * 32: i16                    [<INVALID>][<INVALID>]
 :00054 [04] @output_color: - = %4
 :00055 [05] %4 = literal[false]
 :00056 [04] _ = %0.reset( kw:%4;1)               [<INVALID>]
 :00058 [05] %4 = %0.setup_lut()                  [<INVALID>]
 :00060 [04] ret %4
------------------------------------
------------------------------------
<reset> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:82
meta:on_stack:true kind:Ruby mode:method FuncId(680) regs:6 ISeq(RubyFuncInfo { id:680 name:reset method:(FuncId(680), 0) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:0 opt:1 rest:false block:None stack_offset:6
 :00001 [02] check_local(%1) =>:00003
+:00002 [02] %1 = literal[{}]
+:00003 [03] %2 = :mapping
 :00004 [04] %3 = literal[true]
 :00005 [03] %2 = %1.fetch(%2;2)                  [<INVALID>]
 :00007 [02] condnotbr %2 =>:00140
+:00008 [03] %2 = @cpu: -
 :00009 [04] %3 = 8192: i32
 :00010 [05] %4 = 16383: i32
 :00011 [06] %5 = 8: i32
 :00012 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00014 [05] %4 = :peek_2xxx
 :00015 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00017 [06] %5 = :poke_2000
 :00018 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00020 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00022 [03] %2 = @cpu: -
 :00023 [04] %3 = 8193: i32
 :00024 [05] %4 = 16383: i32
 :00025 [06] %5 = 8: i32
 :00026 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00028 [05] %4 = :peek_2xxx
 :00029 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00031 [06] %5 = :poke_2001
 :00032 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00034 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00036 [03] %2 = @cpu: -
 :00037 [04] %3 = 8194: i32
 :00038 [05] %4 = 16383: i32
 :00039 [06] %5 = 8: i32
 :00040 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00042 [05] %4 = :peek_2002
 :00043 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00045 [06] %5 = :poke_2xxx
 :00046 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00048 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00050 [03] %2 = @cpu: -
 :00051 [04] %3 = 8195: i32
 :00052 [05] %4 = 16383: i32
 :00053 [06] %5 = 8: i32
 :00054 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00056 [05] %4 = :peek_2xxx
 :00057 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00059 [06] %5 = :poke_2003
 :00060 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00062 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00064 [03] %2 = @cpu: -
 :00065 [04] %3 = 8196: i32
 :00066 [05] %4 = 16383: i32
 :00067 [06] %5 = 8: i32
 :00068 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00070 [05] %4 = :peek_2004
 :00071 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00073 [06] %5 = :poke_2004
 :00074 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00076 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00078 [03] %2 = @cpu: -
 :00079 [04] %3 = 8197: i32
 :00080 [05] %4 = 16383: i32
 :00081 [06] %5 = 8: i32
 :00082 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00084 [05] %4 = :peek_2xxx
 :00085 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00087 [06] %5 = :poke_2005
 :00088 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00090 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00092 [03] %2 = @cpu: -
 :00093 [04] %3 = 8198: i32
 :00094 [05] %4 = 16383: i32
 :00095 [06] %5 = 8: i32
 :00096 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00098 [05] %4 = :peek_2xxx
 :00099 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00101 [06] %5 = :poke_2006
 :00102 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00104 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00106 [03] %2 = @cpu: -
 :00107 [04] %3 = 8199: i32
 :00108 [05] %4 = 16383: i32
 :00109 [06] %5 = 8: i32
 :00110 [04] %3 = %3.step(%4;2)                   [<INVALID>]
 :00112 [05] %4 = :peek_2007
 :00113 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00115 [06] %5 = :poke_2007
 :00116 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00118 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00120 [03] %2 = @cpu: -
 :00121 [04] %3 = 12288: i32
 :00122 [05] %4 = :peek_3000
 :00123 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00125 [06] %5 = :poke_2000
 :00126 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00128 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
 :00130 [03] %2 = @cpu: -
 :00131 [04] %3 = 16404: i32
 :00132 [05] %4 = :peek_4014
 :00133 [05] %4 = %0.method(%4;1)                 [<INVALID>]
 :00135 [06] %5 = :poke_4014
 :00136 [06] %5 = %0.method(%5;1)                 [<INVALID>]
 :00138 [02] _ = %2.add_mappings(%3;3)            [<INVALID>]
+:00140 [03] %2 = literal[[63, 1, 0, 1, 0, 2, 2, 13, 8, 16, 8, 36, 0, 0, 4, 44, 9, 1, 52, 3, 0, 4, 0, 20, 8, 58, 0, 2, 0, 32, 44, 8]]
 :00141 [02] @palette_ram: - = %2
 :00142 [03] %2 = 63: i32
 :00143 [02] @coloring: - = %2
 :00144 [03] %2 = 0: i32
 :00145 [02] @emphasis: - = %2
 :00146 [02] _ = %0.update_output_color()         [<INVALID>]
 :00148 [03] %2 = literal[true]
 :00149 [02] @run: - = %2
 :00150 [03] %2 = const[HCLOCK_BOOT]              [<INVALID>]
 :00151 [02] @hclk: - = %2
 :00152 [03] %2 = 0: i32
 :00153 [02] @vclk: - = %2
 :00154 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00155 [02] @hclk_target: - = %2
 :00156 [03] %2 = 0: i32
 :00157 [02] @io_latch: - = %2
 :00158 [03] %2 = 232: i32
 :00159 [02] @io_buffer: - = %2
 :00160 [03] %2 = 0: i32
 :00161 [02] @regs_oam: - = %2
 :00162 [03] %2 = 1: i32
 :00163 [02] @vram_addr_inc: - = %2
 :00164 [03] %2 = literal[false]
 :00165 [02] @need_nmi: - = %2
 :00166 [03] %2 = 4080: i32
 :00167 [02] @pattern_end: - = %2
 :00168 [03] %2 = literal[false]
 :00169 [02] @any_show: - = %2
 :00170 [03] %2 = literal[false]
 :00171 [02] @sp_overflow: - = %2
 :00172 [03] %2 = literal[false]
 :00173 [02] @sp_zero_hit: - = %2
 :00174 [03] %2 = literal[false]
 :00175 [02] @vblank: - = %2
 :00176 [02] @vblanking: - = %2
 :00177 [03] %2 = 0: i32
 :00178 [02] @io_addr: - = %2
 :00179 [03] %2 = 0: i32
 :00180 [02] @io_pattern: - = %2
 :00181 [03] %2 = nil
 :00182 [02] @a12_monitor: - = %2
 :00183 [03] %2 = nil
 :00184 [02] @a12_state: - = %2
 :00185 [03] %2 = literal[false]
 :00186 [02] @odd_frame: - = %2
 :00187 [03] %2 = const[SCANLINE_VBLANK]          [<INVALID>]
 :00188 [02] @scanline: - = %2
 :00189 [03] %2 = literal[false]
 :00190 [02] @scroll_toggle: - = %2
 :00191 [03] %2 = 0: i32
 :00192 [02] @scroll_latch: - = %2
 :00193 [03] %2 = 0: i32
 :00194 [02] @scroll_xfine: - = %2
 :00195 [03] %2 = 0: i32
 :00196 [02] @scroll_addr_5_14: - = %2
 :00197 [02] @scroll_addr_0_4: - = %2
 :00198 [03] %2 = 8192: i32
 :00199 [02] @name_io_addr: - = %2
 :00200 [03] %2 = literal[false]
 :00201 [02] @bg_enabled: - = %2
 :00202 [03] %2 = literal[false]
 :00203 [02] @bg_show: - = %2
 :00204 [03] %2 = literal[false]
 :00205 [02] @bg_show_edge: - = %2
 :00206 [03] %2 = literal[[0]]
 :00207 [03] %2 = %2 * 16: i16                    [<INVALID>][<INVALID>]
 :00208 [02] @bg_pixels: - = %2
 :00209 [03] %2 = 0: i32
 :00210 [02] @bg_pattern_base: - = %2
 :00211 [03] %2 = 0: i32
 :00212 [02] @bg_pattern_base_15: - = %2
 :00213 [03] %2 = 0: i32
 :00214 [02] @bg_pattern: - = %2
 :00215 [03] %2 = const[TILE_LUT]                 [<INVALID>]
 :00216 [04] %3 = 0: i32
 :00217 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00218 [02] @bg_pattern_lut: - = %2
 :00219 [03] %2 = const[TILE_LUT]                 [<INVALID>]
 :00220 [04] %3 = 0: i32
 :00221 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00222 [02] @bg_pattern_lut_fetched: - = %2
 :00223 [03] %2 = literal[false]
 :00224 [02] @sp_enabled: - = %2
 :00225 [03] %2 = literal[false]
 :00226 [02] @sp_active: - = %2
 :00227 [03] %2 = literal[false]
 :00228 [02] @sp_show: - = %2
 :00229 [03] %2 = literal[false]
 :00230 [02] @sp_show_edge: - = %2
 :00231 [03] %2 = 0: i32
 :00232 [02] @sp_base: - = %2
 :00233 [03] %2 = 8: i32
 :00234 [02] @sp_height: - = %2
 :00235 [03] %2 = 0: i32
 :00236 [02] @sp_phase: - = %2
 :00237 [03] %2 = literal[[255]]
 :00238 [03] %2 = %2 * 256: i16                   [<INVALID>][<INVALID>]
 :00239 [02] @sp_ram: - = %2
 :00240 [03] %2 = 0: i32
 :00241 [02] @sp_index: - = %2
 :00242 [03] %2 = 0: i32
 :00243 [02] @sp_addr: - = %2
 :00244 [03] %2 = 0: i32
 :00245 [02] @sp_latch: - = %2
 :00246 [03] %2 = @conf: -
 :00247 [03] %2 = %2.sprite_limit()               [<INVALID>]
 :00249 [02] condnotbr %2 =>:00252
+:00250 [03] %2 = 8: i32
 :00251 [03] br =>:00253
+:00252 [03] %2 = 32: i32
+:00253 [03] %2 = %2 * 4: i16                     [<INVALID>][<INVALID>]
 :00254 [02] @sp_limit: - = %2
 :00255 [03] %2 = literal[[0]]
 :00256 [04] %3 = @sp_limit: -
 :00257 [03] %2 = %2 * %3                         [<INVALID>][<INVALID>]
 :00258 [02] @sp_buffer: - = %2
 :00259 [03] %2 = 0: i32
 :00260 [02] @sp_buffered: - = %2
 :00261 [03] %2 = literal[false]
 :00262 [02] @sp_visible: - = %2
 :00263 [03] %2 = literal[[nil]]
 :00264 [03] %2 = %2 * 264: i16                   [<INVALID>][<INVALID>]
 :00265 [02] @sp_map: - = %2
 :00266 [03] %2 = literal[0...264]
 :00267 [04] %3 = literal[49545217]
 :00268 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00270 [02] @sp_map_buffer: - = %2
 :00271 [03] %2 = literal[false]
 :00272 [02] @sp_zero_in_line: - = %2
 :00273 [02] ret %2
------------------------------------
------------------------------------
<update_output_color> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:191
meta:on_stack:true kind:Ruby mode:method FuncId(681) regs:4 ISeq(RubyFuncInfo { id:681 name:update_output_color method:(FuncId(681), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = 32: i32
 :00002 [03] %2 = literal[49610753]
 :00003 [02] %1 = %1.times( &%2)                  [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<setup_lut> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:197
meta:on_stack:true kind:Ruby mode:method FuncId(682) regs:5 ISeq(RubyFuncInfo { id:682 name:setup_lut method:(FuncId(682), 0) args: 0 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[{}]
 :00002 [03] %2 = %2.compare_by_identity()        [<INVALID>]
 :00004 [02] @lut_update: - = %2
 :00005 [03] %2 = literal[0..65535]
 :00006 [04] %3 = literal[49676289]
 :00007 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00009 [02] @name_lut: - = %2
 :00010 [02] %1 = literal[{}]
 :00011 [03] %2 = literal[0..32767]
 :00012 [04] %3 = literal[49741825]
 :00013 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00015 [03] %2 = %2.freeze()                     [<INVALID>]
 :00017 [02] @attr_lut: - = %2
 :00018 [03] %2 = literal[49807361]
 :00019 [03] %2 = %1.each_value( &%2)             [<INVALID>]
 :00021 [02] ret %2
------------------------------------
------------------------------------
<set_chr_mem> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:227
meta:on_stack:true kind:Ruby mode:method FuncId(683) regs:4 ISeq(RubyFuncInfo { id:683 name:set_chr_mem method:(FuncId(683), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [03] @chr_mem: - = %1
 :00002 [03] @chr_mem_writable: - = %2
 :00003 [03] ret %2
------------------------------------
------------------------------------
<nametables=> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:239
meta:on_stack:true kind:Ruby mode:method FuncId(684) regs:7 ISeq(RubyFuncInfo { id:684 name:nametables= method:(FuncId(684), 0) args: 1 non_temp: 2 temp: 4})
[]
+:00000 [03] init_method reg:6 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00002 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00004 [04] %3 = const[NMT_TABLE]                [<INVALID>]
 :00005 [03] %2 = %3.[%1]                         [<INVALID>][<INVALID>]
 :00006 [04] %3 = literal[0..3]
 :00007 [05] %4 = literal[49872897]
 :00008 [04] %3 = %3.all?( &%4)                   [<INVALID>]
 :00010 [03] condnotbr %3 =>:00013
+:00011 [04] %3 = nil
 :00012 [03] ret %3
+:00013 [04] %3 = @nmt_ref: -
 :00014 [05] %4 = 0: i32
 :00015 [06] %5 = @nmt_mem: -
 :00016 [07] %6 = 0: i32
 :00017 [07] %6 = %2.[%6]                         [<INVALID>][<INVALID>]
 :00018 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00019 [03] %3:.[%4:] = %5
 :00020 [04] %3 = @nmt_ref: -
 :00021 [05] %4 = 1: i32
 :00022 [06] %5 = @nmt_mem: -
 :00023 [07] %6 = 1: i32
 :00024 [07] %6 = %2.[%6]                         [<INVALID>][<INVALID>]
 :00025 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00026 [03] %3:.[%4:] = %5
 :00027 [04] %3 = @nmt_ref: -
 :00028 [05] %4 = 2: i32
 :00029 [06] %5 = @nmt_mem: -
 :00030 [07] %6 = 2: i32
 :00031 [07] %6 = %2.[%6]                         [<INVALID>][<INVALID>]
 :00032 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00033 [03] %3:.[%4:] = %5
 :00034 [04] %3 = @nmt_ref: -
 :00035 [05] %4 = 3: i32
 :00036 [06] %5 = @nmt_mem: -
 :00037 [07] %6 = 3: i32
 :00038 [07] %6 = %2.[%6]                         [<INVALID>][<INVALID>]
 :00039 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00040 [03] %3:.[%4:] = %5
 :00041 [04] %3 = %0.setup_lut()                  [<INVALID>]
 :00043 [03] ret %3
------------------------------------
------------------------------------
<update> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:250
meta:on_stack:true kind:Ruby mode:method FuncId(685) regs:4 ISeq(RubyFuncInfo { id:685 name:update method:(FuncId(685), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @cpu: -
 :00002 [03] %2 = %2.update()                     [<INVALID>]
 :00004 [03] %2 = %1 + %2                         [<INVALID>][<INVALID>]
 :00005 [03] %2 = %0.sync(%2;1)                   [<INVALID>]
 :00007 [02] ret %2
------------------------------------
------------------------------------
<setup_frame> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:254
meta:on_stack:true kind:Ruby mode:method FuncId(686) regs:6 ISeq(RubyFuncInfo { id:686 name:setup_frame method:(FuncId(686), 0) args: 0 non_temp: 0 temp: 5})
[]
+:00000 [01] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @output_pixels: -
 :00002 [01] _ = %1.clear()                       [<INVALID>]
 :00004 [02] %1 = @odd_frame: -
 :00005 [02] %1 = !%1                             [<INVALID>]
 :00006 [01] @odd_frame: - = %1
 :00007 [02] %1 = @cpu: -
 :00008 [03] %2 = @hclk: -
 :00009 [04] %3 = const[HCLOCK_DUMMY]             [<INVALID>]
 :00010 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00011 [02] condnotbr _%2 =>:00014
+:00012 [03] %2 = const[DUMMY_FRAME]              [<INVALID>]
 :00013 [03] br =>:00015
+:00014 [03] %2 = const[BOOT_FRAME]               [<INVALID>]
+:00015 [03] %3; 3 = expand(%2)
 :00016 [03] @vclk: - = %3
 :00017 [03] @hclk_target: - = %4
 :00018 [03] _ = %1.next_frame_clock=(%5;1)       [<INVALID>]
 :00020 [01] ret %1
------------------------------------
------------------------------------
<vsync> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:260
meta:on_stack:true kind:Ruby mode:method FuncId(687) regs:5 ISeq(RubyFuncInfo { id:687 name:vsync method:(FuncId(687), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @hclk_target: -
 :00002 [03] %2 = const[FOREVER_CLOCK]            [<INVALID>]
 :00003 [02] _%1 = %1 != %2                       [<INVALID>][<INVALID>]
 :00004 [01] condnotbr _%1 =>:00009
+:00005 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00006 [01] @hclk_target: - = %1
 :00007 [01] _ = %0.run()                         [<INVALID>]
+:00009 [02] %1 = nil
+:00010 [02] loop_start counter=0 jit-addr=0000000000000000
 :00011 [03] %2 = @output_pixels: -
 :00012 [03] %2 = %2.size()                       [<INVALID>]
 :00014 [04] %3 = 256: i32
 :00015 [04] %3 = %3 * 240: i16                   [<INVALID>][<INVALID>]
 :00016 [03] _%2 = %2 < %3                        [<INVALID>][<INVALID>]
 :00017 [02] condnotbr _%2 =>:00025
+:00018 [03] %2 = @output_pixels: -
 :00019 [04] %3 = @palette: -
 :00020 [05] %4 = 15: i32
 :00021 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00022 [02] _ = %2.<<(%3;1)                      [<INVALID>]
 :00024 [02] br =>:00010
+:00025 [02] loop_end
+:00026 [01] ret %1
------------------------------------
------------------------------------
<monitor_a12_rising_edge> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:268
meta:on_stack:true kind:Ruby mode:method FuncId(688) regs:3 ISeq(RubyFuncInfo { id:688 name:monitor_a12_rising_edge method:(FuncId(688), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] @a12_monitor: - = %1
 :00002 [02] ret %1
------------------------------------
------------------------------------
<update_vram_addr> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:275
meta:on_stack:true kind:Ruby mode:method FuncId(689) regs:4 ISeq(RubyFuncInfo { id:689 name:update_vram_addr method:(FuncId(689), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @vram_addr_inc: -
 :00002 [02] _%1 = %1 == 32: i16                  [<INVALID>][<INVALID>]
 :00003 [01] condnotbr _%1 =>:00045
+:00004 [02] %1 = %0.active?()                    [<INVALID>]
 :00006 [01] condnotbr %1 =>:00041
+:00007 [02] %1 = @scroll_addr_5_14: -
 :00008 [02] %1 = %1 & 28672: i16                 [<INVALID>][<INVALID>]
 :00009 [02] _%1 = %1 == 28672: i16               [<INVALID>][<INVALID>]
 :00010 [01] condnotbr _%1 =>:00037
+:00011 [02] %1 = @scroll_addr_5_14: -
 :00012 [02] %1 = %1 & 4095: i16                  [<INVALID>][<INVALID>]
 :00013 [01] @scroll_addr_5_14: - = %1
 :00014 [03] %2 = @scroll_addr_5_14: -
 :00015 [03] %2 = %2 & 992: i16                   [<INVALID>][<INVALID>]
 :00016 [04] %3 = 928: i32
 :00017 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00018 [03] condnotbr _%3 =>:00024
+:00019 [04] %3 = @scroll_addr_5_14: -
 :00020 [04] %3 = %3 ^ 2048: i16                  [<INVALID>][<INVALID>]
 :00021 [03] @scroll_addr_5_14: - = %3
 :00022 [04] %1 = %3
 :00023 [02] br =>:00036
+:00024 [04] %3 = 992: i32
 :00025 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00026 [03] condnotbr _%3 =>:00032
+:00027 [04] %3 = @scroll_addr_5_14: -
 :00028 [04] %3 = %3 & 31744: i16                 [<INVALID>][<INVALID>]
 :00029 [03] @scroll_addr_5_14: - = %3
 :00030 [04] %1 = %3
 :00031 [02] br =>:00036
+:00032 [03] %2 = @scroll_addr_5_14: -
 :00033 [03] %2 = %2 + 32: i16                    [<INVALID>][<INVALID>]
 :00034 [02] @scroll_addr_5_14: - = %2
 :00035 [03] %1 = %2
+:00036 [01] br =>:00040
+:00037 [02] %1 = @scroll_addr_5_14: -
 :00038 [02] %1 = %1 + 4096: i16                  [<INVALID>][<INVALID>]
 :00039 [01] @scroll_addr_5_14: - = %1
+:00040 [01] br =>:00044
+:00041 [02] %1 = @scroll_addr_5_14: -
 :00042 [02] %1 = %1 + 32: i16                    [<INVALID>][<INVALID>]
 :00043 [01] @scroll_addr_5_14: - = %1
+:00044 [01] br =>:00057
+:00045 [02] %1 = @scroll_addr_0_4: -
 :00046 [02] _%1 = %1 < 31: i16                   [<INVALID>][<INVALID>]
 :00047 [01] condnotbr _%1 =>:00052
+:00048 [02] %1 = @scroll_addr_0_4: -
 :00049 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00050 [01] @scroll_addr_0_4: - = %1
 :00051 [01] br =>:00057
+:00052 [02] %1 = 0: i32
 :00053 [01] @scroll_addr_0_4: - = %1
 :00054 [02] %1 = @scroll_addr_5_14: -
 :00055 [02] %1 = %1 + 32: i16                    [<INVALID>][<INVALID>]
 :00056 [01] @scroll_addr_5_14: - = %1
+:00057 [02] %1 = %0.update_scroll_address_line() [<INVALID>]
 :00059 [01] ret %1
------------------------------------
------------------------------------
<update_scroll_address_line> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:300
meta:on_stack:true kind:Ruby mode:method FuncId(690) regs:5 ISeq(RubyFuncInfo { id:690 name:update_scroll_address_line method:(FuncId(690), 0) args: 0 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @scroll_addr_0_4: -
 :00002 [04] %3 = @scroll_addr_5_14: -
 :00003 [03] %2 = %2 | %3                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = %2 & 4095: i16                  [<INVALID>][<INVALID>]
 :00005 [03] %2 = %2 | 8192: i16                  [<INVALID>][<INVALID>]
 :00006 [02] @name_io_addr: - = %2
 :00007 [03] %2 = @a12_monitor: -
 :00008 [02] condnotbr %2 =>:00024
+:00009 [03] %2 = @scroll_addr_5_14: -
 :00010 [03] %2 = %2 & 12288: i16                 [<INVALID>][<INVALID>]
 :00011 [02] %1 = %2 == 4096: i16                 [<INVALID>][<INVALID>]
 :00012 [03] %2 = @a12_state: -
 :00013 [03] %2 = !%2                             [<INVALID>]
 :00014 [02] condnotbr %2 =>:00022
+:00015 [02] condnotbr %1 =>:00022
+:00016 [03] %2 = @a12_monitor: -
 :00017 [04] %3 = @cpu: -
 :00018 [04] %3 = %3.current_clock()              [<INVALID>]
 :00020 [02] _ = %2.a12_signaled(%3;1)            [<INVALID>]
+:00022 [02] @a12_state: - = %1
 :00023 [02] ret %1
+:00024 [03] %2 = nil
 :00025 [02] ret %2
------------------------------------
------------------------------------
<active?> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:309
meta:on_stack:true kind:Ruby mode:method FuncId(691) regs:4 ISeq(RubyFuncInfo { id:691 name:active? method:(FuncId(691), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @scanline: -
 :00002 [04] %3 = const[SCANLINE_VBLANK]          [<INVALID>]
 :00003 [02] %1 = %2 != %3                        [<INVALID>][<INVALID>]
 :00004 [02] condnotbr %1 =>:00006
+:00005 [02] %1 = @any_show: -
+:00006 [01] ret %1
------------------------------------
------------------------------------
<sync> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:313
meta:on_stack:true kind:Ruby mode:method FuncId(692) regs:4 ISeq(RubyFuncInfo { id:692 name:sync method:(FuncId(692), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @hclk_target: -
 :00002 [03] _%2 = %2 < %1                        [<INVALID>][<INVALID>]
 :00003 [02] condnotbr _%2 =>:00005
+:00004 [02] br =>:00007
+:00005 [03] %2 = nil
 :00006 [02] ret %2
+:00007 [03] %2 = const[RP2C02_CC]                [<INVALID>]
 :00008 [03] %2 = %1 / %2                         [<INVALID>][<INVALID>]
 :00009 [04] %3 = @vclk: -
 :00010 [03] %2 = %2 - %3                         [<INVALID>][<INVALID>]
 :00011 [02] @hclk_target: - = %2
 :00012 [03] %2 = %0.run()                        [<INVALID>]
 :00014 [02] ret %2
------------------------------------
------------------------------------
<make_sure_invariants> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:319
meta:on_stack:true kind:Ruby mode:method FuncId(693) regs:6 ISeq(RubyFuncInfo { id:693 name:make_sure_invariants method:(FuncId(693), 0) args: 0 non_temp: 0 temp: 5})
[]
+:00000 [01] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @scroll_addr_0_4: -
 :00002 [03] %2 = @scroll_addr_5_14: -
 :00003 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00004 [02] %1 = %1 & 4095: i16                  [<INVALID>][<INVALID>]
 :00005 [02] %1 = %1 | 8192: i16                  [<INVALID>][<INVALID>]
 :00006 [01] @name_io_addr: - = %1
 :00007 [02] %1 = const[TILE_LUT]                 [<INVALID>]
 :00008 [03] %2 = @nmt_ref: -
 :00009 [04] %3 = @io_addr: -
 :00010 [05] %4 = 10: i32
 :00011 [04] %3 = %3.>>(%4;1)                     [<INVALID>]
 :00013 [04] %3 = %3 & 3: i16                     [<INVALID>][<INVALID>]
 :00014 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00015 [04] %3 = @io_addr: -
 :00016 [04] %3 = %3 & 1023: i16                  [<INVALID>][<INVALID>]
 :00017 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00018 [04] %3 = @scroll_addr_0_4: -
 :00019 [04] %3 = %3 & 2: i16                     [<INVALID>][<INVALID>]
 :00020 [05] %4 = @scroll_addr_5_14: -
 :00021 [06] %5 = 6: i32
 :00022 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00023 [05] %4 = %4 * 4: i16                     [<INVALID>][<INVALID>]
 :00024 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00025 [03] %2 = %2.>>(%3;1)                     [<INVALID>]
 :00027 [03] %2 = %2 & 3: i16                     [<INVALID>][<INVALID>]
 :00028 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00029 [01] @bg_pattern_lut_fetched: - = %1
 :00030 [01] ret %1
------------------------------------
------------------------------------
<io_latch_mask> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:326
meta:on_stack:true kind:Ruby mode:method FuncId(694) regs:3 ISeq(RubyFuncInfo { id:694 name:io_latch_mask method:(FuncId(694), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %0.active?()                    [<INVALID>]
 :00003 [02] condnotbr %2 =>:00006
+:00004 [03] %2 = 255: i32
 :00005 [02] ret %2
+:00006 [03] %2 = @regs_oam: -
 :00007 [03] %2 = %2 & 3: i16                     [<INVALID>][<INVALID>]
 :00008 [03] _%2 = %2 == 2: i16                   [<INVALID>][<INVALID>]
 :00009 [02] condnotbr _%2 =>:00012
+:00010 [03] %2 = %1 & 227: i16                   [<INVALID>][<INVALID>]
 :00011 [02] ret %2
+:00012 [02] ret %1
------------------------------------
------------------------------------
<poke_2000> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:340
meta:on_stack:true kind:Ruby mode:method FuncId(695) regs:8 ISeq(RubyFuncInfo { id:695 name:poke_2000 method:(FuncId(695), 0) args: 2 non_temp: 4 temp: 3})
[]
+:00000 [05] init_method reg:7 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [06] %5 = const[RP2C02_CC]                [<INVALID>]
 :00002 [05] _ = %0.update(%5;1)                  [<INVALID>]
 :00004 [05] %3 = @need_nmi: -
 :00005 [06] %5 = @scroll_latch: -
 :00006 [06] %5 = %5 & 29695: i16                 [<INVALID>][<INVALID>]
 :00007 [07] %6 = %2 & 3: i16                     [<INVALID>][<INVALID>]
 :00008 [08] %7 = 10: i32
 :00009 [07] %6 = %6.<<(%7;1)                     [<INVALID>]
 :00011 [06] %5 = %5 | %6                         [<INVALID>][<INVALID>]
 :00012 [05] @scroll_latch: - = %5
 :00013 [06] %5 = 2: i32
 :00014 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00015 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00016 [05] condnotbr _%5 =>:00019
+:00017 [06] %5 = 32: i32
 :00018 [06] br =>:00020
+:00019 [06] %5 = 1: i32
+:00020 [05] @vram_addr_inc: - = %5
 :00021 [06] %5 = 3: i32
 :00022 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00023 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00024 [05] condnotbr _%5 =>:00027
+:00025 [06] %5 = 4096: i32
 :00026 [06] br =>:00028
+:00027 [06] %5 = 0: i32
+:00028 [05] @sp_base: - = %5
 :00029 [06] %5 = 4: i32
 :00030 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00031 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00032 [05] condnotbr _%5 =>:00035
+:00033 [06] %5 = 4096: i32
 :00034 [06] br =>:00036
+:00035 [06] %5 = 0: i32
+:00036 [05] @bg_pattern_base: - = %5
 :00037 [06] %5 = 5: i32
 :00038 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00039 [06] _%5 = %5 == 1: i16                   [<INVALID>][<INVALID>]
 :00040 [05] condnotbr _%5 =>:00043
+:00041 [06] %5 = 16: i32
 :00042 [06] br =>:00044
+:00043 [06] %5 = 8: i32
+:00044 [05] @sp_height: - = %5
 :00045 [06] %5 = 7: i32
 :00046 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00047 [06] %5 = %5 == 1: i16                    [<INVALID>][<INVALID>]
 :00048 [05] @need_nmi: - = %5
 :00049 [05] @io_latch: - = %2
 :00050 [06] %5 = @sp_base: -
 :00051 [06] _%5 = %5 != 0: i16                   [<INVALID>][<INVALID>]
 :00052 [05] condbr _%5 =>:00056
+:00053 [06] %5 = @sp_height: -
 :00054 [06] _%5 = %5 == 16: i16                  [<INVALID>][<INVALID>]
 :00055 [05] condnotbr _%5 =>:00058
+:00056 [06] %5 = 8176: i32
 :00057 [06] br =>:00059
+:00058 [06] %5 = 4080: i32
+:00059 [05] @pattern_end: - = %5
 :00060 [06] %5 = @bg_pattern_base: -
 :00061 [07] %6 = 12: i32
 :00062 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00063 [07] %6 = 15: i32
 :00064 [06] %5 = %5.<<(%6;1)                     [<INVALID>]
 :00066 [05] @bg_pattern_base_15: - = %5
 :00067 [06] %5 = @need_nmi: -
 :00068 [05] condnotbr %5 =>:00087
+:00069 [06] %5 = @vblank: -
 :00070 [05] condnotbr %5 =>:00087
+:00071 [06] %5 = !%3                             [<INVALID>]
 :00072 [05] condnotbr %5 =>:00087
+:00073 [06] %5 = @cpu: -
 :00074 [06] %5 = %5.current_clock()              [<INVALID>]
 :00076 [07] %6 = const[RP2C02_CC]                [<INVALID>]
 :00077 [05] %4 = %5 + %6                         [<INVALID>][<INVALID>]
 :00078 [06] %5 = const[RP2C02_HVINT]             [<INVALID>]
 :00079 [06] _%5 = %4 < %5                        [<INVALID>][<INVALID>]
 :00080 [05] condnotbr _%5 =>:00085
+:00081 [06] %5 = @cpu: -
 :00082 [06] %5 = %5.do_nmi(%4;1)                 [<INVALID>]
 :00084 [05] ret %5
+:00085 [06] %5 = nil
 :00086 [05] ret %5
+:00087 [06] %5 = nil
 :00088 [05] ret %5
------------------------------------
------------------------------------
<poke_2001> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:362
meta:on_stack:true kind:Ruby mode:method FuncId(696) regs:12 ISeq(RubyFuncInfo { id:696 name:poke_2001 method:(FuncId(696), 0) args: 2 non_temp: 9 temp: 2})
[]
+:00000 [10] init_method reg:11 arg:2 req:2 opt:0 rest:false block:None stack_offset:9
 :00001 [11] %10 = const[RP2C02_CC]               [<INVALID>]
 :00002 [10] _ = %0.update(%10;1)                 [<INVALID>]
 :00004 [11] %10 = @bg_show: -
 :00005 [12] %11 = @bg_show_edge: -
 :00006 [12] %3 = %10
 :00007 [12] %4 = %11
 :00008 [11] %10 = @sp_show: -
 :00009 [12] %11 = @sp_show_edge: -
 :00010 [12] %5 = %10
 :00011 [12] %6 = %11
 :00012 [10] %7 = @any_show: -
 :00013 [11] %10 = @coloring: -
 :00014 [12] %11 = @emphasis: -
 :00015 [12] %8 = %10
 :00016 [12] %9 = %11
 :00017 [11] %10 = 3: i32
 :00018 [11] %10 = %2.[%10]                       [<INVALID>][<INVALID>]
 :00019 [11] %10 = %10 == 1: i16                  [<INVALID>][<INVALID>]
 :00020 [10] @bg_show: - = %10
 :00021 [12] %11 = 1: i32
 :00022 [12] %11 = %2.[%11]                       [<INVALID>][<INVALID>]
 :00023 [11] %10 = %11 == 1: i16                  [<INVALID>][<INVALID>]
 :00024 [11] condnotbr %10 =>:00026
+:00025 [11] %10 = @bg_show: -
+:00026 [10] @bg_show_edge: - = %10
 :00027 [11] %10 = 4: i32
 :00028 [11] %10 = %2.[%10]                       [<INVALID>][<INVALID>]
 :00029 [11] %10 = %10 == 1: i16                  [<INVALID>][<INVALID>]
 :00030 [10] @sp_show: - = %10
 :00031 [12] %11 = 2: i32
 :00032 [12] %11 = %2.[%11]                       [<INVALID>][<INVALID>]
 :00033 [11] %10 = %11 == 1: i16                  [<INVALID>][<INVALID>]
 :00034 [11] condnotbr %10 =>:00036
+:00035 [11] %10 = @sp_show: -
+:00036 [10] @sp_show_edge: - = %10
 :00037 [11] %10 = @bg_show: -
 :00038 [11] condbr %10 =>:00040
+:00039 [11] %10 = @sp_show: -
+:00040 [10] @any_show: - = %10
 :00041 [11] %10 = 0: i32
 :00042 [11] %10 = %2.[%10]                       [<INVALID>][<INVALID>]
 :00043 [11] _%10 = %10 == 1: i16                 [<INVALID>][<INVALID>]
 :00044 [10] condnotbr _%10 =>:00047
+:00045 [11] %10 = 48: i32
 :00046 [11] br =>:00048
+:00047 [11] %10 = 63: i32
+:00048 [10] @coloring: - = %10
 :00049 [11] %10 = %2 & 224: i16                  [<INVALID>][<INVALID>]
 :00050 [12] %11 = 1: i32
 :00051 [11] %10 = %10.<<(%11;1)                  [<INVALID>]
 :00053 [10] @emphasis: - = %10
 :00054 [10] @io_latch: - = %2
 :00055 [11] %10 = @bg_show: -
 :00056 [11] _%10 = %3 != %10                     [<INVALID>][<INVALID>]
 :00057 [10] condbr _%10 =>:00067
+:00058 [11] %10 = @bg_show_edge: -
 :00059 [11] _%10 = %4 != %10                     [<INVALID>][<INVALID>]
 :00060 [10] condbr _%10 =>:00067
+:00061 [11] %10 = @sp_show: -
 :00062 [11] _%10 = %5 != %10                     [<INVALID>][<INVALID>]
 :00063 [10] condbr _%10 =>:00067
+:00064 [11] %10 = @sp_show_edge: -
 :00065 [11] _%10 = %6 != %10                     [<INVALID>][<INVALID>]
 :00066 [10] condnotbr _%10 =>:00084
+:00067 [11] %10 = @hclk: -
 :00068 [11] _%10 = %10 < 8: i16                  [<INVALID>][<INVALID>]
 :00069 [10] condbr _%10 =>:00073
+:00070 [11] %10 = @hclk: -
 :00071 [11] _%10 = %10 >= 248: i16               [<INVALID>][<INVALID>]
 :00072 [10] condnotbr _%10 =>:00076
+:00073 [10] _ = %0.update_enabled_flags_edge()   [<INVALID>]
 :00075 [10] br =>:00078
+:00076 [10] _ = %0.update_enabled_flags()        [<INVALID>]
+:00078 [10] condnotbr %7 =>:00084
+:00079 [11] %10 = @any_show: -
 :00080 [11] %10 = !%10                           [<INVALID>]
 :00081 [10] condnotbr %10 =>:00084
+:00082 [10] _ = %0.update_scroll_address_line()  [<INVALID>]
+:00084 [11] %10 = @coloring: -
 :00085 [11] _%10 = %8 != %10                     [<INVALID>][<INVALID>]
 :00086 [10] condbr _%10 =>:00090
+:00087 [11] %10 = @emphasis: -
 :00088 [11] _%10 = %9 != %10                     [<INVALID>][<INVALID>]
 :00089 [10] condnotbr _%10 =>:00093
+:00090 [11] %10 = %0.update_output_color()       [<INVALID>]
 :00092 [10] ret %10
+:00093 [11] %10 = nil
 :00094 [10] ret %10
------------------------------------
------------------------------------
<peek_2002> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:394
meta:on_stack:true kind:Ruby mode:method FuncId(697) regs:4 ISeq(RubyFuncInfo { id:697 name:peek_2002 method:(FuncId(697), 0) args: 1 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00002 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00004 [04] %3 = @io_latch: -
 :00005 [03] %2 = %3 & 31: i16                    [<INVALID>][<INVALID>]
 :00006 [04] %3 = @vblank: -
 :00007 [03] condnotbr %3 =>:00009
+:00008 [03] %2 = %2 | 128: i16                   [<INVALID>][<INVALID>]
+:00009 [04] %3 = @sp_zero_hit: -
 :00010 [03] condnotbr %3 =>:00012
+:00011 [03] %2 = %2 | 64: i16                    [<INVALID>][<INVALID>]
+:00012 [04] %3 = @sp_overflow: -
 :00013 [03] condnotbr %3 =>:00015
+:00014 [03] %2 = %2 | 32: i16                    [<INVALID>][<INVALID>]
+:00015 [03] @io_latch: - = %2
 :00016 [04] %3 = literal[false]
 :00017 [03] @scroll_toggle: - = %3
 :00018 [04] %3 = literal[false]
 :00019 [03] @vblank: - = %3
 :00020 [03] @vblanking: - = %3
 :00021 [04] %3 = @io_latch: -
 :00022 [03] ret %3
------------------------------------
------------------------------------
<poke_2003> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:407
meta:on_stack:true kind:Ruby mode:method FuncId(698) regs:4 ISeq(RubyFuncInfo { id:698 name:poke_2003 method:(FuncId(698), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00002 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00004 [03] @io_latch: - = %2
 :00005 [04] %3 = %2
 :00006 [03] @regs_oam: - = %3
 :00007 [03] ret %3
------------------------------------
------------------------------------
<poke_2004> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:413
meta:on_stack:true kind:Ruby mode:method FuncId(699) regs:6 ISeq(RubyFuncInfo { id:699 name:poke_2004 method:(FuncId(699), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00002 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00004 [04] %3 = @sp_ram: -
 :00005 [05] %4 = @regs_oam: -
 :00006 [06] %5 = %0.io_latch_mask(%2;1)          [<INVALID>]
 :00008 [03] %3:.[%4:] = %5
 :00009 [04] %3 = %5
 :00010 [03] @io_latch: - = %3
 :00011 [04] %3 = @regs_oam: -
 :00012 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00013 [04] %3 = %3 & 255: i16                   [<INVALID>][<INVALID>]
 :00014 [03] @regs_oam: - = %3
 :00015 [03] ret %3
------------------------------------
------------------------------------
<peek_2004> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:420
meta:on_stack:true kind:Ruby mode:method FuncId(700) regs:6 ISeq(RubyFuncInfo { id:700 name:peek_2004 method:(FuncId(700), 0) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @any_show: -
 :00002 [03] %2 = !%2                             [<INVALID>]
 :00003 [02] condbr %2 =>:00022
+:00004 [03] %2 = @cpu: -
 :00005 [03] %2 = %2.current_clock()              [<INVALID>]
 :00007 [04] %3 = @cpu: -
 :00008 [04] %3 = %3.next_frame_clock()           [<INVALID>]
 :00010 [05] %4 = 341: i32
 :00011 [05] %4 = %4 * 241: i16                   [<INVALID>][<INVALID>]
 :00012 [06] %5 = const[RP2C02_CC]                [<INVALID>]
 :00013 [05] %4 = %4 * %5                         [<INVALID>][<INVALID>]
 :00014 [04] %3 = %3 - %4                         [<INVALID>][<INVALID>]
 :00015 [03] %2 = %2 - %3                         [<INVALID>][<INVALID>]
 :00016 [04] %3 = 341: i32
 :00017 [04] %3 = %3 * 240: i16                   [<INVALID>][<INVALID>]
 :00018 [05] %4 = const[RP2C02_CC]                [<INVALID>]
 :00019 [04] %3 = %3 * %4                         [<INVALID>][<INVALID>]
 :00020 [03] _%2 = %2 >= %3                       [<INVALID>][<INVALID>]
 :00021 [02] condnotbr _%2 =>:00027
+:00022 [03] %2 = @sp_ram: -
 :00023 [04] %3 = @regs_oam: -
 :00024 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00025 [02] @io_latch: - = %2
 :00026 [02] ret %2
+:00027 [03] %2 = const[RP2C02_CC]                [<INVALID>]
 :00028 [02] _ = %0.update(%2;1)                  [<INVALID>]
 :00030 [03] %2 = @sp_latch: -
 :00031 [02] @io_latch: - = %2
 :00032 [02] ret %2
------------------------------------
------------------------------------
<poke_2005> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:430
meta:on_stack:true kind:Ruby mode:method FuncId(701) regs:7 ISeq(RubyFuncInfo { id:701 name:poke_2005 method:(FuncId(701), 0) args: 2 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = const[RP2C02_CC]                [<INVALID>]
 :00002 [04] _ = %0.update(%4;1)                  [<INVALID>]
 :00004 [04] @io_latch: - = %2
 :00005 [05] %4 = @scroll_toggle: -
 :00006 [05] %4 = !%4                             [<INVALID>]
 :00007 [04] @scroll_toggle: - = %4
 :00008 [05] %4 = @scroll_toggle: -
 :00009 [04] condnotbr %4 =>:00026
+:00010 [05] %4 = @scroll_latch: -
 :00011 [05] %4 = %4 & 32736: i16                 [<INVALID>][<INVALID>]
 :00012 [06] %5 = 3: i32
 :00013 [06] %5 = %2.>>(%5;1)                     [<INVALID>]
 :00015 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00016 [04] @scroll_latch: - = %4
 :00017 [05] %4 = %2 & 7: i16                     [<INVALID>][<INVALID>]
 :00018 [04] %3 = 8: i16 - %4                     [<INVALID>][<INVALID>]
 :00019 [05] %4 = @bg_pixels: -
 :00020 [06] %5 = @scroll_xfine: -
 :00021 [06] %5 = %5 - %3                         [<INVALID>][<INVALID>]
 :00022 [04] _ = %4.rotate!(%5;1)                 [<INVALID>]
 :00024 [04] @scroll_xfine: - = %3
 :00025 [04] ret %3
+:00026 [05] %4 = @scroll_latch: -
 :00027 [05] %4 = %4 & 3103: i16                  [<INVALID>][<INVALID>]
 :00028 [06] %5 = 2: i32
 :00029 [06] %5 = %2.<<(%5;1)                     [<INVALID>]
 :00031 [07] %6 = 12: i32
 :00032 [07] %6 = %2.<<(%6;1)                     [<INVALID>]
 :00034 [06] %5 = %5 | %6                         [<INVALID>][<INVALID>]
 :00035 [06] %5 = %5 & 29664: i16                 [<INVALID>][<INVALID>]
 :00036 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00037 [04] @scroll_latch: - = %4
 :00038 [04] ret %4
------------------------------------
------------------------------------
<poke_2006> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:445
meta:on_stack:true kind:Ruby mode:method FuncId(702) regs:6 ISeq(RubyFuncInfo { id:702 name:poke_2006 method:(FuncId(702), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00002 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00004 [03] @io_latch: - = %2
 :00005 [04] %3 = @scroll_toggle: -
 :00006 [04] %3 = !%3                             [<INVALID>]
 :00007 [03] @scroll_toggle: - = %3
 :00008 [04] %3 = @scroll_toggle: -
 :00009 [03] condnotbr %3 =>:00019
+:00010 [04] %3 = @scroll_latch: -
 :00011 [04] %3 = %3 & 255: i16                   [<INVALID>][<INVALID>]
 :00012 [05] %4 = %2 & 63: i16                    [<INVALID>][<INVALID>]
 :00013 [06] %5 = 8: i32
 :00014 [05] %4 = %4.<<(%5;1)                     [<INVALID>]
 :00016 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00017 [03] @scroll_latch: - = %3
 :00018 [03] ret %3
+:00019 [04] %3 = @scroll_latch: -
 :00020 [04] %3 = %3 & 32512: i16                 [<INVALID>][<INVALID>]
 :00021 [04] %3 = %3 | %2                         [<INVALID>][<INVALID>]
 :00022 [03] @scroll_latch: - = %3
 :00023 [04] %3 = @scroll_latch: -
 :00024 [04] %3 = %3 & 31: i16                    [<INVALID>][<INVALID>]
 :00025 [03] @scroll_addr_0_4: - = %3
 :00026 [04] %3 = @scroll_latch: -
 :00027 [04] %3 = %3 & 32736: i16                 [<INVALID>][<INVALID>]
 :00028 [03] @scroll_addr_5_14: - = %3
 :00029 [04] %3 = %0.update_scroll_address_line() [<INVALID>]
 :00031 [03] ret %3
------------------------------------
------------------------------------
<poke_2007> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:460
meta:on_stack:true kind:Ruby mode:method FuncId(703) regs:12 ISeq(RubyFuncInfo { id:703 name:poke_2007 method:(FuncId(703), 0) args: 2 non_temp: 8 temp: 3})
[]
+:00000 [09] init_method reg:11 arg:2 req:2 opt:0 rest:false block:None stack_offset:9
 :00001 [10] %9 = const[RP2C02_CC]                [<INVALID>]
 :00002 [10] %9 = %9 * 4: i16                     [<INVALID>][<INVALID>]
 :00003 [09] _ = %0.update(%9;1)                  [<INVALID>]
 :00005 [10] %9 = @scroll_addr_0_4: -
 :00006 [11] %10 = @scroll_addr_5_14: -
 :00007 [09] %3 = %9 | %10                        [<INVALID>][<INVALID>]
 :00008 [09] _ = %0.update_vram_addr()            [<INVALID>]
 :00010 [09] @io_latch: - = %2
 :00011 [10] %9 = %3 & 16128: i16                 [<INVALID>][<INVALID>]
 :00012 [10] _%9 = %9 == 16128: i16               [<INVALID>][<INVALID>]
 :00013 [09] condnotbr _%9 =>:00040
+:00014 [09] %3 = %3 & 31: i16                    [<INVALID>][<INVALID>]
 :00015 [10] %9 = @palette: -
 :00016 [11] %10 = @coloring: -
 :00017 [11] %10 = %2 & %10                       [<INVALID>][<INVALID>]
 :00018 [12] %11 = @emphasis: -
 :00019 [11] %10 = %10 | %11                      [<INVALID>][<INVALID>]
 :00020 [09] %4 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00021 [10] %9 = @palette_ram: -
 :00022 [09] %9:.[%3:] = %2
 :00023 [10] %9 = @output_color: -
 :00024 [09] %9:.[%3:] = %4
 :00025 [10] %9 = %3 & 3: i16                     [<INVALID>][<INVALID>]
 :00026 [10] _%9 = %9 == 0: i16                   [<INVALID>][<INVALID>]
 :00027 [09] condnotbr _%9 =>:00034
+:00028 [10] %9 = @palette_ram: -
 :00029 [11] %10 = %3 ^ 16: i16                   [<INVALID>][<INVALID>]
 :00030 [09] %9:.[%10:] = %2
 :00031 [10] %9 = @output_color: -
 :00032 [11] %10 = %3 ^ 16: i16                   [<INVALID>][<INVALID>]
 :00033 [09] %9:.[%10:] = %4
+:00034 [10] %9 = @palette_ram: -
 :00035 [11] %10 = 0: i32
 :00036 [10] %9 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00037 [10] %9 = %9 & 63: i16                    [<INVALID>][<INVALID>]
 :00038 [09] @output_bg_color: - = %9
 :00039 [09] ret %9
+:00040 [09] %3 = %3 & 16383: i16                 [<INVALID>][<INVALID>]
 :00041 [10] _%9 = %3 >= 8192: i16                [<INVALID>][<INVALID>]
 :00042 [09] condnotbr _%9 =>:00073
+:00043 [10] %9 = @nmt_ref: -
 :00044 [11] %10 = 10: i32
 :00045 [11] %10 = %3.>>(%10;1)                   [<INVALID>]
 :00047 [11] %10 = %10 & 3: i16                   [<INVALID>][<INVALID>]
 :00048 [09] %5 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00049 [09] %6 = %3 & 1023: i16                  [<INVALID>][<INVALID>]
 :00050 [10] %9 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00051 [10] _%9 = %9 != %2                       [<INVALID>][<INVALID>]
 :00052 [09] condnotbr _%9 =>:00071
+:00053 [09] %5:.[%6:] = %2
 :00054 [10] %9 = @lut_update: -
 :00055 [10] %9 = %9.[%5]                         [<INVALID>][<INVALID>]
 :00056 [10] %9 = %9.[%6]                         [<INVALID>][<INVALID>]
 :00057 [10] %10; 2 = expand(%9)
 :00058 [10] %7 = %10
 :00059 [10] %8 = %11
 :00060 [09] condnotbr %7 =>:00064
+:00061 [10] %9 = literal[49938433]
 :00062 [09] _ = %7.each( &%9)                    [<INVALID>]
+:00064 [09] condnotbr %8 =>:00069
+:00065 [10] %9 = literal[50003969]
 :00066 [10] %9 = %8.each( &%9)                   [<INVALID>]
 :00068 [09] ret %9
+:00069 [10] %9 = nil
 :00070 [09] ret %9
+:00071 [10] %9 = nil
 :00072 [09] ret %9
+:00073 [10] %9 = @chr_mem_writable: -
 :00074 [09] condnotbr %9 =>:00078
+:00075 [10] %9 = @chr_mem: -
 :00076 [09] %9:.[%3:] = %2
 :00077 [09] ret %2
+:00078 [10] %9 = nil
 :00079 [09] ret %9
------------------------------------
------------------------------------
<peek_2007> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:494
meta:on_stack:true kind:Ruby mode:method FuncId(704) regs:5 ISeq(RubyFuncInfo { id:704 name:peek_2007 method:(FuncId(704), 0) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00002 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00004 [04] %3 = @scroll_addr_0_4: -
 :00005 [05] %4 = @scroll_addr_5_14: -
 :00006 [04] %3 = %3 | %4                         [<INVALID>][<INVALID>]
 :00007 [03] %2 = %3 & 16383: i16                 [<INVALID>][<INVALID>]
 :00008 [03] _ = %0.update_vram_addr()            [<INVALID>]
 :00010 [04] %3 = %2 & 16128: i16                 [<INVALID>][<INVALID>]
 :00011 [04] _%3 = %3 != 16128: i16               [<INVALID>][<INVALID>]
 :00012 [03] condnotbr _%3 =>:00015
+:00013 [04] %3 = @io_buffer: -
 :00014 [04] br =>:00020
+:00015 [04] %3 = @palette_ram: -
 :00016 [05] %4 = %2 & 31: i16                    [<INVALID>][<INVALID>]
 :00017 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00018 [05] %4 = @coloring: -
 :00019 [04] %3 = %3 & %4                         [<INVALID>][<INVALID>]
+:00020 [03] @io_latch: - = %3
 :00021 [04] _%3 = %2 >= 8192: i16                [<INVALID>][<INVALID>]
 :00022 [03] condnotbr _%3 =>:00032
+:00023 [04] %3 = @nmt_ref: -
 :00024 [05] %4 = 10: i32
 :00025 [05] %4 = %2.>>(%4;1)                     [<INVALID>]
 :00027 [05] %4 = %4 & 3: i16                     [<INVALID>][<INVALID>]
 :00028 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00029 [05] %4 = %2 & 1023: i16                  [<INVALID>][<INVALID>]
 :00030 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00031 [04] br =>:00034
+:00032 [04] %3 = @chr_mem: -
 :00033 [04] %3 = %3.[%2]                         [<INVALID>][<INVALID>]
+:00034 [03] @io_buffer: - = %3
 :00035 [04] %3 = @io_latch: -
 :00036 [03] ret %3
------------------------------------
------------------------------------
<poke_2xxx> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:503
meta:on_stack:true kind:Ruby mode:method FuncId(705) regs:4 ISeq(RubyFuncInfo { id:705 name:poke_2xxx method:(FuncId(705), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [03] @io_latch: - = %2
 :00002 [03] ret %2
------------------------------------
------------------------------------
<peek_2xxx> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:507
meta:on_stack:true kind:Ruby mode:method FuncId(706) regs:3 ISeq(RubyFuncInfo { id:706 name:peek_2xxx method:(FuncId(706), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @io_latch: -
 :00002 [02] ret %2
------------------------------------
------------------------------------
<peek_3000> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:511
meta:on_stack:true kind:Ruby mode:method FuncId(707) regs:3 ISeq(RubyFuncInfo { id:707 name:peek_3000 method:(FuncId(707), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[RP2C02_CC]                [<INVALID>]
 :00002 [02] _ = %0.update(%2;1)                  [<INVALID>]
 :00004 [03] %2 = @io_latch: -
 :00005 [02] ret %2
------------------------------------
------------------------------------
<poke_4014> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:517
meta:on_stack:true kind:Ruby mode:method FuncId(708) regs:6 ISeq(RubyFuncInfo { id:708 name:poke_4014 method:(FuncId(708), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @cpu: -
 :00002 [04] %3 = %3.odd_clock?()                 [<INVALID>]
 :00004 [03] condnotbr %3 =>:00009
+:00005 [04] %3 = @cpu: -
 :00006 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00007 [03] _ = %3.steal_clocks(%4;1)            [<INVALID>]
+:00009 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00010 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00012 [04] %3 = @cpu: -
 :00013 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00014 [03] _ = %3.steal_clocks(%4;1)            [<INVALID>]
 :00016 [04] %3 = 8: i32
 :00017 [03] %2 = %2.<<(%3;1)                     [<INVALID>]
 :00019 [04] %3 = @regs_oam: -
 :00020 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00021 [03] condnotbr _%3 =>:00051
+:00022 [04] _%3 = %2 < 8192: i16                 [<INVALID>][<INVALID>]
 :00023 [03] condnotbr _%3 =>:00051
+:00024 [04] %3 = @any_show: -
 :00025 [04] %3 = !%3                             [<INVALID>]
 :00026 [03] condbr %3 =>:00036
+:00027 [04] %3 = @cpu: -
 :00028 [04] %3 = %3.current_clock()              [<INVALID>]
 :00030 [05] %4 = const[RP2C02_HVINT]             [<INVALID>]
 :00031 [06] %5 = const[CPU::CLK_1]               [<INVALID>]
 :00032 [06] %5 = %5 * 512: i16                   [<INVALID>][<INVALID>]
 :00033 [05] %4 = %4 - %5                         [<INVALID>][<INVALID>]
 :00034 [04] _%3 = %3 <= %4                       [<INVALID>][<INVALID>]
 :00035 [03] condnotbr _%3 =>:00051
+:00036 [04] %3 = @cpu: -
 :00037 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00038 [05] %4 = %4 * 512: i16                   [<INVALID>][<INVALID>]
 :00039 [03] _ = %3.steal_clocks(%4;1)            [<INVALID>]
 :00041 [04] %3 = @cpu: -
 :00042 [05] %4 = %2 & 2047: i16                  [<INVALID>][<INVALID>]
 :00043 [06] %5 = @sp_ram: -
 :00044 [03] _ = %3.sprite_dma(%4;2)              [<INVALID>]
 :00046 [04] %3 = @sp_ram: -
 :00047 [05] %4 = 255: i32
 :00048 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00049 [03] @io_latch: - = %3
 :00050 [03] ret %3
+:00051 [03] loop_start counter=0 jit-addr=0000000000000000
 :00052 [04] %3 = @cpu: -
 :00053 [04] %3 = %3.fetch(%2;1)                  [<INVALID>]
 :00055 [03] @io_latch: - = %3
 :00056 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00057 [04] %3 = @cpu: -
 :00058 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00059 [03] _ = %3.steal_clocks(%4;1)            [<INVALID>]
 :00061 [04] %3 = const[RP2C02_CC]                [<INVALID>]
 :00062 [03] _ = %0.update(%3;1)                  [<INVALID>]
 :00064 [04] %3 = @cpu: -
 :00065 [05] %4 = const[CPU::CLK_1]               [<INVALID>]
 :00066 [03] _ = %3.steal_clocks(%4;1)            [<INVALID>]
 :00068 [04] %3 = @io_latch: -
 :00069 [04] %3 = %0.io_latch_mask(%3;1)          [<INVALID>]
 :00071 [03] @io_latch: - = %3
 :00072 [04] %3 = @sp_ram: -
 :00073 [05] %4 = @regs_oam: -
 :00074 [06] %5 = @io_latch: -
 :00075 [03] %3:.[%4:] = %5
 :00076 [04] %3 = @regs_oam: -
 :00077 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00078 [04] %3 = %3 & 255: i16                   [<INVALID>][<INVALID>]
 :00079 [03] @regs_oam: - = %3
 :00080 [04] %3 = %2 & 255: i16                   [<INVALID>][<INVALID>]
 :00081 [04] _%3 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00082 [03] condbr _%3 =>:00051
+:00083 [04] %3 = nil
 :00084 [04] loop_end
+:00085 [03] ret %3
------------------------------------
------------------------------------
<peek_4014> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:540
meta:on_stack:true kind:Ruby mode:method FuncId(709) regs:3 ISeq(RubyFuncInfo { id:709 name:peek_4014 method:(FuncId(709), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = 64: i32
 :00002 [02] ret %2
------------------------------------
------------------------------------
<open_pattern> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:550
meta:on_stack:true kind:Ruby mode:method FuncId(710) regs:3 ISeq(RubyFuncInfo { id:710 name:open_pattern method:(FuncId(710), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @any_show: -
 :00002 [02] condnotbr %2 =>:00004
+:00003 [02] br =>:00006
+:00004 [03] %2 = nil
 :00005 [02] ret %2
+:00006 [02] @io_addr: - = %1
 :00007 [03] %2 = %0.update_address_line()        [<INVALID>]
 :00009 [02] ret %2
------------------------------------
------------------------------------
<open_sprite> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:556
meta:on_stack:true kind:Ruby mode:method FuncId(711) regs:9 ISeq(RubyFuncInfo { id:711 name:open_sprite method:(FuncId(711), 0) args: 1 non_temp: 5 temp: 3})
[]
+:00000 [06] init_method reg:8 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [07] %6 = @sp_buffer: -
 :00002 [08] %7 = %1 + 2: i16                     [<INVALID>][<INVALID>]
 :00003 [07] %6 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00004 [08] %7 = 7: i32
 :00005 [06] %2 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00006 [07] %6 = @scanline: -
 :00007 [08] %7 = @sp_buffer: -
 :00008 [08] %7 = %7.[%1]                         [<INVALID>][<INVALID>]
 :00009 [07] %6 = %6 - %7                         [<INVALID>][<INVALID>]
 :00010 [08] %7 = %2 * 15: i16                    [<INVALID>][<INVALID>]
 :00011 [06] %3 = %6 ^ %7                         [<INVALID>][<INVALID>]
 :00012 [07] %6 = @sp_buffer: -
 :00013 [08] %7 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00014 [06] %4 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00015 [07] %6 = @sp_height: -
 :00016 [07] _%6 = %6 == 16: i16                  [<INVALID>][<INVALID>]
 :00017 [06] condnotbr _%6 =>:00032
+:00018 [07] %6 = %4 & 1: i16                     [<INVALID>][<INVALID>]
 :00019 [08] %7 = 12: i32
 :00020 [07] %6 = %6.<<(%7;1)                     [<INVALID>]
 :00022 [08] %7 = %4 & 254: i16                   [<INVALID>][<INVALID>]
 :00023 [09] %8 = 4: i32
 :00024 [08] %7 = %7.<<(%8;1)                     [<INVALID>]
 :00026 [07] %6 = %6 | %7                         [<INVALID>][<INVALID>]
 :00027 [08] %7 = 3: i32
 :00028 [08] %7 = %3.[%7]                         [<INVALID>][<INVALID>]
 :00029 [08] %7 = %7 * 16: i16                    [<INVALID>][<INVALID>]
 :00030 [07] %6 = %6 | %7                         [<INVALID>][<INVALID>]
 :00031 [07] br =>:00037
+:00032 [07] %6 = @sp_base: -
 :00033 [08] %7 = 4: i32
 :00034 [08] %7 = %4.<<(%7;1)                     [<INVALID>]
 :00036 [07] %6 = %6 | %7                         [<INVALID>][<INVALID>]
+:00037 [07] %5 = %6
 :00038 [07] %6 = %3 & 7: i16                     [<INVALID>][<INVALID>]
 :00039 [07] %6 = %5 | %6                         [<INVALID>][<INVALID>]
 :00040 [06] ret %6
------------------------------------
------------------------------------
<load_sprite> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:564
meta:on_stack:true kind:Ruby mode:method FuncId(712) regs:12 ISeq(RubyFuncInfo { id:712 name:load_sprite method:(FuncId(712), 0) args: 3 non_temp: 8 temp: 3})
[]
+:00000 [09] init_method reg:11 arg:3 req:3 opt:0 rest:false block:None stack_offset:9
 :00001 [10] %9 = @sp_buffer: -
 :00002 [11] %10 = %3 + 2: i16                    [<INVALID>][<INVALID>]
 :00003 [09] %4 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00004 [10] %9 = const[SP_PIXEL_POSITIONS]       [<INVALID>]
 :00005 [11] %10 = 6: i32
 :00006 [11] %10 = %4.[%10]                       [<INVALID>][<INVALID>]
 :00007 [09] %5 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00008 [10] %9 = 1: i32
 :00009 [10] %9 = %1.>>(%9;1)                     [<INVALID>]
 :00011 [10] %9 = %9 & 85: i16                    [<INVALID>][<INVALID>]
 :00012 [11] %10 = %2 & 170: i16                  [<INVALID>][<INVALID>]
 :00013 [10] %9 = %9 | %10                        [<INVALID>][<INVALID>]
 :00014 [11] %10 = %1 & 85: i16                   [<INVALID>][<INVALID>]
 :00015 [12] %11 = 1: i32
 :00016 [12] %11 = %2.<<(%11;1)                   [<INVALID>]
 :00018 [12] %11 = %11 & 170: i16                 [<INVALID>][<INVALID>]
 :00019 [11] %10 = %10 | %11                      [<INVALID>][<INVALID>]
 :00020 [12] %11 = 8: i32
 :00021 [11] %10 = %10.<<(%11;1)                  [<INVALID>]
 :00023 [09] %6 = %9 | %10                        [<INVALID>][<INVALID>]
 :00024 [10] %9 = @sp_buffer: -
 :00025 [11] %10 = %3 + 3: i16                    [<INVALID>][<INVALID>]
 :00026 [09] %7 = %9.[%10]                        [<INVALID>][<INVALID>]
 :00027 [10] %9 = %4 & 3: i16                     [<INVALID>][<INVALID>]
 :00028 [11] %10 = 2: i32
 :00029 [10] %9 = %9.<<(%10;1)                    [<INVALID>]
 :00031 [09] %8 = 16: i16 + %9                    [<INVALID>][<INVALID>]
 :00032 [10] %9 = @sp_visible: -
 :00033 [10] condbr %9 =>:00038
+:00034 [11] %10 = @sp_map: -
 :00035 [10] %9 = %10.clear()                     [<INVALID>]
 :00037 [10] @sp_visible: - = %9
+:00038 [10] %9 = 8: i32
 :00039 [11] %10 = literal[50069505]
 :00040 [09] _ = %9.times( &%10)                  [<INVALID>]
 :00042 [10] %9 = @sp_enabled: -
 :00043 [09] @sp_active: - = %9
 :00044 [09] ret %9
------------------------------------
------------------------------------
<update_address_line> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:584
meta:on_stack:true kind:Ruby mode:method FuncId(713) regs:5 ISeq(RubyFuncInfo { id:713 name:update_address_line method:(FuncId(713), 0) args: 0 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @a12_monitor: -
 :00002 [02] condnotbr %2 =>:00021
+:00003 [03] %2 = @io_addr: -
 :00004 [04] %3 = 12: i32
 :00005 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00006 [02] %1 = %2 == 1: i16                    [<INVALID>][<INVALID>]
 :00007 [03] %2 = @a12_state: -
 :00008 [03] %2 = !%2                             [<INVALID>]
 :00009 [02] condnotbr %2 =>:00019
+:00010 [02] condnotbr %1 =>:00019
+:00011 [03] %2 = @a12_monitor: -
 :00012 [04] %3 = @vclk: -
 :00013 [05] %4 = @hclk: -
 :00014 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00015 [05] %4 = const[RP2C02_CC]                [<INVALID>]
 :00016 [04] %3 = %3 * %4                         [<INVALID>][<INVALID>]
 :00017 [02] _ = %2.a12_signaled(%3;1)            [<INVALID>]
+:00019 [02] @a12_state: - = %1
 :00020 [02] ret %1
+:00021 [03] %2 = nil
 :00022 [02] ret %2
------------------------------------
------------------------------------
<open_name> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:595
meta:on_stack:true kind:Ruby mode:method FuncId(714) regs:2 ISeq(RubyFuncInfo { id:714 name:open_name method:(FuncId(714), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @name_io_addr: -
 :00007 [01] @io_addr: - = %1
 :00008 [02] %1 = %0.update_address_line()        [<INVALID>]
 :00010 [01] ret %1
------------------------------------
------------------------------------
<fetch_name> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:601
meta:on_stack:true kind:Ruby mode:method FuncId(715) regs:4 ISeq(RubyFuncInfo { id:715 name:fetch_name method:(FuncId(715), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @name_lut: -
 :00007 [03] %2 = @scroll_addr_0_4: -
 :00008 [04] %3 = @scroll_addr_5_14: -
 :00009 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00010 [04] %3 = @bg_pattern_base_15: -
 :00011 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00012 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00013 [01] @io_pattern: - = %1
 :00014 [01] ret %1
------------------------------------
------------------------------------
<open_attr> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:606
meta:on_stack:true kind:Ruby mode:method FuncId(716) regs:4 ISeq(RubyFuncInfo { id:716 name:open_attr method:(FuncId(716), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @attr_lut: -
 :00007 [03] %2 = @scroll_addr_0_4: -
 :00008 [04] %3 = @scroll_addr_5_14: -
 :00009 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00010 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00011 [02] %2; 2 = expand(%1)
 :00012 [02] @io_addr: - = %2
 :00013 [02] @bg_pattern_lut_fetched: - = %3
 :00014 [02] %1 = %0.update_address_line()        [<INVALID>]
 :00016 [01] ret %1
------------------------------------
------------------------------------
<fetch_attr> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:612
meta:on_stack:true kind:Ruby mode:method FuncId(717) regs:2 ISeq(RubyFuncInfo { id:717 name:fetch_attr method:(FuncId(717), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @bg_pattern_lut_fetched: -
 :00007 [01] @bg_pattern_lut: - = %1
 :00008 [01] ret %1
------------------------------------
------------------------------------
<fetch_bg_pattern_0> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:620
meta:on_stack:true kind:Ruby mode:method FuncId(718) regs:3 ISeq(RubyFuncInfo { id:718 name:fetch_bg_pattern_0 method:(FuncId(718), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @chr_mem: -
 :00007 [03] %2 = @io_addr: -
 :00008 [03] %2 = %2 & 8191: i16                  [<INVALID>][<INVALID>]
 :00009 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00010 [01] @bg_pattern: - = %1
 :00011 [01] ret %1
------------------------------------
------------------------------------
<fetch_bg_pattern_1> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:625
meta:on_stack:true kind:Ruby mode:method FuncId(719) regs:4 ISeq(RubyFuncInfo { id:719 name:fetch_bg_pattern_1 method:(FuncId(719), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @bg_pattern: -
 :00007 [03] %2 = @chr_mem: -
 :00008 [04] %3 = @io_addr: -
 :00009 [04] %3 = %3 & 8191: i16                  [<INVALID>][<INVALID>]
 :00010 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00011 [03] %2 = %2 * 256: i16                   [<INVALID>][<INVALID>]
 :00012 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00013 [01] @bg_pattern: - = %1
 :00014 [01] ret %1
------------------------------------
------------------------------------
<scroll_clock_x> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:630
meta:on_stack:true kind:Ruby mode:method FuncId(720) regs:2 ISeq(RubyFuncInfo { id:720 name:scroll_clock_x method:(FuncId(720), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @scroll_addr_0_4: -
 :00007 [02] _%1 = %1 < 31: i16                   [<INVALID>][<INVALID>]
 :00008 [01] condnotbr _%1 =>:00016
+:00009 [02] %1 = @scroll_addr_0_4: -
 :00010 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00011 [01] @scroll_addr_0_4: - = %1
 :00012 [02] %1 = @name_io_addr: -
 :00013 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00014 [01] @name_io_addr: - = %1
 :00015 [01] ret %1
+:00016 [02] %1 = 0: i32
 :00017 [01] @scroll_addr_0_4: - = %1
 :00018 [02] %1 = @scroll_addr_5_14: -
 :00019 [02] %1 = %1 ^ 1024: i16                  [<INVALID>][<INVALID>]
 :00020 [01] @scroll_addr_5_14: - = %1
 :00021 [02] %1 = @name_io_addr: -
 :00022 [02] %1 = %1 ^ 1055: i16                  [<INVALID>][<INVALID>]
 :00023 [01] @name_io_addr: - = %1
 :00024 [01] ret %1
------------------------------------
------------------------------------
<scroll_reset_x> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:642
meta:on_stack:true kind:Ruby mode:method FuncId(721) regs:3 ISeq(RubyFuncInfo { id:721 name:scroll_reset_x method:(FuncId(721), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @scroll_latch: -
 :00007 [02] %1 = %1 & 31: i16                    [<INVALID>][<INVALID>]
 :00008 [01] @scroll_addr_0_4: - = %1
 :00009 [02] %1 = @scroll_addr_5_14: -
 :00010 [02] %1 = %1 & 31712: i16                 [<INVALID>][<INVALID>]
 :00011 [03] %2 = @scroll_latch: -
 :00012 [03] %2 = %2 & 1024: i16                  [<INVALID>][<INVALID>]
 :00013 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00014 [01] @scroll_addr_5_14: - = %1
 :00015 [02] %1 = @scroll_addr_0_4: -
 :00016 [03] %2 = @scroll_addr_5_14: -
 :00017 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00018 [02] %1 = %1 & 4095: i16                  [<INVALID>][<INVALID>]
 :00019 [02] %1 = %1 | 8192: i16                  [<INVALID>][<INVALID>]
 :00020 [01] @name_io_addr: - = %1
 :00021 [01] ret %1
------------------------------------
------------------------------------
<scroll_clock_y> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:649
meta:on_stack:true kind:Ruby mode:method FuncId(722) regs:4 ISeq(RubyFuncInfo { id:722 name:scroll_clock_y method:(FuncId(722), 0) args: 0 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @any_show: -
 :00002 [02] condnotbr %2 =>:00004
+:00003 [02] br =>:00006
+:00004 [03] %2 = nil
 :00005 [02] ret %2
+:00006 [03] %2 = @scroll_addr_5_14: -
 :00007 [03] %2 = %2 & 28672: i16                 [<INVALID>][<INVALID>]
 :00008 [03] _%2 = %2 != 28672: i16               [<INVALID>][<INVALID>]
 :00009 [02] condnotbr _%2 =>:00014
+:00010 [03] %2 = @scroll_addr_5_14: -
 :00011 [03] %2 = %2 + 4096: i16                  [<INVALID>][<INVALID>]
 :00012 [02] @scroll_addr_5_14: - = %2
 :00013 [02] br =>:00035
+:00014 [03] %2 = @scroll_addr_5_14: -
 :00015 [02] %1 = %2 & 992: i16                   [<INVALID>][<INVALID>]
 :00016 [03] _%2 = %1 == 928: i16                 [<INVALID>][<INVALID>]
 :00017 [02] condnotbr _%2 =>:00025
+:00018 [03] %2 = @scroll_addr_5_14: -
 :00019 [03] %2 = %2 ^ 2048: i16                  [<INVALID>][<INVALID>]
 :00020 [02] @scroll_addr_5_14: - = %2
 :00021 [03] %2 = @scroll_addr_5_14: -
 :00022 [03] %2 = %2 & 3072: i16                  [<INVALID>][<INVALID>]
 :00023 [02] @scroll_addr_5_14: - = %2
 :00024 [02] br =>:00035
+:00025 [03] _%2 = %1 == 992: i16                 [<INVALID>][<INVALID>]
 :00026 [02] condnotbr _%2 =>:00031
+:00027 [03] %2 = @scroll_addr_5_14: -
 :00028 [03] %2 = %2 & 3072: i16                  [<INVALID>][<INVALID>]
 :00029 [02] @scroll_addr_5_14: - = %2
 :00030 [02] br =>:00035
+:00031 [03] %2 = @scroll_addr_5_14: -
 :00032 [03] %2 = %2 & 4064: i16                  [<INVALID>][<INVALID>]
 :00033 [03] %2 = %2 + 32: i16                    [<INVALID>][<INVALID>]
 :00034 [02] @scroll_addr_5_14: - = %2
+:00035 [03] %2 = @scroll_addr_0_4: -
 :00036 [04] %3 = @scroll_addr_5_14: -
 :00037 [03] %2 = %2 | %3                         [<INVALID>][<INVALID>]
 :00038 [03] %2 = %2 & 4095: i16                  [<INVALID>][<INVALID>]
 :00039 [03] %2 = %2 | 8192: i16                  [<INVALID>][<INVALID>]
 :00040 [02] @name_io_addr: - = %2
 :00041 [02] ret %2
------------------------------------
------------------------------------
<preload_tiles> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:670
meta:on_stack:true kind:Ruby mode:method FuncId(723) regs:7 ISeq(RubyFuncInfo { id:723 name:preload_tiles method:(FuncId(723), 0) args: 0 non_temp: 0 temp: 6})
[]
+:00000 [01] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @bg_pixels: -
 :00007 [03] %2 = @scroll_xfine: -
 :00008 [04] %3 = 8: i32
 :00009 [06] %5 = @bg_pattern_lut: -
 :00010 [07] %6 = @bg_pattern: -
 :00011 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00012 [01] %4 = %5
 :00013 [01] _ = %1.[]=(%2;3)                     [<INVALID>]
 :00015 [01] ret %5
------------------------------------
------------------------------------
<load_tiles> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:675
meta:on_stack:true kind:Ruby mode:method FuncId(724) regs:7 ISeq(RubyFuncInfo { id:724 name:load_tiles method:(FuncId(724), 0) args: 0 non_temp: 0 temp: 6})
[]
+:00000 [01] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @bg_pixels: -
 :00007 [03] %2 = 8: i32
 :00008 [01] _ = %1.rotate!(%2;1)                 [<INVALID>]
 :00010 [02] %1 = @bg_pixels: -
 :00011 [03] %2 = @scroll_xfine: -
 :00012 [04] %3 = 8: i32
 :00013 [06] %5 = @bg_pattern_lut: -
 :00014 [07] %6 = @bg_pattern: -
 :00015 [06] %5 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00016 [01] %4 = %5
 :00017 [01] _ = %1.[]=(%2;3)                     [<INVALID>]
 :00019 [01] ret %5
------------------------------------
------------------------------------
<evaluate_sprites_even> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:681
meta:on_stack:true kind:Ruby mode:method FuncId(725) regs:3 ISeq(RubyFuncInfo { id:725 name:evaluate_sprites_even method:(FuncId(725), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @sp_ram: -
 :00007 [03] %2 = @sp_addr: -
 :00008 [02] %1 = %1.[%2]                         [<INVALID>][<INVALID>]
 :00009 [01] @sp_latch: - = %1
 :00010 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:686
meta:on_stack:true kind:Ruby mode:method FuncId(726) regs:4 ISeq(RubyFuncInfo { id:726 name:evaluate_sprites_odd method:(FuncId(726), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @sp_phase: -
 :00007 [01] condnotbr %1 =>:00066
+:00008 [02] %1 = @sp_phase: -
 :00009 [02] _%1 = %1 == 9: i16                   [<INVALID>][<INVALID>]
 :00010 [01] condnotbr _%1 =>:00014
+:00011 [02] %1 = %0.evaluate_sprites_odd_phase_9() [<INVALID>]
 :00013 [01] ret %1
+:00014 [03] %2 = @sp_phase: -
 :00015 [04] %3 = 2: i32
 :00016 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00017 [03] condnotbr _%3 =>:00022
+:00018 [04] %3 = %0.evaluate_sprites_odd_phase_2() [<INVALID>]
 :00020 [04] %1 = %3
 :00021 [03] ret %1
+:00022 [04] %3 = 3: i32
 :00023 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00024 [03] condnotbr _%3 =>:00029
+:00025 [04] %3 = %0.evaluate_sprites_odd_phase_3() [<INVALID>]
 :00027 [04] %1 = %3
 :00028 [03] ret %1
+:00029 [04] %3 = 4: i32
 :00030 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00031 [03] condnotbr _%3 =>:00036
+:00032 [04] %3 = %0.evaluate_sprites_odd_phase_4() [<INVALID>]
 :00034 [04] %1 = %3
 :00035 [03] ret %1
+:00036 [04] %3 = 5: i32
 :00037 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00038 [03] condnotbr _%3 =>:00043
+:00039 [04] %3 = %0.evaluate_sprites_odd_phase_5() [<INVALID>]
 :00041 [04] %1 = %3
 :00042 [03] ret %1
+:00043 [04] %3 = 6: i32
 :00044 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00045 [03] condnotbr _%3 =>:00050
+:00046 [04] %3 = %0.evaluate_sprites_odd_phase_6() [<INVALID>]
 :00048 [04] %1 = %3
 :00049 [03] ret %1
+:00050 [04] %3 = 7: i32
 :00051 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00052 [03] condnotbr _%3 =>:00057
+:00053 [04] %3 = %0.evaluate_sprites_odd_phase_7() [<INVALID>]
 :00055 [04] %1 = %3
 :00056 [03] ret %1
+:00057 [04] %3 = 8: i32
 :00058 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00059 [03] condnotbr _%3 =>:00064
+:00060 [04] %3 = %0.evaluate_sprites_odd_phase_8() [<INVALID>]
 :00062 [04] %1 = %3
 :00063 [03] ret %1
+:00064 [02] %1 = nil
 :00065 [01] ret %1
+:00066 [02] %1 = %0.evaluate_sprites_odd_phase_1() [<INVALID>]
 :00068 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_1> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:713
meta:on_stack:true kind:Ruby mode:method FuncId(727) regs:4 ISeq(RubyFuncInfo { id:727 name:evaluate_sprites_odd_phase_1 method:(FuncId(727), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @sp_index: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @sp_index: - = %1
 :00004 [02] %1 = @sp_latch: -
 :00005 [03] %2 = @scanline: -
 :00006 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00007 [01] condnotbr _%1 =>:00024
+:00008 [02] %1 = @scanline: -
 :00009 [03] %2 = @sp_latch: -
 :00010 [04] %3 = @sp_height: -
 :00011 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00012 [02] _%1 = %1 < %2                        [<INVALID>][<INVALID>]
 :00013 [01] condnotbr _%1 =>:00024
+:00014 [02] %1 = @sp_addr: -
 :00015 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00016 [01] @sp_addr: - = %1
 :00017 [02] %1 = 2: i32
 :00018 [01] @sp_phase: - = %1
 :00019 [02] %1 = @sp_buffer: -
 :00020 [03] %2 = @sp_buffered: -
 :00021 [04] %3 = @sp_latch: -
 :00022 [01] %1:.[%2:] = %3
 :00023 [01] ret %3
+:00024 [02] %1 = @sp_index: -
 :00025 [02] _%1 = %1 == 64: i16                  [<INVALID>][<INVALID>]
 :00026 [01] condnotbr _%1 =>:00032
+:00027 [02] %1 = 0: i32
 :00028 [01] @sp_addr: - = %1
 :00029 [02] %1 = 9: i32
 :00030 [01] @sp_phase: - = %1
 :00031 [01] ret %1
+:00032 [02] %1 = @sp_index: -
 :00033 [02] _%1 = %1 == 2: i16                   [<INVALID>][<INVALID>]
 :00034 [01] condnotbr _%1 =>:00038
+:00035 [02] %1 = 8: i32
 :00036 [01] @sp_addr: - = %1
 :00037 [01] ret %1
+:00038 [02] %1 = @sp_addr: -
 :00039 [02] %1 = %1 + 4: i16                     [<INVALID>][<INVALID>]
 :00040 [01] @sp_addr: - = %1
 :00041 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_2> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:729
meta:on_stack:true kind:Ruby mode:method FuncId(728) regs:4 ISeq(RubyFuncInfo { id:728 name:evaluate_sprites_odd_phase_2 method:(FuncId(728), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @sp_addr: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @sp_addr: - = %1
 :00004 [02] %1 = 3: i32
 :00005 [01] @sp_phase: - = %1
 :00006 [02] %1 = @sp_buffer: -
 :00007 [03] %2 = @sp_buffered: -
 :00008 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00009 [04] %3 = @sp_latch: -
 :00010 [01] %1:.[%2:] = %3
 :00011 [01] ret %3
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_3> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:735
meta:on_stack:true kind:Ruby mode:method FuncId(729) regs:4 ISeq(RubyFuncInfo { id:729 name:evaluate_sprites_odd_phase_3 method:(FuncId(729), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @sp_addr: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @sp_addr: - = %1
 :00004 [02] %1 = 4: i32
 :00005 [01] @sp_phase: - = %1
 :00006 [02] %1 = @sp_buffer: -
 :00007 [03] %2 = @sp_buffered: -
 :00008 [03] %2 = %2 + 2: i16                     [<INVALID>][<INVALID>]
 :00009 [04] %3 = @sp_latch: -
 :00010 [01] %1:.[%2:] = %3
 :00011 [01] ret %3
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_4> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:741
meta:on_stack:true kind:Ruby mode:method FuncId(730) regs:4 ISeq(RubyFuncInfo { id:730 name:evaluate_sprites_odd_phase_4 method:(FuncId(730), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @sp_buffer: -
 :00002 [03] %2 = @sp_buffered: -
 :00003 [03] %2 = %2 + 3: i16                     [<INVALID>][<INVALID>]
 :00004 [04] %3 = @sp_latch: -
 :00005 [01] %1:.[%2:] = %3
 :00006 [02] %1 = @sp_buffered: -
 :00007 [02] %1 = %1 + 4: i16                     [<INVALID>][<INVALID>]
 :00008 [01] @sp_buffered: - = %1
 :00009 [02] %1 = @sp_index: -
 :00010 [02] _%1 = %1 != 64: i16                  [<INVALID>][<INVALID>]
 :00011 [01] condnotbr _%1 =>:00035
+:00012 [02] %1 = @sp_buffered: -
 :00013 [03] %2 = @sp_limit: -
 :00014 [02] _%1 = %1 != %2                       [<INVALID>][<INVALID>]
 :00015 [01] condnotbr _%1 =>:00018
+:00016 [02] %1 = nil
 :00017 [02] br =>:00019
+:00018 [02] %1 = 5: i32
+:00019 [01] @sp_phase: - = %1
 :00020 [02] %1 = @sp_index: -
 :00021 [02] _%1 = %1 != 2: i16                   [<INVALID>][<INVALID>]
 :00022 [01] condnotbr _%1 =>:00032
+:00023 [02] %1 = @sp_addr: -
 :00024 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00025 [01] @sp_addr: - = %1
 :00026 [02] %1 = @sp_zero_in_line: -
 :00027 [02] condbr %1 =>:00031
+:00028 [03] %2 = @sp_index: -
 :00029 [02] %1 = %2 == 1: i16                    [<INVALID>][<INVALID>]
 :00030 [02] @sp_zero_in_line: - = %1
+:00031 [01] ret %1
+:00032 [02] %1 = 8: i32
 :00033 [01] @sp_addr: - = %1
 :00034 [01] ret %1
+:00035 [02] %1 = 0: i32
 :00036 [01] @sp_addr: - = %1
 :00037 [02] %1 = 9: i32
 :00038 [01] @sp_phase: - = %1
 :00039 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_5> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:758
meta:on_stack:true kind:Ruby mode:method FuncId(731) regs:4 ISeq(RubyFuncInfo { id:731 name:evaluate_sprites_odd_phase_5 method:(FuncId(731), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @sp_latch: -
 :00002 [03] %2 = @scanline: -
 :00003 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00004 [01] condnotbr _%1 =>:00020
+:00005 [02] %1 = @scanline: -
 :00006 [03] %2 = @sp_latch: -
 :00007 [04] %3 = @sp_height: -
 :00008 [03] %2 = %2 + %3                         [<INVALID>][<INVALID>]
 :00009 [02] _%1 = %1 < %2                        [<INVALID>][<INVALID>]
 :00010 [01] condnotbr _%1 =>:00020
+:00011 [02] %1 = 6: i32
 :00012 [01] @sp_phase: - = %1
 :00013 [02] %1 = @sp_addr: -
 :00014 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00015 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00016 [01] @sp_addr: - = %1
 :00017 [02] %1 = literal[true]
 :00018 [01] @sp_overflow: - = %1
 :00019 [01] ret %1
+:00020 [02] %1 = @sp_addr: -
 :00021 [02] %1 = %1 + 4: i16                     [<INVALID>][<INVALID>]
 :00022 [02] %1 = %1 & 252: i16                   [<INVALID>][<INVALID>]
 :00023 [03] %2 = @sp_addr: -
 :00024 [03] %2 = %2 + 1: i16                     [<INVALID>][<INVALID>]
 :00025 [03] %2 = %2 & 3: i16                     [<INVALID>][<INVALID>]
 :00026 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00027 [01] @sp_addr: - = %1
 :00028 [02] %1 = @sp_addr: -
 :00029 [02] _%1 = %1 <= 5: i16                   [<INVALID>][<INVALID>]
 :00030 [01] condnotbr _%1 =>:00037
+:00031 [02] %1 = 9: i32
 :00032 [01] @sp_phase: - = %1
 :00033 [02] %1 = @sp_addr: -
 :00034 [02] %1 = %1 & 252: i16                   [<INVALID>][<INVALID>]
 :00035 [01] @sp_addr: - = %1
 :00036 [01] ret %1
+:00037 [02] %1 = nil
 :00038 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_6> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:772
meta:on_stack:true kind:Ruby mode:method FuncId(732) regs:2 ISeq(RubyFuncInfo { id:732 name:evaluate_sprites_odd_phase_6 method:(FuncId(732), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 7: i32
 :00002 [01] @sp_phase: - = %1
 :00003 [02] %1 = @sp_addr: -
 :00004 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00005 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00006 [01] @sp_addr: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_7> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:777
meta:on_stack:true kind:Ruby mode:method FuncId(733) regs:2 ISeq(RubyFuncInfo { id:733 name:evaluate_sprites_odd_phase_7 method:(FuncId(733), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 8: i32
 :00002 [01] @sp_phase: - = %1
 :00003 [02] %1 = @sp_addr: -
 :00004 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00005 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00006 [01] @sp_addr: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_8> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:782
meta:on_stack:true kind:Ruby mode:method FuncId(734) regs:2 ISeq(RubyFuncInfo { id:734 name:evaluate_sprites_odd_phase_8 method:(FuncId(734), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 9: i32
 :00002 [01] @sp_phase: - = %1
 :00003 [02] %1 = @sp_addr: -
 :00004 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00005 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00006 [01] @sp_addr: - = %1
 :00007 [02] %1 = @sp_addr: -
 :00008 [02] %1 = %1 & 3: i16                     [<INVALID>][<INVALID>]
 :00009 [02] _%1 = %1 == 3: i16                   [<INVALID>][<INVALID>]
 :00010 [01] condnotbr _%1 =>:00014
+:00011 [02] %1 = @sp_addr: -
 :00012 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00013 [01] @sp_addr: - = %1
+:00014 [02] %1 = @sp_addr: -
 :00015 [02] %1 = %1 & 252: i16                   [<INVALID>][<INVALID>]
 :00016 [01] @sp_addr: - = %1
 :00017 [01] ret %1
------------------------------------
------------------------------------
<evaluate_sprites_odd_phase_9> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:789
meta:on_stack:true kind:Ruby mode:method FuncId(735) regs:2 ISeq(RubyFuncInfo { id:735 name:evaluate_sprites_odd_phase_9 method:(FuncId(735), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @sp_addr: -
 :00002 [02] %1 = %1 + 4: i16                     [<INVALID>][<INVALID>]
 :00003 [02] %1 = %1 & 255: i16                   [<INVALID>][<INVALID>]
 :00004 [01] @sp_addr: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<load_extended_sprites> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:793
meta:on_stack:true kind:Ruby mode:method FuncId(736) regs:8 ISeq(RubyFuncInfo { id:736 name:load_extended_sprites method:(FuncId(736), 0) args: 0 non_temp: 4 temp: 3})
[]
+:00000 [05] init_method reg:7 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [06] %5 = @any_show: -
 :00002 [05] condnotbr %5 =>:00004
+:00003 [05] br =>:00006
+:00004 [06] %5 = nil
 :00005 [05] ret %5
+:00006 [06] %5 = 32: i32
 :00007 [07] %6 = @sp_buffered: -
 :00008 [06] _%5 = %5 < %6                        [<INVALID>][<INVALID>]
 :00009 [05] condnotbr _%5 =>:00035
+:00010 [05] %1 = 32: i32
+:00011 [05] loop_start counter=0 jit-addr=0000000000000000
 :00012 [05] %2 = %0.open_sprite(%1;1)            [<INVALID>]
 :00014 [06] %5 = @chr_mem: -
 :00015 [05] %3 = %5.[%2]                         [<INVALID>][<INVALID>]
 :00016 [06] %5 = @chr_mem: -
 :00017 [07] %6 = %2 | 8: i16                     [<INVALID>][<INVALID>]
 :00018 [05] %4 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00019 [06] _%5 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00020 [05] condbr _%5 =>:00023
+:00021 [06] _%5 = %4 != 0: i16                   [<INVALID>][<INVALID>]
 :00022 [05] condnotbr _%5 =>:00028
+:00023 [06] %5 = %3
 :00024 [07] %6 = %4
 :00025 [08] %7 = %1
 :00026 [05] _ = %0.load_sprite(%5;3)             [<INVALID>]
+:00028 [05] %1 = %1 + 4: i16                     [<INVALID>][<INVALID>]
 :00029 [06] %5 = @sp_buffered: -
 :00030 [06] _%5 = %1 != %5                       [<INVALID>][<INVALID>]
 :00031 [05] condbr _%5 =>:00011
+:00032 [06] %5 = nil
 :00033 [06] loop_end
+:00034 [05] ret %5
+:00035 [06] %5 = nil
 :00036 [05] ret %5
------------------------------------
------------------------------------
<render_pixel> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:807
meta:on_stack:true kind:Ruby mode:method FuncId(737) regs:6 ISeq(RubyFuncInfo { id:737 name:render_pixel method:(FuncId(737), 0) args: 0 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @any_show: -
 :00002 [03] condnotbr %3 =>:00040
+:00003 [04] %3 = @bg_enabled: -
 :00004 [03] condnotbr %3 =>:00010
+:00005 [04] %3 = @bg_pixels: -
 :00006 [05] %4 = @hclk: -
 :00007 [05] %4 = %4 % 8: i16                     [<INVALID>][<INVALID>]
 :00008 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00009 [04] br =>:00011
+:00010 [04] %3 = 0: i32
+:00011 [04] %1 = %3
 :00012 [04] %3 = @sp_active: -
 :00013 [03] condnotbr %3 =>:00039
+:00014 [04] %3 = @sp_map: -
 :00015 [05] %4 = @hclk: -
 :00016 [03] %2 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00017 [04] %3 = %2
 :00018 [03] condnotbr %3 =>:00039
+:00019 [04] %3 = %1 % 4: i16                     [<INVALID>][<INVALID>]
 :00020 [04] _%3 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00021 [03] condnotbr _%3 =>:00025
+:00022 [04] %3 = 2: i32
 :00023 [03] %1 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00024 [03] br =>:00039
+:00025 [04] %3 = 1: i32
 :00026 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00027 [03] condnotbr %3 =>:00033
+:00028 [04] %3 = @hclk: -
 :00029 [04] _%3 = %3 != 255: i16                 [<INVALID>][<INVALID>]
 :00030 [03] condnotbr _%3 =>:00033
+:00031 [04] %3 = literal[true]
 :00032 [03] @sp_zero_hit: - = %3
+:00033 [04] %3 = 0: i32
 :00034 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00035 [03] condnotbr %3 =>:00037
+:00036 [03] br =>:00039
+:00037 [04] %3 = 2: i32
 :00038 [03] %1 = %2.[%3]                         [<INVALID>][<INVALID>]
+:00039 [03] br =>:00053
+:00040 [04] %3 = @scroll_addr_5_14: -
 :00041 [04] %3 = %3 & 16128: i16                 [<INVALID>][<INVALID>]
 :00042 [04] _%3 = %3 == 16128: i16               [<INVALID>][<INVALID>]
 :00043 [03] condnotbr _%3 =>:00046
+:00044 [04] %3 = @scroll_addr_0_4: -
 :00045 [04] br =>:00047
+:00046 [04] %3 = 0: i32
+:00047 [04] %1 = %3
 :00048 [04] %3 = @bg_pixels: -
 :00049 [05] %4 = @hclk: -
 :00050 [05] %4 = %4 % 8: i16                     [<INVALID>][<INVALID>]
 :00051 [06] %5 = 0: i32
 :00052 [03] %3:.[%4:] = %5
+:00053 [04] %3 = @output_pixels: -
 :00054 [05] %4 = @output_color: -
 :00055 [05] %4 = %4.[%1]                         [<INVALID>][<INVALID>]
 :00056 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00058 [03] ret %3
------------------------------------
------------------------------------
<batch_render_eight_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:826
meta:on_stack:true kind:Ruby mode:method FuncId(738) regs:2 ISeq(RubyFuncInfo { id:738 name:batch_render_eight_pixels method:(FuncId(738), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<boot> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:829
meta:on_stack:true kind:Ruby mode:method FuncId(739) regs:2 ISeq(RubyFuncInfo { id:739 name:boot method:(FuncId(739), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[true]
 :00002 [01] @vblank: - = %1
 :00003 [02] %1 = const[HCLOCK_DUMMY]             [<INVALID>]
 :00004 [01] @hclk: - = %1
 :00005 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00006 [01] @hclk_target: - = %1
 :00007 [01] ret %1
------------------------------------
------------------------------------
<vblank_0> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:835
meta:on_stack:true kind:Ruby mode:method FuncId(740) regs:2 ISeq(RubyFuncInfo { id:740 name:vblank_0 method:(FuncId(740), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[true]
 :00002 [01] @vblanking: - = %1
 :00003 [02] %1 = const[HCLOCK_VBLANK_1]          [<INVALID>]
 :00004 [01] @hclk: - = %1
 :00005 [01] ret %1
------------------------------------
------------------------------------
<vblank_1> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:840
meta:on_stack:true kind:Ruby mode:method FuncId(741) regs:2 ISeq(RubyFuncInfo { id:741 name:vblank_1 method:(FuncId(741), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @vblank: -
 :00002 [02] condbr %1 =>:00005
+:00003 [02] %1 = @vblanking: -
 :00004 [02] @vblank: - = %1
+:00005 [02] %1 = literal[false]
 :00006 [01] @vblanking: - = %1
 :00007 [02] %1 = literal[false]
 :00008 [01] @sp_visible: - = %1
 :00009 [02] %1 = literal[false]
 :00010 [01] @sp_active: - = %1
 :00011 [02] %1 = const[HCLOCK_VBLANK_2]          [<INVALID>]
 :00012 [01] @hclk: - = %1
 :00013 [01] ret %1
------------------------------------
------------------------------------
<vblank_2> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:848
meta:on_stack:true kind:Ruby mode:method FuncId(742) regs:4 ISeq(RubyFuncInfo { id:742 name:vblank_2 method:(FuncId(742), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @vblank: -
 :00002 [02] condbr %1 =>:00005
+:00003 [02] %1 = @vblanking: -
 :00004 [02] @vblank: - = %1
+:00005 [02] %1 = literal[false]
 :00006 [01] @vblanking: - = %1
 :00007 [02] %1 = const[HCLOCK_DUMMY]             [<INVALID>]
 :00008 [01] @hclk: - = %1
 :00009 [02] %1 = const[FOREVER_CLOCK]            [<INVALID>]
 :00010 [01] @hclk_target: - = %1
 :00011 [02] %1 = @need_nmi: -
 :00012 [01] condnotbr %1 =>:00022
+:00013 [02] %1 = @vblank: -
 :00014 [01] condnotbr %1 =>:00022
+:00015 [02] %1 = @cpu: -
 :00016 [03] %2 = @cpu: -
 :00017 [03] %2 = %2.next_frame_clock()           [<INVALID>]
 :00019 [02] %1 = %1.do_nmi(%2;1)                 [<INVALID>]
 :00021 [01] ret %1
+:00022 [02] %1 = nil
 :00023 [01] ret %1
------------------------------------
------------------------------------
<update_enabled_flags> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:856
meta:on_stack:true kind:Ruby mode:method FuncId(743) regs:2 ISeq(RubyFuncInfo { id:743 name:update_enabled_flags method:(FuncId(743), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00004
+:00003 [01] br =>:00006
+:00004 [02] %1 = nil
 :00005 [01] ret %1
+:00006 [02] %1 = @bg_show: -
 :00007 [01] @bg_enabled: - = %1
 :00008 [02] %1 = @sp_show: -
 :00009 [01] @sp_enabled: - = %1
 :00010 [02] %1 = @sp_enabled: -
 :00011 [02] condnotbr %1 =>:00013
+:00012 [02] %1 = @sp_visible: -
+:00013 [01] @sp_active: - = %1
 :00014 [01] ret %1
------------------------------------
------------------------------------
<update_enabled_flags_edge> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:863
meta:on_stack:true kind:Ruby mode:method FuncId(744) regs:2 ISeq(RubyFuncInfo { id:744 name:update_enabled_flags_edge method:(FuncId(744), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @bg_show_edge: -
 :00002 [01] @bg_enabled: - = %1
 :00003 [02] %1 = @sp_show_edge: -
 :00004 [01] @sp_enabled: - = %1
 :00005 [02] %1 = @sp_enabled: -
 :00006 [02] condnotbr %1 =>:00008
+:00007 [02] %1 = @sp_visible: -
+:00008 [01] @sp_active: - = %1
 :00009 [01] ret %1
------------------------------------
------------------------------------
<debug_logging> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:872
meta:on_stack:true kind:Ruby mode:method FuncId(745) regs:11 ISeq(RubyFuncInfo { id:745 name:debug_logging method:(FuncId(745), 0) args: 3 non_temp: 3 temp: 7})
[]
+:00000 [04] init_method reg:10 arg:3 req:3 opt:0 rest:false block:None stack_offset:9
 :00001 [05] %4 = const[FOREVER_CLOCK]            [<INVALID>]
 :00002 [05] _%4 = %2 == %4                       [<INVALID>][<INVALID>]
 :00003 [04] condnotbr _%4 =>:00005
+:00004 [04] %2 = literal["forever"]
+:00005 [05] %4 = const[FOREVER_CLOCK]            [<INVALID>]
 :00006 [05] _%4 = %3 == %4                       [<INVALID>][<INVALID>]
 :00007 [04] condnotbr _%4 =>:00009
+:00008 [04] %3 = literal["forever"]
+:00009 [05] %4 = @conf: -
 :00010 [06] %5 = literal["ppu: scanline "]
 :00011 [07] %6 = %1
 :00012 [08] %7 = literal[", hclk "]
 :00013 [09] %8 = %2
 :00014 [10] %9 = literal["->"]
 :00015 [11] %10 = %3
 :00016 [06] %5 = concat(%5; 6)
 :00017 [05] %4 = %4.debug(%5;1)                  [<INVALID>]
 :00019 [04] ret %4
------------------------------------
------------------------------------
<run> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:879
meta:on_stack:true kind:Ruby mode:method FuncId(746) regs:5 ISeq(RubyFuncInfo { id:746 name:run method:(FuncId(746), 0) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = @fiber: -
 :00002 [02] condbr %1 =>:00008
+:00003 [03] %2 = const[Fiber]                    [<INVALID>]
 :00004 [04] %3 = literal[50135041]
 :00005 [02] %1 = %2.new( &%3)                    [<INVALID>]
 :00007 [02] @fiber: - = %1
+:00008 [02] %1 = @conf: -
 :00009 [02] %1 = %1.loglevel()                   [<INVALID>]
 :00011 [02] _%1 = %1 >= 3: i16                   [<INVALID>][<INVALID>]
 :00012 [01] condnotbr _%1 =>:00018
+:00013 [02] %1 = @scanline: -
 :00014 [03] %2 = @hclk: -
 :00015 [04] %3 = @hclk_target: -
 :00016 [01] _ = %0.debug_logging(%1;3)           [<INVALID>]
+:00018 [01] _ = %0.make_sure_invariants()        [<INVALID>]
 :00020 [02] %1 = @fiber: -
 :00021 [02] %1 = %1.resume()                     [<INVALID>]
 :00023 [01] condnotbr %1 =>:00026
+:00024 [02] %1 = nil
 :00025 [01] ret %1
+:00026 [02] %1 = @vclk: -
 :00027 [03] %2 = @hclk: -
 :00028 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00029 [03] %2 = const[RP2C02_CC]                [<INVALID>]
 :00030 [02] %1 = %1 * %2                         [<INVALID>][<INVALID>]
 :00031 [01] @hclk_target: - = %1
 :00032 [01] ret %1
------------------------------------
------------------------------------
<dispose> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:892
meta:on_stack:true kind:Ruby mode:method FuncId(747) regs:3 ISeq(RubyFuncInfo { id:747 name:dispose method:(FuncId(747), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal[false]
 :00002 [01] @run: - = %1
 :00003 [02] %1 = @fiber: -
 :00004 [02] %1 = %1.nil?()                       [<INVALID>]
 :00006 [01] condbr %1 =>:00013
+:00007 [02] %1 = @fiber: -
 :00008 [02] %1 = %1.resume()                     [<INVALID>]
 :00010 [03] %2 = :done
 :00011 [02] _%1 = %1 == %2                       [<INVALID>][<INVALID>]
 :00012 [01] condnotbr _%1 =>:00014
+:00013 [01] br =>:00017
+:00014 [02] %1 = literal["PPU Fiber should have finished"]
 :00015 [01] _ = %0.raise(%1;1)                   [<INVALID>]
+:00017 [02] %1 = nil
 :00018 [01] @fiber: - = %1
 :00019 [01] ret %1
------------------------------------
------------------------------------
<wait_frame> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:898
meta:on_stack:true kind:Ruby mode:method FuncId(748) regs:3 ISeq(RubyFuncInfo { id:748 name:wait_frame method:(FuncId(748), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = const[Fiber]                    [<INVALID>]
 :00002 [03] %2 = literal[true]
 :00003 [02] %1 = %1.yield(%2;1)                  [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<wait_zero_clocks> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:902
meta:on_stack:true kind:Ruby mode:method FuncId(749) regs:3 ISeq(RubyFuncInfo { id:749 name:wait_zero_clocks method:(FuncId(749), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @hclk_target: -
 :00002 [03] %2 = @hclk: -
 :00003 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00004 [01] condnotbr _%1 =>:00009
+:00005 [02] %1 = const[Fiber]                    [<INVALID>]
 :00006 [02] %1 = %1.yield()                      [<INVALID>]
 :00008 [01] ret %1
+:00009 [02] %1 = nil
 :00010 [01] ret %1
------------------------------------
------------------------------------
<wait_one_clock> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:906
meta:on_stack:true kind:Ruby mode:method FuncId(750) regs:3 ISeq(RubyFuncInfo { id:750 name:wait_one_clock method:(FuncId(750), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @hclk: -
 :00002 [02] %1 = %1 + 1: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @hclk: - = %1
 :00004 [02] %1 = @hclk_target: -
 :00005 [03] %2 = @hclk: -
 :00006 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00007 [01] condnotbr _%1 =>:00012
+:00008 [02] %1 = const[Fiber]                    [<INVALID>]
 :00009 [02] %1 = %1.yield()                      [<INVALID>]
 :00011 [01] ret %1
+:00012 [02] %1 = nil
 :00013 [01] ret %1
------------------------------------
------------------------------------
<wait_two_clocks> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:911
meta:on_stack:true kind:Ruby mode:method FuncId(751) regs:3 ISeq(RubyFuncInfo { id:751 name:wait_two_clocks method:(FuncId(751), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @hclk: -
 :00002 [02] %1 = %1 + 2: i16                     [<INVALID>][<INVALID>]
 :00003 [01] @hclk: - = %1
 :00004 [02] %1 = @hclk_target: -
 :00005 [03] %2 = @hclk: -
 :00006 [02] _%1 = %1 <= %2                       [<INVALID>][<INVALID>]
 :00007 [01] condnotbr _%1 =>:00012
+:00008 [02] %1 = const[Fiber]                    [<INVALID>]
 :00009 [02] %1 = %1.yield()                      [<INVALID>]
 :00011 [01] ret %1
+:00012 [02] %1 = nil
 :00013 [01] ret %1
------------------------------------
------------------------------------
<main_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:944
meta:on_stack:true kind:Ruby mode:method FuncId(752) regs:7 ISeq(RubyFuncInfo { id:752 name:main_loop method:(FuncId(752), 0) args: 0 non_temp: 1 temp: 5})
[]
+:00000 [02] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [02] _ = %0.boot()                        [<INVALID>]
 :00003 [02] _ = %0.wait_frame()                  [<INVALID>]
 :00005 [03] %2 = nil
+:00006 [03] loop_start counter=0 jit-addr=0000000000000000
 :00007 [04] %3 = @run: -
 :00008 [03] condnotbr %3 =>:00209
+:00009 [04] %3 = 341: i32
 :00010 [05] %4 = literal[50200577]
 :00011 [06] %5 = 589: i32
 :00012 [07] %6 = 8: i32
 :00013 [03] _ = %3.step(%5;2 &%4)                [<INVALID>]
 :00015 [04] %3 = 597: i32
 :00016 [05] %4 = literal[50266113]
 :00017 [06] %5 = 653: i32
 :00018 [07] %6 = 8: i32
 :00019 [03] _ = %3.step(%5;2 &%4)                [<INVALID>]
+:00021 [03] loop_start counter=0 jit-addr=0000000000000000
 :00022 [04] %3 = literal[true]
 :00023 [03] condnotbr %3 =>:00195
+:00024 [03] _ = %0.load_extended_sprites()       [<INVALID>]
 :00026 [03] _ = %0.open_name()                   [<INVALID>]
 :00028 [04] %3 = @any_show: -
 :00029 [03] condnotbr %3 =>:00034
+:00030 [04] %3 = @sp_ram: -
 :00031 [05] %4 = 0: i32
 :00032 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00033 [03] @sp_latch: - = %3
+:00034 [04] %3 = 0: i32
 :00035 [03] @sp_buffered: - = %3
 :00036 [04] %3 = literal[false]
 :00037 [03] @sp_zero_in_line: - = %3
 :00038 [04] %3 = 0: i32
 :00039 [03] @sp_index: - = %3
 :00040 [04] %3 = 0: i32
 :00041 [03] @sp_phase: - = %3
 :00042 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00044 [03] _ = %0.fetch_name()                  [<INVALID>]
 :00046 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00048 [03] _ = %0.open_attr()                   [<INVALID>]
 :00050 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00052 [03] _ = %0.fetch_attr()                  [<INVALID>]
 :00054 [03] _ = %0.scroll_clock_x()              [<INVALID>]
 :00056 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00058 [04] %3 = @io_pattern: -
 :00059 [03] _ = %0.open_pattern(%3;1)            [<INVALID>]
 :00061 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00063 [03] _ = %0.fetch_bg_pattern_0()          [<INVALID>]
 :00065 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00067 [04] %3 = @io_pattern: -
 :00068 [04] %3 = %3 | 8: i16                     [<INVALID>][<INVALID>]
 :00069 [03] _ = %0.open_pattern(%3;1)            [<INVALID>]
 :00071 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00073 [03] _ = %0.fetch_bg_pattern_1()          [<INVALID>]
 :00075 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00077 [03] _ = %0.preload_tiles()               [<INVALID>]
 :00079 [03] _ = %0.open_name()                   [<INVALID>]
 :00081 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00083 [03] _ = %0.fetch_name()                  [<INVALID>]
 :00085 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00087 [03] _ = %0.open_attr()                   [<INVALID>]
 :00089 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00091 [03] _ = %0.fetch_attr()                  [<INVALID>]
 :00093 [03] _ = %0.scroll_clock_x()              [<INVALID>]
 :00095 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00097 [04] %3 = @io_pattern: -
 :00098 [03] _ = %0.open_pattern(%3;1)            [<INVALID>]
 :00100 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00102 [03] _ = %0.fetch_bg_pattern_0()          [<INVALID>]
 :00104 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00106 [04] %3 = @io_pattern: -
 :00107 [04] %3 = %3 | 8: i16                     [<INVALID>][<INVALID>]
 :00108 [03] _ = %0.open_pattern(%3;1)            [<INVALID>]
 :00110 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00112 [03] _ = %0.fetch_bg_pattern_1()          [<INVALID>]
 :00114 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00116 [03] _ = %0.open_name()                   [<INVALID>]
 :00118 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00120 [04] %3 = @any_show: -
 :00121 [03] condnotbr %3 =>:00134
+:00122 [03] _ = %0.update_enabled_flags_edge()   [<INVALID>]
 :00124 [04] %3 = @scanline: -
 :00125 [05] %4 = const[SCANLINE_HDUMMY]          [<INVALID>]
 :00126 [04] _%3 = %3 == %4                       [<INVALID>][<INVALID>]
 :00127 [03] condnotbr _%3 =>:00134
+:00128 [04] %3 = @odd_frame: -
 :00129 [03] condnotbr %3 =>:00134
+:00130 [04] %3 = @cpu: -
 :00131 [05] %4 = const[RP2C02_HVSYNC_1]          [<INVALID>]
 :00132 [03] _ = %3.next_frame_clock=(%4;1)       [<INVALID>]
+:00134 [03] _ = %0.wait_one_clock()              [<INVALID>]
 :00136 [03] _ = %0.open_name()                   [<INVALID>]
 :00138 [04] %3 = @scanline: -
 :00139 [04] %3 = %3 + 1: i16                     [<INVALID>][<INVALID>]
 :00140 [03] @scanline: - = %3
 :00141 [04] %3 = @scanline: -
 :00142 [05] %4 = const[SCANLINE_VBLANK]          [<INVALID>]
 :00143 [04] _%3 = %3 != %4                       [<INVALID>][<INVALID>]
 :00144 [03] condnotbr _%3 =>:00175
+:00145 [04] %3 = @any_show: -
 :00146 [03] condnotbr %3 =>:00158
+:00147 [04] %3 = @scanline: -
 :00148 [04] _%3 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00149 [03] condbr _%3 =>:00153
+:00150 [04] %3 = @odd_frame: -
 :00151 [04] %3 = !%3                             [<INVALID>]
 :00152 [03] condnotbr %3 =>:00155
+:00153 [04] %3 = 341: i32
 :00154 [04] br =>:00156
+:00155 [04] %3 = 340: i32
+:00156 [04] %1 = %3
 :00157 [03] br =>:00161
+:00158 [03] _ = %0.update_enabled_flags_edge()   [<INVALID>]
 :00160 [03] %1 = 341: i32
+:00161 [04] %3 = 0: i32
 :00162 [03] @hclk: - = %3
 :00163 [04] %3 = @vclk: -
 :00164 [04] %3 = %3 + %1                         [<INVALID>][<INVALID>]
 :00165 [03] @vclk: - = %3
 :00166 [04] %3 = @hclk_target: -
 :00167 [04] _%3 = %3 <= %1                       [<INVALID>][<INVALID>]
 :00168 [03] condnotbr _%3 =>:00171
+:00169 [04] %3 = 0: i32
 :00170 [04] br =>:00173
+:00171 [04] %3 = @hclk_target: -
 :00172 [04] %3 = %3 - %1                         [<INVALID>][<INVALID>]
+:00173 [03] @hclk_target: - = %3
 :00174 [03] br =>:00180
+:00175 [04] %3 = const[HCLOCK_VBLANK_0]          [<INVALID>]
 :00176 [03] @hclk: - = %3
 :00177 [03] _ = %0.wait_zero_clocks()            [<INVALID>]
 :00179 [03] br =>:00195
+:00180 [03] _ = %0.wait_zero_clocks()            [<INVALID>]
 :00182 [04] %3 = 0: i32
 :00183 [05] %4 = literal[50331649]
 :00184 [06] %5 = 248: i32
 :00185 [07] %6 = 8: i32
 :00186 [03] _ = %3.step(%5;2 &%4)                [<INVALID>]
 :00188 [04] %3 = 256: i32
 :00189 [05] %4 = literal[50397185]
 :00190 [06] %5 = 312: i32
 :00191 [07] %6 = 8: i32
 :00192 [03] _ = %3.step(%5;2 &%4)                [<INVALID>]
 :00194 [03] br =>:00021
+:00195 [03] loop_end
+:00196 [03] _ = %0.vblank_0()                    [<INVALID>]
 :00198 [03] _ = %0.wait_zero_clocks()            [<INVALID>]
 :00200 [03] _ = %0.vblank_1()                    [<INVALID>]
 :00202 [03] _ = %0.wait_zero_clocks()            [<INVALID>]
 :00204 [03] _ = %0.vblank_2()                    [<INVALID>]
 :00206 [03] _ = %0.wait_frame()                  [<INVALID>]
 :00208 [03] br =>:00006
+:00209 [03] loop_end
+:00210 [02] ret %2
------------------------------------
------------------------------------
<OptimizedCodeBuilder> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1272
meta:on_stack:true kind:Ruby mode:class_def FuncId(753) regs:2 ISeq(RubyFuncInfo { id:753 name:OptimizedCodeBuilder method:(FuncId(753), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = const[CodeOptimizationHelper]   [<INVALID>]
 :00002 [01] _ = %0.include(%1;1)                 [<INVALID>]
 :00004 [02] %1 = literal[[:method_inlining, :ivar_localization, :split_show_mode, :split_a12_checks, :clock_specialization, :fastpath, :batch_render_pixels, :oneline]]
 :00005 [01] const[OPTIONS] = %1
 :00006 [01] method_def build: FuncId(770)
 :00007 [02] %1 = literal[{:wait_zero_clocks=>"", :wait_one_clock=>"@hclk += 1\n", :wait_two_clocks=>"@hclk += 2\n", :wait_frame=>"return\n"}]
 :00008 [01] const[COMMANDS] = %1
 :00009 [01] method_def parse_clock_handlers: FuncId(771)
 :00010 [01] method_def specialize_clock_handlers: FuncId(772)
 :00011 [01] method_def add_fastpath: FuncId(773)
 :00012 [01] method_def batch_render_pixels: FuncId(774)
 :00013 [01] method_def oneline: FuncId(775)
 :00014 [01] method_def ppu_expand_methods: FuncId(776)
 :00015 [01] method_def split_mode: FuncId(777)
 :00016 [01] method_def build_loop: FuncId(778)
 :00017 [01] method_def rebuild_loop: FuncId(779)
 :00018 [02] %1 = :rebuild_loop
 :00019 [01] ret %1
------------------------------------
------------------------------------
<block in PPU> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:44
meta:on_stack:true kind:Ruby mode:method FuncId(754) regs:5 ISeq(RubyFuncInfo { id:754 name:<unnamed> method:(FuncId(676), 2) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[0...65536]
 :00002 [04] %3 = literal[51118081]
 :00003 [03] %2 = %2.map( &%3)                    [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:73
meta:on_stack:true kind:Ruby mode:method FuncId(755) regs:3 ISeq(RubyFuncInfo { id:755 name:<unnamed> method:(FuncId(679), 1) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @nmt_mem: -
 :00002 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<block in reset> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:187
meta:on_stack:true kind:Ruby mode:method FuncId(756) regs:2 ISeq(RubyFuncInfo { id:756 name:<unnamed> method:(FuncId(680), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[[false, false, 0]]
 :00002 [01] ret %1
------------------------------------
------------------------------------
<block in update_output_color> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:192
meta:on_stack:true kind:Ruby mode:method FuncId(757) regs:6 ISeq(RubyFuncInfo { id:757 name:<unnamed> method:(FuncId(681), 1) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @output_color: -
 :00002 [04] %3 = @palette: -
 :00003 [05] %4 = @palette_ram: -
 :00004 [05] %4 = %4.[%1]                         [<INVALID>][<INVALID>]
 :00005 [06] %5 = @coloring: -
 :00006 [05] %4 = %4 & %5                         [<INVALID>][<INVALID>]
 :00007 [06] %5 = @emphasis: -
 :00008 [05] %4 = %4 | %5                         [<INVALID>][<INVALID>]
 :00009 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00010 [02] %2:.[%1:] = %3
 :00011 [02] ret %3
------------------------------------
------------------------------------
<block in setup_lut> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:200
meta:on_stack:true kind:Ruby mode:method FuncId(758) regs:9 ISeq(RubyFuncInfo { id:758 name:<unnamed> method:(FuncId(682), 1) args: 1 non_temp: 4 temp: 4})
[]
+:00000 [05] init_method reg:8 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [06] %5 = @nmt_ref: -
 :00002 [07] %6 = 10: i32
 :00003 [07] %6 = %1.>>(%6;1)                     [<INVALID>]
 :00005 [07] %6 = %6 & 3: i16                     [<INVALID>][<INVALID>]
 :00006 [05] %2 = %5.[%6]                         [<INVALID>][<INVALID>]
 :00007 [05] %3 = %1 & 1023: i16                  [<INVALID>][<INVALID>]
 :00008 [06] %5 = 12: i32
 :00009 [06] %5 = %1.>>(%5;1)                     [<INVALID>]
 :00011 [06] %5 = %5 & 7: i16                     [<INVALID>][<INVALID>]
 :00012 [07] %6 = 15: i32
 :00013 [07] %6 = %1.[%6]                         [<INVALID>][<INVALID>]
 :00014 [08] %7 = 12: i32
 :00015 [07] %6 = %6.<<(%7;1)                     [<INVALID>]
 :00017 [05] %4 = %5 | %6                         [<INVALID>][<INVALID>]
 :00018 [09] %8 = @lut_update: -
 :00019 [08] %7 = %8.[%2]                         [<INVALID>][<INVALID>]
 :00020 [08] condbr %7 =>:00024
+:00021 [09] %8 = @lut_update: -
 :00022 [09] %7 = literal[[]]
 :00023 [08] %8:.[%2:] = %7
+:00024 [07] %6 = %7.[%3]                         [<INVALID>][<INVALID>]
 :00025 [07] condbr %6 =>:00034
+:00026 [09] %8 = @lut_update: -
 :00027 [08] %7 = %8.[%2]                         [<INVALID>][<INVALID>]
 :00028 [08] condbr %7 =>:00032
+:00029 [09] %8 = @lut_update: -
 :00030 [09] %7 = literal[[]]
 :00031 [08] %8:.[%2:] = %7
+:00032 [08] %6 = literal[[nil, nil]]
 :00033 [07] %7:.[%3:] = %6
+:00034 [08] %7 = 0: i32
 :00035 [06] %5 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00036 [06] condbr %5 =>:00056
+:00037 [09] %8 = @lut_update: -
 :00038 [08] %7 = %8.[%2]                         [<INVALID>][<INVALID>]
 :00039 [08] condbr %7 =>:00043
+:00040 [09] %8 = @lut_update: -
 :00041 [09] %7 = literal[[]]
 :00042 [08] %8:.[%2:] = %7
+:00043 [07] %6 = %7.[%3]                         [<INVALID>][<INVALID>]
 :00044 [07] condbr %6 =>:00053
+:00045 [09] %8 = @lut_update: -
 :00046 [08] %7 = %8.[%2]                         [<INVALID>][<INVALID>]
 :00047 [08] condbr %7 =>:00051
+:00048 [09] %8 = @lut_update: -
 :00049 [09] %7 = literal[[]]
 :00050 [08] %8:.[%2:] = %7
+:00051 [08] %6 = literal[[nil, nil]]
 :00052 [07] %7:.[%3:] = %6
+:00053 [08] %7 = 0: i32
 :00054 [08] %5 = literal[[]]
 :00055 [06] %6:.[%7:] = %5
+:00056 [08] %7 = %1
 :00057 [09] %8 = %4
 :00058 [07] %6 = array[%7; 2]
 :00059 [05] _ = %5.<<(%6;1)                      [<INVALID>]
 :00061 [06] %5 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00062 [07] %6 = 4: i32
 :00063 [06] %5 = %5.<<(%6;1)                     [<INVALID>]
 :00065 [06] %5 = %5 | %4                         [<INVALID>][<INVALID>]
 :00066 [05] ret %5
------------------------------------
------------------------------------
<block in setup_lut> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:209
meta:on_stack:true kind:Ruby mode:method FuncId(759) regs:12 ISeq(RubyFuncInfo { id:759 name:<unnamed> method:(FuncId(682), 1) args: 1 non_temp: 6 temp: 5})
[]
+:00000 [07] init_method reg:11 arg:1 req:1 opt:0 rest:false block:None stack_offset:9
 :00001 [08] %7 = %1 & 3072: i16                  [<INVALID>][<INVALID>]
 :00002 [08] %7 = 9152: i16 | %7                  [<INVALID>][<INVALID>]
 :00003 [09] %8 = 4: i32
 :00004 [09] %8 = %1.>>(%8;1)                     [<INVALID>]
 :00006 [09] %8 = %8 & 56: i16                    [<INVALID>][<INVALID>]
 :00007 [08] %7 = %7 | %8                         [<INVALID>][<INVALID>]
 :00008 [09] %8 = 2: i32
 :00009 [09] %8 = %1.>>(%8;1)                     [<INVALID>]
 :00011 [09] %8 = %8 & 7: i16                     [<INVALID>][<INVALID>]
 :00012 [07] %2 = %7 | %8                         [<INVALID>][<INVALID>]
 :00013 [08] %7 = @nmt_ref: -
 :00014 [09] %8 = 10: i32
 :00015 [09] %8 = %2.>>(%8;1)                     [<INVALID>]
 :00017 [09] %8 = %8 & 3: i16                     [<INVALID>][<INVALID>]
 :00018 [07] %3 = %7.[%8]                         [<INVALID>][<INVALID>]
 :00019 [07] %4 = %2 & 1023: i16                  [<INVALID>][<INVALID>]
 :00020 [08] %7 = %1 & 2: i16                     [<INVALID>][<INVALID>]
 :00021 [09] %8 = 4: i32
 :00022 [09] %8 = %1.>>(%8;1)                     [<INVALID>]
 :00024 [09] %8 = %8 & 4: i16                     [<INVALID>][<INVALID>]
 :00025 [07] %5 = %7 | %8                         [<INVALID>][<INVALID>]
 :00026 [08] %7 = %2
 :00027 [09] %8 = %5
 :00028 [07] %6 = array[%7; 2]
 :00029 [09] %8 = dynvar(1, %1)
 :00030 [08] %7 = %8.[%6]                         [<INVALID>][<INVALID>]
 :00031 [08] condbr %7 =>:00043
+:00032 [09] %8 = dynvar(1, %1)
 :00033 [10] %9 = %2
 :00034 [11] %10 = const[TILE_LUT]                [<INVALID>]
 :00035 [12] %11 = %3.[%4]                        [<INVALID>][<INVALID>]
 :00036 [12] %11 = %11.>>(%5;1)                   [<INVALID>]
 :00038 [12] %11 = %11 & 3: i16                   [<INVALID>][<INVALID>]
 :00039 [11] %10 = %10.[%11]                      [<INVALID>][<INVALID>]
 :00040 [12] %11 = %5
 :00041 [09] %7 = array[%9; 3]
 :00042 [08] %8:.[%6:] = %7
+:00043 [11] %10 = @lut_update: -
 :00044 [10] %9 = %10.[%3]                        [<INVALID>][<INVALID>]
 :00045 [10] condbr %9 =>:00049
+:00046 [11] %10 = @lut_update: -
 :00047 [11] %9 = literal[[]]
 :00048 [10] %10:.[%3:] = %9
+:00049 [09] %8 = %9.[%4]                         [<INVALID>][<INVALID>]
 :00050 [09] condbr %8 =>:00059
+:00051 [11] %10 = @lut_update: -
 :00052 [10] %9 = %10.[%3]                        [<INVALID>][<INVALID>]
 :00053 [10] condbr %9 =>:00057
+:00054 [11] %10 = @lut_update: -
 :00055 [11] %9 = literal[[]]
 :00056 [10] %10:.[%3:] = %9
+:00057 [10] %8 = literal[[nil, nil]]
 :00058 [09] %9:.[%4:] = %8
+:00059 [10] %9 = 1: i32
 :00060 [08] %7 = %8.[%9]                         [<INVALID>][<INVALID>]
 :00061 [08] condbr %7 =>:00081
+:00062 [11] %10 = @lut_update: -
 :00063 [10] %9 = %10.[%3]                        [<INVALID>][<INVALID>]
 :00064 [10] condbr %9 =>:00068
+:00065 [11] %10 = @lut_update: -
 :00066 [11] %9 = literal[[]]
 :00067 [10] %10:.[%3:] = %9
+:00068 [09] %8 = %9.[%4]                         [<INVALID>][<INVALID>]
 :00069 [09] condbr %8 =>:00078
+:00070 [11] %10 = @lut_update: -
 :00071 [10] %9 = %10.[%3]                        [<INVALID>][<INVALID>]
 :00072 [10] condbr %9 =>:00076
+:00073 [11] %10 = @lut_update: -
 :00074 [11] %9 = literal[[]]
 :00075 [10] %10:.[%3:] = %9
+:00076 [10] %8 = literal[[nil, nil]]
 :00077 [09] %9:.[%4:] = %8
+:00078 [10] %9 = 1: i32
 :00079 [10] %7 = literal[[]]
 :00080 [08] %8:.[%9:] = %7
+:00081 [09] %8 = dynvar(1, %1)
 :00082 [09] %8 = %8.[%6]                         [<INVALID>][<INVALID>]
 :00083 [07] _ = %7.<<(%8;1)                      [<INVALID>]
 :00085 [08] %7 = dynvar(1, %1)
 :00086 [08] %7 = %7.[%6]                         [<INVALID>][<INVALID>]
 :00087 [07] ret %7
------------------------------------
------------------------------------
<block in setup_lut> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:219
meta:on_stack:true kind:Ruby mode:method FuncId(760) regs:4 ISeq(RubyFuncInfo { id:760 name:<unnamed> method:(FuncId(682), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[51183617]
 :00002 [03] %2 = %1.uniq!( &%2)                  [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<block in nametables=> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:242
meta:on_stack:true kind:Ruby mode:method FuncId(761) regs:5 ISeq(RubyFuncInfo { id:761 name:<unnamed> method:(FuncId(684), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @nmt_ref: -
 :00002 [03] %2 = %2.[%1]                         [<INVALID>][<INVALID>]
 :00003 [04] %3 = @nmt_mem: -
 :00004 [05] %4 = dynvar(1, %2)
 :00005 [05] %4 = %4.[%1]                         [<INVALID>][<INVALID>]
 :00006 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00007 [03] %2 = %2.equal?(%3;1)                 [<INVALID>]
 :00009 [02] ret %2
------------------------------------
------------------------------------
<block in poke_2007> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:484
meta:on_stack:true kind:Ruby mode:method FuncId(762) regs:6 ISeq(RubyFuncInfo { id:762 name:<unnamed> method:(FuncId(703), 1) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @name_lut: -
 :00002 [05] %4 = dynvar(1, %2)
 :00003 [06] %5 = 4: i32
 :00004 [05] %4 = %4.<<(%5;1)                     [<INVALID>]
 :00006 [05] %4 = %4 | %2                         [<INVALID>][<INVALID>]
 :00007 [03] %3:.[%1:] = %4
 :00008 [03] ret %4
------------------------------------
------------------------------------
<block in poke_2007> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:485
meta:on_stack:true kind:Ruby mode:method FuncId(763) regs:6 ISeq(RubyFuncInfo { id:763 name:<unnamed> method:(FuncId(703), 1) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = 1: i32
 :00002 [04] %3 = const[TILE_LUT]                 [<INVALID>]
 :00003 [05] %4 = dynvar(1, %2)
 :00004 [06] %5 = 2: i32
 :00005 [06] %5 = %1.[%5]                         [<INVALID>][<INVALID>]
 :00006 [05] %4 = %4.>>(%5;1)                     [<INVALID>]
 :00008 [05] %4 = %4 & 3: i16                     [<INVALID>][<INVALID>]
 :00009 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00010 [02] %1:.[%2:] = %3
 :00011 [02] ret %3
------------------------------------
------------------------------------
<block in load_sprite> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:571
meta:on_stack:true kind:Ruby mode:method FuncId(764) regs:8 ISeq(RubyFuncInfo { id:764 name:<unnamed> method:(FuncId(712), 1) args: 1 non_temp: 4 temp: 3})
[]
+:00000 [05] init_method reg:7 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [06] %5 = dynvar(1, %7)
 :00002 [05] %2 = %5 + %1                         [<INVALID>][<INVALID>]
 :00003 [06] %5 = dynvar(1, %6)
 :00004 [07] %6 = dynvar(1, %5)
 :00005 [07] %6 = %6.[%1]                         [<INVALID>][<INVALID>]
 :00006 [07] %6 = %6 * 2: i16                     [<INVALID>][<INVALID>]
 :00007 [06] %5 = %5.>>(%6;1)                     [<INVALID>]
 :00009 [05] %3 = %5 & 3: i16                     [<INVALID>][<INVALID>]
 :00010 [06] %5 = @sp_map: -
 :00011 [06] %5 = %5.[%2]                         [<INVALID>][<INVALID>]
 :00012 [05] condbr %5 =>:00015
+:00013 [06] _%5 = %3 == 0: i16                   [<INVALID>][<INVALID>]
 :00014 [05] condnotbr _%5 =>:00017
+:00015 [06] %5 = nil
 :00016 [05] ret %5
+:00017 [06] %5 = @sp_map: -
 :00018 [07] %6 = @sp_map_buffer: -
 :00019 [06] %4 = %6.[%2]                         [<INVALID>][<INVALID>]
 :00020 [07] %6 = %4
 :00021 [05] %5:.[%2:] = %6
 :00022 [06] %5 = 0: i32
 :00023 [07] %6 = dynvar(1, %4)
 :00024 [08] %7 = 5: i32
 :00025 [07] %6 = %6.[%7]                         [<INVALID>][<INVALID>]
 :00026 [07] %6 = %6 == 1: i16                    [<INVALID>][<INVALID>]
 :00027 [05] %4:.[%5:] = %6
 :00028 [06] %5 = 1: i32
 :00029 [08] %7 = dynvar(1, %3)
 :00030 [07] %6 = %7 == 0: i16                    [<INVALID>][<INVALID>]
 :00031 [07] condnotbr %6 =>:00033
+:00032 [07] %6 = @sp_zero_in_line: -
+:00033 [05] %4:.[%5:] = %6
 :00034 [06] %5 = 2: i32
 :00035 [07] %6 = dynvar(1, %8)
 :00036 [07] %6 = %6 + %3                         [<INVALID>][<INVALID>]
 :00037 [05] %4:.[%5:] = %6
 :00038 [05] ret %6
------------------------------------
------------------------------------
<block in run> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:880
meta:on_stack:true kind:Ruby mode:method FuncId(765) regs:2 ISeq(RubyFuncInfo { id:765 name:<unnamed> method:(FuncId(746), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] _ = %0.main_loop()                   [<INVALID>]
 :00003 [02] %1 = :done
 :00004 [01] ret %1
------------------------------------
------------------------------------
<block in main_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:954
meta:on_stack:true kind:Ruby mode:method FuncId(766) regs:2 ISeq(RubyFuncInfo { id:766 name:<unnamed> method:(FuncId(752), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @hclk: -
 :00002 [02] _%1 = %1 == 341: i16                 [<INVALID>][<INVALID>]
 :00003 [01] condnotbr _%1 =>:00011
+:00004 [02] %1 = literal[false]
 :00005 [01] @vblank: - = %1
 :00006 [01] @vblanking: - = %1
 :00007 [01] @sp_zero_hit: - = %1
 :00008 [01] @sp_overflow: - = %1
 :00009 [02] %1 = const[SCANLINE_HDUMMY]          [<INVALID>]
 :00010 [01] @scanline: - = %1
+:00011 [01] _ = %0.open_name()                   [<INVALID>]
 :00013 [01] _ = %0.wait_two_clocks()             [<INVALID>]
 :00015 [01] _ = %0.open_attr()                   [<INVALID>]
 :00017 [01] _ = %0.wait_two_clocks()             [<INVALID>]
 :00019 [02] %1 = @bg_pattern_base: -
 :00020 [01] _ = %0.open_pattern(%1;1)            [<INVALID>]
 :00022 [01] _ = %0.wait_two_clocks()             [<INVALID>]
 :00024 [02] %1 = @io_addr: -
 :00025 [02] %1 = %1 | 8: i16                     [<INVALID>][<INVALID>]
 :00026 [01] _ = %0.open_pattern(%1;1)            [<INVALID>]
 :00028 [02] %1 = %0.wait_two_clocks()            [<INVALID>]
 :00030 [01] ret %1
------------------------------------
------------------------------------
<block in main_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:976
meta:on_stack:true kind:Ruby mode:method FuncId(767) regs:3 ISeq(RubyFuncInfo { id:767 name:<unnamed> method:(FuncId(752), 1) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00018
+:00003 [02] %1 = @hclk: -
 :00004 [02] _%1 = %1 == 645: i16                 [<INVALID>][<INVALID>]
 :00005 [01] condnotbr _%1 =>:00018
+:00006 [02] %1 = @scroll_latch: -
 :00007 [02] %1 = %1 & 31: i16                    [<INVALID>][<INVALID>]
 :00008 [01] @scroll_addr_0_4: - = %1
 :00009 [02] %1 = @scroll_latch: -
 :00010 [02] %1 = %1 & 32736: i16                 [<INVALID>][<INVALID>]
 :00011 [01] @scroll_addr_5_14: - = %1
 :00012 [02] %1 = @scroll_addr_0_4: -
 :00013 [03] %2 = @scroll_addr_5_14: -
 :00014 [02] %1 = %1 | %2                         [<INVALID>][<INVALID>]
 :00015 [02] %1 = %1 & 4095: i16                  [<INVALID>][<INVALID>]
 :00016 [02] %1 = %1 | 8192: i16                  [<INVALID>][<INVALID>]
 :00017 [01] @name_io_addr: - = %1
+:00018 [01] _ = %0.open_name()                   [<INVALID>]
 :00020 [01] _ = %0.wait_two_clocks()             [<INVALID>]
 :00022 [01] _ = %0.open_attr()                   [<INVALID>]
 :00024 [01] _ = %0.wait_two_clocks()             [<INVALID>]
 :00026 [02] %1 = @pattern_end: -
 :00027 [01] _ = %0.open_pattern(%1;1)            [<INVALID>]
 :00029 [01] _ = %0.wait_two_clocks()             [<INVALID>]
 :00031 [02] %1 = @io_addr: -
 :00032 [02] %1 = %1 | 8: i16                     [<INVALID>][<INVALID>]
 :00033 [01] _ = %0.open_pattern(%1;1)            [<INVALID>]
 :00035 [02] %1 = @hclk: -
 :00036 [02] _%1 = %1 == 659: i16                 [<INVALID>][<INVALID>]
 :00037 [01] condnotbr _%1 =>:00049
+:00038 [02] %1 = 320: i32
 :00039 [01] @hclk: - = %1
 :00040 [02] %1 = @vclk: -
 :00041 [03] %2 = const[HCLOCK_DUMMY]             [<INVALID>]
 :00042 [02] %1 = %1 + %2                         [<INVALID>][<INVALID>]
 :00043 [01] @vclk: - = %1
 :00044 [02] %1 = @hclk_target: -
 :00045 [03] %2 = const[HCLOCK_DUMMY]             [<INVALID>]
 :00046 [02] %1 = %1 - %2                         [<INVALID>][<INVALID>]
 :00047 [01] @hclk_target: - = %1
 :00048 [01] br =>:00051
+:00049 [01] _ = %0.wait_two_clocks()             [<INVALID>]
+:00051 [02] %1 = %0.wait_zero_clocks()           [<INVALID>]
 :00053 [01] ret %1
------------------------------------
------------------------------------
<block in main_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1117
meta:on_stack:true kind:Ruby mode:method FuncId(768) regs:2 ISeq(RubyFuncInfo { id:768 name:<unnamed> method:(FuncId(752), 1) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = @any_show: -
 :00002 [01] condnotbr %1 =>:00024
+:00003 [02] %1 = @hclk: -
 :00004 [02] _%1 = %1 == 64: i16                  [<INVALID>][<INVALID>]
 :00005 [01] condnotbr _%1 =>:00013
+:00006 [02] %1 = @regs_oam: -
 :00007 [02] %1 = %1 & 248: i16                   [<INVALID>][<INVALID>]
 :00008 [01] @sp_addr: - = %1
 :00009 [02] %1 = nil
 :00010 [01] @sp_phase: - = %1
 :00011 [02] %1 = 255: i32
 :00012 [01] @sp_latch: - = %1
+:00013 [01] _ = %0.load_tiles()                  [<INVALID>]
 :00015 [01] _ = %0.batch_render_eight_pixels()   [<INVALID>]
 :00017 [02] %1 = @hclk: -
 :00018 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00019 [01] condnotbr _%1 =>:00022
+:00020 [01] _ = %0.evaluate_sprites_even()       [<INVALID>]
+:00022 [01] _ = %0.open_name()                   [<INVALID>]
+:00024 [01] _ = %0.render_pixel()                [<INVALID>]
 :00026 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00028 [02] %1 = @any_show: -
 :00029 [01] condnotbr %1 =>:00037
+:00030 [01] _ = %0.fetch_name()                  [<INVALID>]
 :00032 [02] %1 = @hclk: -
 :00033 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00034 [01] condnotbr _%1 =>:00037
+:00035 [01] _ = %0.evaluate_sprites_odd()        [<INVALID>]
+:00037 [01] _ = %0.render_pixel()                [<INVALID>]
 :00039 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00041 [02] %1 = @any_show: -
 :00042 [01] condnotbr %1 =>:00050
+:00043 [02] %1 = @hclk: -
 :00044 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00045 [01] condnotbr _%1 =>:00048
+:00046 [01] _ = %0.evaluate_sprites_even()       [<INVALID>]
+:00048 [01] _ = %0.open_attr()                   [<INVALID>]
+:00050 [01] _ = %0.render_pixel()                [<INVALID>]
 :00052 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00054 [02] %1 = @any_show: -
 :00055 [01] condnotbr %1 =>:00070
+:00056 [01] _ = %0.fetch_attr()                  [<INVALID>]
 :00058 [02] %1 = @hclk: -
 :00059 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00060 [01] condnotbr _%1 =>:00063
+:00061 [01] _ = %0.evaluate_sprites_odd()        [<INVALID>]
+:00063 [02] %1 = @hclk: -
 :00064 [02] _%1 = %1 == 251: i16                 [<INVALID>][<INVALID>]
 :00065 [01] condnotbr _%1 =>:00068
+:00066 [01] _ = %0.scroll_clock_y()              [<INVALID>]
+:00068 [01] _ = %0.scroll_clock_x()              [<INVALID>]
+:00070 [01] _ = %0.render_pixel()                [<INVALID>]
 :00072 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00074 [02] %1 = @any_show: -
 :00075 [01] condnotbr %1 =>:00084
+:00076 [02] %1 = @hclk: -
 :00077 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00078 [01] condnotbr _%1 =>:00081
+:00079 [01] _ = %0.evaluate_sprites_even()       [<INVALID>]
+:00081 [02] %1 = @io_pattern: -
 :00082 [01] _ = %0.open_pattern(%1;1)            [<INVALID>]
+:00084 [01] _ = %0.render_pixel()                [<INVALID>]
 :00086 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00088 [02] %1 = @any_show: -
 :00089 [01] condnotbr %1 =>:00097
+:00090 [01] _ = %0.fetch_bg_pattern_0()          [<INVALID>]
 :00092 [02] %1 = @hclk: -
 :00093 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00094 [01] condnotbr _%1 =>:00097
+:00095 [01] _ = %0.evaluate_sprites_odd()        [<INVALID>]
+:00097 [01] _ = %0.render_pixel()                [<INVALID>]
 :00099 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00101 [02] %1 = @any_show: -
 :00102 [01] condnotbr %1 =>:00112
+:00103 [02] %1 = @hclk: -
 :00104 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00105 [01] condnotbr _%1 =>:00108
+:00106 [01] _ = %0.evaluate_sprites_even()       [<INVALID>]
+:00108 [02] %1 = @io_pattern: -
 :00109 [02] %1 = %1 | 8: i16                     [<INVALID>][<INVALID>]
 :00110 [01] _ = %0.open_pattern(%1;1)            [<INVALID>]
+:00112 [01] _ = %0.render_pixel()                [<INVALID>]
 :00114 [01] _ = %0.wait_one_clock()              [<INVALID>]
 :00116 [02] %1 = @any_show: -
 :00117 [01] condnotbr %1 =>:00125
+:00118 [01] _ = %0.fetch_bg_pattern_1()          [<INVALID>]
 :00120 [02] %1 = @hclk: -
 :00121 [02] _%1 = %1 >= 64: i16                  [<INVALID>][<INVALID>]
 :00122 [01] condnotbr _%1 =>:00125
+:00123 [01] _ = %0.evaluate_sprites_odd()        [<INVALID>]
+:00125 [01] _ = %0.render_pixel()                [<INVALID>]
 :00127 [02] %1 = @any_show: -
 :00128 [01] condnotbr %1 =>:00134
+:00129 [02] %1 = @hclk: -
 :00130 [02] _%1 = %1 != 255: i16                 [<INVALID>][<INVALID>]
 :00131 [01] condnotbr _%1 =>:00134
+:00132 [01] _ = %0.update_enabled_flags()        [<INVALID>]
+:00134 [02] %1 = %0.wait_one_clock()             [<INVALID>]
 :00136 [01] ret %1
------------------------------------
------------------------------------
<block in main_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1195
meta:on_stack:true kind:Ruby mode:method FuncId(769) regs:7 ISeq(RubyFuncInfo { id:769 name:<unnamed> method:(FuncId(752), 1) args: 0 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = @hclk: -
 :00002 [05] _%4 = %4 == 256: i16                 [<INVALID>][<INVALID>]
 :00003 [04] condnotbr _%4 =>:00021
+:00004 [04] _ = %0.open_name()                   [<INVALID>]
 :00006 [05] %4 = @any_show: -
 :00007 [04] condnotbr %4 =>:00010
+:00008 [05] %4 = 255: i32
 :00009 [04] @sp_latch: - = %4
+:00010 [04] _ = %0.wait_one_clock()              [<INVALID>]
 :00012 [04] _ = %0.scroll_reset_x()              [<INVALID>]
 :00014 [05] %4 = literal[false]
 :00015 [04] @sp_visible: - = %4
 :00016 [05] %4 = literal[false]
 :00017 [04] @sp_active: - = %4
 :00018 [04] _ = %0.wait_one_clock()              [<INVALID>]
 :00020 [04] br =>:00025
+:00021 [04] _ = %0.open_name()                   [<INVALID>]
 :00023 [04] _ = %0.wait_two_clocks()             [<INVALID>]
+:00025 [04] _ = %0.open_attr()                   [<INVALID>]
 :00027 [04] _ = %0.wait_two_clocks()             [<INVALID>]
 :00029 [05] %4 = @any_show: -
 :00030 [04] condnotbr %4 =>:00051
+:00031 [05] %4 = @hclk: -
 :00032 [05] %4 = %4 - 260: i16                   [<INVALID>][<INVALID>]
 :00033 [04] %1 = %4 / 2: i16                     [<INVALID>][<INVALID>]
 :00034 [05] %4 = @sp_buffered: -
 :00035 [05] _%4 = %1 >= %4                       [<INVALID>][<INVALID>]
 :00036 [04] condnotbr _%4 =>:00039
+:00037 [05] %4 = @pattern_end: -
 :00038 [05] br =>:00041
+:00039 [05] %4 = %0.open_sprite(%1;1)            [<INVALID>]
+:00041 [04] _ = %0.open_pattern(%4;1)            [<INVALID>]
 :00043 [05] %4 = @hclk: -
 :00044 [05] _%4 = %4 == 316: i16                 [<INVALID>][<INVALID>]
 :00045 [04] condnotbr _%4 =>:00051
+:00046 [05] %4 = @scanline: -
 :00047 [05] _%4 = %4 == 238: i16                 [<INVALID>][<INVALID>]
 :00048 [04] condnotbr _%4 =>:00051
+:00049 [05] %4 = 0: i32
 :00050 [04] @regs_oam: - = %4
+:00051 [04] _ = %0.wait_one_clock()              [<INVALID>]
 :00053 [05] %4 = @any_show: -
 :00054 [04] condnotbr %4 =>:00066
+:00055 [05] %4 = @hclk: -
 :00056 [05] %4 = %4 - 261: i16                   [<INVALID>][<INVALID>]
 :00057 [05] %4 = %4 / 2: i16                     [<INVALID>][<INVALID>]
 :00058 [06] %5 = @sp_buffered: -
 :00059 [05] _%4 = %4 < %5                        [<INVALID>][<INVALID>]
 :00060 [04] condnotbr _%4 =>:00066
+:00061 [05] %4 = @chr_mem: -
 :00062 [06] %5 = @io_addr: -
 :00063 [06] %5 = %5 & 8191: i16                  [<INVALID>][<INVALID>]
 :00064 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00065 [04] @io_pattern: - = %4
+:00066 [04] _ = %0.wait_one_clock()              [<INVALID>]
 :00068 [05] %4 = @io_addr: -
 :00069 [05] %4 = %4 | 8: i16                     [<INVALID>][<INVALID>]
 :00070 [04] _ = %0.open_pattern(%4;1)            [<INVALID>]
 :00072 [04] _ = %0.wait_one_clock()              [<INVALID>]
 :00074 [05] %4 = @any_show: -
 :00075 [04] condnotbr %4 =>:00096
+:00076 [05] %4 = @hclk: -
 :00077 [05] %4 = %4 - 263: i16                   [<INVALID>][<INVALID>]
 :00078 [04] %1 = %4 / 2: i16                     [<INVALID>][<INVALID>]
 :00079 [05] %4 = @sp_buffered: -
 :00080 [05] _%4 = %1 < %4                        [<INVALID>][<INVALID>]
 :00081 [04] condnotbr _%4 =>:00096
+:00082 [04] %2 = @io_pattern: -
 :00083 [05] %4 = @chr_mem: -
 :00084 [06] %5 = @io_addr: -
 :00085 [06] %5 = %5 & 8191: i16                  [<INVALID>][<INVALID>]
 :00086 [04] %3 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00087 [05] _%4 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00088 [04] condbr _%4 =>:00091
+:00089 [05] _%4 = %3 != 0: i16                   [<INVALID>][<INVALID>]
 :00090 [04] condnotbr _%4 =>:00096
+:00091 [05] %4 = %2
 :00092 [06] %5 = %3
 :00093 [07] %6 = %1
 :00094 [04] _ = %0.load_sprite(%4;3)             [<INVALID>]
+:00096 [05] %4 = %0.wait_one_clock()             [<INVALID>]
 :00098 [04] ret %4
------------------------------------
------------------------------------
<build> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1281
meta:on_stack:true kind:Ruby mode:method FuncId(770) regs:10 ISeq(RubyFuncInfo { id:770 name:build method:(FuncId(770), 0) args: 0 non_temp: 5 temp: 4})
[]
+:00000 [06] init_method reg:9 arg:0 req:0 opt:0 rest:false block:None stack_offset:8
 :00001 [07] %6 = :ivar_localization
 :00002 [08] %7 = :method_inlining
 :00003 [06] _ = %0.depends(%6;2)                 [<INVALID>]
 :00005 [07] %6 = :batch_render_pixels
 :00006 [08] %7 = :fastpath
 :00007 [06] _ = %0.depends(%6;2)                 [<INVALID>]
 :00009 [07] %6 = literal["/home/monochrome/optcarrot/lib/optcarrot/ppu.rb"]
 :00010 [06] %1 = %0.parse_method_definitions(%6;1) [<INVALID>]
 :00012 [07] %6 = :main_loop
 :00013 [07] %6 = %1.[%6]                         [<INVALID>][<INVALID>]
 :00014 [07] %6 = %6.body()                       [<INVALID>]
 :00016 [06] %2 = %0.parse_clock_handlers(%6;1)   [<INVALID>]
 :00018 [07] %6 = @clock_specialization: -
 :00019 [06] condnotbr %6 =>:00022
+:00020 [06] %2 = %0.specialize_clock_handlers(%2;1) [<INVALID>]
+:00022 [07] %6 = @fastpath: -
 :00023 [06] condnotbr %6 =>:00028
+:00024 [07] %6 = literal[51249153]
 :00025 [08] %7 = %2
 :00026 [06] %2 = %0.add_fastpath(%7;1 &%6)       [<INVALID>]
+:00028 [06] %3 = %0.build_loop(%2;1)             [<INVALID>]
 :00030 [07] %6 = @method_inlining: -
 :00031 [06] condnotbr %6 =>:00036
+:00032 [07] %6 = %3
 :00033 [08] %7 = %1
 :00034 [06] %3 = %0.ppu_expand_methods(%6;2)     [<INVALID>]
+:00036 [07] %6 = @split_show_mode: -
 :00037 [06] condnotbr %6 =>:00064
+:00038 [07] %6 = %3
 :00039 [08] %7 = literal["@any_show"]
 :00040 [07] %6 = %0.split_mode(%6;2)             [<INVALID>]
 :00042 [07] %7; 2 = expand(%6)
 :00043 [07] %3 = %7
 :00044 [07] %4 = %8
 :00045 [07] %6 = @split_a12_checks: -
 :00046 [06] condnotbr %6 =>:00059
+:00047 [07] %6 = %3
 :00048 [08] %7 = literal["@a12_monitor"]
 :00049 [07] %6 = %0.split_mode(%6;2)             [<INVALID>]
 :00051 [07] %7; 2 = expand(%6)
 :00052 [07] %3 = %7
 :00053 [07] %5 = %8
 :00054 [07] %6 = literal["@a12_monitor"]
 :00055 [08] %7 = %3
 :00056 [09] %8 = %5
 :00057 [06] %3 = %0.branch(%6;3)                 [<INVALID>]
+:00059 [07] %6 = literal["@any_show"]
 :00060 [08] %7 = %3
 :00061 [09] %8 = %4
 :00062 [06] %3 = %0.branch(%6;3)                 [<INVALID>]
+:00064 [07] %6 = :make_sure_invariants
 :00065 [07] %6 = %1.[%6]                         [<INVALID>][<INVALID>]
 :00066 [07] %6 = %6.body()                       [<INVALID>]
 :00068 [08] %7 = %3
 :00069 [09] %8 = literal["@hclk_target = (@vclk + @hclk) * RP2C02_CC"]
 :00070 [06] %3 = %0.gen(%6;3)                    [<INVALID>]
 :00072 [07] %6 = @ivar_localization: -
 :00073 [06] condnotbr %6 =>:00076
+:00074 [06] %3 = %0.localize_instance_variables(%3;1) [<INVALID>]
+:00076 [07] %6 = literal["def self.run"]
 :00077 [08] %7 = @loglevel: -
 :00078 [08] _%7 = %7 >= 3: i16                   [<INVALID>][<INVALID>]
 :00079 [07] condnotbr _%7 =>:00082
+:00080 [08] %7 = literal[["  debug_logging(@scanline, @hclk, @hclk_target)"]]
 :00081 [08] br =>:00083
+:00082 [08] %7 = literal[[]]
+:00083 [09] %8 = 2: i32
 :00084 [10] %9 = %3
 :00085 [09] %8 = %0.indent(%8;2)                 [<INVALID>]
 :00087 [10] %9 = literal["end"]
 :00088 [06] %3 = %0.gen(%6;4)*                   [<INVALID>]
 :00090 [07] %6 = @oneline: -
 :00091 [06] condnotbr %6 =>:00094
+:00092 [06] %3 = %0.oneline(%3;1)                [<INVALID>]
+:00094 [06] ret %3
------------------------------------
------------------------------------
<parse_clock_handlers> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1334
meta:on_stack:true kind:Ruby mode:method FuncId(771) regs:5 ISeq(RubyFuncInfo { id:771 name:parse_clock_handlers method:(FuncId(771), 0) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[{}]
 :00002 [04] %3 = literal[51314689]
 :00003 [05] %4 = literal[/(?m)^( *)# when (.*)\n((?:\1.*\n|\n)*?\1wait_.*\n)/]
 :00004 [03] _ = %1.scan(%4;1 &%3)                [<INVALID>]
 :00006 [03] ret %2
------------------------------------
------------------------------------
<specialize_clock_handlers> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1353
meta:on_stack:true kind:Ruby mode:method FuncId(772) regs:4 ISeq(RubyFuncInfo { id:772 name:specialize_clock_handlers method:(FuncId(772), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[51380225]
 :00002 [03] %2 = %1.each( &%2)                   [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<add_fastpath> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1364
meta:on_stack:true kind:Ruby mode:method FuncId(773) regs:4 ISeq(RubyFuncInfo { id:773 name:add_fastpath method:(FuncId(773), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[51445761]
 :00002 [03] %2 = %1.each( &%2)                   [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<batch_render_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1374
meta:on_stack:true kind:Ruby mode:method FuncId(774) regs:23 ISeq(RubyFuncInfo { id:774 name:batch_render_pixels method:(FuncId(774), 0) args: 2 non_temp: 2 temp: 20})
[]
+:00000 [03] init_method reg:22 arg:2 req:2 opt:0 rest:false block:None stack_offset:15
 :00001 [04] %3 = %1
 :00002 [05] %4 = literal["unless @any_show"]
 :00003 [06] %5 = literal["  @bg_pixels[@hclk % 8] = 0"]
 :00004 [07] %6 = literal["  @output_pixels << @output_color[@scroll_addr_5_14 & 0x3f00 == 0x3f00 ? @scroll_addr_0_4 : 0]"]
 :00005 [08] %7 = literal["end"]
 :00006 [05] %4 = %0.gen(%4;4)                    [<INVALID>]
 :00008 [03] %1 = %0.expand_methods(%3;1 kw:%4;1) [<INVALID>]
 :00010 [04] %3 = %1
 :00011 [05] %4 = literal["# batch-version of render_pixel"]
 :00012 [06] %5 = literal["if @any_show"]
 :00013 [07] %6 = literal["  if @sp_active"]
 :00014 [08] %7 = literal["    if @bg_enabled"]
 :00015 [09] %8 = literal[0..7]
 :00016 [10] %9 = literal[51511297]
 :00017 [09] %8 = %8.flat_map( &%9)               [<INVALID>]
 :00019 [10] %9 = literal["      @output_pixels << "]
 :00020 [11] %10 = literal[0..7]
 :00021 [12] %11 = literal[51576833]
 :00022 [11] %10 = %10.map( &%11)                 [<INVALID>]
 :00024 [12] %11 = literal[" << "]
 :00025 [11] %10 = %10 * %11                      [<INVALID>][<INVALID>]
 :00026 [10] %9 = %9 + %10                        [<INVALID>][<INVALID>]
 :00027 [11] %10 = literal["    else"]
 :00028 [12] %11 = literal[0..7]
 :00029 [13] %12 = literal[51642369]
 :00030 [12] %11 = %11.map( &%12)                 [<INVALID>]
 :00032 [13] %12 = literal["      @output_pixels << "]
 :00033 [14] %13 = literal[0..7]
 :00034 [15] %14 = literal[51707905]
 :00035 [14] %13 = %13.map( &%14)                 [<INVALID>]
 :00037 [15] %14 = literal[" << "]
 :00038 [14] %13 = %13 * %14                      [<INVALID>][<INVALID>]
 :00039 [13] %12 = %12 + %13                      [<INVALID>][<INVALID>]
 :00040 [14] %13 = literal["    end"]
 :00041 [15] %14 = literal["  else"]
 :00042 [16] %15 = literal["    if @bg_enabled # this is the true hot-spot"]
 :00043 [17] %16 = literal["      @output_pixels << "]
 :00044 [18] %17 = literal[0..7]
 :00045 [19] %18 = literal[51773441]
 :00046 [18] %17 = %17.map( &%18)                 [<INVALID>]
 :00048 [19] %18 = literal[" << "]
 :00049 [18] %17 = %17 * %18                      [<INVALID>][<INVALID>]
 :00050 [17] %16 = %16 + %17                      [<INVALID>][<INVALID>]
 :00051 [18] %17 = literal["    else"]
 :00052 [19] %18 = literal["      clr = @output_color[0]"]
 :00053 [20] %19 = literal["      @output_pixels << "]
 :00054 [21] %20 = literal[["clr"]]
 :00055 [21] %20 = %20 * 8: i16                   [<INVALID>][<INVALID>]
 :00056 [22] %21 = literal[" << "]
 :00057 [21] %20 = %20 * %21                      [<INVALID>][<INVALID>]
 :00058 [20] %19 = %19 + %20                      [<INVALID>][<INVALID>]
 :00059 [21] %20 = literal["    end"]
 :00060 [22] %21 = literal["  end"]
 :00061 [23] %22 = literal["end"]
 :00062 [05] %4 = %0.gen(%4;19)*                  [<INVALID>]
 :00064 [04] %3 = %0.expand_methods(%3;1 kw:%4;1) [<INVALID>]
 :00066 [03] ret %3
------------------------------------
------------------------------------
<oneline> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1419
meta:on_stack:true kind:Ruby mode:method FuncId(775) regs:5 ISeq(RubyFuncInfo { id:775 name:oneline method:(FuncId(775), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[/(?m)^ *|#.*/]
 :00002 [04] %3 = literal[""]
 :00003 [03] %2 = %1.gsub(%2;2)                   [<INVALID>]
 :00005 [04] %3 = literal["[\n"]
 :00006 [05] %4 = literal["["]
 :00007 [03] %2 = %2.gsub(%3;2)                   [<INVALID>]
 :00009 [04] %3 = literal[/(?m)\n *\]/]
 :00010 [05] %4 = literal["]"]
 :00011 [03] %2 = %2.gsub(%3;2)                   [<INVALID>]
 :00013 [04] %3 = literal["\n"]
 :00014 [05] %4 = literal[";"]
 :00015 [03] %2 = %2.tr(%3;2)                     [<INVALID>]
 :00017 [02] ret %2
------------------------------------
------------------------------------
<ppu_expand_methods> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1424
meta:on_stack:true kind:Ruby mode:method FuncId(776) regs:6 ISeq(RubyFuncInfo { id:776 name:ppu_expand_methods method:(FuncId(776), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = %1
 :00002 [05] %4 = :open_sprite
 :00003 [06] %5 = :open_sprite
 :00004 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00005 [03] %1 = %0.expand_inline_methods(%3;3)  [<INVALID>]
 :00007 [04] %3 = %1
 :00008 [05] %4 = %2
 :00009 [04] %3 = %0.expand_methods(%3;2)         [<INVALID>]
 :00011 [05] %4 = %2
 :00012 [04] %3 = %0.expand_methods(%3;2)         [<INVALID>]
 :00014 [03] ret %3
------------------------------------
------------------------------------
<split_mode> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1433
meta:on_stack:true kind:Ruby mode:method FuncId(777) regs:6 ISeq(RubyFuncInfo { id:777 name:split_mode method:(FuncId(777), 0) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal[["true", "false"]]
 :00002 [05] %4 = literal[51838977]
 :00003 [04] %3 = %3.map( &%4)                    [<INVALID>]
 :00005 [03] ret %3
------------------------------------
------------------------------------
<build_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1440
meta:on_stack:true kind:Ruby mode:method FuncId(778) regs:8 ISeq(RubyFuncInfo { id:778 name:build_loop method:(FuncId(778), 0) args: 1 non_temp: 2 temp: 5})
[]
+:00000 [03] init_method reg:7 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [03] %2 = literal[{}]
 :00002 [04] %3 = %1.sort()                       [<INVALID>]
 :00004 [05] %4 = literal[51904513]
 :00005 [03] _ = %3.each( &%4)                    [<INVALID>]
 :00007 [04] %3 = literal["while @hclk_target > @hclk"]
 :00008 [05] %4 = literal["  case @hclk"]
 :00009 [06] %5 = %2.invert()                     [<INVALID>]
 :00011 [06] %5 = %5.sort()                       [<INVALID>]
 :00013 [07] %6 = literal[51970049]
 :00014 [06] %5 = %5.map( &%6)                    [<INVALID>]
 :00016 [07] %6 = literal["  end"]
 :00017 [08] %7 = literal["end"]
 :00018 [04] %3 = %0.gen(%3;5)*                   [<INVALID>]
 :00020 [03] ret %3
------------------------------------
------------------------------------
<rebuild_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1458
meta:on_stack:true kind:Ruby mode:method FuncId(779) regs:5 ISeq(RubyFuncInfo { id:779 name:rebuild_loop method:(FuncId(779), 0) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal[{}]
 :00002 [04] %3 = literal[52035585]
 :00003 [05] %4 = literal[/(?m)^  when ((?:\d+, )*\d+)\n((?:    .*\n|\n)*)/]
 :00004 [03] _ = %1.scan(%4;1 &%3)                [<INVALID>]
 :00006 [04] %3 = %0.build_loop(%2;1)             [<INVALID>]
 :00008 [03] ret %3
------------------------------------
------------------------------------
<block in PPU> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:45
meta:on_stack:true kind:Ruby mode:method FuncId(780) regs:5 ISeq(RubyFuncInfo { id:780 name:<unnamed> method:(FuncId(676), 3) args: 1 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = dynvar(1, %1)
 :00002 [04] %3 = 15: i16 - %3                    [<INVALID>][<INVALID>]
 :00003 [04] %3 = %1.[%3]                         [<INVALID>][<INVALID>]
 :00004 [04] %3 = %3 * 2: i16                     [<INVALID>][<INVALID>]
 :00005 [05] %4 = dynvar(1, %1)
 :00006 [05] %4 = 7: i16 - %4                     [<INVALID>][<INVALID>]
 :00007 [05] %4 = %1.[%4]                         [<INVALID>][<INVALID>]
 :00008 [03] %2 = %3 + %4                         [<INVALID>][<INVALID>]
 :00009 [04] _%3 = %2 != 0: i16                   [<INVALID>][<INVALID>]
 :00010 [03] condnotbr _%3 =>:00014
+:00011 [04] %3 = dynvar(2, %1)
 :00012 [04] %3 = %3 | %2                         [<INVALID>][<INVALID>]
 :00013 [03] ret %3
+:00014 [04] %3 = 0: i32
 :00015 [03] ret %3
------------------------------------
------------------------------------
<block in setup_lut> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:219
meta:on_stack:true kind:Ruby mode:method FuncId(781) regs:3 ISeq(RubyFuncInfo { id:781 name:<unnamed> method:(FuncId(682), 2) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1.object_id()                  [<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<block in build> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1290
meta:on_stack:true kind:Ruby mode:method FuncId(782) regs:5 ISeq(RubyFuncInfo { id:782 name:<unnamed> method:(FuncId(770), 1) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = @batch_render_pixels: -
 :00002 [03] condnotbr %3 =>:00008
+:00003 [04] %3 = %1
 :00004 [05] %4 = %2
 :00005 [04] %3 = %0.batch_render_pixels(%3;2)    [<INVALID>]
 :00007 [03] ret %3
+:00008 [03] ret %1
------------------------------------
------------------------------------
<block in parse_clock_handlers> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1336
meta:on_stack:true kind:Ruby mode:method FuncId(783) regs:11 ISeq(RubyFuncInfo { id:783 name:<unnamed> method:(FuncId(771), 1) args: 3 non_temp: 6 temp: 4})
[]
+:00000 [07] init_method reg:10 arg:3 req:3 opt:0 rest:false block:None stack_offset:9
 :00001 [08] %7 = %1.size()                       [<INVALID>]
 :00003 [08] %7 = -%7                             [<INVALID>]
 :00004 [09] %8 = %3
 :00005 [07] %3 = %0.indent(%7;2)                 [<INVALID>]
 :00007 [08] %7 = literal[/(?m)^( *)break\n/]
 :00008 [09] %8 = literal[""]
 :00009 [07] %3 = %3.gsub(%7;2)                   [<INVALID>]
 :00011 [08] %7 = %3
 :00012 [09] %8 = const[COMMANDS]                 [<INVALID>]
 :00013 [07] %3 = %0.expand_methods(%7;2)         [<INVALID>]
 :00015 [08] %7 = literal[/(?m)^(\d+), (\d+), \.\.\., (\d+)$/]
 :00016 [08] %7 = %2.=~(%7;1)                     [<INVALID>]
 :00018 [07] condnotbr %7 =>:00037
+:00019 [08] %7 = $1
 :00020 [08] %7 = %7.to_i()                       [<INVALID>]
 :00022 [09] %8 = $2
 :00023 [09] %8 = %8.to_i()                       [<INVALID>]
 :00025 [10] %9 = $3
 :00026 [10] %9 = %9.to_i()                       [<INVALID>]
 :00028 [10] %4 = %7
 :00029 [10] %5 = %8
 :00030 [10] %6 = %9
 :00031 [08] %7 = literal[52101121]
 :00032 [09] %8 = %6
 :00033 [10] %9 = %5 - %4                         [<INVALID>][<INVALID>]
 :00034 [08] %7 = %4.step(%8;2 &%7)               [<INVALID>]
 :00036 [07] ret %7
+:00037 [08] %7 = dynvar(1, %2)
 :00038 [09] %8 = %2.to_i()                       [<INVALID>]
 :00040 [07] %7:.[%8:] = %3
 :00041 [07] ret %3
------------------------------------
------------------------------------
<block in specialize_clock_handlers> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1354
meta:on_stack:true kind:Ruby mode:method FuncId(784) regs:5 ISeq(RubyFuncInfo { id:784 name:<unnamed> method:(FuncId(772), 1) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal[52166657]
 :00002 [05] %4 = literal[/(?m)@hclk (==|>=|!=) (\d+)/]
 :00003 [03] %2 = %2.gsub(%4;1 &%3)               [<INVALID>]
 :00005 [04] %3 = dynvar(1, %1)
 :00006 [05] %4 = %0.remove_trivial_branches(%2;1) [<INVALID>]
 :00008 [03] %3:.[%1:] = %4
 :00009 [03] ret %4
------------------------------------
------------------------------------
<block in add_fastpath> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1365
meta:on_stack:true kind:Ruby mode:method FuncId(785) regs:8 ISeq(RubyFuncInfo { id:785 name:<unnamed> method:(FuncId(773), 1) args: 2 non_temp: 3 temp: 4})
[]
+:00000 [04] init_method reg:7 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = %1 % 8: i16                     [<INVALID>][<INVALID>]
 :00002 [05] _%4 = %4 == 0: i16                   [<INVALID>][<INVALID>]
 :00003 [04] condnotbr _%4 =>:00007
+:00004 [05] _%4 = %1 < 256: i16                  [<INVALID>][<INVALID>]
 :00005 [04] condnotbr _%4 =>:00007
+:00006 [04] br =>:00009
+:00007 [05] %4 = nil
 :00008 [04] ret %4
+:00009 [05] %4 = literal[0..7]
 :00010 [06] %5 = literal[52232193]
 :00011 [05] %4 = %4.map( &%5)                    [<INVALID>]
 :00013 [04] %3 = %0.gen(%4;1)*                   [<INVALID>]
 :00015 [06] %5 = %3
 :00016 [07] %6 = %1
 :00017 [05] %4 = yield(%5; 2)
 :00018 [05] %3 = %4
 :00019 [05] %4 = dynvar(1, %1)
 :00020 [06] %5 = literal["@hclk + 8 <= @hclk_target"]
 :00021 [07] %6 = %3
 :00022 [08] %7 = %2
 :00023 [06] %5 = %0.branch(%5;3)                 [<INVALID>]
 :00025 [04] %4:.[%1:] = %5
 :00026 [04] ret %5
------------------------------------
------------------------------------
<block in batch_render_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1386
meta:on_stack:true kind:Ruby mode:method FuncId(786) regs:12 ISeq(RubyFuncInfo { id:786 name:<unnamed> method:(FuncId(774), 1) args: 1 non_temp: 1 temp: 10})
[]
+:00000 [02] init_method reg:11 arg:1 req:1 opt:0 rest:false block:None stack_offset:9
 :00001 [04] %3 = literal["      pixel"]
 :00002 [05] %4 = %1
 :00003 [06] %5 = literal[" = @bg_pixels["]
 :00004 [07] %6 = %1
 :00005 [08] %7 = literal["]"]
 :00006 [04] %3 = concat(%3; 5)
 :00007 [05] %4 = literal["      if sprite = @sp_map[@hclk"]
 :00008 [06] _%5 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00009 [05] condnotbr _%5 =>:00014
+:00010 [06] %5 = literal[" + "]
 :00011 [07] %6 = %1
 :00012 [06] %5 = concat(%5; 2)
 :00013 [06] br =>:00015
+:00014 [06] %5 = literal[""]
+:00015 [07] %6 = literal["]"]
 :00016 [05] %4 = concat(%4; 3)
 :00017 [06] %5 = literal["        if pixel"]
 :00018 [07] %6 = %1
 :00019 [08] %7 = literal[" % 4 == 0"]
 :00020 [06] %5 = concat(%5; 3)
 :00021 [07] %6 = literal["          pixel"]
 :00022 [08] %7 = %1
 :00023 [09] %8 = literal[" = sprite[2]"]
 :00024 [07] %6 = concat(%6; 3)
 :00025 [08] %7 = literal["        else"]
 :00026 [09] %8 = dynvar(1, %2)
 :00027 [09] %8 = %8 + %1                         [<INVALID>][<INVALID>]
 :00028 [09] _%8 = %8 == 255: i16                 [<INVALID>][<INVALID>]
 :00029 [08] condnotbr _%8 =>:00032
+:00030 [09] %8 = literal[[]]
 :00031 [09] br =>:00033
+:00032 [09] %8 = literal[["          @sp_zero_hit = true if sprite[1]"]]
+:00033 [10] %9 = literal["          pixel"]
 :00034 [11] %10 = %1
 :00035 [12] %11 = literal[" = sprite[2] unless sprite[0]"]
 :00036 [10] %9 = concat(%9; 3)
 :00037 [11] %10 = literal["        end"]
 :00038 [12] %11 = literal["      end"]
 :00039 [03] %2 = array[%3; 9]
 :00040 [02] ret %2
------------------------------------
------------------------------------
<block in batch_render_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1399
meta:on_stack:true kind:Ruby mode:method FuncId(787) regs:5 ISeq(RubyFuncInfo { id:787 name:<unnamed> method:(FuncId(774), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal["@output_color[pixel"]
 :00002 [04] %3 = %1
 :00003 [05] %4 = literal["]"]
 :00004 [03] %2 = concat(%2; 3)
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in batch_render_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1401
meta:on_stack:true kind:Ruby mode:method FuncId(788) regs:7 ISeq(RubyFuncInfo { id:788 name:<unnamed> method:(FuncId(774), 1) args: 1 non_temp: 1 temp: 5})
[]
+:00000 [02] init_method reg:6 arg:1 req:1 opt:0 rest:false block:None stack_offset:7
 :00001 [03] %2 = literal["      pixel"]
 :00002 [04] %3 = %1
 :00003 [05] %4 = literal[" = (sprite = @sp_map[@hclk "]
 :00004 [06] _%5 = %1 != 0: i16                   [<INVALID>][<INVALID>]
 :00005 [05] condnotbr _%5 =>:00010
+:00006 [06] %5 = literal[" + "]
 :00007 [07] %6 = %1
 :00008 [06] %5 = concat(%5; 2)
 :00009 [06] br =>:00011
+:00010 [06] %5 = literal[""]
+:00011 [07] %6 = literal["]) ? sprite[2] : 0"]
 :00012 [03] %2 = concat(%2; 5)
 :00013 [02] ret %2
------------------------------------
------------------------------------
<block in batch_render_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1404
meta:on_stack:true kind:Ruby mode:method FuncId(789) regs:5 ISeq(RubyFuncInfo { id:789 name:<unnamed> method:(FuncId(774), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal["@output_color[pixel"]
 :00002 [04] %3 = %1
 :00003 [05] %4 = literal["]"]
 :00004 [03] %2 = concat(%2; 3)
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in batch_render_pixels> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1408
meta:on_stack:true kind:Ruby mode:method FuncId(790) regs:5 ISeq(RubyFuncInfo { id:790 name:<unnamed> method:(FuncId(774), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = literal["@output_color[@bg_pixels["]
 :00002 [04] %3 = %1
 :00003 [05] %4 = literal["]]"]
 :00004 [03] %2 = concat(%2; 3)
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in split_mode> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1434
meta:on_stack:true kind:Ruby mode:method FuncId(791) regs:5 ISeq(RubyFuncInfo { id:791 name:<unnamed> method:(FuncId(777), 1) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = dynvar(1, %1)
 :00002 [04] %3 = dynvar(1, %2)
 :00003 [05] %4 = %1
 :00004 [03] %2 = %0.replace_cond_var(%2;3)       [<INVALID>]
 :00006 [03] %2 = %0.remove_trivial_branches(%2;1) [<INVALID>]
 :00008 [03] %2 = %0.rebuild_loop(%2;1)           [<INVALID>]
 :00010 [02] ret %2
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1442
meta:on_stack:true kind:Ruby mode:method FuncId(792) regs:5 ISeq(RubyFuncInfo { id:792 name:<unnamed> method:(FuncId(778), 1) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = dynvar(1, %2)
 :00002 [04] %3 = %4.[%2]                         [<INVALID>][<INVALID>]
 :00003 [04] condbr %3 =>:00007
+:00004 [05] %4 = dynvar(1, %2)
 :00005 [05] %3 = literal[[]]
 :00006 [04] %4:.[%2:] = %3
+:00007 [04] %3 = %3.<<(%1;1)                     [<INVALID>]
 :00009 [03] ret %3
------------------------------------
------------------------------------
<block in build_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1449
meta:on_stack:true kind:Ruby mode:method FuncId(793) regs:6 ISeq(RubyFuncInfo { id:793 name:<unnamed> method:(FuncId(778), 1) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal["  when "]
 :00002 [05] %4 = literal[", "]
 :00003 [05] %4 = %1 * %4                         [<INVALID>][<INVALID>]
 :00004 [06] %5 = literal["\n"]
 :00005 [04] %3 = concat(%3; 3)
 :00006 [05] %4 = 4: i32
 :00007 [06] %5 = %2
 :00008 [05] %4 = %0.indent(%4;2)                 [<INVALID>]
 :00010 [04] %3 = %3 + %4                         [<INVALID>][<INVALID>]
 :00011 [03] ret %3
------------------------------------
------------------------------------
<block in rebuild_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1460
meta:on_stack:true kind:Ruby mode:method FuncId(794) regs:6 ISeq(RubyFuncInfo { id:794 name:<unnamed> method:(FuncId(779), 1) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal[", "]
 :00002 [04] %3 = %1.split(%3;1)                  [<INVALID>]
 :00004 [05] %4 = literal[52297729]
 :00005 [04] %3 = %3.each( &%4)                   [<INVALID>]
 :00007 [03] ret %3
------------------------------------
------------------------------------
<block in parse_clock_handlers> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1342
meta:on_stack:true kind:Ruby mode:method FuncId(795) regs:4 ISeq(RubyFuncInfo { id:795 name:<unnamed> method:(FuncId(771), 2) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = dynvar(2, %2)
 :00002 [04] %3 = dynvar(1, %3)
 :00003 [02] %2:.[%1:] = %3
 :00004 [02] ret %3
------------------------------------
------------------------------------
<block in specialize_clock_handlers> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1356
meta:on_stack:true kind:Ruby mode:method FuncId(796) regs:5 ISeq(RubyFuncInfo { id:796 name:<unnamed> method:(FuncId(772), 2) args: 0 non_temp: 0 temp: 4})
[]
+:00000 [01] init_method reg:4 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = dynvar(1, %1)
 :00002 [03] %2 = $1
 :00003 [03] %2 = %2.to_sym()                     [<INVALID>]
 :00005 [04] %3 = $2
 :00006 [04] %3 = %3.to_i()                       [<INVALID>]
 :00008 [02] %1 = %1.send(%2;2)                   [<INVALID>]
 :00010 [01] ret %1
------------------------------------
------------------------------------
<block in add_fastpath> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1367
meta:on_stack:true kind:Ruby mode:method FuncId(797) regs:4 ISeq(RubyFuncInfo { id:797 name:<unnamed> method:(FuncId(773), 2) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = dynvar(2, %1)
 :00002 [04] %3 = dynvar(1, %1)
 :00003 [04] %3 = %3 + %1                         [<INVALID>][<INVALID>]
 :00004 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<block in rebuild_loop> /home/monochrome/optcarrot/lib/optcarrot/ppu.rb:1461
meta:on_stack:true kind:Ruby mode:method FuncId(798) regs:6 ISeq(RubyFuncInfo { id:798 name:<unnamed> method:(FuncId(779), 2) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = dynvar(2, %2)
 :00002 [04] %3 = %1.to_i()                       [<INVALID>]
 :00004 [05] %4 = -4: i32
 :00005 [06] %5 = dynvar(1, %2)
 :00006 [05] %4 = %0.indent(%4;2)                 [<INVALID>]
 :00008 [02] %2:.[%3:] = %4
 :00009 [02] ret %4
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(800) regs:2 ISeq(RubyFuncInfo { id:800 name:/main method:(FuncId(800), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(801)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(801) regs:2 ISeq(RubyFuncInfo { id:801 name:Optcarrot method:(FuncId(801), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Palette: FuncId(802)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(802) regs:2 ISeq(RubyFuncInfo { id:802 name:Palette method:(FuncId(802), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] _ = %0.module_function()             [<INVALID>]
 :00003 [01] method_def defacto_palette: FuncId(803)
 :00004 [01] method_def nestopia_palette: FuncId(804)
 :00005 [02] %1 = :nestopia_palette
 :00006 [01] ret %1
------------------------------------
------------------------------------
<defacto_palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:7
meta:on_stack:true kind:Ruby mode:method FuncId(803) regs:10 ISeq(RubyFuncInfo { id:803 name:defacto_palette method:(FuncId(803), 0) args: 0 non_temp: 0 temp: 9})
[]
+:00000 [01] init_method reg:9 arg:0 req:0 opt:0 rest:false block:None stack_offset:8
 :00001 [03] %2 = literal[[1.0, 1.0, 1.0]]
 :00002 [04] %3 = literal[[1.0, 0.8, 0.81]]
 :00003 [05] %4 = literal[[0.78, 0.94, 0.66]]
 :00004 [06] %5 = literal[[0.79, 0.77, 0.63]]
 :00005 [07] %6 = literal[[0.82, 0.83, 1.12]]
 :00006 [08] %7 = literal[[0.81, 0.71, 0.87]]
 :00007 [09] %8 = literal[[0.68, 0.79, 0.79]]
 :00008 [10] %9 = literal[[0.7, 0.7, 0.7]]
 :00009 [02] %1 = array[%2; 8]
 :00010 [03] %2 = literal[52756481]
 :00011 [02] %1 = %1.flat_map( &%2)               [<INVALID>]
 :00013 [01] ret %1
------------------------------------
------------------------------------
<nestopia_palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:38
meta:on_stack:true kind:Ruby mode:method FuncId(804) regs:4 ISeq(RubyFuncInfo { id:804 name:nestopia_palette method:(FuncId(804), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal[0..511]
 :00002 [03] %2 = literal[52822017]
 :00003 [02] %1 = %1.map( &%2)                    [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<block in defacto_palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:17
meta:on_stack:true kind:Ruby mode:method FuncId(805) regs:7 ISeq(RubyFuncInfo { id:805 name:<unnamed> method:(FuncId(803), 1) args: 3 non_temp: 3 temp: 3})
[]
+:00000 [04] init_method reg:6 arg:3 req:3 opt:0 rest:false block:None stack_offset:7
 :00001 [05] %4 = literal[[6710886, 10888, 1315495, 3866788, 6029438, 7209024, 7079424, 5643520, 3355904, 739328, 20992, 20232, 16461, 0, 0, 0, 11382189, 1400793, 4342015, 7677950, 10492620, 12000891, 11874592, 10046976, 7040256, 3704576, 824064, 36658, 31885, 0, 0, 0, 16776959, 6598911, 9605375, 13006591, 15952639, 16674508, 16679280, 15375906, 12369408, 8968192, 6087728, 4579458, 4771294, 5197647, 0, 0, 16776959, 12640255, 13882111, 15255807, 16499455, 16696554, 16698565, 16242853, 15000980, 13627286, 12448939, 11793356, 11922418, 12105912, 0, 0]]
 :00002 [06] %5 = literal[52887553]
 :00003 [05] %4 = %4.map( &%5)                    [<INVALID>]
 :00005 [04] ret %4
------------------------------------
------------------------------------
<block in nestopia_palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:39
meta:on_stack:true kind:Ruby mode:method FuncId(806) regs:15 ISeq(RubyFuncInfo { id:806 name:<unnamed> method:(FuncId(804), 1) args: 1 non_temp: 9 temp: 5})
[]
+:00000 [10] init_method reg:14 arg:1 req:1 opt:0 rest:false block:None stack_offset:11
 :00001 [11] %10 = 6: i32
 :00002 [11] %10 = %1.>>(%10;1)                   [<INVALID>]
 :00004 [11] %10 = %10 & 7: i16                   [<INVALID>][<INVALID>]
 :00005 [12] %11 = 4: i32
 :00006 [12] %11 = %1.>>(%11;1)                   [<INVALID>]
 :00008 [12] %11 = %11 & 3: i16                   [<INVALID>][<INVALID>]
 :00009 [13] %12 = %1 & 15: i16                   [<INVALID>][<INVALID>]
 :00010 [13] %2 = %10
 :00011 [13] %3 = %11
 :00012 [13] %4 = %12
 :00013 [12] %11 = literal[[-0.12, 0.4]]
 :00014 [13] %12 = literal[[0.0, 0.68]]
 :00015 [14] %13 = literal[[0.31, 1.0]]
 :00016 [15] %14 = literal[[0.72, 1.0]]
 :00017 [11] %10 = array[%11; 4]
 :00018 [11] %10 = %10.[%3]                       [<INVALID>][<INVALID>]
 :00019 [11] %11; 2 = expand(%10)
 :00020 [11] %5 = %11
 :00021 [11] %6 = %12
 :00022 [11] _%10 = %4 == 0: i16                  [<INVALID>][<INVALID>]
 :00023 [10] condnotbr _%10 =>:00025
+:00024 [10] %5 = %6
+:00025 [11] _%10 = %4 == 13: i16                 [<INVALID>][<INVALID>]
 :00026 [10] condnotbr _%10 =>:00028
+:00027 [10] %6 = %5
+:00028 [11] _%10 = %4 >= 14: i16                 [<INVALID>][<INVALID>]
 :00029 [10] condnotbr _%10 =>:00032
+:00030 [10] %6 = 0: i32
 :00031 [10] %5 = %6
+:00032 [11] %10 = %6 + %5                        [<INVALID>][<INVALID>]
 :00033 [12] %11 = literal[0.5]
 :00034 [10] %7 = %10 * %11                       [<INVALID>][<INVALID>]
 :00035 [11] %10 = %6 - %5                        [<INVALID>][<INVALID>]
 :00036 [12] %11 = literal[0.5]
 :00037 [10] %8 = %10 * %11                       [<INVALID>][<INVALID>]
 :00038 [11] %10 = const[Complex]                 [<INVALID>]
 :00039 [12] %11 = %8
 :00040 [13] %12 = const[Math::PI]                [<INVALID>]
 :00041 [13] %12 = %12 / 6: i16                   [<INVALID>][<INVALID>]
 :00042 [14] %13 = %4 - 3: i16                    [<INVALID>][<INVALID>]
 :00043 [13] %12 = %12 * %13                      [<INVALID>][<INVALID>]
 :00044 [10] %9 = %10.polar(%11;2)                [<INVALID>]
 :00046 [11] _%10 = %2 != 0: i16                  [<INVALID>][<INVALID>]
 :00047 [10] condnotbr _%10 =>:00089
+:00048 [11] _%10 = %4 <= 13: i16                 [<INVALID>][<INVALID>]
 :00049 [10] condnotbr _%10 =>:00089
+:00050 [11] _%10 = %2 == 7: i16                  [<INVALID>][<INVALID>]
 :00051 [10] condnotbr _%10 =>:00059
+:00052 [11] %10 = literal[0.79399]
 :00053 [11] %10 = %7 * %10                       [<INVALID>][<INVALID>]
 :00054 [12] %11 = literal[0.0782838]
 :00055 [11] %10 = %10 - %11                      [<INVALID>][<INVALID>]
 :00056 [12] %11 = literal[1.13]
 :00057 [10] %7 = %10 * %11                       [<INVALID>][<INVALID>]
 :00058 [10] br =>:00089
+:00059 [11] %10 = literal[0.79399]
 :00060 [11] %10 = 1: i16 - %10                   [<INVALID>][<INVALID>]
 :00061 [11] %10 = %6 * %10                       [<INVALID>][<INVALID>]
 :00062 [12] %11 = literal[0.0782838]
 :00063 [11] %10 = %10 + %11                      [<INVALID>][<INVALID>]
 :00064 [12] %11 = literal[0.5]
 :00065 [10] %6 = %10 * %11                       [<INVALID>][<INVALID>]
 :00066 [11] %10 = literal[0.5]
 :00067 [11] %10 = %6 * %10                       [<INVALID>][<INVALID>]
 :00068 [10] %7 = %7 - %10                        [<INVALID>][<INVALID>]
 :00069 [11] %10 = literal[[3, 5, 6]]
 :00070 [11] %10 = %10.include?(%2;1)             [<INVALID>]
 :00072 [10] condnotbr %10 =>:00077
+:00073 [11] %10 = literal[0.6]
 :00074 [10] %6 = %6 * %10                        [<INVALID>][<INVALID>]
 :00075 [11] %10 = %6
 :00076 [10] %7 = %7 - %10                        [<INVALID>][<INVALID>]
+:00077 [11] %10 = const[Complex]                 [<INVALID>]
 :00078 [12] %11 = %6
 :00079 [13] %12 = const[Math::PI]                [<INVALID>]
 :00080 [13] %12 = %12 / 12: i16                  [<INVALID>][<INVALID>]
 :00081 [14] %13 = literal[[0, 6, 10, 8, 2, 4, 0, 0]]
 :00082 [14] %13 = %13.[%2]                       [<INVALID>][<INVALID>]
 :00083 [14] %13 = %13 * 2: i16                   [<INVALID>][<INVALID>]
 :00084 [14] %13 = %13 - 7: i16                   [<INVALID>][<INVALID>]
 :00085 [13] %12 = %12 * %13                      [<INVALID>][<INVALID>]
 :00086 [11] %10 = %10.polar(%11;2)               [<INVALID>]
 :00088 [10] %9 = %9 + %10                        [<INVALID>][<INVALID>]
+:00089 [12] %11 = literal[[105, 0.57]]
 :00090 [13] %12 = literal[[251, 0.351]]
 :00091 [14] %13 = literal[[15, 1.015]]
 :00092 [11] %10 = array[%11; 3]
 :00093 [12] %11 = literal[52953089]
 :00094 [11] %10 = %10.map( &%11)                 [<INVALID>]
 :00096 [10] ret %10
------------------------------------
------------------------------------
<block in defacto_palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:28
meta:on_stack:true kind:Ruby mode:method FuncId(807) regs:9 ISeq(RubyFuncInfo { id:807 name:<unnamed> method:(FuncId(803), 2) args: 1 non_temp: 4 temp: 4})
[]
+:00000 [05] init_method reg:8 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [07] %6 = 16: i32
 :00002 [07] %6 = %1.>>(%6;1)                     [<INVALID>]
 :00004 [07] %6 = %6 & 255: i16                   [<INVALID>][<INVALID>]
 :00005 [08] %7 = dynvar(1, %1)
 :00006 [07] %6 = %6 * %7                         [<INVALID>][<INVALID>]
 :00007 [07] %6 = %6.floor()                      [<INVALID>]
 :00009 [08] %7 = 255: i32
 :00010 [06] %5 = array[%6; 2]
 :00011 [05] %2 = %5.min()                        [<INVALID>]
 :00013 [07] %6 = 8: i32
 :00014 [07] %6 = %1.>>(%6;1)                     [<INVALID>]
 :00016 [07] %6 = %6 & 255: i16                   [<INVALID>][<INVALID>]
 :00017 [08] %7 = dynvar(1, %2)
 :00018 [07] %6 = %6 * %7                         [<INVALID>][<INVALID>]
 :00019 [07] %6 = %6.floor()                      [<INVALID>]
 :00021 [08] %7 = 255: i32
 :00022 [06] %5 = array[%6; 2]
 :00023 [05] %3 = %5.min()                        [<INVALID>]
 :00025 [07] %6 = 0: i32
 :00026 [07] %6 = %1.>>(%6;1)                     [<INVALID>]
 :00028 [07] %6 = %6 & 255: i16                   [<INVALID>][<INVALID>]
 :00029 [08] %7 = dynvar(1, %3)
 :00030 [07] %6 = %6 * %7                         [<INVALID>][<INVALID>]
 :00031 [07] %6 = %6.floor()                      [<INVALID>]
 :00033 [08] %7 = 255: i32
 :00034 [06] %5 = array[%6; 2]
 :00035 [05] %4 = %5.min()                        [<INVALID>]
 :00037 [07] %6 = %2
 :00038 [08] %7 = %3
 :00039 [09] %8 = %4
 :00040 [06] %5 = array[%6; 3]
 :00041 [05] ret %5
------------------------------------
------------------------------------
<block in nestopia_palette> /home/monochrome/optcarrot/lib/optcarrot/palette.rb:58
meta:on_stack:true kind:Ruby mode:method FuncId(808) regs:9 ISeq(RubyFuncInfo { id:808 name:<unnamed> method:(FuncId(804), 2) args: 2 non_temp: 3 temp: 5})
[]
+:00000 [04] init_method reg:8 arg:2 req:2 opt:0 rest:false block:None stack_offset:8
 :00001 [05] %4 = dynvar(1, %7)
 :00002 [06] %5 = const[Complex]                  [<INVALID>]
 :00003 [07] %6 = %2 * 2: i16                     [<INVALID>][<INVALID>]
 :00004 [08] %7 = %1 - 33: i16                    [<INVALID>][<INVALID>]
 :00005 [09] %8 = const[Math::PI]                 [<INVALID>]
 :00006 [08] %7 = %7 * %8                         [<INVALID>][<INVALID>]
 :00007 [08] %7 = %7 / 180: i16                   [<INVALID>][<INVALID>]
 :00008 [06] %5 = %5.polar(%6;2)                  [<INVALID>]
 :00010 [07] %6 = dynvar(1, %9)
 :00011 [07] %6 = %6.conjugate()                  [<INVALID>]
 :00013 [06] %5 = %5 * %6                         [<INVALID>][<INVALID>]
 :00014 [06] %5 = %5.real()                       [<INVALID>]
 :00016 [04] %3 = %4 + %5                         [<INVALID>][<INVALID>]
 :00017 [06] %5 = 0: i32
 :00018 [07] %6 = %3 * 255: i16                   [<INVALID>][<INVALID>]
 :00019 [07] %6 = %6.round()                      [<INVALID>]
 :00021 [08] %7 = 255: i32
 :00022 [05] %4 = array[%5; 3]
 :00023 [05] %4 = %4.sort()                       [<INVALID>]
 :00025 [06] %5 = 1: i32
 :00026 [05] %4 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00027 [04] ret %4
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(809) regs:2 ISeq(RubyFuncInfo { id:809 name:/main method:(FuncId(809), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(810)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(810) regs:2 ISeq(RubyFuncInfo { id:810 name:Optcarrot method:(FuncId(810), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] _ = module_def Driver: FuncId(811)
 :00002 [01] _ = class_def Video < _: FuncId(812)
 :00003 [01] _ = class_def Audio < _: FuncId(813)
 :00004 [02] %1 = class_def Input < _: FuncId(814)
 :00005 [01] ret %1
------------------------------------
------------------------------------
<Driver> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(811) regs:8 ISeq(RubyFuncInfo { id:811 name:Driver method:(FuncId(811), 0) args: 0 non_temp: 0 temp: 7})
[]
+:00000 [01] init_method reg:7 arg:0 req:0 opt:0 rest:false block:None stack_offset:7
 :00001 [03] %2 = :video
 :00002 [04] %3 = literal[{:sdl2=>:SDL2Video, :sfml=>:SFMLVideo, :png=>:PNGVideo, :gif=>:GIFVideo, :sixel=>:SixelVideo, :mplayer=>:MPlayerVideo, :none=>:Video}]
 :00003 [05] %4 = :audio
 :00004 [06] %5 = literal[{:sdl2=>:SDL2Audio, :sfml=>:SFMLAudio, :ao=>:AoAudio, :wav=>:WAVAudio, :none=>:Audio}]
 :00005 [07] %6 = :input
 :00006 [08] %7 = literal[{:sdl2=>:SDL2Input, :sfml=>:SFMLInput, :term=>:TermInput, :log=>:LogInput, :none=>:Input}]
 :00007 [02] %1 = hash[%2; 3]
 :00008 [01] const[DRIVER_DB] = %1
 :00009 [01] _ = %0.module_function()             [<INVALID>]
 :00011 [01] method_def load: FuncId(815)
 :00012 [01] method_def load_each: FuncId(816)
 :00013 [02] %1 = :load_each
 :00014 [01] ret %1
------------------------------------
------------------------------------
<Video> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:62
meta:on_stack:true kind:Ruby mode:class_def FuncId(812) regs:2 ISeq(RubyFuncInfo { id:812 name:Video method:(FuncId(812), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = 256: i32
 :00002 [01] const[WIDTH] = %1
 :00003 [02] %1 = 292: i32
 :00004 [01] const[TV_WIDTH] = %1
 :00005 [02] %1 = 224: i32
 :00006 [01] const[HEIGHT] = %1
 :00007 [01] method_def initialize: FuncId(817)
 :00008 [02] %1 = :palette
 :00009 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00011 [01] method_def init: FuncId(818)
 :00012 [01] method_def dispose: FuncId(819)
 :00013 [01] method_def tick: FuncId(820)
 :00014 [01] method_def change_window_size: FuncId(821)
 :00015 [01] method_def on_resize: FuncId(822)
 :00016 [02] %1 = :on_resize
 :00017 [01] ret %1
------------------------------------
------------------------------------
<Audio> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:97
meta:on_stack:true kind:Ruby mode:class_def FuncId(813) regs:2 ISeq(RubyFuncInfo { id:813 name:Audio method:(FuncId(813), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[{8=>"c*", 16=>"v*"}]
 :00002 [01] const[PACK_FORMAT] = %1
 :00003 [02] %1 = 3: i32
 :00004 [01] const[BUFFER_IN_FRAME] = %1
 :00005 [01] method_def initialize: FuncId(823)
 :00006 [01] method_def spec: FuncId(824)
 :00007 [01] method_def init: FuncId(825)
 :00008 [01] method_def dispose: FuncId(826)
 :00009 [01] method_def tick: FuncId(827)
 :00010 [02] %1 = :tick
 :00011 [01] ret %1
------------------------------------
------------------------------------
<Input> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:126
meta:on_stack:true kind:Ruby mode:class_def FuncId(814) regs:2 ISeq(RubyFuncInfo { id:814 name:Input method:(FuncId(814), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] method_def initialize: FuncId(828)
 :00002 [01] method_def init: FuncId(829)
 :00003 [01] method_def dispose: FuncId(830)
 :00004 [01] method_def tick: FuncId(831)
 :00005 [01] method_def event: FuncId(832)
 :00006 [02] %1 = :event
 :00007 [01] ret %1
------------------------------------
------------------------------------
<load> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:32
meta:on_stack:true kind:Ruby mode:method FuncId(815) regs:9 ISeq(RubyFuncInfo { id:815 name:load method:(FuncId(815), 0) args: 1 non_temp: 4 temp: 4})
[]
+:00000 [05] init_method reg:8 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [06] %5 = %1
 :00002 [07] %6 = :video
 :00003 [08] %7 = %1.video()                      [<INVALID>]
 :00005 [06] %5 = %0.load_each(%5;3)              [<INVALID>]
 :00007 [05] %2 = %5.new(%1;1)                    [<INVALID>]
 :00009 [06] %5 = %1
 :00010 [07] %6 = :audio
 :00011 [08] %7 = %1.audio()                      [<INVALID>]
 :00013 [06] %5 = %0.load_each(%5;3)              [<INVALID>]
 :00015 [05] %3 = %5.new(%1;1)                    [<INVALID>]
 :00017 [06] %5 = %1
 :00018 [07] %6 = :input
 :00019 [08] %7 = %1.input()                      [<INVALID>]
 :00021 [06] %5 = %0.load_each(%5;3)              [<INVALID>]
 :00023 [07] %6 = %1
 :00024 [08] %7 = %2
 :00025 [05] %4 = %5.new(%6;2)                    [<INVALID>]
 :00027 [07] %6 = %2
 :00028 [08] %7 = %3
 :00029 [09] %8 = %4
 :00030 [06] %5 = array[%6; 3]
 :00031 [05] ret %5
------------------------------------
------------------------------------
<load_each> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:39
meta:on_stack:true kind:Ruby mode:method FuncId(816) regs:11 ISeq(RubyFuncInfo { id:816 name:load_each method:(FuncId(816), 0) args: 3 non_temp: 5 temp: 5})
[]
+:00000 [06] init_method reg:10 arg:3 req:3 opt:0 rest:false block:None stack_offset:9
 :00001 [06] condnotbr %3 =>:00037
+:00002 [07] %6 = const[DRIVER_DB]                [<INVALID>]
 :00003 [07] %6 = %6.[%2]                         [<INVALID>][<INVALID>]
 :00004 [06] %4 = %6.[%3]                         [<INVALID>][<INVALID>]
 :00005 [06] condnotbr %4 =>:00007
+:00006 [06] br =>:00014
+:00007 [07] %6 = literal["unknown "]
 :00008 [08] %7 = %2
 :00009 [09] %8 = literal[" driver: "]
 :00010 [10] %9 = %3
 :00011 [07] %6 = concat(%6; 4)
 :00012 [06] _ = %0.raise(%6;1)                   [<INVALID>]
+:00014 [07] %6 = :none
 :00015 [07] _%6 = %3 == %6                       [<INVALID>][<INVALID>]
 :00016 [06] condnotbr _%6 =>:00018
+:00017 [06] br =>:00025
+:00018 [07] %6 = literal["driver/"]
 :00019 [08] %7 = %3
 :00020 [09] %8 = literal["_"]
 :00021 [10] %9 = %2
 :00022 [07] %6 = concat(%6; 4)
 :00023 [06] _ = %0.require_relative(%6;1)        [<INVALID>]
+:00025 [07] %6 = literal["`"]
 :00026 [08] %7 = %3
 :00027 [09] %8 = literal["' "]
 :00028 [10] %9 = %2
 :00029 [11] %10 = literal[" driver is selected"]
 :00030 [07] %6 = concat(%6; 5)
 :00031 [06] _ = %1.debug(%6;1)                   [<INVALID>]
 :00033 [07] %6 = const[Optcarrot]                [<INVALID>]
 :00034 [07] %6 = %6.const_get(%4;1)              [<INVALID>]
 :00036 [06] ret %6
+:00037 [06] %5 = nil
 :00038 [07] %6 = const[DRIVER_DB]                [<INVALID>]
 :00039 [07] %6 = %6.[%2]                         [<INVALID>][<INVALID>]
 :00040 [08] %7 = literal[54591489]
 :00041 [06] _ = %6.each_key( &%7)                [<INVALID>]
 :00043 [06] ret %5
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:67
meta:on_stack:true kind:Ruby mode:method FuncId(817) regs:4 ISeq(RubyFuncInfo { id:817 name:initialize method:(FuncId(817), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] @conf: - = %1
 :00002 [03] %2 = @conf: -
 :00003 [03] %2 = %2.nestopia_palette()           [<INVALID>]
 :00005 [02] condnotbr %2 =>:00010
+:00006 [03] %2 = const[Palette]                  [<INVALID>]
 :00007 [03] %2 = %2.nestopia_palette()           [<INVALID>]
 :00009 [03] br =>:00013
+:00010 [03] %2 = const[Palette]                  [<INVALID>]
 :00011 [03] %2 = %2.defacto_palette()            [<INVALID>]
+:00013 [02] @palette_rgb: - = %2
 :00014 [04] %3 = literal[0..4096]
 :00015 [03] %2 = array[%3; 1]
 :00016 [02] @palette: - = %2
 :00017 [03] %2 = %0.init()                       [<INVALID>]
 :00019 [02] ret %2
------------------------------------
------------------------------------
<init> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:76
meta:on_stack:true kind:Ruby mode:method FuncId(818) regs:2 ISeq(RubyFuncInfo { id:818 name:init method:(FuncId(818), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = literal[[]]
 :00002 [01] @times: - = %1
 :00003 [01] ret %1
------------------------------------
------------------------------------
<dispose> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:80
meta:on_stack:true kind:Ruby mode:method FuncId(819) regs:2 ISeq(RubyFuncInfo { id:819 name:dispose method:(FuncId(819), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<tick> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:83
meta:on_stack:true kind:Ruby mode:method FuncId(820) regs:5 ISeq(RubyFuncInfo { id:820 name:tick method:(FuncId(820), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = @times: -
 :00002 [04] %3 = const[Process]                  [<INVALID>]
 :00003 [05] %4 = const[Process::CLOCK_MONOTONIC] [<INVALID>]
 :00004 [04] %3 = %3.clock_gettime(%4;1)          [<INVALID>]
 :00006 [02] _ = %2.<<(%3;1)                      [<INVALID>]
 :00008 [03] %2 = @times: -
 :00009 [03] %2 = %2.size()                       [<INVALID>]
 :00011 [03] _%2 = %2 > 10: i16                   [<INVALID>][<INVALID>]
 :00012 [02] condnotbr _%2 =>:00016
+:00013 [03] %2 = @times: -
 :00014 [02] _ = %2.shift()                       [<INVALID>]
+:00016 [03] %2 = @times: -
 :00017 [03] %2 = %2.size()                       [<INVALID>]
 :00019 [03] _%2 = %2 < 2: i16                    [<INVALID>][<INVALID>]
 :00020 [02] condnotbr _%2 =>:00023
+:00021 [03] %2 = 0: i32
 :00022 [02] ret %2
+:00023 [03] %2 = @times: -
 :00024 [03] %2 = %2.last()                       [<INVALID>]
 :00026 [04] %3 = @times: -
 :00027 [04] %3 = %3.first()                      [<INVALID>]
 :00029 [03] %2 = %2 - %3                         [<INVALID>][<INVALID>]
 :00030 [04] %3 = @times: -
 :00031 [04] %3 = %3.size()                       [<INVALID>]
 :00033 [04] %3 = %3 - 1: i16                     [<INVALID>][<INVALID>]
 :00034 [03] %2 = %2 / %3                         [<INVALID>][<INVALID>]
 :00035 [03] %2 = %2 ** -1: i16                   [<INVALID>][<INVALID>]
 :00036 [02] ret %2
------------------------------------
------------------------------------
<change_window_size> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:89
meta:on_stack:true kind:Ruby mode:method FuncId(821) regs:3 ISeq(RubyFuncInfo { id:821 name:change_window_size method:(FuncId(821), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = nil
 :00002 [02] ret %2
------------------------------------
------------------------------------
<on_resize> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:92
meta:on_stack:true kind:Ruby mode:method FuncId(822) regs:4 ISeq(RubyFuncInfo { id:822 name:on_resize method:(FuncId(822), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [04] %3 = nil
 :00002 [03] ret %3
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:101
meta:on_stack:true kind:Ruby mode:method FuncId(823) regs:4 ISeq(RubyFuncInfo { id:823 name:initialize method:(FuncId(823), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [02] @conf: - = %1
 :00002 [03] %2 = %1.audio_sample_rate()          [<INVALID>]
 :00004 [02] @rate: - = %2
 :00005 [03] %2 = %1.audio_bit_depth()            [<INVALID>]
 :00007 [02] @bits: - = %2
 :00008 [03] %2 = @bits: -
 :00009 [03] _%2 = %2 == 8: i16                   [<INVALID>][<INVALID>]
 :00010 [02] condbr _%2 =>:00014
+:00011 [03] %2 = @bits: -
 :00012 [03] _%2 = %2 == 16: i16                  [<INVALID>][<INVALID>]
 :00013 [02] condnotbr _%2 =>:00015
+:00014 [02] br =>:00018
+:00015 [03] %2 = literal["sample bits must be 8 or 16"]
 :00016 [02] _ = %0.raise(%2;1)                   [<INVALID>]
+:00018 [03] %2 = const[PACK_FORMAT]              [<INVALID>]
 :00019 [04] %3 = @bits: -
 :00020 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00021 [02] @pack_format: - = %2
 :00022 [03] %2 = %0.init()                       [<INVALID>]
 :00024 [02] ret %2
------------------------------------
------------------------------------
<spec> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:111
meta:on_stack:true kind:Ruby mode:method FuncId(824) regs:4 ISeq(RubyFuncInfo { id:824 name:spec method:(FuncId(824), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @rate: -
 :00002 [04] %3 = @bits: -
 :00003 [02] %1 = array[%2; 2]
 :00004 [01] ret %1
------------------------------------
------------------------------------
<init> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:115
meta:on_stack:true kind:Ruby mode:method FuncId(825) regs:2 ISeq(RubyFuncInfo { id:825 name:init method:(FuncId(825), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<dispose> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:118
meta:on_stack:true kind:Ruby mode:method FuncId(826) regs:2 ISeq(RubyFuncInfo { id:826 name:dispose method:(FuncId(826), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<tick> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:121
meta:on_stack:true kind:Ruby mode:method FuncId(827) regs:3 ISeq(RubyFuncInfo { id:827 name:tick method:(FuncId(827), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = nil
 :00002 [02] ret %2
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:127
meta:on_stack:true kind:Ruby mode:method FuncId(828) regs:4 ISeq(RubyFuncInfo { id:828 name:initialize method:(FuncId(828), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [03] @conf: - = %1
 :00002 [03] @video: - = %2
 :00003 [04] %3 = %0.init()                       [<INVALID>]
 :00005 [03] ret %3
------------------------------------
------------------------------------
<init> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:133
meta:on_stack:true kind:Ruby mode:method FuncId(829) regs:2 ISeq(RubyFuncInfo { id:829 name:init method:(FuncId(829), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<dispose> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:136
meta:on_stack:true kind:Ruby mode:method FuncId(830) regs:2 ISeq(RubyFuncInfo { id:830 name:dispose method:(FuncId(830), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<tick> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:139
meta:on_stack:true kind:Ruby mode:method FuncId(831) regs:4 ISeq(RubyFuncInfo { id:831 name:tick method:(FuncId(831), 0) args: 2 non_temp: 2 temp: 1})
[]
+:00000 [03] init_method reg:3 arg:2 req:2 opt:0 rest:false block:None stack_offset:5
 :00001 [04] %3 = nil
 :00002 [03] ret %3
------------------------------------
------------------------------------
<event> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:142
meta:on_stack:true kind:Ruby mode:method FuncId(832) regs:10 ISeq(RubyFuncInfo { id:832 name:event method:(FuncId(832), 0) args: 4 non_temp: 4 temp: 5})
[]
+:00000 [05] init_method reg:9 arg:4 req:4 opt:0 rest:false block:None stack_offset:8
 :00001 [07] %6 = %3
 :00002 [08] %7 = :start
 :00003 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00004 [07] condnotbr _%7 =>:00011
+:00005 [08] %7 = %2
 :00006 [09] %8 = %4
 :00007 [10] %9 = const[Pad::START]               [<INVALID>]
 :00008 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00010 [07] ret %5
+:00011 [08] %7 = :select
 :00012 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00013 [07] condnotbr _%7 =>:00020
+:00014 [08] %7 = %2
 :00015 [09] %8 = %4
 :00016 [10] %9 = const[Pad::SELECT]              [<INVALID>]
 :00017 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00019 [07] ret %5
+:00020 [08] %7 = :a
 :00021 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00022 [07] condnotbr _%7 =>:00029
+:00023 [08] %7 = %2
 :00024 [09] %8 = %4
 :00025 [10] %9 = const[Pad::A]                   [<INVALID>]
 :00026 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00028 [07] ret %5
+:00029 [08] %7 = :b
 :00030 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00031 [07] condnotbr _%7 =>:00038
+:00032 [08] %7 = %2
 :00033 [09] %8 = %4
 :00034 [10] %9 = const[Pad::B]                   [<INVALID>]
 :00035 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00037 [07] ret %5
+:00038 [08] %7 = :right
 :00039 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00040 [07] condnotbr _%7 =>:00047
+:00041 [08] %7 = %2
 :00042 [09] %8 = %4
 :00043 [10] %9 = const[Pad::RIGHT]               [<INVALID>]
 :00044 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00046 [07] ret %5
+:00047 [08] %7 = :left
 :00048 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00049 [07] condnotbr _%7 =>:00056
+:00050 [08] %7 = %2
 :00051 [09] %8 = %4
 :00052 [10] %9 = const[Pad::LEFT]                [<INVALID>]
 :00053 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00055 [07] ret %5
+:00056 [08] %7 = :down
 :00057 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00058 [07] condnotbr _%7 =>:00065
+:00059 [08] %7 = %2
 :00060 [09] %8 = %4
 :00061 [10] %9 = const[Pad::DOWN]                [<INVALID>]
 :00062 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00064 [07] ret %5
+:00065 [08] %7 = :up
 :00066 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00067 [07] condnotbr _%7 =>:00074
+:00068 [08] %7 = %2
 :00069 [09] %8 = %4
 :00070 [10] %9 = const[Pad::UP]                  [<INVALID>]
 :00071 [07] %5 = %1.send(%7;3)                   [<INVALID>]
 :00073 [07] ret %5
+:00074 [07] %6 = :keydown
 :00075 [07] _%6 = %2 != %6                       [<INVALID>][<INVALID>]
 :00076 [06] condnotbr _%6 =>:00079
+:00077 [07] %6 = nil
 :00078 [06] ret %6
+:00079 [08] %7 = %3
 :00080 [09] %8 = :screen_x1
 :00081 [09] _%8 = %8 === %7                      [<INVALID>][<INVALID>]
 :00082 [08] condnotbr _%8 =>:00088
+:00083 [09] %8 = @video: -
 :00084 [10] %9 = 1: i32
 :00085 [08] %6 = %8.change_window_size(%9;1)     [<INVALID>]
 :00087 [07] br =>:00120
+:00088 [09] %8 = :screen_x2
 :00089 [09] _%8 = %8 === %7                      [<INVALID>][<INVALID>]
 :00090 [08] condnotbr _%8 =>:00096
+:00091 [09] %8 = @video: -
 :00092 [10] %9 = 2: i32
 :00093 [08] %6 = %8.change_window_size(%9;1)     [<INVALID>]
 :00095 [07] br =>:00120
+:00096 [09] %8 = :screen_x3
 :00097 [09] _%8 = %8 === %7                      [<INVALID>][<INVALID>]
 :00098 [08] condnotbr _%8 =>:00104
+:00099 [09] %8 = @video: -
 :00100 [10] %9 = 3: i32
 :00101 [08] %6 = %8.change_window_size(%9;1)     [<INVALID>]
 :00103 [07] br =>:00120
+:00104 [09] %8 = :screen_full
 :00105 [09] _%8 = %8 === %7                      [<INVALID>][<INVALID>]
 :00106 [08] condnotbr _%8 =>:00112
+:00107 [09] %8 = @video: -
 :00108 [10] %9 = nil
 :00109 [08] %6 = %8.change_window_size(%9;1)     [<INVALID>]
 :00111 [07] br =>:00120
+:00112 [09] %8 = :quit
 :00113 [09] _%8 = %8 === %7                      [<INVALID>][<INVALID>]
 :00114 [08] condnotbr _%8 =>:00119
+:00115 [09] %8 = %0.exit()                       [<INVALID>]
 :00117 [09] %6 = %8
 :00118 [07] br =>:00120
+:00119 [07] %6 = nil
+:00120 [07] %5 = %6
 :00121 [05] ret %5
------------------------------------
------------------------------------
<block in load_each> /home/monochrome/optcarrot/lib/optcarrot/driver.rb:48
meta:on_stack:true kind:Ruby mode:method FuncId(833) regs:9 ISeq(RubyFuncInfo { id:833 name:<unnamed> method:(FuncId(816), 1) args: 1 non_temp: 1 temp: 7})
[(:00001..:00009, Some(:00009), None, Some(%2))]
+:00000 [02] init_method reg:8 arg:1 req:1 opt:0 rest:false block:None stack_offset:8
 :00001 [03] %2 = dynvar(1, %1)
 :00002 [04] %3 = dynvar(1, %2)
 :00003 [05] %4 = %1
 :00004 [03] %2 = %0.load_each(%2;3)              [<INVALID>]
 :00006 [02] dynvar(1, %5) = %2
 :00007 [03] %2 = nil
 :00008 [02] break %2
+:00009 [04] %3 = const[LoadError]                [<INVALID>]
 :00010 [04] _%3 = %3 === %2                      [<INVALID>][<INVALID>]
 :00011 [03] condbr _%3 =>:00013
+:00012 [03] br =>:00023
+:00013 [04] %3 = dynvar(1, %1)
 :00014 [05] %4 = literal["fail to use `"]
 :00015 [06] %5 = %1
 :00016 [07] %6 = literal["' "]
 :00017 [08] %7 = dynvar(1, %2)
 :00018 [09] %8 = literal[" driver"]
 :00019 [05] %4 = concat(%4; 5)
 :00020 [04] %3 = %3.debug(%4;1)                  [<INVALID>]
 :00022 [03] ret %3
+:00023 [03] raise %2
------------------------------------
------------------------------------
</main> /home/monochrome/optcarrot/lib/optcarrot/config.rb:1
meta:on_stack:true kind:Ruby mode:method FuncId(835) regs:2 ISeq(RubyFuncInfo { id:835 name:/main method:(FuncId(835), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = module_def Optcarrot: FuncId(836)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Optcarrot> /home/monochrome/optcarrot/lib/optcarrot/config.rb:1
meta:on_stack:true kind:Ruby mode:class_def FuncId(836) regs:2 ISeq(RubyFuncInfo { id:836 name:Optcarrot method:(FuncId(836), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = class_def Config < _: FuncId(837)
 :00002 [01] ret %1
------------------------------------
------------------------------------
<Config> /home/monochrome/optcarrot/lib/optcarrot/config.rb:3
meta:on_stack:true kind:Ruby mode:class_def FuncId(837) regs:30 ISeq(RubyFuncInfo { id:837 name:Config method:(FuncId(837), 0) args: 0 non_temp: 0 temp: 29})
[]
+:00000 [01] init_method reg:29 arg:0 req:0 opt:0 rest:false block:None stack_offset:18
 :00001 [03] %2 = :optimization
 :00002 [05] %4 = :opt_ppu
 :00003 [07] %6 = :type
 :00004 [08] %7 = :opts
 :00005 [09] %8 = :desc
 :00006 [10] %9 = literal["select PPU optimizations"]
 :00007 [11] %10 = :candidates
 :00008 [12] %11 = const[PPU::OptimizedCodeBuilder::OPTIONS] [<INVALID>]
 :00009 [13] %12 = :default
 :00010 [14] %13 = nil
 :00011 [06] %5 = hash[%6; 4]
 :00012 [07] %6 = :opt_cpu
 :00013 [09] %8 = :type
 :00014 [10] %9 = :opts
 :00015 [11] %10 = :desc
 :00016 [12] %11 = literal["select CPU optimizations"]
 :00017 [13] %12 = :candidates
 :00018 [14] %13 = const[CPU::OptimizedCodeBuilder::OPTIONS] [<INVALID>]
 :00019 [15] %14 = :default
 :00020 [16] %15 = nil
 :00021 [08] %7 = hash[%8; 4]
 :00022 [09] %8 = :opt
 :00023 [11] %10 = :shortcut
 :00024 [12] %11 = literal[["--opt-ppu=all", "--opt-cpu=all"]]
 :00025 [10] %9 = hash[%10; 1]
 :00026 [11] %10 = :list_opts
 :00027 [12] %11 = literal[{:type=>:info, :desc=>"list available optimizations"}]
 :00028 [13] %12 = :dump_ppu
 :00029 [14] %13 = literal[{:type=>:info, :desc=>"print generated PPU source code"}]
 :00030 [15] %14 = :dump_cpu
 :00031 [16] %15 = literal[{:type=>:info, :desc=>"print generated CPU source code"}]
 :00032 [17] %16 = :load_ppu
 :00033 [18] %17 = literal[{:type=>"FILE", :desc=>"use generated PPU source code"}]
 :00034 [19] %18 = :load_cpu
 :00035 [20] %19 = literal[{:type=>"FILE", :desc=>"use generated CPU source code"}]
 :00036 [04] %3 = hash[%4; 8]
 :00037 [05] %4 = :emulation
 :00038 [07] %6 = :sprite_limit
 :00039 [08] %7 = literal[{:type=>:switch, :desc=>"enable/disable sprite limit", :default=>false}]
 :00040 [09] %8 = :frames
 :00041 [11] %10 = :type
 :00042 [12] %11 = :int
 :00043 [13] %12 = :desc
 :00044 [14] %13 = literal["execute N frames (0 = no limit)"]
 :00045 [15] %14 = :default
 :00046 [16] %15 = 0: i32
 :00047 [17] %16 = :aliases
 :00048 [18] %17 = literal[[:f, :frame]]
 :00049 [10] %9 = hash[%10; 4]
 :00050 [11] %10 = :audio_sample_rate
 :00051 [12] %11 = literal[{:type=>:int, :desc=>"set audio sample rate", :default=>44100}]
 :00052 [13] %12 = :audio_bit_depth
 :00053 [14] %13 = literal[{:type=>:int, :desc=>"set audio bit depth", :default=>16}]
 :00054 [15] %14 = :nestopia_palette
 :00055 [16] %15 = literal[{:type=>:switch, :desc=>"use Nestopia palette instead of de facto", :default=>false}]
 :00056 [06] %5 = hash[%6; 5]
 :00057 [07] %6 = :driver
 :00058 [09] %8 = :video
 :00059 [11] %10 = :type
 :00060 [12] %11 = :driver
 :00061 [13] %12 = :desc
 :00062 [14] %13 = literal["select video driver"]
 :00063 [15] %14 = :candidates
 :00064 [16] %15 = const[Driver::DRIVER_DB]       [<INVALID>]
 :00065 [17] %16 = :video
 :00066 [16] %15 = %15.[%16]                      [<INVALID>][<INVALID>]
 :00067 [16] %15 = %15.keys()                     [<INVALID>]
 :00069 [10] %9 = hash[%10; 3]
 :00070 [11] %10 = :audio
 :00071 [13] %12 = :type
 :00072 [14] %13 = :driver
 :00073 [15] %14 = :desc
 :00074 [16] %15 = literal["select audio driver"]
 :00075 [17] %16 = :candidates
 :00076 [18] %17 = const[Driver::DRIVER_DB]       [<INVALID>]
 :00077 [19] %18 = :audio
 :00078 [18] %17 = %17.[%18]                      [<INVALID>][<INVALID>]
 :00079 [18] %17 = %17.keys()                     [<INVALID>]
 :00081 [12] %11 = hash[%12; 3]
 :00082 [13] %12 = :input
 :00083 [15] %14 = :type
 :00084 [16] %15 = :driver
 :00085 [17] %16 = :desc
 :00086 [18] %17 = literal["select input driver"]
 :00087 [19] %18 = :candidates
 :00088 [20] %19 = const[Driver::DRIVER_DB]       [<INVALID>]
 :00089 [21] %20 = :input
 :00090 [20] %19 = %19.[%20]                      [<INVALID>][<INVALID>]
 :00091 [20] %19 = %19.keys()                     [<INVALID>]
 :00093 [14] %13 = hash[%14; 3]
 :00094 [15] %14 = :list_drivers
 :00095 [16] %15 = literal[{:type=>:info, :desc=>"print available drivers"}]
 :00096 [17] %16 = :sdl2
 :00097 [19] %18 = :shortcut
 :00098 [20] %19 = literal[["--video=sdl2", "--audio=sdl2", "--input=sdl2"]]
 :00099 [18] %17 = hash[%18; 1]
 :00100 [19] %18 = :sfml
 :00101 [21] %20 = :shortcut
 :00102 [22] %21 = literal[["--video=sfml", "--audio=sfml", "--input=sfml"]]
 :00103 [20] %19 = hash[%20; 1]
 :00104 [21] %20 = :headless
 :00105 [23] %22 = :shortcut
 :00106 [24] %23 = literal[["--video=none", "--audio=none", "--input=none"]]
 :00107 [22] %21 = hash[%22; 1]
 :00108 [23] %22 = :video_output
 :00109 [24] %23 = literal[{:type=>"FILE", :desc=>"save video to file", :default=>"video.EXT"}]
 :00110 [25] %24 = :audio_output
 :00111 [26] %25 = literal[{:type=>"FILE", :desc=>"save audio to file", :default=>"audio.wav"}]
 :00112 [27] %26 = :show_fps
 :00113 [28] %27 = literal[{:type=>:switch, :desc=>"show fps in the right-bottom corner", :default=>true}]
 :00114 [29] %28 = :key_log
 :00115 [30] %29 = literal[{:type=>"FILE", :desc=>"use recorded input file"}]
 :00116 [08] %7 = hash[%8; 11]
 :00117 [09] %8 = :profiling
 :00118 [11] %10 = :print_fps
 :00119 [12] %11 = literal[{:type=>:switch, :desc=>"print fps of last 10 frames", :default=>false}]
 :00120 [13] %12 = :print_p95fps
 :00121 [14] %13 = literal[{:type=>:switch, :desc=>"print 95th percentile fps", :default=>false}]
 :00122 [15] %14 = :print_fps_history
 :00123 [16] %15 = literal[{:type=>:switch, :desc=>"print all fps values for each frame", :default=>false}]
 :00124 [17] %16 = :print_video_checksum
 :00125 [18] %17 = literal[{:type=>:switch, :desc=>"print checksum of the last video output", :default=>false}]
 :00126 [19] %18 = :stackprof
 :00127 [20] %19 = literal[{:shortcut=>"--stackprof-mode=cpu", :aliases=>:p}]
 :00128 [21] %20 = :stackprof_mode
 :00129 [22] %21 = literal[{:type=>"MODE", :desc=>"run under stackprof", :default=>nil}]
 :00130 [23] %22 = :stackprof_output
 :00131 [24] %23 = literal[{:type=>"FILE", :desc=>"stackprof output file", :default=>"stackprof-MODE.dump"}]
 :00132 [10] %9 = hash[%10; 7]
 :00133 [11] %10 = :misc
 :00134 [13] %12 = :benchmark
 :00135 [15] %14 = :shortcut
 :00136 [16] %15 = literal[["--headless", "--print-fps", "--print-video-checksum", "--frames", "180"]]
 :00137 [17] %16 = :aliases
 :00138 [18] %17 = :b
 :00139 [14] %13 = hash[%14; 2]
 :00140 [15] %14 = :loglevel
 :00141 [16] %15 = literal[{:type=>:int, :desc=>"set loglevel", :default=>1}]
 :00142 [17] %16 = :quiet
 :00143 [18] %17 = literal[{:shortcut=>"--loglevel=0", :aliases=>:q}]
 :00144 [19] %18 = :verbose
 :00145 [20] %19 = literal[{:shortcut=>"--loglevel=2", :aliases=>:v}]
 :00146 [21] %20 = :debug
 :00147 [22] %21 = literal[{:shortcut=>"--loglevel=3", :aliases=>:d}]
 :00148 [23] %22 = :version
 :00149 [24] %23 = literal[{:type=>:info, :desc=>"print version"}]
 :00150 [25] %24 = :help
 :00151 [26] %25 = literal[{:type=>:info, :desc=>"print this message", :aliases=>:h}]
 :00152 [12] %11 = hash[%12; 7]
 :00153 [02] %1 = hash[%2; 5]
 :00154 [01] const[OPTIONS] = %1
 :00155 [02] %1 = literal[{}]
 :00156 [01] const[DEFAULT_OPTIONS] = %1
 :00157 [02] %1 = const[OPTIONS]                  [<INVALID>]
 :00158 [03] %2 = literal[54919169]
 :00159 [01] _ = %1.each_value( &%2)              [<INVALID>]
 :00161 [02] %1 = :romfile
 :00162 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00164 [01] method_def initialize: FuncId(839)
 :00165 [01] method_def debug: FuncId(840)
 :00166 [01] method_def info: FuncId(841)
 :00167 [01] method_def warn: FuncId(842)
 :00168 [01] method_def error: FuncId(843)
 :00169 [01] method_def fatal: FuncId(844)
 :00170 [02] %1 = class_def Parser < _: FuncId(845)
 :00171 [01] ret %1
------------------------------------
------------------------------------
<block in Config> /home/monochrome/optcarrot/lib/optcarrot/config.rb:67
meta:on_stack:true kind:Ruby mode:method FuncId(838) regs:4 ISeq(RubyFuncInfo { id:838 name:<unnamed> method:(FuncId(837), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[55443457]
 :00002 [03] %2 = %1.each( &%2)                   [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/config.rb:76
meta:on_stack:true kind:Ruby mode:method FuncId(839) regs:5 ISeq(RubyFuncInfo { id:839 name:initialize method:(FuncId(839), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = const[Array]                    [<INVALID>]
 :00002 [03] %2 = %1.is_a?(%2;1)                  [<INVALID>]
 :00004 [02] condnotbr %2 =>:00010
+:00005 [03] %2 = const[Parser]                   [<INVALID>]
 :00006 [03] %2 = %2.new(%1;1)                    [<INVALID>]
 :00008 [02] %1 = %2.options()                    [<INVALID>]
+:00010 [03] %2 = const[DEFAULT_OPTIONS]          [<INVALID>]
 :00011 [03] %2 = %2.merge(%1;1)                  [<INVALID>]
 :00013 [04] %3 = literal[55508993]
 :00014 [03] %2 = %2.each( &%3)                   [<INVALID>]
 :00016 [02] ret %2
------------------------------------
------------------------------------
<debug> /home/monochrome/optcarrot/lib/optcarrot/config.rb:81
meta:on_stack:true kind:Ruby mode:method FuncId(840) regs:3 ISeq(RubyFuncInfo { id:840 name:debug method:(FuncId(840), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @loglevel: -
 :00002 [03] _%2 = %2 >= 3: i16                   [<INVALID>][<INVALID>]
 :00003 [02] condnotbr _%2 =>:00009
+:00004 [03] %2 = literal["[DEBUG] "]
 :00005 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00006 [03] %2 = %0.puts(%2;1)                   [<INVALID>]
 :00008 [02] ret %2
+:00009 [03] %2 = nil
 :00010 [02] ret %2
------------------------------------
------------------------------------
<info> /home/monochrome/optcarrot/lib/optcarrot/config.rb:85
meta:on_stack:true kind:Ruby mode:method FuncId(841) regs:3 ISeq(RubyFuncInfo { id:841 name:info method:(FuncId(841), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @loglevel: -
 :00002 [03] _%2 = %2 >= 2: i16                   [<INVALID>][<INVALID>]
 :00003 [02] condnotbr _%2 =>:00009
+:00004 [03] %2 = literal["[INFO] "]
 :00005 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00006 [03] %2 = %0.puts(%2;1)                   [<INVALID>]
 :00008 [02] ret %2
+:00009 [03] %2 = nil
 :00010 [02] ret %2
------------------------------------
------------------------------------
<warn> /home/monochrome/optcarrot/lib/optcarrot/config.rb:89
meta:on_stack:true kind:Ruby mode:method FuncId(842) regs:3 ISeq(RubyFuncInfo { id:842 name:warn method:(FuncId(842), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = @loglevel: -
 :00002 [03] _%2 = %2 >= 1: i16                   [<INVALID>][<INVALID>]
 :00003 [02] condnotbr _%2 =>:00009
+:00004 [03] %2 = literal["[WARN] "]
 :00005 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00006 [03] %2 = %0.puts(%2;1)                   [<INVALID>]
 :00008 [02] ret %2
+:00009 [03] %2 = nil
 :00010 [02] ret %2
------------------------------------
------------------------------------
<error> /home/monochrome/optcarrot/lib/optcarrot/config.rb:93
meta:on_stack:true kind:Ruby mode:method FuncId(843) regs:3 ISeq(RubyFuncInfo { id:843 name:error method:(FuncId(843), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal["[ERROR] "]
 :00002 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00003 [03] %2 = %0.puts(%2;1)                   [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<fatal> /home/monochrome/optcarrot/lib/optcarrot/config.rb:97
meta:on_stack:true kind:Ruby mode:method FuncId(844) regs:3 ISeq(RubyFuncInfo { id:844 name:fatal method:(FuncId(844), 0) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal["[FATAL] "]
 :00002 [03] %2 = %2 + %1                         [<INVALID>][<INVALID>]
 :00003 [02] _ = %0.puts(%2;1)                    [<INVALID>]
 :00005 [03] %2 = %0.abort()                      [<INVALID>]
 :00007 [02] ret %2
------------------------------------
------------------------------------
<Parser> /home/monochrome/optcarrot/lib/optcarrot/config.rb:103
meta:on_stack:true kind:Ruby mode:class_def FuncId(845) regs:2 ISeq(RubyFuncInfo { id:845 name:Parser method:(FuncId(845), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [01] method_def initialize: FuncId(848)
 :00002 [02] %1 = :options
 :00003 [01] _ = %0.attr_reader(%1;1)             [<INVALID>]
 :00005 [02] %1 = const[RuntimeError]             [<INVALID>]
 :00006 [01] _ = class_def Invalid < %1: FuncId(849)
 :00007 [01] method_def error: FuncId(850)
 :00008 [01] method_def find_option: FuncId(851)
 :00009 [01] method_def parse_option: FuncId(852)
 :00010 [01] method_def parse_operand: FuncId(853)
 :00011 [01] method_def help: FuncId(854)
 :00012 [01] method_def version: FuncId(855)
 :00013 [01] method_def list_drivers: FuncId(856)
 :00014 [01] method_def list_opts: FuncId(857)
 :00015 [01] method_def dump_ppu: FuncId(858)
 :00016 [01] method_def dump_cpu: FuncId(859)
 :00017 [02] %1 = :dump_cpu
 :00018 [01] ret %1
------------------------------------
------------------------------------
<block in Config> /home/monochrome/optcarrot/lib/optcarrot/config.rb:68
meta:on_stack:true kind:Ruby mode:method FuncId(846) regs:5 ISeq(RubyFuncInfo { id:846 name:<unnamed> method:(FuncId(837), 2) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = :shortcut
 :00002 [04] %3 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00003 [03] condnotbr %3 =>:00006
+:00004 [04] %3 = nil
 :00005 [03] ret %3
+:00006 [04] %3 = :default
 :00007 [04] %3 = %2.key?(%3;1)                   [<INVALID>]
 :00009 [03] condnotbr %3 =>:00014
+:00010 [04] %3 = const[DEFAULT_OPTIONS]          [<INVALID>]
 :00011 [05] %4 = :default
 :00012 [05] %4 = %2.[%4]                         [<INVALID>][<INVALID>]
 :00013 [03] %3:.[%1:] = %4
+:00014 [04] %3 = %0.attr_reader(%1;1)            [<INVALID>]
 :00016 [03] ret %3
------------------------------------
------------------------------------
<block in initialize> /home/monochrome/optcarrot/lib/optcarrot/config.rb:78
meta:on_stack:true kind:Ruby mode:method FuncId(847) regs:5 ISeq(RubyFuncInfo { id:847 name:<unnamed> method:(FuncId(839), 1) args: 2 non_temp: 2 temp: 2})
[]
+:00000 [03] init_method reg:4 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal["@"]
 :00002 [05] %4 = %1
 :00003 [04] %3 = concat(%3; 2)
 :00004 [04] %3 = %3.to_sym()                     [<INVALID>]
 :00006 [05] %4 = %2
 :00007 [04] %3 = %0.instance_variable_set(%3;2)  [<INVALID>]
 :00009 [03] ret %3
------------------------------------
------------------------------------
<initialize> /home/monochrome/optcarrot/lib/optcarrot/config.rb:104
meta:on_stack:true kind:Ruby mode:method FuncId(848) regs:6 ISeq(RubyFuncInfo { id:848 name:initialize method:(FuncId(848), 0) args: 1 non_temp: 2 temp: 3})
[(:00001..:00027, Some(:00027), None, Some(%3))]
+:00000 [03] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = %1.dup()                        [<INVALID>]
 :00003 [03] @argv: - = %3
 :00004 [04] %3 = const[DEFAULT_OPTIONS]          [<INVALID>]
 :00005 [04] %3 = %3.dup()                        [<INVALID>]
 :00007 [03] @options: - = %3
+:00008 [03] loop_start counter=0 jit-addr=0000000000000000
 :00009 [04] %3 = @argv: -
 :00010 [04] %3 = %3.empty?()                     [<INVALID>]
 :00012 [03] condbr %3 =>:00016
+:00013 [03] _ = %0.parse_option()                [<INVALID>]
 :00015 [03] br =>:00008
+:00016 [03] loop_end
+:00017 [04] %3 = @options: -
 :00018 [05] %4 = :romfile
 :00019 [04] %3 = %3.[%4]                         [<INVALID>][<INVALID>]
 :00020 [03] condnotbr %3 =>:00023
+:00021 [04] %3 = nil
 :00022 [03] ret %3
+:00023 [04] %3 = literal["ROM file is not given"]
 :00024 [04] %3 = %0.error(%3;1)                  [<INVALID>]
 :00026 [03] ret %3
+:00027 [04] %2 = %3
 :00028 [05] %4 = const[Invalid]                  [<INVALID>]
 :00029 [05] _%4 = %4 === %3                      [<INVALID>][<INVALID>]
 :00030 [04] condbr _%4 =>:00032
+:00031 [04] br =>:00041
+:00032 [05] %4 = literal["[FATAL] "]
 :00033 [06] %5 = %2
 :00034 [05] %4 = concat(%4; 2)
 :00035 [04] _ = %0.puts(%4;1)                    [<INVALID>]
 :00037 [05] %4 = 1: i32
 :00038 [05] %4 = %0.exit(%4;1)                   [<INVALID>]
 :00040 [04] ret %4
+:00041 [04] raise %3
------------------------------------
------------------------------------
<Invalid> /home/monochrome/optcarrot/lib/optcarrot/config.rb:116
meta:on_stack:true kind:Ruby mode:class_def FuncId(849) regs:2 ISeq(RubyFuncInfo { id:849 name:Invalid method:(FuncId(849), 0) args: 0 non_temp: 0 temp: 1})
[]
+:00000 [01] init_method reg:1 arg:0 req:0 opt:0 rest:false block:None stack_offset:4
 :00001 [02] %1 = nil
 :00002 [01] ret %1
------------------------------------
------------------------------------
<error> /home/monochrome/optcarrot/lib/optcarrot/config.rb:118
meta:on_stack:true kind:Ruby mode:method FuncId(850) regs:4 ISeq(RubyFuncInfo { id:850 name:error method:(FuncId(850), 0) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = const[Invalid]                  [<INVALID>]
 :00002 [04] %3 = %1
 :00003 [03] %2 = %0.raise(%2;2)                  [<INVALID>]
 :00005 [02] ret %2
------------------------------------
------------------------------------
<find_option> /home/monochrome/optcarrot/lib/optcarrot/config.rb:122
meta:on_stack:true kind:Ruby mode:method FuncId(851) regs:5 ISeq(RubyFuncInfo { id:851 name:find_option method:(FuncId(851), 0) args: 1 non_temp: 1 temp: 3})
[]
+:00000 [02] init_method reg:4 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = const[OPTIONS]                  [<INVALID>]
 :00002 [04] %3 = literal[56360961]
 :00003 [02] _ = %2.each_value( &%3)              [<INVALID>]
 :00005 [03] %2 = nil
 :00006 [02] ret %2
------------------------------------
------------------------------------
<parse_option> /home/monochrome/optcarrot/lib/optcarrot/config.rb:136
meta:on_stack:true kind:Ruby mode:method FuncId(852) regs:11 ISeq(RubyFuncInfo { id:852 name:parse_option method:(FuncId(852), 0) args: 0 non_temp: 6 temp: 4})
[]
+:00000 [07] init_method reg:10 arg:0 req:0 opt:0 rest:false block:None stack_offset:9
 :00001 [08] %7 = @argv: -
 :00002 [08] %7 = %7.shift()                      [<INVALID>]
 :00004 [09] %8 = literal["="]
 :00005 [10] %9 = 2: i32
 :00006 [08] %7 = %7.split(%8;2)                  [<INVALID>]
 :00008 [08] %8; 2 = expand(%7)
 :00009 [08] %1 = %8
 :00010 [08] %2 = %9
 :00011 [08] %7 = literal[/(?m)\A-(\w{2,})\z/]
 :00012 [08] %7 = %1.=~(%7;1)                     [<INVALID>]
 :00014 [07] condnotbr %7 =>:00034
+:00015 [08] %7 = $1
 :00016 [08] %7 = %7.chars()                      [<INVALID>]
 :00018 [09] %8 = literal[56426497]
 :00019 [07] %3 = %7.map( &%8)                    [<INVALID>]
 :00021 [07] condnotbr %2 =>:00029
+:00022 [08] %7 = %3.last()                       [<INVALID>]
 :00024 [09] %8 = literal["="]
 :00025 [08] %7 = %7.<<(%8;1)                     [<INVALID>]
 :00027 [07] _ = %7.<<(%2;1)                      [<INVALID>]
+:00029 [08] %7 = @argv: -
 :00030 [07] _ = %7.unshift(%3;1)*                [<INVALID>]
 :00032 [08] %7 = nil
 :00033 [07] ret %7
+:00034 [08] %7 = %0.find_option(%1;1)            [<INVALID>]
 :00036 [08] %8; 3 = expand(%7)
 :00037 [08] %4 = %8
 :00038 [08] %5 = %9
 :00039 [08] %6 = %10
 :00040 [07] condnotbr %4 =>:00085
+:00041 [08] %7 = :shortcut
 :00042 [08] %7 = %4.[%7]                         [<INVALID>][<INVALID>]
 :00043 [07] condnotbr %7 =>:00051
+:00044 [08] %7 = @argv: -
 :00045 [09] %8 = :shortcut
 :00046 [09] %8 = %4.[%8]                         [<INVALID>][<INVALID>]
 :00047 [07] _ = %7.unshift(%8;1)*                [<INVALID>]
 :00049 [08] %7 = nil
 :00050 [07] ret %7
+:00051 [08] %7 = :type
 :00052 [08] %7 = %4.[%7]                         [<INVALID>][<INVALID>]
 :00053 [09] %8 = :info
 :00054 [08] _%7 = %7 == %8                       [<INVALID>][<INVALID>]
 :00055 [07] condnotbr _%7 =>:00061
+:00056 [07] _ = %0.send(%5;1)                    [<INVALID>]
 :00058 [08] %7 = %0.exit()                       [<INVALID>]
 :00060 [07] ret %7
+:00061 [08] %7 = :type
 :00062 [08] %7 = %4.[%7]                         [<INVALID>][<INVALID>]
 :00063 [09] %8 = :switch
 :00064 [08] _%7 = %7 == %8                       [<INVALID>][<INVALID>]
 :00065 [07] condnotbr _%7 =>:00077
+:00066 [07] condnotbr %2 =>:00073
+:00067 [08] %7 = literal["option `"]
 :00068 [09] %8 = %1
 :00069 [10] %9 = literal["' doesn't allow an operand"]
 :00070 [08] %7 = concat(%7; 3)
 :00071 [07] _ = %0.error(%7;1)                   [<INVALID>]
+:00073 [08] %7 = @options: -
 :00074 [09] %8 = !%6                             [<INVALID>]
 :00075 [07] %7:.[%5:] = %8
 :00076 [07] ret %8
+:00077 [08] %7 = @options: -
 :00078 [09] %8 = %2
 :00079 [10] %9 = %1
 :00080 [11] %10 = %4
 :00081 [09] %8 = %0.parse_operand(%8;3)          [<INVALID>]
 :00083 [07] %7:.[%5:] = %8
 :00084 [07] ret %8
+:00085 [08] %7 = literal["--"]
 :00086 [08] _%7 = %1 == %7                       [<INVALID>][<INVALID>]
 :00087 [07] condnotbr _%7 =>:00091
+:00088 [08] %7 = @argv: -
 :00089 [07] %1 = %7.shift()                      [<INVALID>]
+:00091 [07] condnotbr %1 =>:00102
+:00092 [08] %7 = literal["-"]
 :00093 [08] %7 = %1.start_with?(%7;1)            [<INVALID>]
 :00095 [07] condnotbr %7 =>:00102
+:00096 [08] %7 = literal["invalid option: `"]
 :00097 [09] %8 = %1
 :00098 [10] %9 = literal["'"]
 :00099 [08] %7 = concat(%7; 3)
 :00100 [07] _ = %0.error(%7;1)                   [<INVALID>]
+:00102 [07] condnotbr %1 =>:00117
+:00103 [08] %7 = @options: -
 :00104 [09] %8 = :romfile
 :00105 [08] %7 = %7.[%8]                         [<INVALID>][<INVALID>]
 :00106 [07] condnotbr %7 =>:00113
+:00107 [08] %7 = literal["extra argument: `"]
 :00108 [09] %8 = %1
 :00109 [10] %9 = literal["'"]
 :00110 [08] %7 = concat(%7; 3)
 :00111 [07] _ = %0.error(%7;1)                   [<INVALID>]
+:00113 [08] %7 = @options: -
 :00114 [09] %8 = :romfile
 :00115 [07] %7:.[%8:] = %1
 :00116 [07] ret %1
+:00117 [08] %7 = nil
 :00118 [07] ret %7
------------------------------------
------------------------------------
<parse_operand> /home/monochrome/optcarrot/lib/optcarrot/config.rb:168
meta:on_stack:true kind:Ruby mode:method FuncId(853) regs:12 ISeq(RubyFuncInfo { id:853 name:parse_operand method:(FuncId(853), 0) args: 3 non_temp: 4 temp: 7})
[(:00044..:00047, Some(:00048), None, Some(%8))]
+:00000 [05] init_method reg:11 arg:3 req:3 opt:0 rest:false block:None stack_offset:9
 :00001 [06] %5 = :type
 :00002 [05] %4 = %3.[%5]                         [<INVALID>][<INVALID>]
 :00003 [06] %5 = %1
 :00004 [06] condbr %5 =>:00009
+:00005 [07] %6 = @argv: -
 :00006 [06] %1 = %6.shift()                      [<INVALID>]
 :00008 [06] %5 = %1
+:00009 [07] %6 = %4
 :00010 [08] %7 = :opts
 :00011 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00012 [07] condnotbr _%7 =>:00021
+:00013 [08] %7 = literal[","]
 :00014 [08] %7 = %1.split(%7;1)                  [<INVALID>]
 :00016 [09] %8 = literal[56492033]
 :00017 [07] %1 = %7.map( &%8)                    [<INVALID>]
 :00019 [07] %5 = %1
 :00020 [06] br =>:00059
+:00021 [08] %7 = :driver
 :00022 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00023 [07] condnotbr _%7 =>:00041
+:00024 [07] %1 = %1.to_sym()                     [<INVALID>]
 :00026 [08] %7 = :candidates
 :00027 [08] %7 = %3.[%7]                         [<INVALID>][<INVALID>]
 :00028 [08] %7 = %7.include?(%1;1)               [<INVALID>]
 :00030 [07] condnotbr %7 =>:00033
+:00031 [08] %7 = nil
 :00032 [08] br =>:00039
+:00033 [08] %7 = literal["unknown driver: `"]
 :00034 [09] %8 = %1
 :00035 [10] %9 = literal["'"]
 :00036 [08] %7 = concat(%7; 3)
 :00037 [08] %7 = %0.error(%7;1)                  [<INVALID>]
+:00039 [08] %5 = %7
 :00040 [06] br =>:00059
+:00041 [08] %7 = :int
 :00042 [08] _%7 = %7 === %6                      [<INVALID>][<INVALID>]
 :00043 [07] condnotbr _%7 =>:00058
+:00044 [07] %1 = %0.Integer(%1;1)                [<INVALID>]
 :00046 [08] %7 = %1
 :00047 [08] br =>:00056
+:00048 [10] %9 = literal["option `"]
 :00049 [11] %10 = %2
 :00050 [12] %11 = literal["' requires numerical operand"]
 :00051 [10] %9 = concat(%9; 3)
 :00052 [09] %7 = %0.error(%9;1)                  [<INVALID>]
 :00054 [09] br =>:00056
+:00055 [09] raise %8
+:00056 [08] %5 = %7
 :00057 [06] br =>:00059
+:00058 [06] %5 = nil
+:00059 [05] ret %1
------------------------------------
------------------------------------
<help> /home/monochrome/optcarrot/lib/optcarrot/config.rb:187
meta:on_stack:true kind:Ruby mode:method FuncId(854) regs:6 ISeq(RubyFuncInfo { id:854 name:help method:(FuncId(854), 0) args: 0 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = literal["Usage: "]
 :00002 [05] %4 = $PROGRAM_NAME
 :00003 [06] %5 = literal[" [OPTION]... FILE"]
 :00004 [04] %3 = concat(%3; 3)
 :00005 [03] %1 = array[%3; 1]
 :00006 [03] %2 = 0: i32
 :00007 [04] %3 = const[OPTIONS]                  [<INVALID>]
 :00008 [05] %4 = literal[56557569]
 :00009 [03] _ = %3.each( &%4)                    [<INVALID>]
 :00011 [04] %3 = literal[56623105]
 :00012 [04] %3 = %1.each( &%3)                   [<INVALID>]
 :00014 [03] ret %3
------------------------------------
------------------------------------
<version> /home/monochrome/optcarrot/lib/optcarrot/config.rb:224
meta:on_stack:true kind:Ruby mode:method FuncId(855) regs:3 ISeq(RubyFuncInfo { id:855 name:version method:(FuncId(855), 0) args: 0 non_temp: 0 temp: 2})
[]
+:00000 [01] init_method reg:2 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["optcarrot "]
 :00002 [03] %2 = const[VERSION]                  [<INVALID>]
 :00003 [02] %1 = concat(%1; 2)
 :00004 [02] %1 = %0.puts(%1;1)                   [<INVALID>]
 :00006 [01] ret %1
------------------------------------
------------------------------------
<list_drivers> /home/monochrome/optcarrot/lib/optcarrot/config.rb:228
meta:on_stack:true kind:Ruby mode:method FuncId(856) regs:4 ISeq(RubyFuncInfo { id:856 name:list_drivers method:(FuncId(856), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = const[Driver::DRIVER_DB]        [<INVALID>]
 :00002 [03] %2 = literal[56688641]
 :00003 [02] %1 = %1.each( &%2)                   [<INVALID>]
 :00005 [01] ret %1
------------------------------------
------------------------------------
<list_opts> /home/monochrome/optcarrot/lib/optcarrot/config.rb:234
meta:on_stack:true kind:Ruby mode:method FuncId(857) regs:4 ISeq(RubyFuncInfo { id:857 name:list_opts method:(FuncId(857), 0) args: 0 non_temp: 0 temp: 3})
[]
+:00000 [01] init_method reg:3 arg:0 req:0 opt:0 rest:false block:None stack_offset:5
 :00001 [02] %1 = literal["CPU core optimizations:"]
 :00002 [01] _ = %0.puts(%1;1)                    [<INVALID>]
 :00004 [02] %1 = const[CPU::OptimizedCodeBuilder::OPTIONS] [<INVALID>]
 :00005 [03] %2 = literal[56754177]
 :00006 [01] _ = %1.each( &%2)                    [<INVALID>]
 :00008 [01] _ = %0.puts()                        [<INVALID>]
 :00010 [02] %1 = literal["PPU core optimizations:"]
 :00011 [01] _ = %0.puts(%1;1)                    [<INVALID>]
 :00013 [02] %1 = const[PPU::OptimizedCodeBuilder::OPTIONS] [<INVALID>]
 :00014 [03] %2 = literal[56819713]
 :00015 [01] _ = %1.each( &%2)                    [<INVALID>]
 :00017 [01] _ = %0.puts()                        [<INVALID>]
 :00019 [02] %1 = literal["(See `doc/internal.md' in detail.)"]
 :00020 [02] %1 = %0.puts(%1;1)                   [<INVALID>]
 :00022 [01] ret %1
------------------------------------
------------------------------------
<dump_ppu> /home/monochrome/optcarrot/lib/optcarrot/config.rb:248
meta:on_stack:true kind:Ruby mode:method FuncId(858) regs:6 ISeq(RubyFuncInfo { id:858 name:dump_ppu method:(FuncId(858), 0) args: 0 non_temp: 0 temp: 5})
[]
+:00000 [01] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = const[PPU::OptimizedCodeBuilder] [<INVALID>]
 :00002 [03] %2 = @options: -
 :00003 [04] %3 = :loglevel
 :00004 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00005 [05] %4 = @options: -
 :00006 [06] %5 = :opt_ppu
 :00007 [04] %3 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00008 [04] condbr %3 =>:00010
+:00009 [04] %3 = literal[[]]
+:00010 [02] %1 = %1.new(%2;2)                    [<INVALID>]
 :00012 [02] %1 = %1.build()                      [<INVALID>]
 :00014 [02] %1 = %0.puts(%1;1)                   [<INVALID>]
 :00016 [01] ret %1
------------------------------------
------------------------------------
<dump_cpu> /home/monochrome/optcarrot/lib/optcarrot/config.rb:252
meta:on_stack:true kind:Ruby mode:method FuncId(859) regs:6 ISeq(RubyFuncInfo { id:859 name:dump_cpu method:(FuncId(859), 0) args: 0 non_temp: 0 temp: 5})
[]
+:00000 [01] init_method reg:5 arg:0 req:0 opt:0 rest:false block:None stack_offset:6
 :00001 [02] %1 = const[CPU::OptimizedCodeBuilder] [<INVALID>]
 :00002 [03] %2 = @options: -
 :00003 [04] %3 = :loglevel
 :00004 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00005 [05] %4 = @options: -
 :00006 [06] %5 = :opt_cpu
 :00007 [04] %3 = %4.[%5]                         [<INVALID>][<INVALID>]
 :00008 [04] condbr %3 =>:00010
+:00009 [04] %3 = literal[[]]
+:00010 [02] %1 = %1.new(%2;2)                    [<INVALID>]
 :00012 [02] %1 = %1.build()                      [<INVALID>]
 :00014 [02] %1 = %0.puts(%1;1)                   [<INVALID>]
 :00016 [01] ret %1
------------------------------------
------------------------------------
<block in find_option> /home/monochrome/optcarrot/lib/optcarrot/config.rb:123
meta:on_stack:true kind:Ruby mode:method FuncId(860) regs:4 ISeq(RubyFuncInfo { id:860 name:<unnamed> method:(FuncId(851), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal[56885249]
 :00002 [03] %2 = %1.each( &%2)                   [<INVALID>]
 :00004 [02] ret %2
------------------------------------
------------------------------------
<block in parse_option> /home/monochrome/optcarrot/lib/optcarrot/config.rb:139
meta:on_stack:true kind:Ruby mode:method FuncId(861) regs:4 ISeq(RubyFuncInfo { id:861 name:<unnamed> method:(FuncId(852), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal["-"]
 :00002 [04] %3 = %1
 :00003 [03] %2 = concat(%2; 2)
 :00004 [02] ret %2
------------------------------------
------------------------------------
<block in parse_operand> /home/monochrome/optcarrot/lib/optcarrot/config.rb:173
meta:on_stack:true kind:Ruby mode:method FuncId(862) regs:3 ISeq(RubyFuncInfo { id:862 name:<unnamed> method:(FuncId(853), 1) args: 1 non_temp: 1 temp: 1})
[]
+:00000 [02] init_method reg:2 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = %1.to_sym()                     [<INVALID>]
 :00003 [02] ret %2
------------------------------------
------------------------------------
<block in help> /home/monochrome/optcarrot/lib/optcarrot/config.rb:190
meta:on_stack:true kind:Ruby mode:method FuncId(863) regs:6 ISeq(RubyFuncInfo { id:863 name:<unnamed> method:(FuncId(854), 1) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [04] %3 = dynvar(1, %1)
 :00002 [05] %4 = literal[""]
 :00003 [04] %3 = %3.<<(%4;1)                     [<INVALID>]
 :00005 [05] %4 = %1
 :00006 [06] %5 = literal[" options:"]
 :00007 [05] %4 = concat(%4; 2)
 :00008 [03] _ = %3.<<(%4;1)                      [<INVALID>]
 :00010 [04] %3 = literal[56950785]
 :00011 [04] %3 = %2.each( &%3)                   [<INVALID>]
 :00013 [03] ret %3
------------------------------------
------------------------------------
<block in help> /home/monochrome/optcarrot/lib/optcarrot/config.rb:214
meta:on_stack:true kind:Ruby mode:method FuncId(864) regs:11 ISeq(RubyFuncInfo { id:864 name:<unnamed> method:(FuncId(854), 1) args: 1 non_temp: 4 temp: 6})
[]
+:00000 [05] init_method reg:10 arg:1 req:1 opt:0 rest:false block:None stack_offset:9
 :00001 [06] %5 = const[String]                   [<INVALID>]
 :00002 [06] %5 = %1.is_a?(%5;1)                  [<INVALID>]
 :00004 [05] condnotbr %5 =>:00008
+:00005 [06] %5 = %0.puts(%1;1)                   [<INVALID>]
 :00007 [05] ret %5
+:00008 [06] %5 = %1
 :00009 [06] %6; 3 = expand(%5)
 :00010 [06] %2 = %6
 :00011 [06] %3 = %7
 :00012 [06] %4 = %8
 :00013 [06] %5 = literal["    %4s%-*s %s"]
 :00014 [08] %7 = %2
 :00015 [09] %8 = dynvar(1, %2)
 :00016 [10] %9 = %3
 :00017 [11] %10 = %4
 :00018 [07] %6 = array[%7; 4]
 :00019 [06] %5 = %5 % %6                         [<INVALID>][<INVALID>]
 :00020 [06] %5 = %0.puts(%5;1)                   [<INVALID>]
 :00022 [05] ret %5
------------------------------------
------------------------------------
<block in list_drivers> /home/monochrome/optcarrot/lib/optcarrot/config.rb:229
meta:on_stack:true kind:Ruby mode:method FuncId(865) regs:7 ISeq(RubyFuncInfo { id:865 name:<unnamed> method:(FuncId(856), 1) args: 2 non_temp: 2 temp: 4})
[]
+:00000 [03] init_method reg:6 arg:2 req:2 opt:0 rest:false block:None stack_offset:7
 :00001 [04] %3 = %1
 :00002 [05] %4 = literal[" drivers: "]
 :00003 [06] %5 = %2.keys()                       [<INVALID>]
 :00005 [07] %6 = literal[" "]
 :00006 [06] %5 = %5 * %6                         [<INVALID>][<INVALID>]
 :00007 [04] %3 = concat(%3; 3)
 :00008 [04] %3 = %0.puts(%3;1)                   [<INVALID>]
 :00010 [03] ret %3
------------------------------------
------------------------------------
<block in list_opts> /home/monochrome/optcarrot/lib/optcarrot/config.rb:236
meta:on_stack:true kind:Ruby mode:method FuncId(866) regs:4 ISeq(RubyFuncInfo { id:866 name:<unnamed> method:(FuncId(857), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal["  * "]
 :00002 [04] %3 = %1
 :00003 [03] %2 = concat(%2; 2)
 :00004 [03] %2 = %0.puts(%2;1)                   [<INVALID>]
 :00006 [02] ret %2
------------------------------------
------------------------------------
<block in list_opts> /home/monochrome/optcarrot/lib/optcarrot/config.rb:241
meta:on_stack:true kind:Ruby mode:method FuncId(867) regs:4 ISeq(RubyFuncInfo { id:867 name:<unnamed> method:(FuncId(857), 1) args: 1 non_temp: 1 temp: 2})
[]
+:00000 [02] init_method reg:3 arg:1 req:1 opt:0 rest:false block:None stack_offset:5
 :00001 [03] %2 = literal["  * "]
 :00002 [04] %3 = %1
 :00003 [03] %2 = concat(%2; 2)
 :00004 [03] %2 = %0.puts(%2;1)                   [<INVALID>]
 :00006 [02] ret %2
------------------------------------
------------------------------------
<block in find_option> /home/monochrome/optcarrot/lib/optcarrot/config.rb:124
meta:on_stack:true kind:Ruby mode:method FuncId(868) regs:6 ISeq(RubyFuncInfo { id:868 name:<unnamed> method:(FuncId(851), 2) args: 2 non_temp: 2 temp: 3})
[]
+:00000 [03] init_method reg:5 arg:2 req:2 opt:0 rest:false block:None stack_offset:6
 :00001 [05] %4 = %1
 :00002 [06] %5 = :aliases
 :00003 [06] %5 = %2.[%5]                         [<INVALID>][<INVALID>]
 :00004 [04] %3 = array[%4; 2]
 :00005 [05] %4 = literal[57016321]
 :00006 [04] %3 = %3.each( &%4)                   [<INVALID>]
 :00008 [03] ret %3
------------------------------------
------------------------------------
<block in help> /home/monochrome/optcarrot/lib/optcarrot/config.rb:192
meta:on_stack:true kind:Ruby mode:method FuncId(869) regs:13 ISeq(RubyFuncInfo { id:869 name:<unnamed> method:(FuncId(854), 2) args: 2 non_temp: 7 temp: 5})
[]
+:00000 [08] init_method reg:12 arg:2 req:2 opt:0 rest:false block:None stack_offset:10
 :00001 [10] %9 = :aliases
 :00002 [10] %9 = %2.[%9]                         [<INVALID>][<INVALID>]
 :00003 [09] %8 = array[%9; 1]
 :00004 [10] %9 = 0: i32
 :00005 [08] %3 = %8.[%9]                         [<INVALID>][<INVALID>]
 :00006 [08] %5 = literal[""]
 :00007 [08] %4 = %5
 :00008 [10] %9 = :type
 :00009 [10] %9 = %2.[%9]                         [<INVALID>][<INVALID>]
 :00010 [11] %10 = :switch
 :00011 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00012 [10] condnotbr _%10 =>:00016
+:00013 [10] %4 = literal["[no-]"]
 :00014 [10] %8 = %4
 :00015 [09] br =>:00044
+:00016 [11] %10 = :opts
 :00017 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00018 [10] condnotbr _%10 =>:00022
+:00019 [10] %5 = literal["=OPTS,..."]
 :00020 [10] %8 = %5
 :00021 [09] br =>:00044
+:00022 [11] %10 = :driver
 :00023 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00024 [10] condnotbr _%10 =>:00028
+:00025 [10] %5 = literal["=DRIVER"]
 :00026 [10] %8 = %5
 :00027 [09] br =>:00044
+:00028 [11] %10 = :int
 :00029 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00030 [10] condnotbr _%10 =>:00034
+:00031 [10] %5 = literal["=N"]
 :00032 [10] %8 = %5
 :00033 [09] br =>:00044
+:00034 [11] %10 = const[String]                  [<INVALID>]
 :00035 [11] _%10 = %10 === %9                    [<INVALID>][<INVALID>]
 :00036 [10] condnotbr _%10 =>:00043
+:00037 [11] %10 = literal["="]
 :00038 [12] %11 = :type
 :00039 [12] %11 = %2.[%11]                       [<INVALID>][<INVALID>]
 :00040 [10] %5 = %10 + %11                       [<INVALID>][<INVALID>]
 :00041 [10] %8 = %5
 :00042 [09] br =>:00044
+:00043 [09] %8 = nil
+:00044 [08] condnotbr %3 =>:00055
+:00045 [09] %8 = %3.size()                       [<INVALID>]
 :00047 [09] _%8 = %8 == 1: i16                   [<INVALID>][<INVALID>]
 :00048 [08] condnotbr _%8 =>:00055
+:00049 [09] %8 = literal["-"]
 :00050 [10] %9 = %4
 :00051 [11] %10 = %3
 :00052 [12] %11 = literal[", "]
 :00053 [09] %8 = concat(%8; 4)
 :00054 [09] %3 = %8
+:00055 [09] %8 = literal["--"]
 :00056 [09] %8 = %8 + %4                         [<INVALID>][<INVALID>]
 :00057 [10] %9 = %1.to_s()                       [<INVALID>]
 :00059 [11] %10 = literal["_"]
 :00060 [12] %11 = literal["-"]
 :00061 [10] %9 = %9.tr(%10;2)                    [<INVALID>]
 :00063 [09] %8 = %8 + %9                         [<INVALID>][<INVALID>]
 :00064 [08] %6 = %8 + %5                         [<INVALID>][<INVALID>]
 :00065 [09] %8 = :shortcut
 :00066 [09] %8 = %2.[%8]                         [<INVALID>][<INVALID>]
 :00067 [08] condnotbr %8 =>:00079
+:00068 [09] %8 = literal["same as `"]
 :00069 [11] %10 = :shortcut
 :00070 [11] %10 = %2.[%10]                       [<INVALID>][<INVALID>]
 :00071 [10] %9 = array[%10; 1]
 :00072 [11] %10 = literal[" "]
 :00073 [10] %9 = %9.join(%10;1)                  [<INVALID>]
 :00075 [11] %10 = literal["'"]
 :00076 [09] %8 = concat(%8; 3)
 :00077 [09] %7 = %8
 :00078 [08] br =>:00093
+:00079 [09] %8 = :desc
 :00080 [08] %7 = %2.[%8]                         [<INVALID>][<INVALID>]
 :00081 [09] %8 = :default
 :00082 [09] %8 = %2.key?(%8;1)                   [<INVALID>]
 :00084 [08] condnotbr %8 =>:00093
+:00085 [09] %8 = literal[" (default: "]
 :00086 [11] %10 = :default
 :00087 [10] %9 = %2.[%10]                        [<INVALID>][<INVALID>]
 :00088 [10] condbr %9 =>:00090
+:00089 [10] %9 = literal["none"]
+:00090 [11] %10 = literal[")"]
 :00091 [09] %8 = concat(%8; 3)
 :00092 [08] %7 = %7 + %8                         [<INVALID>][<INVALID>]
+:00093 [10] %9 = dynvar(2, %2)
 :00094 [11] %10 = %6.size()                      [<INVALID>]
 :00096 [09] %8 = array[%9; 2]
 :00097 [09] %8 = %8.max()                        [<INVALID>]
 :00099 [08] dynvar(2, %2) = %8
 :00100 [09] %8 = dynvar(2, %1)
 :00101 [11] %10 = %3
 :00102 [12] %11 = %6
 :00103 [13] %12 = %7
 :00104 [10] %9 = array[%10; 3]
 :00105 [09] %8 = %8.<<(%9;1)                     [<INVALID>]
 :00107 [08] ret %8
------------------------------------
------------------------------------
<block in find_option> /home/monochrome/optcarrot/lib/optcarrot/config.rb:125
meta:on_stack:true kind:Ruby mode:method FuncId(870) regs:6 ISeq(RubyFuncInfo { id:870 name:<unnamed> method:(FuncId(851), 3) args: 1 non_temp: 1 temp: 4})
[]
+:00000 [02] init_method reg:5 arg:1 req:1 opt:0 rest:false block:None stack_offset:6
 :00001 [03] %2 = %1.to_s()                       [<INVALID>]
 :00003 [04] %3 = literal["_"]
 :00004 [05] %4 = literal["-"]
 :00005 [02] %1 = %2.tr(%3;2)                     [<INVALID>]
 :00007 [03] %2 = %1.size()                       [<INVALID>]
 :00009 [03] _%2 = %2 == 1: i16                   [<INVALID>][<INVALID>]
 :00010 [02] condnotbr _%2 =>:00021
+:00011 [03] %2 = dynvar(3, %1)
 :00012 [04] %3 = literal["-"]
 :00013 [05] %4 = %1
 :00014 [04] %3 = concat(%3; 2)
 :00015 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00016 [02] condnotbr _%2 =>:00021
+:00017 [04] %3 = dynvar(1, %2)
 :00018 [05] %4 = dynvar(1, %1)
 :00019 [03] %2 = array[%3; 2]
 :00020 [02] method_ret %2
+:00021 [03] %2 = dynvar(3, %1)
 :00022 [04] %3 = literal["--"]
 :00023 [05] %4 = %1
 :00024 [04] %3 = concat(%3; 2)
 :00025 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00026 [02] condnotbr _%2 =>:00031
+:00027 [04] %3 = dynvar(1, %2)
 :00028 [05] %4 = dynvar(1, %1)
 :00029 [03] %2 = array[%3; 2]
 :00030 [02] method_ret %2
+:00031 [03] %2 = dynvar(1, %2)
 :00032 [04] %3 = :type
 :00033 [03] %2 = %2.[%3]                         [<INVALID>][<INVALID>]
 :00034 [04] %3 = :switch
 :00035 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00036 [02] condnotbr _%2 =>:00048
+:00037 [03] %2 = dynvar(3, %1)
 :00038 [04] %3 = literal["--no-"]
 :00039 [05] %4 = %1
 :00040 [04] %3 = concat(%3; 2)
 :00041 [03] _%2 = %2 == %3                       [<INVALID>][<INVALID>]
 :00042 [02] condnotbr _%2 =>:00048
+:00043 [04] %3 = dynvar(1, %2)
 :00044 [05] %4 = dynvar(1, %1)
 :00045 [06] %5 = literal[true]
 :00046 [03] %2 = array[%3; 3]
 :00047 [02] method_ret %2
+:00048 [03] %2 = nil
 :00049 [02] ret %2
------------------------------------
undefined method `size' for 15:Integer (RuntimeError)
/home/monochrome/optcarrot/lib/optcarrot/ppu.rb:265
      @output_pixels << @palette[15] while @output_pixels.size < 256 * 240 # fill black
                                                          ^^^^^
/home/monochrome/optcarrot/lib/optcarrot/nes.rb:44
      @ppu.vsync
           ^^^^^
/home/monochrome/optcarrot/lib/optcarrot/nes.rb:89
      step until @frame == @frame_target
      ^^^^
/home/monochrome/optcarrot/lib/optcarrot/nes.rb:1
module Optcarrot
^
/home/monochrome/optcarrot/bin/optcarrot:6
Optcarrot::NES.new.run
                   ^^^
