def quicksort(arr, first, last)
  if first < last
    p_index = partition(arr, first, last)
    quicksort(arr, first, p_index - 1)
    quicksort(arr, p_index + 1, last)
  end
  arr
end
  
def partition(arr, first, last)
  # first select one element from the list, can be any element. 
  # rearrange the list so all elements less than pivot are left of it, elements greater than pivot are right of it.
  pivot = arr[last]
  p_index = first
    
  i = first
  while i < last
    if arr[i] <= pivot
      arr[i], arr[p_index] = arr[p_index], arr[i]
      p_index += 1
    end
    i += 1
  end
  arr[p_index], arr[last] = pivot, arr[p_index]
  return p_index
end

ary = [-3148,                   
40741,                   
-289,                    
31694,                   
-22828,                  
-9882,                   
39869,
12322,
2919,
-546,
-36740,
-37935,
-1189,
45283,
-37683,
-22897,
-14059,
-20706,
17990,
1651,
-27687,
-28291,
35797,
11665,
30133,
20815,
-17650,
-17049,
-28364,
26684,
-5775,
17385,
-814,
-5730,
32794,
12898,
-24589,
-36925,
29870,
17952,
11560,
-28709,
9033,
21354,
-45016,
13108,
-41449,
-7710,
5012,
-7102,
44794,
7713,
17860,
22470,
-1561,
34306,
-15949,
-30591,
-32625,
-18440,
40049,
-17741,
12960,
-9316,
7888,
-46665,
48564,
43157,
-11015,
-32433,
-32120,
-21726,
15983,
-14303,
26523,
49528,
-3069,
-24148,
9933,
5645,
-14865,
-24112,
16283,
26173,
-49288,
-38175,
37082,
-5735,
35491,
-22697,
-36692,
-12300,
-32687,
-1480,
-7078,
-49971,
-11778,
1014,
-14421,
-27486,
35756,
31425,
-18756,
17784,
-12397,
-12571,
-42049,
-28397,
-49199,
3295,
5866,
-1519,
-35589,
-24147,
-36093,
47118,
11375,
-49103,
12905,
33154,
-20682,
41589,
9874,
-45801,
23797,
6279,
46429,
-1351,
-24723,
18072,
37212,
-4497,
-27753,
-4078,
26706,
-24936,
19058,
6548,
35688,
-13856,
-6436,
5306,
-37817,
32394,
-35846,
44917,
44416,
-37162,
12724,
46259,
-49280,
22538,
37325,
39482,
-20706,
5364,
4748,
-1563,
-3005,
3627,
38549,
-8617,
-28161,
3649,
16355,
14903,
8031,
25824,
26657,
-10556,
-40646,
-27760,
-11060,
32351,
2241,
-33702,
33028,
-47297,
-43064,
-23052,
-16098,
18916,
1037,
-46382,
-35498,
41437,
29388,
31576,
-19602,
22808,
26564,
-23372,
44241,
-11542,
19241,
-31165,
-34920,
40979,
-14250,
39684]

puts quicksort(ary, 0, 199).inspect